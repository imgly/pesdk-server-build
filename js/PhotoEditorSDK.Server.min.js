!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("canvas"),require("gl"),require("request")):"function"==typeof define&&define.amd?define(["canvas","gl","request"],e):"object"==typeof exports?exports.PhotoEditorServer=e(require("canvas"),require("gl"),require("request")):t.PhotoEditorServer=e(t.canvas,t.gl,t.request)}("undefined"!=typeof self?self:this,function(t,e,i){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=131)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(13),n=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,n.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(153),o=r(n),s=i(157),a=r(s),u=i(13),l=r(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,l.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,i){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
t.exports=i(161),i(226)},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(234)),h=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n()(this,e);var r=s()(this,t.call(this,i,{intensity:{type:l.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:l.OptionType.BOOLEAN,default:!0}}));return r._stack=new c.a(r._options.intensity),r}return u()(e,t),e.prototype.render=function(t,e,i){var r=this;return this._stack.render(t,e,i).then(function(t){return r.setDirty(!1),t})},e.prototype.setDirtyForRenderer=function(t,e){this._stack.setDirtyForRenderer(t,e)},e.prototype.disposeRenderTextures=function(){this._stack.disposeRenderTextures()},e.prototype.dispose=function(){this._stack.dispose()},e}(l.Configurable);h.identifier=null,h.isIdentity=!1,h.displayName=null,h.PrimitivesStack=c.a,e.a=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(236);i.d(e,"Brightness",function(){return r.a});var n=i(238);i.d(e,"Contrast",function(){return n.a});var o=i(240);i.d(e,"ColorMatrixPrimitive",function(){return o.a});var s=i(242);i.d(e,"Desaturation",function(){return s.a});var a=i(244);i.d(e,"Gamma",function(){return a.a});var u=i(246);i.d(e,"Glow",function(){return u.a});var l=i(248);i.d(e,"Gobblin",function(){return l.a});var c=i(250);i.d(e,"Grayscale",function(){return c.a});var h=i(119);i.d(e,"LookupTable",function(){return h.a});var p=i(253);i.d(e,"LookupTableImage",function(){return p.a});var d=i(255);i.d(e,"Saturation",function(){return d.a});var f=i(257);i.d(e,"SoftColorOverlay",function(){return f.a});var _=i(259);i.d(e,"ToneCurve",function(){return _.a});var g=i(260);i.d(e,"X400",function(){return g.a});var m=i(262);i.d(e,"ThreeDLookupTableImage",function(){return m.a})},function(t,e,i){"use strict";i.d(e,"a",function(){return p}),i.d(e,"j",function(){return d});var r=i(16),n=i(33),o=i(99),s=i(100),a=i(29),u=i(34),l=i(21),c=i(101),h=i(24);i.d(e,"b",function(){return n.a}),i.d(e,"g",function(){return o.a}),i.d(e,"k",function(){return a.a}),i.d(e,"h",function(){return s.a}),i.d(e,"d",function(){return u.a}),i.d(e,"f",function(){return r.a}),i.d(e,"i",function(){return l.a}),i.d(e,"c",function(){return h}),i.d(e,"e",function(){return c.a});var p=2e3,d=20},function(t,e,i){"use strict";i.d(e,"h",function(){return d}),i.d(e,"n",function(){return y}),i.d(e,"k",function(){return f}),i.d(e,"d",function(){return p}),i.d(e,"b",function(){return h}),i.d(e,"a",function(){return c}),i.d(e,"i",function(){return _}),i.d(e,"j",function(){return m}),i.d(e,"e",function(){return g});var r=i(160),n=i(322),o=i(16),s=i(122),a=i(40),u=i(3),l=i.n(u);i.d(e,"m",function(){return r.a}),i.d(e,"c",function(){return n.a}),i.d(e,"g",function(){return o.a}),i.d(e,"l",function(){return s.a}),i.d(e,"f",function(){return a.a});var c=l.a.Base64,h=l.a.Color,p=(l.a.Math.ColorMatrix,l.a.EventEmitter),d=(l.a.EXIF,l.a.OptionType,l.a.Promise),f=l.a.Utils,_=l.a.RenderType,g=l.a.ImageFormat,m=l.a,y=(l.a.UniformType,l.a.Math.Vector2);l.a.Math.Rectangle,"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):i(72)},function(t,e){var i=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports={default:i(164),__esModule:!0}},function(t,e,i){var r=i(62)("wks"),n=i(47),o=i(12).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:n)("Symbol."+t))}).store=r},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype.update=function(){},e.prototype.getFilter=function(){return this._filter},e.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},e}(l.Configurable));e.a=c},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(132),o=r(n),s=i(144),a=r(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,i){var r=i(12),n=i(8),o=i(30),s=i(22),a=function(t,e,i){var u,l,c,h=t&a.F,p=t&a.G,d=t&a.S,f=t&a.P,_=t&a.B,g=t&a.W,m=p?n:n[e]||(n[e]={}),y=m.prototype,v=p?r:d?r[e]:(r[e]||{}).prototype;p&&(i=e);for(u in i)(l=!h&&v&&void 0!==v[u])&&u in m||(c=l?v[u]:i[u],m[u]=p&&"function"!=typeof v[u]?i[u]:_&&l?o(c,r):g&&v[u]==c?function(t){var e=function(e,i,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):f&&"function"==typeof c?o(Function.call,c):c,f&&((m.virtual||(m.virtual={}))[u]=c,t&a.R&&y&&!y[u]&&s(y,u,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,i){var r=i(19);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";var r="warn",n=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],o=n.map(function(t){return t.type}),s={};s.setLevel=function(t){r=t},s.canLog=function(t){return null!==r&&!(o.indexOf(t)<o.indexOf(r))},s.hasColorfulOutput=function(){return(!process||process&&process.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},s.printError=function(t){t.stack.split("\n").forEach(function(t){s.error("Error",t)})},n.forEach(function(t){var e=t.type,i=t.background,r=t.color;s[e]=function(t){if("undefined"!=typeof console&&s.canLog(e)){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var u=o.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");if(!s.hasColorfulOutput())return console.log("PhotoEditorSDK | "+t+" | "+u);console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+u+"  %c  ","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+i+"; color: "+r+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0")}}}),e.a=s},function(e,i){e.exports=t},function(t,e,i){var r=i(15),n=i(84),o=i(59),s=Object.defineProperty;e.f=i(20)?Object.defineProperty:function(t,e,i){if(r(t),e=o(e,!0),r(i),n)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(31)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(52),s=i.n(o),a=i(13),u=i.n(a),l=i(0),c=i.n(l),h=i(35),p=function(){function t(){c()(this,t)}return t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isMobile=function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},t.isBrowser=function(){return"undefined"!=typeof window},t.isNode=function(){return"undefined"==typeof window&&"undefined"!=typeof global},t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.isDOMElement=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":u()(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":u()(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},t.isTouchEvent=function(t){return-1!==t.type.indexOf("touch")},t.resizeVectorToFit=function(t,e){var i=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(i)},t.resizeVectorToFill=function(t,e){var i=t.x/t.y;return i>e.x/e.y?e.clone().set(e.y*i,e.y):e.clone().set(e.x,e.x/i)},t.isExtendable=function(t){return void 0!==t&&null!==t&&("object"===(void 0===t?"undefined":u()(t))||"function"==typeof t)},t.defaults=function(t){var e={};for(var i in t)e[i]=t[i];for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var s=0;s<n.length;s++){var a=n[s];for(var u in a)void 0===e[u]&&(e[u]=a[u])}return e},t.deepDefaults=function(e){var i={};for(var r in e)i[r]=e[r];for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];for(var a=0;a<o.length;a++){var u=o[a];for(var l in u)t.isExtendable(i[l])&&t.isExtendable(u[l])?i[l]=t.deepDefaults(i[l],u[l]):void 0===i[l]&&(i[l]=u[l])}return i},t.deepClone=function(e){var i={};for(var r in e)t.isExtendable(e[r])?i[r]=t.deepClone(e[r]):i[r]=e[r];return i},t.extend=function(t){var e={};for(var i in t)e[i]=t[i];for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var s=0;s<n.length;s++){var a=n[s];for(var u in a)e[u]=a[u]}return e},t.clone=function(t){return this.extend({},t)},t.createBlobURIFromDataURI=function(t){var e="undefined"==typeof window?global:window;if(!(e.Blob&&e.URL&&ArrayBuffer&&Uint8Array))return t;for(var i=h.a.decode(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(i.length),o=new Uint8Array(n),s=0;s<i.length;s++)o[s]=i[s];var a=new e.Blob([n],{type:r});return e.URL.createObjectURL(a)},t.getUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},t.flatten=function(e){return e.reduce(function(e,i){return e.concat(Array.isArray(i)?t.flatten(i):i)},[])},t.createCanvas=function(){if("undefined"==typeof WEBPACK){return new(0,i(17).Canvas)(300,150)}return document.createElement("canvas")},t.isPowerOfTwo=function(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)},t.nextLowestPOT=function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)},t.nextHighestPOT=function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},t.moveArrayItem=function(t,e,i){if(i>=t.length)for(var r=i-t.length;1+r--;)t.push(void 0);t.splice(i,0,t.splice(e,1)[0])},t.ensureCanvasDimensions=function(t,e){t.width===e.x&&t.height===e.y||(t.width=e.x,t.height=e.y)},t.byteArrayToString=function(t){return t.map(function(t){return String.fromCharCode(t)}).join("")},t.clamp=function(t,e,i){return Math.max(e,Math.min(t,i))},t.wildCardMatch=function(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)},t.flipObject=function(t){var e={};for(var i in t)e[t[i]]=i;return e},t.cloneOptions=function(t){var e={};for(var i in t){var r=t[i];Array.isArray(r)?r=r.slice():r.clone&&(r=r.clone()),e[i]=r}return e},t.ISODateString=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"},t.shallowEqual=function(t,e){if(t===e)return!0;if("object"!==(void 0===t?"undefined":u()(t))||null===t||"object"!==(void 0===e?"undefined":u()(e))||null===e)return!1;var i=s()(t),r=s()(e);if(i.length!==r.length)return!1;for(var n=hasOwnProperty.bind(e),o=0;o<i.length;o++)if(!n(i[o])||t[i[o]]!==e[i[o]])return!1;return!0},t.enableIf=function(t,e){return t?e:void 0},t.invariant=function(t,e){if(!t){throw new Error(e)}},t.executePromises=function(t){var e=t.length,i=0,r=[],o=[];return new n.a(function(n,s){var a=function(){++i>=e&&(o.length<=0?n(r):s(o))},u=function(t){r.push(t),a()},l=function(t){o.push(t),a()};t.forEach(function(t){t.then(u).catch(l)})})},t}();e.a=p},function(t,e,i){var r=i(18),n=i(45);t.exports=i(20)?function(t,e,i){return r.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RenderType",function(){return r}),i.d(e,"ImageFormat",function(){return n}),i.d(e,"Events",function(){return o}),i.d(e,"OptionType",function(){return s}),i.d(e,"UniformType",function(){return a}),i.d(e,"RendererType",function(){return u});var r={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},n={PNG:"image/png",JPEG:"image/jpeg"},o={OPERATION_UPDATED:"operation:update"},s={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},a={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},u={WEBGL:"webgl",CANVAS:"canvas"}},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(13),s=i.n(o),a=i(70),u=i.n(a),l=i(200),c=i.n(l),h="undefined"==typeof global?window:global,p=void 0!==n.a?n.a:function(){function t(t,e){_.add(t,e),f||(f=m(_.drain))}function e(t){var e,i=void 0===t?"undefined":s()(t);return null==t||"object"!=i&&"function"!=i||(e=t.then),"function"==typeof e&&e}function i(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,i,r){var n,o;try{!1===i?r.reject(t.msg):(n=!0===i?t.msg:i.call(void 0,t.msg),n===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=e(n))?o.call(n,r.resolve,r.reject):r.resolve(n))}catch(t){r.reject(t)}}function n(r){var s,a=this;if(!a.triggered){a.triggered=!0,a.def&&(a=a.def);try{(s=e(r))?t(function(){var t=new l(a);try{s.call(r,function(){n.apply(t,arguments)},function(){o.apply(t,arguments)})}catch(e){o.call(t,e)}}):(a.msg=r,a.state=1,a.chain.length>0&&t(i,a))}catch(t){o.call(new l(a),t)}}}function o(e){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=e,r.state=2,r.chain.length>0&&t(i,r))}function a(t,e,i,r){for(var n=0;n<e.length;n++)!function(n){t.resolve(e[n]).then(function(t){i(n,t)},r)}(n)}function l(t){this.def=t,this.triggered=!1}function h(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new h(this);this.then=function(e,n){var o={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),r.chain.push(o),0!==r.state&&t(i,r),o.promise},this.catch=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){n.call(r,t)},function(t){o.call(r,t)})}catch(t){o.call(r,t)}}var d,f,_,g=Object.prototype.toString,m=void 0!==c.a?function(t){return c()(t)}:setTimeout;try{Object.defineProperty({},"x",{}),d=function(t,e,i,r){return u()(t,e,{value:i,writable:!0,configurable:!1!==r})}}catch(t){d=function(t,e,i){return t[e]=i,t}}_=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,i,r;return{add:function(n,o){r=new t(n,o),i?i.next=r:e=r,i=r,r=void 0},drain:function(){var t=e;for(e=i=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var y=d({},"constructor",p,!1);return p.prototype=y,d(y,"__NPO__",0,!1),d(p,"resolve",function(t){var e=this;return t&&"object"==(void 0===t?"undefined":s()(t))&&1===t.__NPO__?t:new e(function(e,i){if("function"!=typeof e||"function"!=typeof i)throw TypeError("Not a function");e(t)})}),d(p,"reject",function(t){return new this(function(e,i){if("function"!=typeof e||"function"!=typeof i)throw TypeError("Not a function");i(t)})}),d(p,"all",function(t){var e=this;return"[object Array]"!=g.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(i,r){if("function"!=typeof i||"function"!=typeof r)throw TypeError("Not a function");var n=t.length,o=Array(n),s=0;a(e,t,function(t,e){o[t]=e,++s===n&&i(o)},r)})}),d(p,"race",function(t){var e=this;return"[object Array]"!=g.call(t)?e.reject(TypeError("Not an array")):new e(function(i,r){if("function"!=typeof i||"function"!=typeof r)throw TypeError("Not a function");a(e,t,function(t,e){i(e)},r)})}),p}();h.Promise=h.Promise||p,e.a=p},function(t,e){t.exports={}},function(t,e,i){var r=i(137),n=i(57);t.exports=function(t){return r(n(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(50),n=i(24),o=i(35),s=i(34),a=i(21),u=i(38),l=i(33),c=i(16),h=i(25),p=i(101),d=i(212),f=i(216);i.d(e,"requestAnimationFrame",function(){return f.b}),i.d(e,"cancelAnimationFrame",function(){return f.a}),i.d(e,"Engine",function(){return r.a}),i.d(e,"EventEmitter",function(){return s.a}),i.d(e,"Utils",function(){return a.a}),i.d(e,"Configurable",function(){return u.a}),i.d(e,"Color",function(){return l.a}),i.d(e,"Constants",function(){return n}),i.d(e,"Log",function(){return c.a}),i.d(e,"Promise",function(){return h.a}),i.d(e,"GLUtils",function(){return p.a}),i.d(e,"Base64",function(){return o.a}),i.d(e,"LicenseChecker",function(){return d.a});var _=i(110);i.d(e,"Vector2",function(){return _.Vector2}),i.d(e,"Rectangle",function(){return _.Rectangle}),i.d(e,"Matrix",function(){return _.Matrix}),i.d(e,"ColorMatrix",function(){return _.ColorMatrix})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(51),s=i.n(o),a=function(){function t(e,i){n()(this,t),this.x=e,this.y=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clamp=function(e,i){var r=null!==e&&void 0!==e,n=null!==i&&void 0!==i;return e instanceof t||!r||(e=new t(e,e)),i instanceof t||!n||(i=new t(i,i)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),n&&(this.x=Math.min(i.x,this.x),this.y=Math.min(i.y,this.y)),this},t.prototype.divide=function(e,i){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=void 0===i?e:i),this},t.prototype.subtract=function(e,i){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=void 0===i?e:i),this},t.prototype.multiply=function(e,i){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=void 0===i?e:i),this},t.prototype.add=function(e,i){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=void 0===i?e:i),this},t.prototype.equals=function(e,i){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&i===this.y},t.prototype.flip=function(){var t=this.x;return this.x=this.y,this.y=t,this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.floor=function(){return this.x=0|this.x,this.y=0|this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.min=function(){return Math.min(this.x,this.y)},t.prototype.max=function(){return Math.max(this.x,this.y)},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t.prototype.toString=function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"},t.prototype.roundDecimal=function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this},t.fromObject=function(e){return new t(e.x,e.y)},s()(t,null,[{key:"NULL",get:function(){return new t(0,0)}}]),t}();e.a=a},function(t,e,i){var r=i(44);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){"use strict";var r=i(98),n=i.n(r),o=i(0),s=i.n(o),a=i(51),u=i.n(a),l=function(){function t(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;s()(this,t),this.r=e,this.g=i,this.b=r,this.a=n}return t.prototype.toRGBA=function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"},t.prototype.set=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=t,this.g=e,this.b=i,this.a=r,this},t.prototype.toRGB=function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]},t.prototype.toHex=function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")},t.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a]},t.prototype.toArray=function(){return this.toGLColor()},t.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b]},t.prototype.toHSV=function(){var t=Math.max(this.r,this.g,this.b),e=Math.min(this.r,this.g,this.b),i=void 0,r=void 0,n=t,o=t-e;if(r=0===t?0:o/t,t===e)i=0;else{switch(t){case this.r:i=(this.g-this.b)/o,this.g<this.b&&(i+=6);break;case this.g:i=(this.b-this.r)/o+2;break;case this.b:i=(this.r-this.g)/o+4}i/=6}return[i,r,n]},t.prototype.fromHSV=function(e,i,r){return this.copy(t.fromHSV(e,i,r)),this},t.fromHSV=function(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],s=o[0],a=o[1],u=o[2],l=Math.floor(6*e),c=6*e-l,h=r*(1-i),p=r*(1-c*i),d=r*(1-(1-c)*i);switch(l%6){case 0:s=r,a=d,u=h;break;case 1:s=p,a=r,u=h;break;case 2:s=h,a=r,u=d;break;case 3:s=h,a=p,u=r;break;case 4:s=d,a=h,u=r;break;case 5:s=r,a=h,u=p}return new t(s,a,u,n)},t.fromArray=function(e){return new t(e[0],e[1],e[2],e[3])},t.fromHex=function(e){var i=e.match(/.{1,2}/g),r=n()(i,3),o=r[0],s=r[1],a=r[2];return new t(parseInt(o,16)/255,parseInt(s,16)/255,parseInt(a,16)/255,1)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copy=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},t.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},u()(t,null,[{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}}]),t}();e.a=l},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(16),s=12,a=function(){function t(){n()(this,t),this._maxListeners=s,this._events={},this._pipeDestinations=[]}return t.prototype.pipeEvents=function(t){this._pipeDestinations.push(t)},t.prototype.unpipeEvents=function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)},t.prototype.on=function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if("function"!=typeof e)throw new TypeError;var i=this._events[t]||(this._events[t]=[]);return-1!==i.indexOf(e)?this:(i.push(e),this._maxListeners&&i.length>this._maxListeners&&(o.a.warn("EventEmitter","Possible memory leak detected, added "+i.length+" `"+t+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)},t.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(null,arguments)}if(void 0===t)throw new Error("Invalid event type: `"+t+"`");var r=this;return this.on(t,i)},t.prototype.off=function(t){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var i=this._events[t];if(!i||!i.length)return this;var r=i.indexOf(e);return-1===r?this:(i.splice(r,1),this)},t.prototype.emit=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(void 0===t)throw new Error("Invalid event type: `"+t+"`");this._pipeDestinations.forEach(function(e){e.emit.apply(e,[t].concat(i))});var n=this._events[t];return!(!n||!n.length)&&(n.slice(0).forEach(function(t){return t.apply(null,i)}),!0)},t.prototype.setMaxListeners=function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t},t}();e.a=a},function(t,e,i){"use strict";/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={encode:function(t){var e="",i=void 0,n=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,c=0;do{i=t[c++],n=t[c++],o=t[c++],s=i>>2,a=(3&i)<<4|n>>4,u=(15&n)<<2|o>>6,l=63&o,isNaN(n)?u=l=64:isNaN(o)&&(l=64),e=e+r.charAt(s)+r.charAt(a)+r.charAt(u)+r.charAt(l),i=n=o="",s=a=u=l=""}while(c<t.length);return e},decode:function(t){var e=void 0,i=void 0,n=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=0,c=[];if(/[^A-Za-z0-9+\/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+\/=]/g,"");do{o=r.indexOf(t.charAt(l++)),s=r.indexOf(t.charAt(l++)),a=r.indexOf(t.charAt(l++)),u=r.indexOf(t.charAt(l++)),e=o<<2|s>>4,i=(15&s)<<4|a>>2,n=(3&a)<<6|u,c.push(e),64!==a&&c.push(i),64!==u&&c.push(n),e=i=n="",o=s=a=u=""}while(l<t.length);return c}};e.a=n},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=function(t){function e(i){n()(this,e);var r=s()(this,t.call(this));return r.id=e.id++,r._onSourceLoaded=r._onSourceLoaded.bind(r),r._renderers=[],r._glTextures={},r._source=i,r._dirty=!0,r._glUnit=0,r._mipMapping=!1,r._magFilter=e.DefaultMagFilter,r._minFilter=e.DefaultMinFilter,r._repeatX=e.ClampToEdge,r._repeatY=e.ClampToEdge,r._pixelRatio=1,r._loaded=!1,r._frame=new l.h(0,0,100,100),i&&r._loadSource(),r}return u()(e,t),e.prototype.resizeTo=function(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)},e.prototype._loadSource=function(){var t=this._source,e=t.complete,i="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();if(e||i)return this._onSourceLoaded();t.addEventListener("load",this._onSourceLoaded)},e.prototype._onSourceLoaded=function(){this._loaded=!0,this.emit("loaded"),this.update()},e.prototype._updateGLFilters=function(){var t=new l.k(this._source.width,this._source.height);l.i.isPowerOfTwo(t)?(l.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=e.TrilinearFilter,this._mipMapping=!0):(this._minFilter=e.LinearFilter,this._mipMapping=!1)},e.prototype.update=function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new l.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")},e.prototype.getGLFilter=function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}},e.getGLFilter=function(t,i){switch(i){case e.LinearFilter:return t.LINEAR;case e.NearestFilter:return t.NEAREST;case e.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case e.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}},e.prototype.isLoaded=function(){return this._loaded},e.prototype.setLoaded=function(t){this._loaded=t},e.prototype.getSource=function(){return this._source},e.prototype.setSource=function(t){this._source=t},e.prototype.getGLTextureForRenderer=function(t){return this._glTextures[t.id]},e.prototype.setGLTextureForRenderer=function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t},e.prototype.getDimensions=function(){return new l.k(this._frame.width,this._frame.height)},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t},e.prototype.getGLUnit=function(){return this._glUnit},e.prototype.setGLUnit=function(t){this._glUnit=t},e.prototype.setMinFilter=function(t){this._minFilter=t},e.prototype.getMinFilter=function(){return this._minFilter},e.prototype.setMagFilter=function(t){this._magFilter=t},e.prototype.getMagFilter=function(){return this._magFilter},e.prototype.setRepeatX=function(t){this._repeatX=t},e.prototype.getRepeatX=function(){return this._repeatX},e.prototype.setRepeatY=function(t){this._repeatY=t},e.prototype.getRepeatY=function(){return this._repeatY},e.prototype.getGLRepeat=function(t,i){switch("x"===i?this.getRepeatX():this.getRepeatY()){case e.ClampToEdge:return t.CLAMP_TO_EDGE;case e.Repeat:return t.REPEAT;case e.MirroredRepeat:return t.MIRRORED_REPEAT}},e.prototype.isDirty=function(){return this._dirty},e.prototype.setDirty=function(t){this._dirty=t},e.prototype.disposeGLTextures=function(){for(var t in this._renderers)this.disposeGLTexturesForRenderer(this._renderers[t])},e.prototype.disposeGLTexturesForRenderer=function(t){if(this._glTextures[t.id]){t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id]}},e.prototype.isMipMappingEnabled=function(){return this._mipMapping},e.prototype.setMipMappingEnabled=function(t){this._mipMapping=t},e.prototype.dispose=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disposeGLTextures()},e}(l.d);c.NearestFilter=0,c.LinearFilter=1,c.BilinearFilter=2,c.TrilinearFilter=3,c.DefaultMagFilter=c.NearestFilter,c.DefaultMinFilter=c.LinearFilter,c.ClampToEdge=0,c.Repeat=1,c.MirroredRepeat=2,c.id=0,e.a=c},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(38),h=i(75),p=i(74),d=l.c.OptionType,f=l.c.UniformType,_=l.c.RendererType,g=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._initOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=p.a.defaultUniforms,this._attributes=p.a.defaultAttributes,this._vertexSource=p.a.defaultVertexSource,this._fragmentSource=p.a.defaultFragmentSource,this._initUniforms(),t.prototype._initOptions.call(this,e)},e.prototype._initUniforms=function(){this._uniforms={};for(var t in this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(var i in this.availableOptions){var r=this.availableOptions[i];r.uniformType?this._uniforms["u_"+i]={type:r.uniformType,value:r.default||null}:l.f.trace(this.constructor.name,"Option `"+i+"` is missing a `uniformType`!")}},e.prototype.setOption=function(e,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,i,r);var n=i,o=this.availableOptions[e];if(o.uniformType){var s="u_"+e;switch(o.type){case d.COLOR:o.uniformType===f.FLOAT4?n=i.toGLColor():o.uniformType===f.FLOAT3&&(n=i.toRGBGLColor());break;case d.VECTOR2:n=[i.x,i.y];break;case d.COLOR_MATRIX:n=[i.a,i.b,i.c,i.d,i.f,i.g,i.h,i.i,i.k,i.l,i.m,i.n,i.p,i.q,i.r,i.s];var a=[i.e,i.j,i.o,i.t];this._uniforms[s+"_vec"]={value:a,type:f.FLOAT4}}this.setUniform(s,n)}},e.prototype.setUniform=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e},e.prototype.setUniforms=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in t)this._uniforms[i].value=t[i],e&&this.syncUniform(i)},e.prototype.syncUniform=function(t){this._shaders.forEach(function(e){e.syncUniform(t)})},e.prototype.syncUniforms=function(){this._shaders.forEach(function(t){t.syncUniforms()})},e.prototype.getShaderForRenderer=function(t){var e=t.getContext(),i=this._shaders[e.id];return i||(i=new h.a(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=i),i},e.prototype.apply=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(_.WEBGL)?this._applyWebGL(t,e,i,r):t.isOfType(_.CANVAS)&&this._applyCanvas(t,e,i,r)},e.prototype._applyWebGL=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(i),r&&i.clear(),t.setShader(o);var s=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",s),o.syncUniforms(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=i.getContext();l.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),n.clearRect(0,0,r.width,r.height),n.drawImage(r,0,0)},e.prototype.dispose=function(){this._shaders.forEach(function(t){return t.dispose()}),this._shaders=[]},e}(c.a);e.a=g},function(t,e,i){"use strict";var r=i(13),n=i.n(r),o=i(71),s=i.n(o),a=i(52),u=i.n(a),l=i(0),c=i.n(l),h=i(1),p=i.n(h),d=i(2),f=i.n(d),_=i(25),g=i(16),m=i(34),y=i(29),v=i(33),b=i(21),x=i(109),T=i(24),k=void 0;k=i(17).Image;var w=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c()(this,e);var n=p()(this,t.call(this));return n.availableOptions=n.availableOptions||{},n.availableOptions=b.a.extend(n.availableOptions,r),n._onConfigurableUpdate=n._onConfigurableUpdate.bind(n),n._initOptions(i),n}return f()(e,t),e.prototype._buildConfigError=function(t){var e="";return this.constructor.name&&(e=this.constructor.name+": "),e+=t,new Error(e)},e.prototype._onOptionsChange=function(){},e.prototype.validateSettings=function(){var t=this;return new _.a(function(e,i){for(var r in t.availableOptions){if(t.availableOptions[r].required&&void 0===t._options[r])return i(t._buildConfigError("Option `"+r+"` is required."))}e()})},e.prototype._initOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var i,r,n,o=this;for(i in this.availableOptions){if(n=i.charAt(0).toUpperCase()+i.slice(1),r=this.availableOptions[i],-1===[T.OptionType.STRING,T.OptionType.NUMBER,T.OptionType.BOOLEAN,T.OptionType.OBJECT,T.OptionType.VECTOR2,T.OptionType.COLOR,T.OptionType.CONFIGURABLE,T.OptionType.COLOR_MATRIX,T.OptionType.ARRAY,T.OptionType.IMAGE,T.OptionType.FUNCTION,T.OptionType.ALL].indexOf(r.type))throw this._buildConfigError("Unknown option type: `"+r.type+"`");if(function(t,e){o["set"+n]=function(e,i,r){o.setOption(t,e,i,r)},o["get"+n]=function(){return o.getOption(t)}}(i),r.type===T.OptionType.CONFIGURABLE&&(this._options[i]=new e(void 0,r.structure||{}),this._options[i].on("update",this._onConfigurableUpdate)),!(i in t)||void 0===t[i])if(void 0!==r.default){var s=r.default;"function"==typeof r.default&&(s=r.default()),this["set"+n](s,!1,!0)}else r.type!==T.OptionType.CONFIGURABLE&&(this._options[i]=void 0)}for(i in t){if(void 0===this.availableOptions[i])throw new Error("Invalid option: "+i);void 0!==t[i]&&(n=i.charAt(0).toUpperCase()+i.slice(1),this["set"+n](t[i],!1,!0))}},e.prototype.set=function(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.emit("update",this,t);for(var e in t)this.setOption(e,t[e],!1);this._onOptionsChange()},e.prototype.getOption=function(t){return this._options[t]},e.prototype.hasOption=function(t){return!!this.availableOptions[t]},e.prototype.getOptionDefault=function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: "+t);return e.default},e.prototype.resetOptions=function(){this.set(this.getDefaultOptions())},e.prototype.getDefaultOptions=function(){var t={};for(var e in this.availableOptions){var i=this.availableOptions[e].default;void 0!==i&&(t[e]=i)}return t},e.prototype.optionsEqual=function(t){for(var e in t){var i=t[e];if(!this._optionEquals(e,i))return!1}return!0},e.prototype._optionEquals=function(t,e){if(void 0===this.availableOptions[t])throw new Error("Invalid option: "+t);var i=this.availableOptions[t].type,r=this._options[t];if(r===e)return!0;if(void 0===e)return!1;switch(i){case T.OptionType.OBJECT:return"function"==typeof r.optionsEqual?r.optionsEqual(e._options):r===e;case T.OptionType.STRING:case T.OptionType.NUMBER:case T.OptionType.BOOLEAN:case T.OptionType.FUNCTION:case"*":return r===e;case T.OptionType.VECTOR2:return r.equals(e);case T.OptionType.COLOR:case T.OptionType.COLOR_MATRIX:return e.equals(r);case T.OptionType.CONFIGURABLE:return r.optionsEqual(e);case T.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case T.OptionType.IMAGE:return r.src===e.src}},e.prototype._arrayOptionEquals=function(t,i){for(var r=this._options[t],n=!0,o=0;o<r.length;o++){var s=r[o],a=i[o];if(s instanceof e){if(void 0===a||!s.optionsEqual(a)){n=!1;break}}else if(a!==s){n=!1;break}}return n},e.prototype.serializeOptions=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u()(this._options),i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return e.forEach(function(e){if(void 0===t.availableOptions[e])return g.a.warn("Trying to serialize a key that does not exist: "+e);!1!==t.availableOptions[e].serializable&&(r[e]=t.serializeOption(e,i))}),r},e.prototype.serializeOption=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.availableOptions[t],r=i.type,n=this._options[t];if(!n)return n;if(!1===i.serializable)throw new Error("Option `"+t+"` is not serializable.");switch(r){case T.OptionType.STRING:case T.OptionType.NUMBER:case T.OptionType.BOOLEAN:case T.OptionType.OBJECT:case T.OptionType.FUNCTION:case T.OptionType.ALL:return n;case T.OptionType.VECTOR2:return e?n.toObject():n.clone();case T.OptionType.COLOR:case T.OptionType.COLOR_MATRIX:return e?n.toArray():n.clone();case T.OptionType.CONFIGURABLE:return n.serializeOptions(void 0,e);case T.OptionType.ARRAY:return n.slice(0);case T.OptionType.IMAGE:return e?n.src:n}},e.prototype.setOption=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i&&this.emit("update",this,s()({},t,e));var o=this.availableOptions[t];if(!o)throw new Error("Invalid option: "+t);if(void 0!==o.setter&&(e=o.setter.call(this,e,r)),void 0!==o.validation&&o.validation(e),null===e||void 0===e){if(o.required)throw this._buildConfigError("Option `"+t+"` is required.");this._options[t]=e}else switch(o.type){case T.OptionType.STRING:if((void 0===e?"undefined":n()(e))!==T.OptionType.STRING)throw this._buildConfigError("Option `"+t+"` has to be a string.");var a=o.available;if(void 0!==a&&-1===a.indexOf(e))throw this._buildConfigError("Invalid value for `"+t+"` (valid values are: "+o.available.join(", ")+")");this._options[t]=e;break;case T.OptionType.NUMBER:if((void 0===e?"undefined":n()(e))!==T.OptionType.NUMBER)throw this._buildConfigError("Option `"+t+"` has to be a number.");this._options[t]=e;break;case T.OptionType.BOOLEAN:if((void 0===e?"undefined":n()(e))!==T.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+t+"` has to be a boolean.");this._options[t]=e;break;case T.OptionType.VECTOR2:if(!(e instanceof y.a||"object"===(void 0===e?"undefined":n()(e))&&"x"in e&&"y"in e))throw this._buildConfigError("Option `"+t+"` has to be an instance of Vector2 or an Object holding x and y values.");e instanceof y.a?this._options[t]=e.clone():this._options[t]=y.a.fromObject(e);break;case T.OptionType.COLOR:if(!(e instanceof v.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of Color.");this._options[t]=e;break;case T.OptionType.COLOR_MATRIX:if(!(e instanceof x.a))throw this._buildConfigError("Option `"+t+"` has to be an instance of ColorMatrix.");this._options[t]=e.clone();break;case T.OptionType.FUNCTION:if("function"!=typeof e)throw this._buildConfigError("Option `"+t+"` has to be a function.");this._options[t]=e;break;case T.OptionType.OBJECT:case"*":this._options[t]=e;break;case T.OptionType.IMAGE:if("string"==typeof e){var u=new k;u.src=e,this._options[t]=u}else{if(!(e instanceof k||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError("Option `"+t+"` has to be an Image or String.");this._options[t]=e}break;case T.OptionType.CONFIGURABLE:this._options[t].set(e);break;case T.OptionType.ARRAY:if(!(e instanceof Array))throw this._buildConfigError("Option `"+t+"` has to be an Array.");this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+o.type+"`")}i&&(this._onOptionsChange(),this.emit("update",this,s()({},t,e)))},e.prototype._onConfigurableUpdate=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.emit.apply(this,["update"].concat(e))},e.prototype.hasChanges=function(){var t=this.getDefaultOptions();return!this.optionsEqual(t)},e}(m.a);e.a=w},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(25),s=i(214),a=i.n(s),u="undefined"!=typeof window?window:global,l=function(){function t(e){n()(this,t),this._url=e,this._parsedUrl=a.a.parse(this._url,!0)}return t.prototype._isJSONPRequest=function(){var t=this._parsedUrl.query;for(var e in t){if("?"===t[e])return!0}return!1},t.prototype.load=function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()},t.prototype._loadJSON=function(){var t=this;return new o.a(function(e,i){var r=void 0;u.XDomainRequest?(r=new u.XDomainRequest,r.onload=function(){var t=JSON.parse(r.responseText);e(t)},r.onerror=function(t){i(t)},r.open("GET",t._url,!0),r.send()):u.XMLHttpRequest&&(r=new XMLHttpRequest,r.onreadystatechange=function(t){if(4===r.readyState)if(200===r.status){var n=JSON.parse(r.responseText);e(n)}else i(new Error("HTTP Status "+r.status))},r.open("GET",t._url,!0),r.send())})},t.prototype._loadJSONP=function(){var t=this,e=!1,i=!1,r="pesdk"+Math.round(99999999999999*Math.random());return new o.a(function(n,o){var s=t._createJSONPNode(r);u[r]=function(r){t._removeJSONPNode(s),e||(i=!0,n(r))},u.setTimeout(function(){i||(t._removeJSONPNode(s),e=!0,o(new Error("Timeout of 5 seconds exceeded.")))},5e3)})},t.prototype._createJSONPNode=function(t){var e=this._buildJSONPUrl(t),i=document.querySelector("head"),r=document.createElement("script");return r.src=e,i.appendChild(r),r},t.prototype._removeJSONPNode=function(t){t.parentNode.removeChild(t)},t.prototype._buildJSONPUrl=function(t){var e=this._parsedUrl.query,i=null;for(var r in e)if("?"===e[r]){i=r;break}return delete this._parsedUrl.search,e[i]=t,a.a.format(this._parsedUrl)},t}();e.a=l},function(t,e,i){"use strict";var r=i(98),n=i.n(r),o=i(9),s=i.n(o),a=i(17),u=i.n(a),l=i(224),c=i.n(l),h=i(225),p=i.n(h),d=function(t){return new s.a(function(e,i){try{c.a.readFile(t,function(r,n){r?i(r):e([t,n])})}catch(t){i(t)}})},f=function(t){return new s.a(function(e,i){p.a.get(t,{encoding:null},function(r,n,o){return r?i(r):200!==n.statusCode?i(new Error("Server responded with status code "+n.statusCode)):void e([t,n.body])})})};e.a={load:function(t){var e=this;return function(){return"data:"===t.substr(0,5)||"undefined"!=typeof WEBPACK?s.a.resolve([t,t]):t.match(/^(https?|ftp|file):\/\//)?f(t):d(t)}().then(function(t){var i=n()(t,2),r=i[0],o=i[1];return e._createAndLoadImage(r,o)})},_createAndLoadImage:function(t,e){if("undefined"!=typeof WEBPACK)return new s.a(function(t,i){var r=new window.Image;r.addEventListener("load",function(){t(r)}),r.addEventListener("error",function(){i(new Error("Failed to load image at "+e))}),r.crossOrigin="Anonymous",r.src=e});var i=new u.a.Image;return i.src=e,i.filePath=t,s.a.resolve(i)},loadXHR:function(t,e){return new s.a(function(i,r){var n=void 0;window.XDomainRequest?(n=new window.XDomainRequest,e&&n.overrideMimeType(e),n.onload=function(){i(n)},n.onerror=function(t){r(t)}):window.XMLHttpRequest&&(n=new window.XMLHttpRequest,e&&n.overrideMimeType(e),n.onreadystatechange=function(t){4===n.readyState&&(200===n.status?i(n):r(new Error("HTTP Status "+n.status)))}),n.open("GET",t,!0),n.send()})}}},function(t,e,i){"use strict";function r(t,e,i,r,a,u){if(!(isNaN(u)||u<1)){u|=0;var l,c,h,p,d,f,_,g,m,y,v,b,x,T,k,w,C,O,R,E,S,F,M,D,B,I=t.data,A=u+u+1,N=r-1,L=a-1,P=u+1,z=P*(P+1)/2,U=new n,G=U;for(h=1;h<A;h++)G=G.next=new n,h==P&&(B=G);G.next=U;var j=null,V=null;_=f=0;var W=o[u],H=s[u];for(c=0;c<a;c++){for(w=C=O=R=g=m=y=v=0,b=P*(E=I[f]),x=P*(S=I[f+1]),T=P*(F=I[f+2]),k=P*(M=I[f+3]),g+=z*E,m+=z*S,y+=z*F,v+=z*M,G=U,h=0;h<P;h++)G.r=E,G.g=S,G.b=F,G.a=M,G=G.next;for(h=1;h<P;h++)p=f+((N<h?N:h)<<2),g+=(G.r=E=I[p])*(D=P-h),m+=(G.g=S=I[p+1])*D,y+=(G.b=F=I[p+2])*D,v+=(G.a=M=I[p+3])*D,w+=E,C+=S,O+=F,R+=M,G=G.next;for(j=U,V=B,l=0;l<r;l++)I[f+3]=M=v*W>>H,0!==M?(M=255/M,I[f]=(g*W>>H)*M,I[f+1]=(m*W>>H)*M,I[f+2]=(y*W>>H)*M):I[f]=I[f+1]=I[f+2]=0,g-=b,m-=x,y-=T,v-=k,b-=j.r,x-=j.g,T-=j.b,k-=j.a,p=_+((p=l+u+1)<N?p:N)<<2,w+=j.r=I[p],C+=j.g=I[p+1],O+=j.b=I[p+2],R+=j.a=I[p+3],g+=w,m+=C,y+=O,v+=R,j=j.next,b+=E=V.r,x+=S=V.g,T+=F=V.b,k+=M=V.a,w-=E,C-=S,O-=F,R-=M,V=V.next,f+=4;_+=r}for(l=0;l<r;l++){for(C=O=R=w=m=y=v=g=0,f=l<<2,b=P*(E=I[f]),x=P*(S=I[f+1]),T=P*(F=I[f+2]),k=P*(M=I[f+3]),g+=z*E,m+=z*S,y+=z*F,v+=z*M,G=U,h=0;h<P;h++)G.r=E,G.g=S,G.b=F,G.a=M,G=G.next;for(d=r,h=1;h<=u;h++)f=d+l<<2,g+=(G.r=E=I[f])*(D=P-h),m+=(G.g=S=I[f+1])*D,y+=(G.b=F=I[f+2])*D,v+=(G.a=M=I[f+3])*D,w+=E,C+=S,O+=F,R+=M,G=G.next,h<L&&(d+=r);for(f=l,j=U,V=B,c=0;c<a;c++)p=f<<2,I[p+3]=M=v*W>>H,M>0?(M=255/M,I[p]=(g*W>>H)*M,I[p+1]=(m*W>>H)*M,I[p+2]=(y*W>>H)*M):I[p]=I[p+1]=I[p+2]=0,g-=b,m-=x,y-=T,v-=k,b-=j.r,x-=j.g,T-=j.b,k-=j.a,p=l+((p=c+P)<L?p:L)*r<<2,g+=w+=j.r=I[p],m+=C+=j.g=I[p+1],y+=O+=j.b=I[p+2],v+=R+=j.a=I[p+3],j=j.next,b+=E=V.r,x+=S=V.g,T+=F=V.b,k+=M=V.a,w-=E,C-=S,O-=F,R-=M,V=V.next,f+=r}}}function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurCanvasRGBA:r}},function(t,e,i){"use strict";var r=i(134)(!0);i(83)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=r(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var r=i(86),n=i(63);t.exports=Object.keys||function(t){return r(t,n)}},function(t,e){var i=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+r).toString(36))}},function(t,e,i){var r=i(18).f,n=i(23),o=i(10)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,i){i(141);for(var r=i(12),n=i(22),o=i(26),s=i(10)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=r[l],h=c&&c.prototype;h&&!h[s]&&n(h,s,l),o[l]=o.Array}},function(t,e,i){"use strict";var r=i(177),n=i(190),o=i(73),s=i(77),a=i(76),u=i(107),l=i(36),c=i(108),h=i(196),p=i(54),d=i(53),f=i(197),_=i(199),g=i(75),m=i(37),y=i(203),v=i(105),b={WebGLRenderer:n.a,CanvasRenderer:r.a,WebGLFilterManager:s.a,CanvasFilterManager:o.a,DisplayObject:a.a,Container:u.a,BaseTexture:l.a,Texture:c.a,RenderTexture:h.a,WebGLRenderTarget:p.a,CanvasRenderTarget:d.a,Sprite:f.a,Shaders:_.a,Shader:g.a,Filter:m.a,Filters:y,PixelArrayImage:v.a,autoDetectRenderer:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.a.isSupported()?new n.a(t,e,i):new r.a(t,e,i)}};e.a=b},function(t,e,i){"use strict";e.__esModule=!0;var r=i(70),n=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,n.default)(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}()},function(t,e,i){t.exports={default:i(186),__esModule:!0}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s=i(36),a=function(){function t(e,i,r,o,a){n()(this,t),this._width=e,this._height=i,this._pixelRatio=r,this._baseTexture=new s.a,this._canvas=o||this._createCanvas(),this._context=a||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return t.prototype._createCanvas=function(){return o.i.createCanvas()},t.prototype.clear=function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)},t.prototype.resizeTo=function(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)},t.prototype.getCanvas=function(){return this._canvas},t.prototype.getContext=function(){return this._context},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t},t.prototype.getDimensions=function(){return new o.k(this._width,this._height)},t.prototype.getBaseTexture=function(){return this._baseTexture},t.prototype.dispose=function(){this._canvas=null,this._context=null},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s=i(36),a=function(){function t(e,i,r,a){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n()(this,t),this._renderer=e,this._gl=e.getContext(),this._width=i,this._height=r,this._frame=null,this._pixelRatio=a,this._projectionMatrix=new o.g,this._mipMapping=!1,this._baseTexture=new s.a;var l=this._baseTexture.getFrame();l.width=i,l.height=r,this._baseTexture.setPixelRatio(a),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=u,this._filterStack=[{renderTarget:this,filter:[]}],u||this._initFrameBuffer()}return t.prototype.resizeTo=function(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()},t.prototype._getMinFilter=function(){var t=s.a.DefaultMinFilter;return this._mipMapping&&(t=s.a.TrilinearFilter),t},t.prototype._getMagFilter=function(){return s.a.DefaultMagFilter},t.prototype._resizeTexture=function(){var t=this._gl;t.bindTexture(t.TEXTURE_2D,this._texture);var e=this._width*this._pixelRatio,i=this._height*this._pixelRatio;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null);var r=new o.k(this._width,this._height);o.i.isPowerOfTwo(r)?(o.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)},t.prototype.activate=function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)},t.prototype.clear=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.b.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),o.e.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)},t.prototype._calculateProjectionMatrix=function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new o.h(0,0,this._width,this._height),i=e.x,r=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-i*t.a,t.ty=1-r*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-i*t.a,t.ty=-1-r*t.d)},t.prototype._initFrameBuffer=function(){var t=this._gl;this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new o.k(this._width,this._height)),o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)},t.prototype.getProjectionMatrix=function(){return this._projectionMatrix},t.prototype.getTexture=function(){return this._texture},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(t){this._frame=t},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()},t.prototype.getBaseTexture=function(){return this._baseTexture},t.prototype.dispose=function(){var t=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),t.deleteTexture(this._texture),t.deleteFramebuffer(this._framebuffer)},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),l.Math.Vector2),h=function(t){function e(i,r){n()(this,e);var o=s()(this,t.call(this,r));return o._operation=i,o._dirtiness={},o.id=l.Utils.getUUID(),o._renderTextures={},o._identitySprite=new l.Engine.Sprite,o._sprite=new l.Engine.Sprite,o._dummyImage={addEventListener:function(){},removeEventListener:function(){}},o._hitTestSprite=new l.Engine.Sprite,o._renderers=[],o}return u()(e,t),e.prototype.applyScale=function(t){},e.prototype.applyRotation=function(t){var e=this._operation.getInputDimensions(),i=180*this.getRotation()/Math.PI;i+=t,this.setRotation(i*Math.PI/180);var r=(t+360)%360,n=r*Math.PI/180,o=Math.cos(n),s=Math.sin(n),a=this._options.position.clone().subtract(.5).multiply(e),u=new c(a.x*o-a.y*s,a.x*s+a.y*o).divide(e.clone().flip());this.setPosition(new c(.5,.5).add(u))},e.prototype.applyFlip=function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)},e.prototype.applyTransform=function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)},e.prototype.getDisplayObject=function(){return this._sprite},e.prototype.getHitTestDisplayObject=function(){return this._sprite},e.prototype._getTexture=function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")},e.prototype._prepareRenderTexture=function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new l.Engine.Container,this._renderTextureSprite=new l.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}},e.prototype._rendersToRenderTexture=function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(l.RendererType.WEBGL)},e.prototype._optionEquals=function(e,i){return"type"===e||t.prototype._optionEquals.call(this,e,i)},e.prototype.update=function(t,e){this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e)},e.prototype._updateSprite=function(t){var e=this;[this._sprite,this._hitTestSprite].forEach(function(i){if(i.getTexture()){i.setAnchor(e._options.anchor),i.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&i.setAlpha(e._options.alpha);var r=e._options.dimensions;r&&(r=r.clone().multiply(e._operation.getSDK().getTextureScale()),i.setWidth(r.x),i.setHeight(r.y)),i.updateTransform();var n=i.getTexture().getFrame(),o=new c(n.width,n.height);i.setPivot(e._options.pivot.clone().multiply(o)),i.setRotation(e._options.rotation),i.updateTransform()}})},e.prototype._renderToRenderTexture=function(t){var e=this._getTexture().getDimensions(),i=this._getRenderTexture(t.getRenderer(),e),r=e.clone();if(this._options.smoothDownscaling&&(r.x=l.Utils.nextHighestPOT(r.x),r.y=l.Utils.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var n=r.clone().subtract(e.x,e.y).divide(r),o=i.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-n.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-n.y}this._sprite.setTexture(i)},e.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},e.prototype.setDirtyForRenderer=function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])},e.prototype._getRenderTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new l.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]},e.prototype.dispose=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose()},e}(l.Configurable);e.a=h},function(t,e){var i=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var r=i(19),n=i(12).document,o=r(n)&&r(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},function(t,e,i){var r=i(19);t.exports=function(t,e){if(!r(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!r(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var r=i(15),n=i(136),o=i(63),s=i(61)("IE_PROTO"),a=function(){},u=function(){var t,e=i(58)("iframe"),r=o.length;for(e.style.display="none",i(88).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=r(t),i=new a,a.prototype=null,i[s]=t):i=u(),void 0===e?i:n(i,e)}},function(t,e,i){var r=i(62)("keys"),n=i(47);t.exports=function(t){return r[t]||(r[t]=n(t))}},function(t,e,i){var r=i(12),n=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return n[t]||(n[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){e.f=i(10)},function(t,e,i){var r=i(12),n=i(8),o=i(43),s=i(64),a=i(18).f;t.exports=function(t){var e=n.Symbol||(n.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var r=i(32),n=i(10)("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=s(e=Object(t),n))?i:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var r,n,o,s=i(30),a=i(170),u=i(88),l=i(58),c=i(12),h=c.process,p=c.setImmediate,d=c.clearImmediate,f=c.MessageChannel,_=c.Dispatch,g=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},v=function(t){y.call(t.data)};p&&d||(p=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return m[++g]=function(){a("function"==typeof t?t:Function(t),e)},r(g),g},d=function(t){delete m[t]},"process"==i(32)(h)?r=function(t){h.nextTick(s(y,t,1))}:_&&_.now?r=function(t){_.now(s(y,t,1))}:f?(n=new f,o=n.port2,n.port1.onmessage=v,r=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",v,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:p,clear:d}},function(t,e,i){"use strict";function r(t){var e,i;this.promise=new t(function(t,r){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=r}),this.resolve=n(e),this.reject=n(i)}var n=i(44);t.exports.f=function(t){return new r(t)}},function(t,e,i){t.exports={default:i(184),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(70),n=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e,i){return e in t?(0,n.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e){(function(){var e,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-r)/1e6},i=process.hrtime,e=function(){var t;return t=i(),1e9*t[0]+t[1]},r=e()):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s=i(53),a=function(){function t(e){n()(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new o.h(0,0,e.getWidth(),e.getHeight())}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})},t.prototype.pushFilters=function(t,e){var i=t.getBounds();this._currentFrame=i;var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:e}),r.clear()},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,i=t.renderTarget,r=this._filterStack[this._filterStack.length-1],n=i,o=r.renderTarget;return 1===e.length?(e[0].apply(this._renderer,n,o),this._textures.push(n)):this._applyFilters(e,n,o),e},t.prototype._applyFilters=function(t,e,i){var r=this,n=e,o=this._getOrCreateRenderTarget(!0),s=t[t.length-1];t.forEach(function(t,e){if(t===s)t.apply(r._renderer,n,i);else{t.apply(r._renderer,n,o);var a=n;n=o,o=a}}),this._textures.push(n),this._textures.push(o)},t.prototype._getOrCreateRenderTarget=function(t){var e=this._textures.pop();return e||(e=new s.a(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype.dispose=function(){},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(75),h=l.c.UniformType,p=function(t){function e(i,r,o){return n()(this,e),r=r||e.defaultVertexSource,o=o||e.defaultFragmentSource,s()(this,t.call(this,i,r,o,e.defaultUniforms,e.defaultAttributes))}return u()(e,t),e}(c.a);p.defaultVertexSource=i(192),p.defaultFragmentSource=i(193);var d=new l.g;p.defaultUniforms={u_image:{type:h.SAMPLER2D,value:0},u_projMatrix:{type:h.MAT3,value:d.toArray()}},p.defaultAttributes=["a_position","a_texCoord","a_color"],e.a=p},function(t,e,i){"use strict";var r=i(52),n=i.n(r),o=i(0),s=i.n(o),a=i(6),u=i(24),l=a.f,c=a.i,h=function(){function t(e,i,r,n,o){s()(this,t),this._renderer=e,this._vertexSource=i,this._fragmentSource=r,this._uniforms=n||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return t.prototype._init=function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()},t.prototype._onContextChange=function(){this._init()},t.prototype.setupBuffers=function(t,e){var i=this._renderer.getContext();i.bindBuffer(i.ARRAY_BUFFER,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),i.vertexAttribPointer(this._attributeLocations.a_position,2,i.FLOAT,!1,a.j,0),i.vertexAttribPointer(this._attributeLocations.a_texCoord,2,i.FLOAT,!1,a.j,8),i.vertexAttribPointer(this._attributeLocations.a_color,4,i.UNSIGNED_BYTE,!0,a.j,16)},t.prototype.syncUniforms=function(){var t=this;n()(this._uniforms).forEach(function(e){t.syncUniform(e)})},t.prototype.syncUniform=function(t){var e=this._renderer.getContext(),i=this._uniforms[t],r=this._uniformLocations[t];switch(i.type){case u.UniformType.SAMPLER2D:e.uniform1i(r,i.value);break;case u.UniformType.INT:case u.UniformType.INT1:e.uniform1i(r,i.value);break;case u.UniformType.FLOAT:case u.UniformType.FLOAT1:e.uniform1f(r,i.value);break;case u.UniformType.FLOAT2:e.uniform2f(r,i.value[0],i.value[1]);break;case u.UniformType.FLOAT3:e.uniform3f(r,i.value[0],i.value[1],i.value[2]);break;case u.UniformType.FLOAT4:e.uniform4f(r,i.value[0],i.value[1],i.value[2],i.value[3]);break;case u.UniformType.FLOAT_VECTOR2:e.uniform2fv(r,i.value);break;case u.UniformType.MAT3:case u.UniformType.MAT3FV:e.uniformMatrix3fv(r,!1,i.value);break;case u.UniformType.MAT4:e.uniformMatrix4fv(r,!1,i.value);break;default:l.warn(this.constructor.name,"Unknown uniform type: "+i.type)}},t.prototype._cacheAttributeLocations=function(){var t=this,e=this._renderer.getContext();this._attributes.forEach(function(i){t._attributeLocations[i]=e.getAttribLocation(t._program,i)})},t.prototype._cacheUniformLocations=function(){var t=this,e=this._renderer.getContext();n()(this._uniforms).forEach(function(i){t._uniformLocations[i]=e.getUniformLocation(t._program,i)})},t.prototype._addPrecisionToSource=function(t){var e=this._renderer.getMaxFloatPrecision(),i="mediump";return c.isMobile()&&"highp"===e&&(i="highp"),"precision "+i+" float;\n"+t},t.prototype._compile=function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var i=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(t.FRAGMENT_SHADER,i);this._fragmentShader=r;var n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var o=t.getProgramInfoLog(n);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(n),l.error(this.constructor.name,"WebGL program linking error: "+o)}this._program=n},t.prototype._compileShader=function(t,e){var i=this._renderer.getContext(),r=i.createShader(t);if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){var n=i.getShaderInfoLog(r);i.isContextLost()&&(n="WebGL context lost"),i.deleteShader(r),l.error(this.constructor.name,"WebGL shader compilation error: "+n)}return r},t.prototype.setUniform=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,i&&this.syncUniform(t)},t.prototype.setUniforms=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in t)this._uniforms[i].value=t[i],e&&this.syncUniform(i)},t.prototype.getUniforms=function(){return this._uniforms},t.prototype.getAttributes=function(){return this._attributes},t.prototype.getAttributeLocations=function(){return this._attributeLocations},t.prototype.getProgram=function(){return this._program},t.prototype.dispose=function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)},t}();e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s=function(){function t(){n()(this,t),this._position=new o.k(0,0),this._scale=new o.k(1,1),this._pivot=new o.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new o.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new o.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new o.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new o.h(0,0,0,0)}return t.prototype.renderWebGL=function(t){o.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")},t.prototype.renderCanvas=function(t){o.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")},t.prototype.updateTransform=function(){var t=this._parent?this._parent.getWorldTransform():o.g.IDENTITY,e=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.tx|=0,e.ty|=0,e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.addShader=function(t){this._shaders.push(t)},t.prototype.removeShader=function(t){var e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)},t.prototype.removeShaderAt=function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)},t.prototype.getBounds=function(){return this._bounds.clone()},t.prototype.getPosition=function(){return this._position},t.prototype.setPosition=function(t,e){t instanceof o.k?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getScale=function(){return this._scale},t.prototype.setScale=function(t,e){t instanceof o.k?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getPivot=function(){return this._pivot},t.prototype.setPivot=function(t,e){t instanceof o.k?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getRotation=function(){return this._rotation},t.prototype.setRotation=function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getAlpha=function(){return this._alpha},t.prototype.setAlpha=function(t){this._alpha=t},t.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha},t.prototype.getWorldTransform=function(){return this._worldTransform},t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(t){this._parent=t},t.prototype.getFilterRectangle=function(){return this._filterRectangle},t.prototype.setFilterRectangle=function(t){this._filterRectangle.copy(t)},t.prototype.getTint=function(){return this._tint},t.prototype.setTint=function(t){this._tint=t},t.prototype.isVisible=function(){return this._visible},t.prototype.setVisible=function(t){this._visible=t},t}();e.a=s},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s=i(54),a=i(194),u=o.c.RendererType,l=function(){function t(e){n()(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new o.h(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach(function(e){return e.resizeTo(t)})},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype._getOrCreateRenderTarget=function(t){var e=this._renderTargets.pop();return e||(e=new s.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e},t.prototype.pushFilters=function(t,e){var i=t.getBounds();this._currentFrame=i;var r=t.getFilterRectangle();r.width>0&&r.height>0&&(this._currentFrame=r);var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),n.clear(),this._filterStack.push({renderTarget:n,filters:e})},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,i=t.renderTarget,r=this._filterStack[this._filterStack.length-1],n=i,o=r.renderTarget;this._quad.map(this._textureFrame,n.getFrame());var s=e[0].getShaderForRenderer(this._renderer),a=this._quad.getVertexBuffer(),u=this._quad.getIndexBuffer(),l=this._renderer.getContext();l.bindBuffer(l.ARRAY_BUFFER,a),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,u);var c=s.getAttributeLocations();return l.vertexAttribPointer(c.a_position,2,l.FLOAT,!1,0,0),l.vertexAttribPointer(c.a_texCoord,2,l.FLOAT,!1,0,32),l.vertexAttribPointer(c.a_color,4,l.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,n,o),this._renderTargets.push(n)):this._applyFilters(e,n,o),e},t.prototype._applyFilters=function(t,e,i){var r=this,n=e,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var s=t[t.length-1];t.forEach(function(t,e){if(t===s)t.apply(r._renderer,n,i);else{t.apply(r._renderer,n,o);var a=n;n=o,o=a}}),this._renderTargets.push(n),this._renderTargets.push(o)},t.prototype._onContextChange=function(){this._renderTargets.length=0,this._renderer.isOfType(u.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new a.a(this._renderer))},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(t){t.dispose()})},t}();e.a=l},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(35),s=i(79),a=i(21),u=i(80),l=i(219),c=i(220),h=a.a.invariant,p=u.a.MARKERS,d=new RegExp("^data:image/jpeg;base64,","i"),f=function(){function t(e){n()(this,t),this._buf=e,this._stream=new s.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new c.a(this._getMarkerBuffer(p.EXIF)),this._jfifData=new l.a(this._getMarkerBuffer(p.JFIF))}return t.toDataURL=function(t){return"data:image/jpeg;base64,"+o.a.encode(t)},t.fromDataURL=function(t){var e=t.replace("data:image/jpeg;base64,","");return o.a.decode(e)},t.prototype.restoreSegments=function(e){var i=t.fromDataURL(e);return i=this.restoreExifTagsToImageData(i),i=this.restoreJfifSegmentToImageData(i),t.toDataURL(i)},t.prototype.restoreExifTagsToImageData=function(t){if(!this._exifData.isValid())return t;var e=this._sliceIntoSegments(t),i=e[1][0],r=t.slice(0,i),n=t.slice(i),o=r.concat(this._exifData.getBuffer());return o=o.concat(n)},t.prototype.restoreJfifSegmentToImageData=function(t){if(!this._jfifData.isValid())return t;var e=this._sliceIntoSegments(t),i=this._findSegment(p.JFIF,e);h(i,"JFIF Data Error: Segment not found");var r=i[0],n=i[1],o=t.slice(0,r),s=t.slice(r,n),a=t.slice(n),u=new l.a(s);u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity());var c=o.concat(s);return c=c.concat(a)},t.prototype.restoreExifTags=function(e){var i=t.fromDataURL(e),r=this.restoreExifTagsToImageData(i);return t.toDataURL(r)},t.prototype.restoreJfifSegment=function(e){if(!this._jfifData.isValid())return e;var i=t.fromDataURL(e),r=this.restoreJfifSegmentToImageData(i);return t.toDataURL(r)},t.prototype.setOrientation=function(t){return this._exifData.setOrientation(t)},t.isJPEG=function(t){return d.test(t)},t.bufferIsJPEG=function(t){return"JFIF"===t.slice(6,10).toString()},t.fromBase64String=function(e){var i=e.replace("data:image/jpeg;base64,","");return new t(o.a.decode(i))},t.prototype._findSegment=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,i=0;i<e.length;i++){var r=e[i][0],n=e[i][1];this._stream.setHead(r);if(this._stream.peekInt16()===t)return[r,n]}return!1},t.prototype._getMarkerBuffer=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,i=this._findSegment(t,e);if(i){var r=i[0],n=i[1];return this._buf.slice(r,n)}return!1},t.prototype._sliceIntoSegments=function(t){for(var e=new s.a(t),i=[];e.getHead()<t.length;){var r=e.readInt16();if(r!==p.SOI){if(r===p.SOS)break;if(!(r>=65280&&r<=65535))throw new Error("Invalid marker: 0x"+r.toString(16));var n=e.readInt16(),o=e.getHead()+n-2;i.push([e.getHead()-4,o]),e.setHead(o)}}return this._stream.setHead(0),i},t.prototype.getTags=function(){return this._exifData.getTags()},t.prototype.getTagData=function(){return this._exifData.getTagData()},t.prototype.dispose=function(){this._buf=[],this._segments=[]},t}();e.a=f},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=function(){function t(e){n()(this,t),this._head=0,this._buf=e}return t.prototype.peekInt8=function(){return this._buf[this._head]},t.prototype.peekInt16=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],i=this._buf[this._head+1];return t?(i<<8)+e:(e<<8)+i},t.prototype.peekInt24=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],i=this._buf[this._head+1],r=this._buf[this._head+2];return t?(r<<16)+(i<<8)+e:(e<<16)+(i<<8)+r},t.prototype.peekInt32=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],i=this._buf[this._head+1],r=this._buf[this._head+2],n=this._buf[this._head+3];return t?(n<<32)+(r<<16)+(i<<8)+e:(e<<32)+(i<<16)+(r<<8)+n},t.prototype.writeInt8=function(t){this._buf[this._head]=255&t},t.prototype.writeInt16=function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t},t.prototype.readInt8=function(){var t=this.peekInt8();return this._head+=1,t},t.prototype.readInt16=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e},t.prototype.readInt24=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e},t.prototype.readInt32=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e},t.prototype.readString=function(t){for(var e="",i=0;i<t;i++){var r=this.readInt8();e+=String.fromCharCode(r)}return e},t.prototype.getHead=function(){return this._head},t.prototype.setHead=function(t){this._head=t},t}();e.a=o},function(t,e,i){"use strict";var r={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},n={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};e.a={MARKERS:r,EXIF_TAGS:n}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=i(122),a=i(39),u=function(){function t(e,i){n()(this,t),this._ui=e,this._options=i,this._categoriesById={},this._categories=[],this._stickersById={},this._addCategories(s.a.DEFAULTS.STICKER_CATEGORIES);var r=this._options,o=r.categories,a=r.replaceCategories;this._options.categories?this._addCategories(o,a):(this._updateCategoriesMap(),this._updateAllCategory())}return t.prototype.loadExternal=function(t){var e=this;return new a.a(t).load().then(function(t){e._addCategories(t.categories,e._options.replaceCategories)})},t.prototype._addCategories=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=e?t.slice(0):o.m.mergeCategories(this._categories,t,"stickers"),this._updateCategoriesMap(),this._updateAllCategory()},t.prototype._updateCategoriesMap=function(){var t=this;this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.identifier]=e}),this._categories.forEach(function(e){e.stickers.forEach(function(e){t._stickersById[e.identifier]=e})}),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach(function(e){e.stickers=e.stickers.filter(function(e){return-1!==t._options.availableStickers.indexOf(e.identifier)})}),this._categories=this._categories.filter(function(t){return t.stickers.length>0})),this._updateAllCategory()},t.prototype._updateAllCategory=function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(t){return t.stickers}).reduce(function(t,e){return t.concat(e)},[])},this._categoriesById.all=this._allCategory},t.prototype.getStickersForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown sticker category '"+t+"'");return this._categoriesById[t].stickers},t.prototype.getStickerByIdentifier=function(t){return this._stickersById[t]},t.prototype.getCategories=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this._allCategory].concat(this._categories):this._categories},t.prototype.getCategory=function(t){return this._categoriesById[t]},t.getURLForSticker=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",i=t.images,r="base"===e?i.mediaBase||i.mediaThumb:i.mediaThumb,n=r.uris||[r.uri];if(void 0===o.m.Browser||o.m.Browser.getIEVersion()){var s=n.filter(function(t){return!/\.svg$/i.test(t)});return s.length?s[0]:n[0]}var a=n.filter(function(t){return/\.svg$/i.test(t)});return a.length?a[0]:n[0]},t}();e.a=u},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(13),s=i.n(o),a=i(0),u=i.n(a),l=i(7),c=i(333),h=function(){function t(e,i){u()(this,t),this._ui=e,this._fonts=i,this._loadedFonts=[]}return t.prototype.setFonts=function(t){this._fonts=t},t.prototype.needsToLoad=function(){for(var t=this,e=0;e<this._fonts.length;e++){var i=function(e){var i=void 0;return t._fonts[e].getVariations().forEach(function(t){i=i||t.getProvider()}),i?{v:!0}:"continue"}(e);switch(i){case"continue":continue;default:if("object"===(void 0===i?"undefined":s()(i)))return i.v}}},t.prototype.fontLoaded=function(t){var e=t.getFontFamily();return-1!==this._loadedFonts.indexOf(e)},t.prototype.setFontLoaded=function(t){if(!this.fontLoaded(t)){var e=t.getFontFamily();this._loadedFonts.push(e)}},t.prototype.load=function(){var t=this,e=this._fonts,i={file:new c.a(this._ui)},r=function(){for(var t in i){i[t].dispose()}};e.filter(function(e){return!t.fontLoaded(e)}).forEach(function(t){t.getVariations().forEach(function(t){var e=t.getProvider();if(e){var r=i[e];if(!r)return l.g.warn("No font loader for provider `"+e+"` found.");r.add(t)}})});var o=[];for(var s in i)o.push(i[s].load());return n.a.all(o).then(function(){r(),e.forEach(function(e){t.setFontLoaded(e)})}).catch(function(t){throw r(),t})},t}();e.a=h},function(t,e,i){"use strict";var r=i(43),n=i(14),o=i(85),s=i(22),a=i(23),u=i(26),l=i(135),c=i(48),h=i(140),p=i(10)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,i,_,g,m,y){l(i,e,_);var v,b,x,T=function(t){if(!d&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},k=e+" Iterator",w="values"==g,C=!1,O=t.prototype,R=O[p]||O["@@iterator"]||g&&O[g],E=!d&&R||T(g),S=g?w?T("entries"):E:void 0,F="Array"==e?O.entries||R:R;if(F&&(x=h(F.call(new t)))!==Object.prototype&&x.next&&(c(x,k,!0),r||a(x,p)||s(x,p,f)),w&&R&&"values"!==R.name&&(C=!0,E=function(){return R.call(this)}),r&&!y||!d&&!C&&O[p]||s(O,p,E),u[e]=E,u[k]=f,g)if(v={values:w?E:T("values"),keys:m?E:T("keys"),entries:S},y)for(b in v)b in O||o(O,b,v[b]);else n(n.P+n.F*(d||C),e,v);return v}},function(t,e,i){t.exports=!i(20)&&!i(31)(function(){return 7!=Object.defineProperty(i(58)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){t.exports=i(22)},function(t,e,i){var r=i(23),n=i(27),o=i(138)(!1),s=i(61)("IE_PROTO");t.exports=function(t,e){var i,a=n(t),u=0,l=[];for(i in a)i!=s&&r(a,i)&&l.push(i);for(;e.length>u;)r(a,i=e[u++])&&(~o(l,i)||l.push(i));return l}},function(t,e,i){var r=i(56),n=Math.min;t.exports=function(t){return t>0?n(r(t),9007199254740991):0}},function(t,e,i){var r=i(12).document;t.exports=r&&r.documentElement},function(t,e,i){var r=i(57);t.exports=function(t){return Object(r(t))}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var r=i(86),n=i(63).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},function(t,e,i){var r=i(66),n=i(45),o=i(27),s=i(59),a=i(23),u=i(84),l=Object.getOwnPropertyDescriptor;e.f=i(20)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return n(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,i){var r=i(67),n=i(10)("iterator"),o=i(26);t.exports=i(8).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||o[r(t)]}},function(t,e,i){var r=i(15),n=i(44),o=i(10)("species");t.exports=function(t,e){var i,s=r(t).constructor;return void 0===s||void 0==(i=r(s)[o])?e:n(i)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var r=i(15),n=i(19),o=i(69);t.exports=function(t,e){if(r(t),n(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(178),o=r(n),s=i(181),a=r(s);e.default=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var s,u=(0,a.default)(t);!(r=(s=u.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(51),s=i.n(o),a=i(29),u=function(){function t(){n()(this,t),this.reset()}return t.prototype.multiply=function(t){var e=void 0,i=void 0,r=void 0,n=void 0,o=void 0,s=void 0;return e=this.a*t.a+this.b*t.c,i=this.a*t.b+this.b*t.d,r=this.c*t.a+this.d*t.c,n=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,s=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=i,this.c=r,this.d=n,this.tx=o,this.ty=s,this},t.prototype.applyToVector=function(t){var e=t,i=e.x,r=e.y;return t=t.clone(),t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.tx,t},t.prototype.applyInverseToVector=function(t){var e=1/(this.a*this.d+this.c*-this.b),i=t,r=i.x,n=i.y;return t=t.clone(),t.x=this.d*e*r+-this.c*e*n+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*n+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e,t},t.prototype.rectangleToCoordinates=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.a(0,0),i=t.width*(1-e.x),r=t.width*-e.x,n=t.height*(1-e.y),o=t.height*-e.y,s=[];return s.push(new a.a(this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),s.push(new a.a(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),s.push(new a.a(this.a*i+this.c*n+this.tx,this.d*n+this.b*i+this.ty)),s.push(new a.a(this.a*r+this.c*n+this.tx,this.d*n+this.b*r+this.ty)),s},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.prototype.toArray=function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)},t.prototype.toString=function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"},s()(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=u},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(29),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n()(this,t),this.x=e,this.y=i,this.width=r,this.height=o}return t.prototype.set=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.equals=function(e,i,r,n){return e instanceof t?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&i===this.y&&r===this.width&&n===this.height},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this},t.prototype.getPosition=function(){return new o.a(this.x,this.y)},t.prototype.getSize=function(){return new o.a(this.width,this.height)},t.prototype.toString=function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"},t}();e.a=s},function(t,e,i){"use strict";var r=i(71),n=i.n(r),o=i(16);e.a={checkFramebufferStatus:function(t,e){var i,r=e.checkFramebufferStatus(e.FRAMEBUFFER),s=(i={},n()(i,e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),n()(i,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),n()(i,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),n()(i,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),i);r!==e.FRAMEBUFFER_COMPLETE&&o.a.warn(t,"Framebuffer incomplete: "+s[r])}}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):i(72),a=function(){function t(e){var i=this;n()(this,t),this._context=e,this._tracking=!1;var r=this;for(var o in e)!function(t){"function"==typeof e[t]?i[t]=function(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=e[t];if(!r._tracking)return a.apply(e,n);var u=s(),l=a.apply(e,n),c=s()-u,h={functionName:t,arguments:n,duration:c};return r._trackedCalls.push(h),l}:i._makePropertyWrapper(t)}(o)}return t.prototype._makePropertyWrapper=function(t){if(-1===["_context","_trackedCalls","_tracking"].indexOf(t)){var e=this._context;this.__defineGetter__(t,function(){return e[t]}),this.__defineSetter__(t,function(i){e[t]=i})}},t.prototype.startFrame=function(){this._tracking=!0,this._trackedCalls=[]},t.prototype.endFrame=function(){var t="Rendering";o.f.log(t,"Frame rendering results:"),o.f.log(t,"Context calls: "+this._trackedCalls.length);var e={};this._trackedCalls.forEach(function(t){var i=t.functionName,r=t.duration;e[i]=e[i]||{totalDuration:0,calls:0},e[i].totalDuration+=r,e[i].calls++});var i=[];for(var r in e){var n=e[r];n.averageDuration=n.totalDuration/n.calls,i.push({functionName:r,data:n})}i.sort(function(t,e){return e.data.totalDuration-t.data.totalDuration}),i=i.slice(0,3),i.forEach(function(e){o.f.log(t,e.functionName+": "+e.data.calls+" calls, "+e.data.totalDuration.toFixed(2)+"ms")})},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(189),h=function(t){function e(i,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n()(this,e);var a=s()(this,t.call(this));return a._options=c.a.defaults(o,{pixelRatio:1,transparent:!1,clearColor:l.b.BLACK,debug:!1}),a.setMaxListeners(0),a._width=i||800,a._height=r||600,a._dimensions=new l.k(a._width,a._height),a._maxTextureSize=null,a._pixelRatio=a._options.pixelRatio,a._clearColor=a._options.transparent?l.b.TRANSPARENT:a._options.clearColor||l.b.BLACK,a}return u()(e,t),e.prototype.setCanvas=function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new l.k(this._width,this._height))},e.prototype.getCanvas=function(){return this._canvas},e.prototype._onBeforeContext=function(){},e.prototype.resizeTo=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=t.clone()},e.prototype._createContext=function(){l.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")},e.prototype._setupContext=function(){l.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")},e.prototype.render=function(t){l.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")},e.prototype.getMaxDimensions=function(){return null},e.prototype.getContext=function(){return this._context},e.prototype.getWidth=function(){return this._dimensions.x},e.prototype.getHeight=function(){return this._dimensions.y},e.prototype.getDimensions=function(){return this._dimensions},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)},e.prototype.getMaxTextureSize=function(){return this._maxTextureSize},e.prototype.getFilterManager=function(){return this._filterManager},e.prototype.setFilterManager=function(t){this._filterManager=t},e.isSupported=function(){return!0},e.prototype.isOfType=function(t){return this._type===t},e.prototype.dispose=function(){l.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")},e}(l.d);e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=function(){function t(e){n()(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return t.prototype._onContextChange=function(){},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._renderer=null},t}();e.a=o},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(17),s=(i.n(o),function(){function t(e,i,r){n()(this,t),this.width=e,this.height=i,this.data=r}return t.fromNodeCanvasImage=function(e){var i=new o.Canvas(e.width,e.height),r=i.getContext("2d");r.drawImage(e,0,0);var n=r.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,n.data)},t}());e.a=s},function(t,i){t.exports=e},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(76),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._children=[],a._filters=[],a}return u()(e,t),e.prototype.addFilter=function(t){this._filters.push(t)},e.prototype.removeFilter=function(t){var e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)},e.prototype.setFilters=function(t){this._filters=t},e.prototype.addChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)},e.prototype.prependChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)},e.prototype.hasChild=function(t){return-1!==this._children.indexOf(t)},e.prototype.removeChild=function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):l.f.info(this.constructor.name,"Tried to remove a child that does not exist")},e.prototype.clearChildren=function(){this._children=[]},e.prototype.renderWebGL=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach(function(e){e.renderWebGL(t)}),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}},e.prototype._renderWebGL=function(t){},e.prototype.renderCanvas=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach(function(e){e.renderCanvas(t)}),this._filters&&this._filters.length&&e.popFilters()}},e.prototype._renderCanvas=function(t){},e.prototype.updateTransform=function(){t.prototype.updateTransform.call(this),this._children.forEach(function(t){t.updateTransform()})},e.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()},e.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()},e.prototype.getChildren=function(){return this._children},e.prototype.getFilters=function(){return this._filters},e.prototype.dispose=function(){},e}(c.a);e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(36),h=i(195),p=function(t){function e(i,r){n()(this,e);var o=s()(this,t.call(this));if(!(i instanceof c.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return o._uvs=new h.a,o._frame=r?r.clone():null,o._frameLocked=!!r,o._onBaseTextureLoaded=o._onBaseTextureLoaded.bind(o),o._onBaseTextureUpdated=o._onBaseTextureUpdated.bind(o),o._frame||(o._frame=new l.h(0,0,1,1)),o.setBaseTexture(i),o}return u()(e,t),e.fromImage=function(t){return new e(new c.a(t))},e.fromCanvas=function(t){return new e(new c.a(t))},e.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)},e.prototype._onBaseTextureUpdated=function(){var t=this._baseTexture.getFrame(),e=t.width,i=t.height;this._frame.width=e,this._frame.height=i,this.emit("update")},e.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame())},e.prototype.getBaseTexture=function(){return this._baseTexture},e.prototype.setBaseTexture=function(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){var e=t.getFrame(),i=e.width,r=e.height;this._frameLocked||(this._frame=new l.h(0,0,i,r)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t,this._updateUVs()},e.prototype.getWidth=function(){return this._frame.width},e.prototype.getHeight=function(){return this._frame.height},e.prototype.getUVs=function(){return this._uvs},e.prototype.getDimensions=function(){return new l.k(this._frame.width,this._frame.height)},e.prototype.dispose=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()},e}(l.d);e.a=p},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(51),s=i.n(o),a=i(33),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,_=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,y=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,v=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,x=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;n()(this,t),this.set(e,i,r,o,s,a,u,l,c,h,p,d,f,_,g,m,y,v,b,x)}return t.prototype.set=function(t,e,i,r,n,o,s,a,u,l,c,h,p,d,f,_,g,m,y,v){this.a=t,this.b=e,this.c=i,this.d=r,this.e=n,this.f=o,this.g=s,this.h=a,this.i=u,this.j=l,this.k=c,this.l=h,this.m=p,this.n=d,this.o=f,this.p=_,this.q=g,this.r=m,this.s=y,this.t=v},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0},t.prototype.apply=function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,i=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,r=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,n=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new a.a(e,i,r,n)},t.prototype.multiply=function(t){var e=void 0,i=void 0,r=void 0,n=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,c=void 0,h=void 0,p=void 0,d=void 0,f=void 0,_=void 0,g=void 0,m=void 0,y=void 0,v=void 0,b=void 0,x=t,T=this;return e=x.a*T.a+x.b*T.f+x.c*T.k+x.d*T.p,i=x.a*T.b+x.b*T.g+x.c*T.l+x.d*T.q,r=x.a*T.c+x.b*T.h+x.c*T.m+x.d*T.r,n=x.a*T.d+x.b*T.i+x.c*T.n+x.d*T.s,s=x.f*T.a+x.g*T.f+x.h*T.k+x.i*T.p,a=x.f*T.b+x.g*T.g+x.h*T.l+x.i*T.q,u=x.f*T.c+x.g*T.h+x.h*T.m+x.i*T.r,l=x.f*T.d+x.g*T.i+x.h*T.n+x.i*T.s,h=x.k*T.a+x.l*T.f+x.m*T.k+x.n*T.p,p=x.k*T.b+x.l*T.g+x.m*T.l+x.n*T.q,d=x.k*T.c+x.l*T.h+x.m*T.m+x.n*T.r,f=x.k*T.d+x.l*T.i+x.m*T.n+x.n*T.s,g=x.p*T.a+x.q*T.f+x.r*T.k+x.s*T.p,m=x.p*T.b+x.q*T.g+x.r*T.l+x.s*T.q,y=x.p*T.c+x.q*T.h+x.r*T.m+x.s*T.r,v=x.p*T.d+x.q*T.i+x.r*T.n+x.s*T.s,o=x.a*T.e+x.b*T.j+x.c*T.o+x.d*T.t+x.e,c=x.f*T.e+x.g*T.j+x.h*T.o+x.i*T.t+x.j,_=x.k*T.e+x.l*T.j+x.m*T.o+x.n*T.t+x.o,b=x.p*T.e+x.q*T.j+x.r*T.o+x.s*T.t+x.t,this.a=e,this.b=i,this.c=r,this.d=n,this.e=o,this.f=s,this.g=a,this.h=u,this.i=l,this.j=c,this.k=h,this.l=p,this.m=d,this.n=f,this.o=_,this.p=g,this.q=m,this.r=y,this.s=v,this.t=b,this},t.prototype.clone=function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e},t.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t},t.prototype.getOffsets=function(){return[this.e,this.j,this.o,this.t]},t.prototype.toString=function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"},t.prototype.toArray=function(){var t=this;return"abcdefghijklmnopqrst".split("").map(function(e){return t[e]})},t.createBrightnessMatrix=function(e){var i=new t;return i.e=e,i.j=e,i.o=e,i},t.createContrastMatrix=function(e){var i=new t,r=(1-e)/2;return i.a=i.g=i.m=e,i.e=i.j=i.o=r,i},t.createSaturationMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=new t,r=1-e,n=.213*r,o=.715*r,s=.072*r;return i.a=n+e,i.b=o,i.c=s,i.f=n,i.g=o+e,i.h=s,i.k=n,i.l=o,i.m=s+e,i},t.createExposureMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Math.pow(2,e);return new t(i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0)},t.createLinearMatrix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return r.a=r.g=r.m=e,r.e=r.j=r.o=i,r},s()(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e.a=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(29),n=i(100),o=i(99),s=i(109);i.d(e,"Vector2",function(){return r.a}),i.d(e,"Rectangle",function(){return n.a}),i.d(e,"Matrix",function(){return o.a}),i.d(e,"ColorMatrix",function(){return s.a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(217);i.d(e,"ExifOrientationOperation",function(){return r.a})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(24),c=i(25),h=i(16),p=i(50),d=i(38),f=i(113),_=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n()(this,e);var o=s()(this,t.call(this,r,{enabled:{type:l.OptionType.BOOLEAN,default:!0,serializable:!1}}));return o._sdk=i,o._cacheEnabled=!1,o._dirtiness={},o._sprite=new p.a.Sprite,o._container=new p.a.Container,o._container.addChild(o._sprite),o}return u()(e,t),e.prototype._onOptionsChange=function(){this.setDirty(!0)},e.prototype.render=function(t){var e=this;if(!this.getEnabled())return h.a.info(this.constructor.name,"Disabled - skipping"),c.a.resolve(t);if(!this._renderTexture){var i=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new p.a.RenderTexture(this._sdk.getRenderer(),i.width,i.height)}var r=this._sdk.getRenderer(),n=void 0,o=void 0;if(h.a.canLog("info")&&(o=new f.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(r)){this._sprite.setTexture(t);var s=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(s),this._renderTexture.clear(),n=this._render(t).then(function(){return e.setDirtyForRenderer(!1,r),e._renderTexture})}else h.a.info(this.constructor.name,"Rendering from cache"),n=c.a.resolve(this._renderTexture);return n.then(function(t){return o&&o.stop(),t})},e.prototype._render=function(t){return(this._sdk.getRenderer().isOfType(l.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)},e.prototype._renderWebGL=function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")},e.prototype._renderCanvas=function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")},e.prototype.getNewDimensions=function(t){return t.clone()},e.prototype.reset=function(){this._dirty=!0,this._glslPrograms={}},e.prototype.isDirtyForRenderer=function(t){var e=this._dirtiness[t.id];return void 0===e||e},e.prototype.setDirtyForRenderer=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in this._dirtiness)this.setDirtyForRenderer(t,{id:i},e)},e.prototype.getSDK=function(){return this._sdk},e.prototype.getInputDimensions=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this._sdk.getInputDimensions();e&&i.multiply(this._sdk.getZoom()).floor();var r=void 0;return this._sdk.getOperationsStack().forEach(function(e){if(!r)return e===t?void(r=!0):void(i=e.getNewDimensions(i))}),i.floor()},e.prototype.clone=function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())},e.prototype.disposeRenderTextures=function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null},e.prototype.dispose=function(){this.disposeRenderTextures(),this._sprite.dispose()},e}(d.a);_.identifier=null,e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(28),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):i(72),a=function(){function t(e,i){n()(this,t),this._tag=e,this._name=i,this._start=s()}return t.prototype.stop=function(){var t=s(),e=t-this._start,i=Math.round(1e3/e);o.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+i+" FPS)")},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(28),c=i(25),h=i(34),p=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n()(this,e);var r=s()(this,t.call(this));return r._onOperationUpdate=r._onOperationUpdate.bind(r),r._cacheEnabled=!0,r._stack=i,r._stack.forEach(function(t){t.on("update",r._onOperationUpdate)}),r}return u()(e,t),e.prototype.clear=function(){var t=this;this.forEach(function(e){return t.remove(e)}),this._stack=[]},e.prototype.hasChanges=function(){return this._stack.filter(function(t){return!!t}).some(function(t){return t.hasChanges()})},e.prototype._onOperationUpdate=function(t,e){this.emit(l.Constants.Events.OPERATION_UPDATED,t,e)},e.prototype.enableCache=function(){this._cacheEnabled=!0},e.prototype.disableCache=function(){this._cacheEnabled=!1},e.prototype.forEach=function(t){return this._stack.filter(function(t){return!!t}).forEach(t)},e.prototype.render=function(t,e){var i=this,r=e,n=this._stack.filter(function(t){return!!t}).filter(function(t){return t.getEnabled()});n.reverse();var o=n.filter(function(e){return!e.isDirtyForRenderer(t.getRenderer())})[0],s=n.indexOf(o);n.reverse();var a=0;-1!==s&&(a=n.length-s-1);for(var u=0;u<a;u++)l.Log.info(this.constructor.name,"Skipping "+n[u].constructor.name);for(var h=c.a.resolve(r),p=a;p<n.length;p++)!function(t){var e=n[t],r=void 0,o=void 0;h=h.then(function(t){return e.render(t).then(function(t){return r&&t!==r&&!i._cacheEnabled&&o.disposeRenderTextures(),r=t,o=e,t})})}(p);return h},e.prototype.validateSettings=function(){return c.a.all(this._stack.filter(function(t){return!!t}).map(function(t){return t.validateSettings()}))},e.prototype.setAllToDirty=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(e){return e.setDirty(!0,t)})},e.prototype.updateDirtinessForRenderer=function(t){for(var e=!1,i=0;i<this._stack.length;i++){var r=this._stack[i];r&&(r.isDirtyForRenderer(t)&&(e=!0),e&&r.setDirtyForRenderer(!0,t))}},e.prototype.push=function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)},e.prototype.unshift=function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)},e.prototype.clone=function(){return new e(this._stack.slice(0))},e.prototype.get=function(t){return this._stack[t]},e.prototype.set=function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)},e.prototype.remove=function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))},e.prototype.removeAt=function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]},e.prototype.getStack=function(){return this._stack},e.prototype.dispose=function(){this.forEach(function(t){t.dispose()})},e}(h.a);e.a=p},function(t,e){t.exports={name:"photoeditorsdk",version:"4.2.3",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (9elements GmbH) <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",bin:{pesdk:"./bin/pesdk.js","pesdk-convert-serialization":"./bin/pesdk-convert-serialization.js"},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack --progress --colors && cross-env npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*","release:production":"cross-env ENV=production PESDK_LINT=true npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_LINT=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui && npm run test:ui:react-ui && npm run test:desktop-ui && npm run server","test:ui":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/ui","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","deploy:develop":"cross-env rsync --delete --rsh=ssh -av $TRAVIS_BUILD_DIR/build/photoeditorsdk/* flateric@static.photoeditorsdk.com:/home/flateric/static.photoeditorsdk.com/demo-dev/","deploy:master":"cross-env rsync --delete --rsh=ssh -av $TRAVIS_BUILD_DIR/build//photoeditorsdk/* flateric@static.photoeditorsdk.com:/home/flateric/static.photoeditorsdk.com/demo/",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css",dist:"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.min.*'  | sed 's/.min././' | xargs -n1 rm && npm run jsdoc:server"},devDependencies:{ajv:"^5.5.1","babel-core":"^6.26.0","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chromedriver:"^2.33.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.3.0","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.5.5","json-loader":"^0.5.7",lodash:"^4.17.4",minimist:"^1.2.0",mkdirp:"^0.5.1",mocha:"^3.5.3",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.7.2","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0","preprocess-loader":"^0.2.2","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.2.0","react-dom":"^16.2.0",rembrandt:"^0.1.3",rimraf:"^2.6.2","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.0","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^0.4.6","vinyl-source-stream":"0.1.1",webpack:"^3.10.0","webpack-notifier":"^1.2.1",adonis:"git://github.com/imgly/adonis.git#v1.0.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{canvas:"git://github.com/imgly/node-canvas.git#v2.0.0-alpha.9",gl:"^4.0.4",request:"^2.83.0"}}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),l.Math.ColorMatrix),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(228),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options,u=a.colorMatrix,c=a.gamma,h=a.shadows,p=a.highlights,d=1!==c,f=0!==h||0!==p,_=new l.Color(0,0,0,0),g=0;g<r.width*r.height;g++){var m=4*g;if(_.r=s.data[m]/255,_.g=s.data[m+1]/255,_.b=s.data[m+2]/255,d&&(_.r=Math.pow(_.r,1/Math.max(c,1e-7)),_.g=Math.pow(_.g,1/Math.max(c,1e-7)),_.b=Math.pow(_.b,1/Math.max(c,1e-7))),f){var y=.2125*_.r+.7154*_.g+.0721*_.b,v=h>=0?l.Utils.clamp(Math.pow(y,1/(h+1))+-.76*Math.pow(y,2/(h+1))-y,0,Math.max(h,1)):-l.Utils.clamp(Math.pow(y,1/(1-h))+-.76*Math.pow(y,2/(1-h))-y,0,Math.max(-h,1)),b=p<0?l.Utils.clamp(1-Math.pow(1-y,1/(1-p))- -.8*Math.pow(1-y,2/(1-p))-y,-1,0):-l.Utils.clamp(1-Math.pow(1-y,1/(1+p))- -.8*Math.pow(1-y,2/(1+p))-y,-1,0),x=v*y*y,T=v-x,k=y+x+b;_.r=l.Utils.clamp(k*((_.r+T)/Math.max(y,1e-7)),0,1),_.g=l.Utils.clamp(k*((_.g+T)/Math.max(y,1e-7)),0,1),_.b=l.Utils.clamp(k*((_.b+T)/Math.max(y,1e-7)),0,1)}_=u.apply(_),s.data[m]=255*_.r,s.data[m+1]=255*_.g,s.data[m+2]=255*_.b}o.putImageData(s,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={gamma:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.FLOAT},shadows:{type:l.OptionType.NUMBER,default:0,uniformType:l.UniformType.FLOAT},highlights:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.FLOAT},colorMatrix:{type:l.OptionType.COLOR_MATRIX,default:new c,uniformType:l.UniformType.MAT4},colorOffset:{type:l.OptionType.ARRAY,default:[],uniformType:l.UniformType.FLOAT4}},e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(41)),h=i.n(c),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(232),u._lastBlurRadius=null,u._lastDimensions=new p(0,0),u._blurredRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),n=!this._lastDimensions.equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),i.setPixelRatio(e.getPixelRatio()),i.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||n)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),i.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),i=t.getContext(),r=new p(e.width,e.height),n=i.getImageData(0,0,e.width,e.height);h.a.stackBlurCanvasRGBA(n,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(n,0,0)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._blurredRenderTarget.dispose()},e}(l.Engine.Filter);d.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:30,uniformType:l.UniformType.FLOAT},delta:{type:l.OptionType.VECTOR2,default:new p(1,1),uniformType:l.UniformType.FLOAT2},texSize:{type:l.OptionType.VECTOR2,default:new p(100,100),uniformType:l.UniformType.FLOAT2}},e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(4)),h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype.render=function(t,e,i){return l.Promise.resolve(i)},e.prototype.hasChanges=function(){return!1},e}(c.a);h.isIdentity=!0,h.identifier="identity",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(252),u}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options.lookupTableData,u=0;u<r.width*r.height;u++){var l=4*u,c=s.data[l];s.data[l]=a[4*c];var h=s.data[l+1];s.data[l+1]=a[1+4*h];var p=s.data[l+2];s.data[l+2]=a[2+4*p]}o.putImageData(s,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={lookupTable:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.INT},lookupTableData:{type:l.OptionType.ARRAY,default:[]}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h({lookupTable:a._options.textureGLUnit}),a._textures={},a._renderers={},a}return u()(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(l.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(l.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)},e.prototype._updateWebGLTexture=function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),i=t.getRenderer(),r=i.id;this._renderers[r]=i,this._textures[r]||(this._textures[r]=new l.Engine.BaseTexture);var n=this._textures[r],o=new l.Engine.PixelArrayImage(256,1,e);n.setSource(o),n.setGLUnit(this._options.textureGLUnit),i.isOfType(l.RendererType.WEBGL)&&i.updateTexture(n)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data},e}(c.a);e.a=p},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(309)),h=i(55),p=i(121),d=i(311),f=l.Math.Vector2,_=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._persistedPaths=[],a._outputCanvasDirty=!0,a._outputCanvas=l.Utils.createCanvas(),a._outputContext=a._outputCanvas.getContext("2d"),a._persistCanvas=l.Utils.createCanvas(),a._persistContext=a._persistCanvas.getContext("2d"),a._nextCanvas=l.Utils.createCanvas(),a._texture=l.Engine.Texture.fromCanvas(a._outputCanvas),a._sprite.setTexture(a._texture),a._onPathUpdate=a._onPathUpdate.bind(a),a}return u()(e,t),e.prototype.applyFlip=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var i=e.getPosition().clone();switch(t){case"horizontal":i.x=1-i.x;break;case"vertical":i.y=1-i.y}e.setPosition(i)}),e.setDirty(!0)}),this._reset()},e.prototype.applyRotation=function(t){this._options.paths.forEach(function(e){e.forEachControlPoint(function(e){var i=e.getPosition().clone();90===t?(i.flip(),i.x=1-i.x):-90===t&&(i.flip(),i.y=1-i.y),e.setPosition(i)}),e.setDirty(!0)}),this._reset()},e.prototype.applyTransform=function(t){var e=null;this._options.paths.forEach(function(i){i.forEachControlPoint(function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))});var r=i.getBrush();r!==e&&(r.setSize(t.applyToRelativeSize(r.getSize())),e=r),i.setDirty(!0)}),this._reset()},e.prototype.clearCanvas=function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,i=t.height;this._outputContext.clearRect(0,0,e,i)}},e.prototype.clearPersistCanvas=function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,i=t.height;this._persistContext.clearRect(0,0,e,i)}},e.prototype.serializeOptions=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.prototype.serializeOptions.call(this,e,i);return e||(r.type="brush"),r},e.prototype.serializeOption=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map(function(t){return t.serializeOptions(void 0,i)}):t.prototype.serializeOption.call(this,e,i)},e.prototype.createPath=function(t){var e=new c.a(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e},e.prototype._onPathUpdate=function(){this._operation.setDirty(!0),this.setDirty(!0)},e.prototype._onPathPersist=function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)},e.prototype._getTexture=function(){return this._texture},e.prototype.setDirtyForRenderer=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.prototype.setDirtyForRenderer.call(this,e,i,r),e&&r&&(this._persistedPaths=[],this._options.paths.forEach(function(t){t.setDirty(!0)}))},e.prototype.setDirty=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[i],e)},e.prototype.render=function(t){var e=this,i=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(i)&&(l.Utils.ensureCanvasDimensions(this._outputCanvas,t),l.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach(function(i){i.render(t),i.getClosed()&&-1===e._persistedPaths.indexOf(i)&&e._onPathPersist(i)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)}),this.setDirtyForRenderer(!1,i))},e.prototype.update=function(e,i){i&&(l.Utils.ensureCanvasDimensions(this._outputCanvas,i),l.Utils.ensureCanvasDimensions(this._persistCanvas,i),this._texture.getBaseTexture().update()),this.render(i);var r=e.getRenderer();r.isOfType(l.RendererType.WEBGL)&&r.updateTexture(this._texture.getBaseTexture()),t.prototype.update.call(this,e,i)},e.prototype._reset=function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()},e.prototype.getCanvas=function(){return this._outputCanvas},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._texture.getBaseTexture().dispose()},e}(h.a);_.prototype.availableOptions={id:{type:l.OptionType.STRING,default:function(){return l.Utils.getUUID()}},position:{type:l.OptionType.VECTOR2,default:new f(0,0)},scale:{type:l.OptionType.VECTOR2,default:new f(1,1)},anchor:{type:l.OptionType.VECTOR2,default:new f(0,0)},pivot:{type:l.OptionType.VECTOR2,default:new f(0,0)},rotation:{type:l.OptionType.NUMBER,default:0},paths:{type:l.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map(function(t){if(t instanceof c.a)return t;var i=t.brush,r=t.closed,n=new c.a(e._operation,{brush:i,closed:r},e._nextCanvas);return t.controlPoints.forEach(function(t){n.addControlPoint(t)}),n}),this._reset(),t}}},_.type="brush",_.Brush=p.a,_.Path=c.a,_.Brushes={RadialBrush:d.a},e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),l.Math.Vector2),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._lastOptions={},a._lastInputDimensions=new c(0,0),a._brush=null,a}return u()(e,t),e.prototype.getBrushImage=function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,i=e.image,r=e.size;i.width=i.height=Math.ceil(r*t.min());var n=l.Utils.createCanvas();n.width=i.width,n.height=i.height;var o=n.getContext("2d");o.drawImage(i,0,0,n.width,n.height);var s=this._tintImageData(o.getImageData(0,0,n.width,n.height),n.width,n.height);return o.putImageData(s,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=n,this._lastInputDimensions=t.clone(),n},e.prototype._tintImageData=function(t){for(var e=this._options.color,i=0;i<t.data.length;i+=4)t.data[i]+=(255*e.r-t.data[i])*e.a,t.data[i+1]+=(255*e.g-t.data[i+1])*e.a,t.data[i+2]+=(255*e.b-t.data[i+2])*e.a;return t},e.prototype.clone=function(){return new(0,this.constructor)(this._options)},e}(l.Configurable);e.a=h,h.prototype.availableOptions={identifier:{type:l.OptionType.STRING},image:{type:l.OptionType.IMAGE},size:{type:l.OptionType.NUMBER,default:.05},color:{type:l.OptionType.COLOR,default:l.Color.RED}}},function(t,e,i){"use strict";e.a={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_analog",defaultName:"Analog",filters:[{identifier:"imgly_lut_cool",defaultName:"Cool",lutImage:"filters/imgly_lut_cool_5_5_128.png"},{identifier:"imgly_lut_blues",defaultName:"Blues",lutImage:"filters/imgly_lut_blues_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Blue Shadows",lutImage:"filters/imgly_lut_blueshadows_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"KDynamic",lutImage:"filters/imgly_lut_kdynamic_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"}]},{identifier:"imgly_filters_bw",defaultName:"Black & White",filters:[{identifier:"imgly_lut_sin",defaultName:"Sin",lutImage:"filters/imgly_lut_sin_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"B & W",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Plate",lutImage:"filters/imgly_lut_plate_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"X400",lutImage:"filters/imgly_lut_x400_5_5_128.png"}]},{identifier:"imgly_filters_retro",defaultName:"Retro",filters:[{identifier:"imgly_lut_celsius",defaultName:"Celsius",lutImage:"filters/imgly_lut_celsius_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_k2",defaultName:"K2",lutImage:"filters/imgly_lut_k2_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia High",lutImage:"filters/imgly_lut_sepiahigh_5_5_128.png"},{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Eighties",lutImage:"filters/imgly_lut_eighties_5_5_128.png"},{identifier:"imgly_lut_elder",defaultName:"Elder",lutImage:"filters/imgly_lut_elder_5_5_128.png"},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Orchid",lutImage:"filters/imgly_lut_orchid_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"}]},{identifier:"imgly_filters_special",defaultName:"Special",filters:[{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Cotton Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"High Contrast",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_nogreen",defaultName:"No Green",lutImage:"filters/imgly_lut_nogreen_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Pola 669",lutImage:"filters/imgly_lut_pola669_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"}]},{identifier:"imgly_filters_summer",defaultName:"Summer",filters:[{identifier:"imgly_lut_texas",defaultName:"Texas",lutImage:"filters/imgly_lut_texas_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_chest",defaultName:"Chest",lutImage:"filters/imgly_lut_chest_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Evening",lutImage:"filters/imgly_lut_evening_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Fall",lutImage:"filters/imgly_lut_fall_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Front",lutImage:"filters/imgly_lut_front_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_sunset",defaultName:"Sunset",lutImage:"filters/imgly_lut_sunset_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"}]},{identifier:"imgly_filters_winter",defaultName:"Winter",filters:[{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_bleached",defaultName:"Bleached",lutImage:"filters/imgly_lut_bleached_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Bleached Blue",lutImage:"filters/imgly_lut_bleachedblue_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Breeze",lutImage:"filters/imgly_lut_breeze_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lenin",lutImage:"filters/imgly_lut_lenin_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_winter",defaultName:"Winter",lutImage:"filters/imgly_lut_winter_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"],width:62,height:64}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"],width:62,height:59}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"],width:60,height:63}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"],width:63,height:55}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"],width:62,height:61}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"],width:64,height:60}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"],width:64,height:60}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"],width:64,height:64}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"],width:64,height:62}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"],width:62,height:54}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"],width:64,height:58}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"],width:63,height:41}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"],width:65,height:47}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"],width:62,height:64}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"],width:62,height:62}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"],width:62,height:59}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"],width:64,height:64}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"],width:62,height:60}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"],width:62,height:58}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"],width:62,height:60}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=i(326),a=i(16),u=i(327),l=function(){function t(e,i){n()(this,t),this._ui=e,this._options=i,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return t.prototype._initFonts=function(){var t=this,e=this._options,i=e.fonts,r=e.replaceFonts,n=e.availableVariations,l=o.c.DEFAULTS.FONTS;l=r?i:l.concat(i||[]);var c=void 0;l=l.map(function(e){var i=e.fontFamily,r=e.variations;if(n&&(r=r.filter(function(t){return-1!==n.indexOf(t.identifier)})),0===r.length)return null;var o=new s.a({fontFamily:i});return r=r.map(function(e){var r=new u.a(e);return r.setFontFamily(i),r.setFont(o),e.default&&!c&&(c=r),null==r.getTextMetrics()&&a.a.warn("Missing font metrics for "+r.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),t._variationsByIdentifier[r.getIdentifier()]=r,r}),o.setVariations(r),t._fontsByFontFamily[i]=o,o}).filter(function(t){return t}),c||(c=l[0].getVariations()[0]),this._defaultVariation=c,this._fonts=l},t.prototype.getFonts=function(){return this._fonts},t.prototype.getFontByFontFamily=function(t){return this._fontsByFontFamily[t]},t.prototype.getVariationByIdentifier=function(t){return this._variationsByIdentifier[t]},t.prototype.getDefaultVariation=function(){return this._defaultVariation},t}();e.a=l},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(7),u=2*Math.PI,l=function(){function t(e){s()(this,t),this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}return t.prototype.serialize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=a.k.defaults(t,{image:!0});var e={version:this.constructor.version};return this._serializeInputImage(e).then(this._serializeOperations)},t.prototype._serializeInputImage=function(t){var e=this._editor.getImage(),i=e.width,r=e.height;if(!this._options.image)return t.inputImage={width:i,height:r},n.a.resolve(t);var o=a.k.createCanvas();o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0);var s=o.toDataURL(a.e.PNG);return t.inputImage={type:a.e.PNG,data:s.replace(/^data:image\/(.*?);base64,/,""),width:i,height:r},n.a.resolve(t)},t.prototype._serializeOperations=function(t){var e=this,i=[];return this._editor.operations.getStack().forEach(function(t){var r=e._serializeOperation(t,i);r&&i.push(r)}),t.operations=i.filter(function(t){return t}),n.a.resolve(t)},t.prototype._serializeOperation=function(t,e){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,e);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:a.g.warn("Unable to serialize operation of type "+t.constructor.identifier)}},t.prototype._serializeTransformOperation=function(t){var e=t.serializeOptions(["start","end","rotation"],!0);return e.rotation=(e.rotation+u)%u,{type:"crop",options:e}},t.prototype._serializeOrientationOperation=function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}},t.prototype._serializeFilterOperation=function(t){return"identity"===t.getIdentifier()?null:{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}},t.prototype._serializeAdjustmentsOperation=function(t){var e=t.availableOptions,i=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],r={};return i.forEach(function(i){var n=e[i],o=t.getOption(i),s=n.minValue,a=n.midValue,u=n.maxValue;r[i]=o<=a?(o-s)/(a-s)-1:(o-a)/(u-a)}),{type:"adjustments",options:r}},t.prototype._serializeSpriteOperation=function(t,e){var i=this,r=e.filter(function(t){return"sprite"===t.type}),n=void 0,o=!0;if(r.length?(n=r.pop(),o=!1):n={type:"sprite",options:{sprites:[]}},t.getSprites().forEach(function(e){var r=null;e instanceof t.constructor.StickerSprite?r=i._serializeSticker(t,e):e instanceof t.constructor.TextSprite?r=i._serializeText(t,e):e instanceof t.constructor.BrushSprite&&(r=i._serializeBrush(t,e)),r&&n.options.sprites.push(r)}),o)return n},t.prototype._serializeSticker=function(t,e){var i=e.getAdjustments(),r=e.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);r.name=r.identifier,delete r.identifier,r.rotation=(r.rotation+u)%u;var n=i.availableOptions;return r.adjustments={brightness:i.getBrightness()-n.brightness.default,saturation:i.getSaturation()-n.saturation.default,contrast:i.getContrast()-n.contrast.default},{type:"sticker",options:r}},t.prototype._serializeText=function(t,e){var i=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return i.rotation=(i.rotation+u)%u,{type:"text",options:i}},t.prototype._serializeBrush=function(t,e){var i=this;return{type:"brush",options:{paths:e.getPaths().map(function(t){return i._serializePath(t)})}}},t.prototype._serializePath=function(t){var e=t.getBrush().serializeOptions(["color","size"],!0);return e.points=t.getControlPoints().map(function(t){return t.getPosition().toObject()}),e},t.prototype._serializeRadialFocusOperation=function(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}},t.prototype._serializeLinearFocusOperation=function(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}},t.prototype._getInputDimensionsForOperation=function(t){var e=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(r){r===t&&(e=!0),e||(i=r.getNewDimensions(i))}),i},t}();e.a=l,l.version="1.0.0"},function(t,e,i){"use strict";var r=i(1),n=i.n(r),o=i(2),s=i.n(o),a=i(9),u=i.n(a),l=i(0),c=i.n(l),h=i(7),p=i(331),d=i(81),f=i(332),_=i(123),g=i(82),m=void 0;void 0!==h.j.Operations.SpriteOperation&&(m=h.j.Operations.SpriteOperation.BrushSprite);var y=function(){function t(e,i){c()(this,t),this._editor=e,this._ui=this._editor.getUI(),this._data=i,this._filterManager=new p.a(this._ui,this._getOptions("filter")),this._stickerManager=new d.a(this._ui,this._getOptions("sticker")),this._brushManager=new f.a(this._ui,this._getOptions("brush")),this._fontManager=new _.a(this._ui,this._getOptions("text"))}return t.prototype._getOptions=function(t){var e=this._editor.controls,i={};e&&e.get(t)&&(i=e.get(t).defaultOptions);var r=this._editor.getOptions();return h.k.extend({},r.editor.controlsOptions[t]||{},i)},t.prototype.deserialize=function(){var t=this;return this._validateVersion().then(function(){return t._deserializeInputImage()}).then(function(){return t._deserializeOperations()})},t.prototype._validateVersion=function(){return this._data.version!==this.constructor.version?u.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):u.a.resolve()},t.prototype._deserializeInputImage=function(){var t=this;return new u.a(function(e,i){var r=t._data.inputImage,n=r.data,o=r.type;if(n&&o){var s=new window.Image;s.addEventListener("load",function(){t._editor.setImage(s),e()}),s.src="data:"+o+";base64,"+n}else e()})},t.prototype._deserializeOperations=function(){var t=this;this._operationsData={},this._data.operations.forEach(function(e){t._operationsData[e.type]=e});var e=this._data.operations.map(function(e){return t._deserializeOperation(e)});return u.a.all(e)},t.prototype._deserializeOperation=function(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}},t.prototype._deserializeCropOperation=function(t){var e=t.options,i=e.rotation,r=h.n.fromObject(e.start),n=h.n.fromObject(e.end);i>Math.PI&&(i-=2*Math.PI);var o={start:r,end:n};void 0!==i&&(o.rotation=i);var s=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(s,o),s.set(o),u.a.resolve(s)},t.prototype._deserializeOrientationOperation=function(t){var e=t.options,i=this._editor.operations.getOrCreate("orientation");i&&i.set(e)},t.prototype._deserializeFilterOperation=function(t){var e=this,i=t.options;return this._filterManager.getFilterByIdentifier(i.name)?this._filterManager.instantiateFilterWithIdentifier(i.name).then(function(t){e._editor.operations.getOrCreate("filter").set({identifier:i.name,filter:t,intensity:i.intensity})}):(h.g.warn("Deserializer","Unknown filter `"+i.name+"`"),u.a.resolve())},t.prototype._deserializeAdjustmentsOperation=function(t){var e=h.j.Operations.AdjustmentsOperation,i=t.options,r=["brightness","saturation","contrast","exposure","shadows","highlights","clarity"],n={};return r.forEach(function(t){if(void 0!==i[t]){var r=e.prototype.availableOptions[t],o=r.minValue,s=r.midValue,a=r.maxValue,u=i[t];u=u<0?s+(s-o)*u:s+(a-s)*u,n[t]=u}}),u.a.resolve(this._editor.operations.getOrCreate("adjustments",n))},t.prototype._deserializeSpriteOperation=function(t){var e=this,i=t.options,r=this._editor.operations.getOrCreate("sprite");if(!r)return u.a.resolve();var n=i.sprites.map(function(t){return e._deserializeSprite(r,t)}).filter(function(t){return t});return u.a.all(n).then(function(t){r.setSprites(t.filter(function(t){return t}))})},t.prototype._deserializeSprite=function(t,e){switch(e.type){case"sticker":return this._deserializeSticker(t,e);case"text":return this._deserializeText(t,e);case"brush":return this._deserializeBrush(t,e)}},t.prototype._deserializeSticker=function(t,e){var i=this,r=h.j.Operations.SpriteOperation,n=e.options,o=this._stickerManager.getStickerByIdentifier(n.name),s=this._stickerManager.getURLForSticker(o);return o?new u.a(function(e,o){var a=new window.Image;a.addEventListener("load",function(){var i=r.StickerSprite.prototype.availableOptions.adjustments.structure,o=n.rotation,s=n.flipHorizontally,u=n.flipVertically,l={identifier:n.name,image:a,position:h.n.fromObject(n.position),dimensions:h.n.fromObject(n.dimensions),rotation:o,flipHorizontally:s,flipVertically:u,adjustments:{}};void 0!==n.adjustments&&["brightness","contrast","saturation"].forEach(function(t){void 0!==n.adjustments[t]&&(l.adjustments[t]=n.adjustments[t]+i[t].default)}),e(t.createSticker(l))}),a.crossOrigin="Anonymous",a.src=i._editor.getUI().getAssetPath(s)}):(h.g.warn("Deserializer","Unknown sticker '"+n.name+"'. Skipping sprite."),u.a.resolve())},t.prototype._deserializeText=function(t,e){var i=e.options,r=i.fontSize,n=i.lineHeight,o=i.fontFamily,s=i.fontWeight,a=i.alignment,u=i.rotation,l=i.maxWidth,c=i.color,p=i.backgroundColor,d=new g.a(this._ui),f=this._fontManager.getFontByFontFamily(o);return f||(f=this._fontManager.getDefaultFont()),d.setFonts([f]),d.load().then(function(){return t.createText({fontSize:r,lineHeight:n,fontFamily:o,fontWeight:s,alignment:a,rotation:u,maxWidth:l,text:i.text,color:h.b.fromArray(c),backgroundColor:h.b.fromArray(p),position:h.n.fromObject(i.position)})})},t.prototype._deserializeBrush=function(t,e){var i=this,r=e.options,n=r.paths,o=t.createBrush();return n.forEach(function(t){i._deserializeBrushPath(o,t)}),u.a.resolve(o)},t.prototype._deserializeBrushPath=function(t,e){var i=e.points,r=this._createBrushForPath(e),n=t.createPath(r);n.setClosed(!0),i.forEach(function(t){n.addControlPoint(h.n.fromObject(t))})},t.prototype._createBrushForPath=function(t){var e=t.color,i=t.size,r=h.b.fromArray(e),o={color:r,size:i},a=this._brushManager.getFirstBrush();if(a.prototype&&a.prototype instanceof m){return new a(o)}var u=h.k.extend({},a);delete u.image;var l=function(t){function e(){return c()(this,e),n()(this,t.apply(this,arguments))}return s()(e,t),e}(m);return l.identifier=a.identifier,new l(h.k.extend({},u,o))},t.prototype._deserializeFocusOperation=function(t){var e=t.options.options;switch(t.options.type){case"radial":var i=e.position,r=e.radius,n=e.gradientRadius,o=e.blurRadius;this._editor.operations.getOrCreate("radial-focus",{position:h.n.fromObject(i),radius:r,gradientRadius:n,blurRadius:o});break;case"linear":var s=e.start,a=e.end,u=e.size,l=e.gradientSize,c=e.blurRadius;this._editor.operations.getOrCreate("mirrored-focus",{start:h.n.fromObject(s),end:h.n.fromObject(a),size:u,gradientSize:l,blurRadius:c})}},t.prototype._getInputDimensionsForOperation=function(t){var e=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(r){r===t&&(e=!0),e||(i=r.getNewDimensions(i))}),i},t}();e.a=y,y.version="1.0.0"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(124),c=2*Math.PI,h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._serializeTransformOperation=function(t){var e=t.serializeOptions(["start","end","rotation","textureScale"],!0);return e.rotation=(e.rotation+c)%c,1!==e.textureScale&&(e.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete e.textureScale,{type:"crop",options:e}},e}(l.a);e.a=h,h.version="1.0.1"},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(7),p=i(125),d=function(t){function e(){return s()(this,e),u()(this,t.apply(this,arguments))}return c()(e,t),e.prototype._deserializeOperation=function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):t.prototype._deserializeOperation.call(this,e)},e.prototype._deserializeCropOperation=function(t){var e=t.options,i=e.rotation,r=h.n.fromObject(e.start),o=h.n.fromObject(e.end),s=e.dimensions?h.n.fromObject(e.dimensions):null;i>Math.PI&&(i-=2*Math.PI);var a={start:r,end:o};void 0!==i&&(a.rotation=i);var u=this._editor.operations.getOrCreate("transform");if(!u)return n.a.resolve();if(this._editor.broadcastTransform(u,a),u.set(a),s){var l=o.clone().subtract(r),c=u.getInputDimensions(!1).multiply(l);u.setTextureScale(s.x/c.x)}return n.a.resolve(u)},e}(p.a);e.a=d,d.version="1.0.1"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(126),c=i(129),h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._serializeSticker=function(e,i){var r=e.getInputDimensions(!1),n=t.prototype._serializeSticker.call(this,e,i);return"none"!==i.getTintMode()&&(n.options.tintColor=i.serializeOption("tintColor",!0)),n.options.dimensions=i.getDimensions().clone().divide(r.min()).toObject(),n.options.identifier=n.options.name,delete n.options.name,n},e.prototype._serializePath=function(e){var i=t.prototype._serializePath.call(this,e),r=e.getBrush();return r.hasOption("hardness")&&(i.hardness=r.getOption("hardness")),i},e.prototype._serializeOperation=function(e,i){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,i),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,i),null):t.prototype._serializeOperation.call(this,e,i)},e.prototype._serializeFrameOperation=function(t,e){var i=e.filter(function(t){return"sprite"===t.type}),r=void 0;i.length?r=i.pop():(r={type:"sprite",options:{sprites:[]}},e.push(r)),r.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})},e.prototype._serializeOverlayOperation=function(t,e){if(t.getIdentifier()){var i=e.filter(function(t){return"sprite"===t.type}),r=void 0;i.length?r=i.pop():(r={type:"sprite",options:{sprites:[]}},e.push(r)),r.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:c.a[t.getBlendMode()]}})}},e.prototype._getFrameOptions=function(t){return{identifier:t.getFrame().identifier}},e.prototype._serializeOrientationOperation=function(e){var i=t.prototype._serializeOrientationOperation.call(this,e);return 90!==i.options.rotation&&270!==i.options.rotation||(i.options.flipHorizontally=!i.options.flipHorizontally,i.options.flipVertically=!i.options.flipVertically),i},e.prototype._serializeTransformOperation=function(e){var i=this._editor.operations;if(i.exists("orientation")){e=e.clone();var r=i.get("orientation");e.rotate(-r.getRotation()),r.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),r.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var n=t.prototype._serializeTransformOperation.call(this,e);return n.type="transform",n},e.prototype._serializeText=function(e,i){var r=t.prototype._serializeText.call(this,e,i),n=e.getInputDimensions(!1);return r.options.fontIdentifier=i.getFontIdentifier(),r.options.maxWidth=r.options.maxWidth*n.x/n.min(),delete r.options.fontFamily,r},e.prototype._serializeFilterOperation=function(e){var i=t.prototype._serializeFilterOperation.call(this,e);return i?(i.options.identifier=i.options.name,delete i.options.name,i):null},e.prototype._serializeRadialFocusOperation=function(e){var i=t.prototype._serializeRadialFocusOperation.call(this,e),r=i.options.options;return r.start=r.position,delete r.position,r.end={x:r.start.x+r.radius,y:r.start.y},delete r.radius,i},e}(l.a);e.a=h,h.version="2.0.0"},function(t,e,i){"use strict";var r,n=i(71),o=i.n(n),s=i(7),a=s.j.Engine.Filters.OverlayFilter;e.a=(r={},o()(r,a.BLEND_MODES.NORMAL,"normal"),o()(r,a.BLEND_MODES.OVERLAY,"overlay"),o()(r,a.BLEND_MODES.HARD_LIGHT,"hard light"),o()(r,a.BLEND_MODES.SOFT_LIGHT,"soft light"),o()(r,a.BLEND_MODES.MULTIPLY,"multiply"),o()(r,a.BLEND_MODES.DARKEN,"darken"),o()(r,a.BLEND_MODES.LIGHTEN,"lighten"),o()(r,a.BLEND_MODES.SCREEN,"screen"),o()(r,a.BLEND_MODES.COLOR_BURN,"color burn"),r)},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(7),p=i(127),d=i(337),f=i(338),_=i(81),g=i(339),m=i(82),y=i(40),v=i(129),b=h.k.flipObject(v.a),x=function(t){function e(){s()(this,e);for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];var o=u()(this,t.call.apply(t,[this].concat(r)));o._frameManager=new d.a(o._ui,o._getOptions("frame"));var a=o._getOptions("overlay");return a&&(o._overlayManager=new f.a(o._ui,a)),o}return c()(e,t),e.prototype._deserializeSprite=function(e,i){return"frame"===i.type?this._deserializeFrame(e,i):"overlay"===i.type?this._deserializeOverlay(e,i):t.prototype._deserializeSprite.call(this,e,i)},e.prototype._deserializeOperation=function(e){return"transform"===e.type?this._deserializeTransformOperation(e):t.prototype._deserializeOperation.call(this,e)},e.prototype._deserializeOrientationOperation=function(e){return 90!==e.options.rotation&&270!==e.options.rotation||(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),t.prototype._deserializeOrientationOperation.call(this,e)},e.prototype._deserializeTransformOperation=function(e){var i=this;return t.prototype._deserializeCropOperation.call(this,e).then(function(t){if(t){var e=i._operationsData.orientation;if(e){var r=e.options;t.rotate(r.rotation),r.flipHorizontally&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),r.flipVertically&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t}})},e.prototype._deserializeFrame=function(t,e){var i=this,r=e.options.identifier,o=this._frameManager.getFrameByIdentifier(r);if(!o)return h.g.warn("Deserializer","Unknown frame `"+r+"`. Skipping frame."),n.a.resolve();var s=new g.a(this._ui,o);return s.load().then(function(){i._editor.operations.getOrCreate("frame",{frame:s.getFrame()})})},e.prototype._deserializeOverlay=function(t,e){var i=this,r=e.options,o=r.blendMode,s=r.intensity,a=r.identifier,u=this._overlayManager.getOverlayByIdentifier(a);if(!u)return h.g.warn("Deserializer","Unknown overlay `"+a+"`. Skipping overlay."),n.a.resolve();var l=this._editor.getUI().getAssetPath(u.image);return y.a.load(l).then(function(t){i._editor.operations.getOrCreate("overlay",{alpha:s,identifier:a,blendMode:parseInt(b[o||u.blendMode],10),image:t})})},e.prototype._createBrushForPath=function(e){var i=t.prototype._createBrushForPath.call(this,e);return void 0!==e.hardness&&i.hasOption("hardness")&&i.setHardness(e.hardness),i},e.prototype._deserializeSticker=function(t,e){var i=this,r=h.j.Operations.SpriteOperation,o=e.options,s=this._stickerManager.getStickerByIdentifier(o.identifier),a=_.a.getURLForSticker(s,"base");if(!s)return h.g.warn("Deserializer","Unknown sticker `"+o.identifier+"`. Skipping sprite."),n.a.resolve();var u=t.getInputDimensions(!1);return new n.a(function(e,n){var l=new window.Image;l.addEventListener("load",function(){var i=r.StickerSprite.prototype.availableOptions.adjustments.structure,n=o.rotation,a=o.flipHorizontally,c=o.flipVertically,p={identifier:o.identifier,image:l,position:h.n.fromObject(o.position),dimensions:h.n.fromObject(o.dimensions).multiply(u.min()),rotation:n,flipHorizontally:a,flipVertically:c,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach(function(t){void 0!==o.adjustments[t]&&(p.adjustments[t]=o.adjustments[t]+i[t].default)}),void 0!==o.tintColor&&void 0!==s.tintMode&&(p.tintColor=h.b.fromArray(o.tintColor),p.tintMode=s.tintMode),e(t.createSticker(p))}),l.crossOrigin="Anonymous",l.src=i._editor.getUI().getAssetPath(a)})},e.prototype._deserializeFilterOperation=function(t){var e=this,i=t.options;return this._filterManager.getFilterByIdentifier(i.identifier)?this._filterManager.instantiateFilterWithIdentifier(i.identifier).then(function(t){var r=e._editor.operations.getOrCreate("filter");r&&r.set({identifier:i.identifier,filter:t,intensity:i.intensity})}):(h.g.warn("Deserializer","Unknown filter `"+i.identifier+"`"),n.a.resolve())},e.prototype._deserializeFocusOperation=function(e){var i=e.options,r=i.options;if("radial"!==i.type)return t.prototype._deserializeFocusOperation.call(this,e);var n=r.start,o=r.end,s=r.gradientRadius,a=r.blurRadius,u=h.n.fromObject(o).subtract(h.n.fromObject(n)).len();this._editor.operations.getOrCreate("radial-focus",{position:h.n.fromObject(n),radius:u,gradientRadius:s,blurRadius:a})},e.prototype._deserializeText=function(t,e){var i=e.options,r=i.fontSize,n=i.lineHeight,o=i.fontIdentifier,s=i.alignment,a=i.rotation,u=i.maxWidth,l=i.color,c=i.backgroundColor,p=new m.a(this._ui),d=this._fontManager.getVariationByIdentifier(o);return d?p.setFonts([d.getFont()]):d=this._fontManager.getDefaultFont(),p.load().then(function(){var e=t.getInputDimensions(!1),o=u*e.min()/e.x;return t.createText({fontSize:r,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),alignment:s,rotation:a,maxWidth:o,text:i.text,color:h.b.fromArray(l),backgroundColor:h.b.fromArray(c),position:h.n.fromObject(i.position)})})},e}(p.a);e.a=x,x.version="2.0.0"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(7),c=i(323),h=i(39),p=i(82),d=function(t){return l.k.byteArrayToString(l.a.decode(t))},f=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n()(this,e);var r=s()(this,t.call(this));return r._mediator=new l.d,r._fontLoader=new p.a(r),r._options=i,r._initOptions(),r._initEvents(),r._disposed=!1,r._editor=new c.a(r,r._options,r._mediator),r._options.editor.image&&r._editor.setImage(r._options.editor.image),l.g.setLevel(r._options.logLevel),r._v(),r}return u()(e,t),e.prototype.export=function(){var t;return(t=this._editor).export.apply(t,arguments)},e.prototype.serialize=function(){var t;return(t=this._editor).serialize.apply(t,arguments)},e.prototype.deserialize=function(t){return this._editor.deserialize(t)},e.prototype.getEditor=function(){return this._editor},e.prototype._initOptions=function(){this._options=l.k.defaults(this._options,{logLevel:"warn",editor:{},assets:{},responsive:!1,preloader:!0}),this._options.editor=l.k.defaults(this._options.editor||{},{preferredRenderer:"webgl",displayResizeMessage:!0,controlsOptions:{},operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],maxMegaPixels:null}),this._options.editor.export=l.k.defaults(this._options.editor.export||{},{format:"image/png",type:l.i.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.assets=l.k.defaults(this._options.assets||{},{baseUrl:process.cwd(),resolver:null})},e.prototype._v=function(){return!!this[d("X29wdGlvbnM=")][d("bGljZW5zZQ==")]||(l.g.error(d("TGljZW5zaW5n"),d("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),l.g.error(d("TGljZW5zaW5n"),d("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)},e.prototype._initEvents=function(){this._mediator.pipeEvents(this)},e.prototype._disposeEvents=function(){this._mediator.unpipeEvents(this)},e.prototype.setImage=function(t){this._editor.setImage(t)},e.prototype.getAssetPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._options.assets,n=r.baseUrl,o=r.resolver,s=n+"/"+t;if(t.match(/(ftp|http|https):\/\//)&&(s=t),e){if(!i){if(("undefined"!=typeof window&&window.devicePixelRatio||1)>1){var a=/\.[\w?=]+$/;t=t.replace(a,function(t){return"@2x"+t})}}s=n+"/ui/desktop/"+t}return void 0!==o&&null!==o&&(s=o(s)),s},e.prototype.getFontLoader=function(){return this._fontLoader},e.prototype.dispose=function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()},e.prototype.render=function(t){var e=this;return this.deserialize(t).then(function(){return e.export()})},e}(l.d);f.prototype.identifier="node",f.Constants=l.c,f.Utils=l.m,f.JSONLoader=h.a,f.SDK=l.j,e.default=f},function(t,e,i){t.exports={default:i(133),__esModule:!0}},function(t,e,i){i(42),i(49),t.exports=i(64).f("iterator")},function(t,e,i){var r=i(56),n=i(57);t.exports=function(t){return function(e,i){var o,s,a=String(n(e)),u=r(i),l=a.length;return u<0||u>=l?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},function(t,e,i){"use strict";var r=i(60),n=i(45),o=i(48),s={};i(22)(s,i(10)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=r(s,{next:n(1,i)}),o(t,e+" Iterator")}},function(t,e,i){var r=i(18),n=i(15),o=i(46);t.exports=i(20)?Object.defineProperties:function(t,e){n(t);for(var i,s=o(e),a=s.length,u=0;a>u;)r.f(t,i=s[u++],e[i]);return t}},function(t,e,i){var r=i(32);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,i){var r=i(27),n=i(87),o=i(139);t.exports=function(t){return function(e,i,s){var a,u=r(e),l=n(u.length),c=o(s,l);if(t&&i!=i){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===i)return t||c||0;return!t&&-1}}},function(t,e,i){var r=i(56),n=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?n(t+e,0):o(t,e)}},function(t,e,i){var r=i(23),n=i(89),o=i(61)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){"use strict";var r=i(142),n=i(143),o=i(26),s=i(27);t.exports=i(83)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):"keys"==e?n(0,i):"values"==e?n(0,t[i]):n(0,[i,t[i]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){t.exports={default:i(145),__esModule:!0}},function(t,e,i){i(146),i(93),i(151),i(152),t.exports=i(8).Symbol},function(t,e,i){"use strict";var r=i(12),n=i(23),o=i(20),s=i(14),a=i(85),u=i(147).KEY,l=i(31),c=i(62),h=i(48),p=i(47),d=i(10),f=i(64),_=i(65),g=i(148),m=i(149),y=i(15),v=i(19),b=i(27),x=i(59),T=i(45),k=i(60),w=i(150),C=i(92),O=i(18),R=i(46),E=C.f,S=O.f,F=w.f,M=r.Symbol,D=r.JSON,B=D&&D.stringify,I=d("_hidden"),A=d("toPrimitive"),N={}.propertyIsEnumerable,L=c("symbol-registry"),P=c("symbols"),z=c("op-symbols"),U=Object.prototype,G="function"==typeof M,j=r.QObject,V=!j||!j.prototype||!j.prototype.findChild,W=o&&l(function(){return 7!=k(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(t,e,i){var r=E(U,e);r&&delete U[e],S(t,e,i),r&&t!==U&&S(U,e,r)}:S,H=function(t){var e=P[t]=k(M.prototype);return e._k=t,e},q=G&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},X=function(t,e,i){return t===U&&X(z,e,i),y(t),e=x(e,!0),y(i),n(P,e)?(i.enumerable?(n(t,I)&&t[I][e]&&(t[I][e]=!1),i=k(i,{enumerable:T(0,!1)})):(n(t,I)||S(t,I,T(1,{})),t[I][e]=!0),W(t,e,i)):S(t,e,i)},Y=function(t,e){y(t);for(var i,r=g(e=b(e)),n=0,o=r.length;o>n;)X(t,i=r[n++],e[i]);return t},Z=function(t,e){return void 0===e?k(t):Y(k(t),e)},J=function(t){var e=N.call(this,t=x(t,!0));return!(this===U&&n(P,t)&&!n(z,t))&&(!(e||!n(this,t)||!n(P,t)||n(this,I)&&this[I][t])||e)},K=function(t,e){if(t=b(t),e=x(e,!0),t!==U||!n(P,e)||n(z,e)){var i=E(t,e);return!i||!n(P,e)||n(t,I)&&t[I][e]||(i.enumerable=!0),i}},Q=function(t){for(var e,i=F(b(t)),r=[],o=0;i.length>o;)n(P,e=i[o++])||e==I||e==u||r.push(e);return r},$=function(t){for(var e,i=t===U,r=F(i?z:b(t)),o=[],s=0;r.length>s;)!n(P,e=r[s++])||i&&!n(U,e)||o.push(P[e]);return o};G||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(i){this===U&&e.call(z,i),n(this,I)&&n(this[I],t)&&(this[I][t]=!1),W(this,t,T(1,i))};return o&&V&&W(U,t,{configurable:!0,set:e}),H(t)},a(M.prototype,"toString",function(){return this._k}),C.f=K,O.f=X,i(91).f=w.f=Q,i(66).f=J,i(90).f=$,o&&!i(43)&&a(U,"propertyIsEnumerable",J,!0),f.f=function(t){return H(d(t))}),s(s.G+s.W+s.F*!G,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var it=R(d.store),rt=0;it.length>rt;)_(it[rt++]);s(s.S+s.F*!G,"Symbol",{for:function(t){return n(L,t+="")?L[t]:L[t]=M(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!G,"Object",{create:Z,defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),D&&s(s.S+s.F*(!G||l(function(){var t=M();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))})),"JSON",{stringify:function(t){for(var e,i,r=[t],n=1;arguments.length>n;)r.push(arguments[n++]);if(i=e=r[1],(v(e)||void 0!==t)&&!q(t))return m(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!q(e))return e}),r[1]=e,B.apply(D,r)}}),M.prototype[A]||i(22)(M.prototype,A,M.prototype.valueOf),h(M,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,i){var r=i(47)("meta"),n=i(19),o=i(23),s=i(18).f,a=0,u=Object.isExtensible||function(){return!0},l=!i(31)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},p=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},d=function(t){return l&&f.NEED&&u(t)&&!o(t,r)&&c(t),t},f=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:p,onFreeze:d}},function(t,e,i){var r=i(46),n=i(90),o=i(66);t.exports=function(t){var e=r(t),i=n.f;if(i)for(var s,a=i(t),u=o.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},function(t,e,i){var r=i(32);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,i){var r=i(27),n=i(91).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return n(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):n(r(t))}},function(t,e,i){i(65)("asyncIterator")},function(t,e,i){i(65)("observable")},function(t,e,i){t.exports={default:i(154),__esModule:!0}},function(t,e,i){i(155),t.exports=i(8).Object.setPrototypeOf},function(t,e,i){var r=i(14);r(r.S,"Object",{setPrototypeOf:i(156).set})},function(t,e,i){var r=i(19),n=i(15),o=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=i(30)(Function.call,i(92).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:r(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){t.exports={default:i(158),__esModule:!0}},function(t,e,i){i(159);var r=i(8).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,i){var r=i(14);r(r.S,"Object",{create:i(60)})},function(t,e,i){"use strict";var r=i(3),n=i.n(r),o=i(16),s=i(39),a=n.a.Utils,u=n.a.Math.Vector2,l={getInnerDimensionsForElement:function(t){var e=new u(t.offsetWidth,t.offsetHeight),i=window.getComputedStyle(t,null);return e.x-=parseInt(i.getPropertyValue("padding-left"),10),e.x-=parseInt(i.getPropertyValue("padding-right"),10),e.y-=parseInt(i.getPropertyValue("padding-top"),10),e.y-=parseInt(i.getPropertyValue("padding-bottom"),10),e},getEventPosition:function(t){var e=t.clientX,i=t.clientY;if(-1!==t.type.indexOf("touch")){if(!t.touches.length)return;e=t.touches[0].clientX,i=t.touches[0].clientY}return new u(e,i)},createTransparentPatternCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=10,t.height=10,e.fillStyle="white",e.fillRect(0,0,t.width,t.height),e.fillStyle="#cccccc",e.fillRect(0,0,t.width/2,t.height/2),e.fillRect(t.width/2,t.height/2,t.width,t.height),t},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.fetch(t,e);if(!r)return o.a.info("Utils#translate","Unable to translate `"+e+"`"),null;for(var n in i)r=r.replace("${"+n+"}",i[n]);return r},fetch:function(t,e,i){e=e.replace(/\[(\w+)]/g,".$1"),e=e.replace(/^\./,"");for(var r=e.split("."),n=0;n<r.length;n++){if(!(t=t[r[n]]))break}return void 0!==t&&t},isMobile:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i||(i=function(t){return t});var r=[];return e.forEach(function(e){t.forEach(function(t){i(t)===e&&r.push(t)})}),r},getJSONP:function(t){return new s.a(t).load()},cloneCategories:function(t,e){return t.map(function(t){return t=a.clone(t),t[e]=t[e].slice(0),t})},mergeCategories:function(t,e,i){t=this.cloneCategories(t,i);var r=null;return e.forEach(function(e){t.forEach(function(t){e.identifier===t.identifier&&(r=t)}),r?r[i]=r[i].concat(e[i]):t.push(e)}),t},getStyleObject:function(t){var e=window.getComputedStyle(t),i={};for(var r in e){var n=e.getPropertyValue(r),o=r.replace(/-([a-z])/g,function(t,e){return e.toUpperCase()});""!==n&&(i[o]=n)}return i},styleElement:function(t,e){for(var i in e)t.style[i]=e[i]},debounce:function(t,e,i){var r;return function(){var n=this,o=arguments,s=function(){r=null,i||t.apply(n,o)},a=i&&!r;clearTimeout(r),r=setTimeout(s,e),a&&t.apply(this,o)}},getScrollbarWidth:function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",t.appendChild(i);var r=i.offsetWidth;return t.parentNode.removeChild(t),e-r},findIntegerFraction:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=Number.MAX_VALUE,r=0,n=0,o=1,s=1,a=0;a<e;a++){var l=o/s-t;if(l<0)o++;else{if(!(l>0))return new u(o,s);s++}var c=Math.abs(o/s-t);c<i&&(i=c,r=o,n=s)}return new u(r,n)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=t.toFixed(e);return parseFloat(i)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},flipObject:function(t){var e={};for(var i in t)e[t[i]]=i;return e}};e.a=l},function(t,e,i){t.exports=i(162).default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(163),n=i(110),o=i(111),s=i(50),a=i(33),u=i(112),l=i(34),c=i(21),h=i(222),p=i(114),d=i(78),f=i(25),_=i(38),g=i(16),m=i(223),y=i(24),v=i(35);/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2017 9elements GmbH <contact@9elements.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
r.a.version=i(115).version,r.a.Math=n,r.a.Operations=o,r.a.Engine=s.a,r.a.Color=a.a,r.a.Operation=u.a,r.a.EventEmitter=l.a,r.a.Utils=c.a,r.a.Env=h.a,r.a.OperationsStack=p.a,r.a.EXIF=d.a,r.a.Promise=f.a,r.a.Configurable=_.a,r.a.Log=g.a,r.a.Loaders=m,r.a.RenderType=y.RenderType,r.a.ImageFormat=y.ImageFormat,r.a.OptionType=y.OptionType,r.a.RendererType=y.RendererType,r.a.UniformType=y.UniformType,r.a.Base64=v.a,r.a.UI={},e.default=r.a},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(13),s=i.n(o),a=i(0),u=i.n(a),l=i(1),c=i.n(l),h=i(2),p=i.n(h),d=i(28),f=i(111),_=i(114),g=i(218),m=i(78),y=i(221),v=i(113),b=function(t){return w.byteArrayToString(E.decode(t))},x=d.Rectangle,T=d.Constants,k=d.Engine,w=d.Utils,C=d.EventEmitter,O=d.Vector2,R=d.Log,E=d.Base64,S=T.RenderType,F=T.ImageFormat,M=T.Events,D=T.RendererType,B=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u()(this,e);var o=c()(this,t.call(this));o._onOperationUpdate=o._onOperationUpdate.bind(o),o._onContextRestored=o._onContextRestored.bind(o);var s=i(115),a=s.version;if(o.version=a,o[b("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,o._preferredRenderer=r,o._options=w.defaults(n,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),o._options.smoothUpscaling&&(k.BaseTexture.DefaultMagFilter=k.BaseTexture.LinearFilter),o._options.extensions=w.defaults(o._options.extensions,{operations:[],controls:[],languages:[]}),R.setLevel(o._options.logLevel),!o._v())return c()(o);var l=d[b("TGljZW5zZUNoZWNrZXI=")];o._l=new l(o[b("X29wdGlvbnM=")][b("bGljZW5zZQ==")]),o._cv(!0).then(function(){o._ct()}).catch(function(t){R.error(b("TGljZW5zaW5n"),t.message)}),o._defaultRenderMode=o._options.renderMode,o._renderMode=o._options.renderMode,o._textureQuality=o._options.textureQuality,o._offset=new O,o._zoom=o._options.zoom,o._spriteScale=o._options.spriteScale,o._rotation=o._options.rotation,o._operations={},o._operationsStack=null,o.setOperationsStack(new _.a),o._container=new k.Container,o._sprite=new k.Sprite,o._container.addChild(o._sprite),o._inputTexture=o._options.inputTexture,o._currentInputTexture=null,o._currentTexture=null,o._resizedTexture=null,o._resizedContainer=new k.Container,o._resizedSprite=new k.Sprite,o._resizedContainer.addChild(o._resizedSprite),o.setSmoothDownscaling(o._options.smoothDownscaling),o._checkForUpdates(),o._registerOperations(),o._initRenderer();var h=o._renderer.constructor.type;return o._options.displayWelcomeMessage&&R.log("Version:",o.version+" ("+h+") - https://www.photoeditorsdk.com"),o._options.image&&o.setImage(o._options.image),o}return p()(e,t),e.prototype._v=function(){return!!this[b("X29wdGlvbnM=")][b("bGljZW5zZQ==")]||(R.error(b("TGljZW5zaW5n"),b("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),R.error(b("TGljZW5zaW5n"),b("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)},e.prototype._ct=function(){if(this._l.exp()){this._l.isExp()?R.error(b("TGljZW5zaW5n"),b("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):R.warn(b("TGljZW5zaW5n"),b("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}},e.prototype._cv=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(i){t[b("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var r=b("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(r="ELICEXP"===i.code?b("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===i.code?b("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===i.code?b("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===i.code?b("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",s()(t._options.license)):b("ELICINV"===i.code?"SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu":"SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),i.message=r,new Error(i)})},e.prototype._t=function(){this._l.t()},e.prototype._onOperationUpdate=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.emit.apply(this,[M.OPERATION_UPDATED].concat(e))},e.prototype._onContextRestored=function(){R.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(t){t.disposeRenderTextures()}),this.render()},e.prototype.export=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.DATAURL,e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.PNG,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return e.hasChanges()&&e._t(),new y.a(e,{renderType:t,imageFormat:i,quality:r}).export()})},e.prototype.render=function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var i=this._renderer.getContext();i.startFrame&&i.startFrame();var r=void 0;R.canLog("info")&&(r=new v.a("","Frame rendering")),R.info("","Rendering starts");var n=this._operationsStack;return n.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()}).then(function(){return n.validateSettings()}).then(function(){return n.render(t,t._currentTexture)}).then(function(i){switch(t._currentTexture=i,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var r=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(r),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0)}return e&&t._renderer.render(t._container),i}).then(function(t){return r&&r.stop(),i.endFrame&&i.endFrame(),t})},e.prototype.getTextureScale=function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)},e.prototype._prepareTexture=function(){var t=this;return new n.a(function(e,i){var r=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var n=t.getInputDimensions().multiply(r).floor(),o=void 0;t._resizedTexture?t._resizedTexture.getDimensions().equals(n)||(t._resizedTexture.resizeTo(n),o=!0):(t._resizedTexture=new k.RenderTexture(t._renderer,n.x,n.y),o=!0),o&&(t._resizedSprite.setScale(r,r),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)})},e.prototype._registerOperations=function(){this._operations={};for(var t in f){var e=f[t];this._operations[e.identifier]=e}this._operations=w.extend(this._operations,this._options.extensions.operations)},e.prototype.registerOperations=function(t){var e=this;t.forEach(function(t){e._operations[t.identifier]=t})},e.prototype.setAllOperationsToDirty=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)},e.prototype.createOperation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._operations[t];if(!r)throw new Error("No operation with identifier `"+t+"` found.");var n=new r(this,e);return i&&this.addOperation(n),n},e.prototype.addOperation=function(t){this._operationsStack.push(t)},e.prototype.removeOperation=function(t){this._operationsStack.remove(t)},e.prototype.getInputDimensions=function(){var t=this._inputTexture.getFrame();return new O(t.width,t.height)},e.prototype.getFinalDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions();return this._operationsStack.forEach(function(t){t.getEnabled()&&(e=t.getNewDimensions(e))}),t&&e.multiply(this._spriteScale),e.floor()},e.prototype.getOutputDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()},e.prototype.getOutputTextureDimensions=function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.getTextureScale()),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach(function(t){e=t.getNewDimensions(e)}),e},e.prototype._checkForUpdates=function(){this._l.isENT()||(this._versionChecker=new g.a(this.version))},e.prototype._initRenderer=function(){var t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},e=void 0,i=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var r=this._options.canvas;e=r.width,i=r.height}else if(this._inputTexture){var n=this.getFinalDimensions();e=n.x,i=n.y}else e=1,i=1;switch(this._preferredRenderer){case D.WEBGL:this._renderer=k.autoDetectRenderer(e,i,t),this._renderer.on("context-restored",this._onContextRestored);break;case D.CANVAS:this._renderer=new k.CanvasRenderer(e,i,t),this._renderer.on("context-restored",this._onContextRestored);break;default:R.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=k.autoDetectRenderer(e,i,t)}},e.prototype.resizeTo=function(t){this._renderer.resizeTo(t,!0)},e.prototype.reset=function(){this._operationsStack.clear()},e.prototype.parseExif=function(t){if(t){var e=t.src,r=!1,n=null;if(t instanceof i(17).Image&&t.rawSource){var o=t.rawSource;if(t.rawSource instanceof Buffer)e=t.rawSource.toString("base64");else{var s=t.rawSource.replace("data:image/jpeg;base64,","");o=new Buffer(s,"base64"),e=t.rawSource}r=m.a.bufferIsJPEG(o),r&&(n=e)}if("undefined"!=typeof WEBPACK&&(r=m.a.isJPEG(e),n=e),r){var a=null;try{a=m.a.fromBase64String(n)}catch(t){}if(!a)return;return a}}},e.prototype._handleExifOrientation=function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,i=-1!==[2,4,5,7].indexOf(t.Orientation);(e||i)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t),this._exif.setOrientation(1))}},e.prototype.hasImage=function(){return null!==this._image&&void 0!==this._image},e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var r=new k.BaseTexture(this._image),n=new x(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);i&&(n.width=i.x,n.height=i.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=new k.Texture(r,n),this._currentTexture=this._inputTexture,this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)},e.prototype.setInputTexture=function(t){this._inputTexture=t},e.prototype.getCanvas=function(){return this._renderer.getCanvas()},e.prototype.setCanvas=function(t){this._renderer.setCanvas(t)},e.prototype.getSprite=function(){return this._sprite},e.prototype.getContainer=function(){return this._container},e.prototype.getOperationsStack=function(){return this._operationsStack},e.prototype.setOperationsStack=function(t){this._operationsStack&&this._operationsStack.off(M.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(M.OPERATION_UPDATED,this._onOperationUpdate)},e.prototype.getOperations=function(){return this._operations},e.prototype.getRenderer=function(){return this._renderer},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t,e){t instanceof O?this._offset.copy(t):this._offset.set(t,e)},e.prototype.getRenderMode=function(){return this._renderMode},e.prototype.setRenderMode=function(t){this._renderMode=t},e.prototype.getZoom=function(){return this._zoom},e.prototype.setZoom=function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()},e.prototype.getTextureQuality=function(){return"export"===this._renderMode?1:this._textureQuality},e.prototype.setTextureQuality=function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)},e.prototype.getSpriteScale=function(){return this._spriteScale},e.prototype.setSpriteScale=function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()},e.prototype.getPixelRatio=function(){return this._options.pixelRatio},e.prototype.getExif=function(){return this._exif},e.prototype.getOptions=function(){return this._options},e.prototype.getInputTexture=function(){return this._inputTexture},e.prototype.setSmoothDownscaling=function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)},e.prototype.setRotation=function(t){this._rotation=t},e.prototype.getRotation=function(){return this._rotation},e.prototype.hasChanges=function(){return this.getOperationsStack().hasChanges()},e.prototype.dispose=function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()},e}(C);e.a=B},function(t,e,i){i(93),i(42),i(49),i(165),i(175),i(176),t.exports=i(8).Promise},function(t,e,i){"use strict";var r,n,o,s,a=i(43),u=i(12),l=i(30),c=i(67),h=i(14),p=i(19),d=i(44),f=i(166),_=i(167),g=i(95),m=i(68).set,y=i(171)(),v=i(69),b=i(96),x=i(97),T=u.TypeError,k=u.process,w=u.Promise,C="process"==c(k),O=function(){},R=n=v.f,E=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[i(10)("species")]=function(t){t(O,O)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e}catch(t){}}(),S=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},F=function(t,e){if(!t._n){t._n=!0;var i=t._c;y(function(){for(var r=t._v,n=1==t._s,o=0;i.length>o;)!function(e){var i,o,s=n?e.ok:e.fail,a=e.resolve,u=e.reject,l=e.domain;try{s?(n||(2==t._h&&B(t),t._h=1),!0===s?i=r:(l&&l.enter(),i=s(r),l&&l.exit()),i===e.promise?u(T("Promise-chain cycle")):(o=S(i))?o.call(i,a,u):a(i)):u(r)}catch(t){u(t)}}(i[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){m.call(u,function(){var e,i,r,n=t._v,o=D(t);if(o&&(e=b(function(){C?k.emit("unhandledRejection",n,t):(i=u.onunhandledrejection)?i({promise:t,reason:n}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",n)}),t._h=C||D(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){m.call(u,function(){var e;C?k.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),F(e,!0))},A=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw T("Promise can't be resolved itself");(e=S(t))?y(function(){var r={_w:i,_d:!1};try{e.call(t,l(A,r,1),l(I,r,1))}catch(t){I.call(r,t)}}):(i._v=t,i._s=1,F(i,!1))}catch(t){I.call({_w:i,_d:!1},t)}}};E||(w=function(t){f(this,w,"Promise","_h"),d(t),r.call(this);try{t(l(A,this,1),l(I,this,1))}catch(t){I.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=i(172)(w.prototype,{then:function(t,e){var i=R(g(this,w));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=C?k.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&F(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=l(A,t,1),this.reject=l(I,t,1)},v.f=R=function(t){return t===w||t===s?new o(t):n(t)}),h(h.G+h.W+h.F*!E,{Promise:w}),i(48)(w,"Promise"),i(173)("Promise"),s=i(8).Promise,h(h.S+h.F*!E,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!E),"Promise",{resolve:function(t){return x(a&&this===s?w:this,t)}}),h(h.S+h.F*!(E&&i(174)(function(t){w.all(t).catch(O)})),"Promise",{all:function(t){var e=this,i=R(e),r=i.resolve,n=i.reject,o=b(function(){var i=[],o=0,s=1;_(t,!1,function(t){var a=o++,u=!1;i.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,i[a]=t,--s||r(i))},n)}),--s||r(i)});return o.e&&n(o.v),i.promise},race:function(t){var e=this,i=R(e),r=i.reject,n=b(function(){_(t,!1,function(t){e.resolve(t).then(i.resolve,r)})});return n.e&&r(n.v),i.promise}})},function(t,e){t.exports=function(t,e,i,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var r=i(30),n=i(168),o=i(169),s=i(15),a=i(87),u=i(94),l={},c={},e=t.exports=function(t,e,i,h,p){var d,f,_,g,m=p?function(){return t}:u(t),y=r(i,h,e?2:1),v=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=a(t.length);d>v;v++)if((g=e?y(s(f=t[v])[0],f[1]):y(t[v]))===l||g===c)return g}else for(_=m.call(t);!(f=_.next()).done;)if((g=n(_,y,f.value,e))===l||g===c)return g};e.BREAK=l,e.RETURN=c},function(t,e,i){var r=i(15);t.exports=function(t,e,i,n){try{return n?e(r(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,i){var r=i(26),n=i(10)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[n]===t)}},function(t,e){t.exports=function(t,e,i){var r=void 0===i;switch(e.length){case 0:return r?t():t.call(i);case 1:return r?t(e[0]):t.call(i,e[0]);case 2:return r?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var r=i(12),n=i(68).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==i(32)(s);t.exports=function(){var t,e,i,l=function(){var r,n;for(u&&(r=s.domain)&&r.exit();t;){n=t.fn,t=t.next;try{n()}catch(r){throw t?i():e=void 0,r}}e=void 0,r&&r.enter()};if(u)i=function(){s.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve();i=function(){c.then(l)}}else i=function(){n.call(r,l)};else{var h=!0,p=document.createTextNode("");new o(l).observe(p,{characterData:!0}),i=function(){p.data=h=!h}}return function(r){var n={fn:r,next:void 0};e&&(e.next=n),t||(t=n,i()),e=n}}},function(t,e,i){var r=i(22);t.exports=function(t,e,i){for(var n in e)i&&t[n]?t[n]=e[n]:r(t,n,e[n]);return t}},function(t,e,i){"use strict";var r=i(12),n=i(8),o=i(18),s=i(20),a=i(10)("species");t.exports=function(t){var e="function"==typeof n[t]?n[t]:r[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,i){var r=i(10)("iterator"),n=!1;try{var o=[7][r]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:i=!0}},o[r]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){"use strict";var r=i(14),n=i(8),o=i(12),s=i(95),a=i(97);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,n.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var r=i(14),n=i(69),o=i(96);r(r.S,"Promise",{try:function(t){var e=n.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(102),h=i(103),p=i(53),d=i(73),f=l.c.RendererType,_=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._type=f.CANVAS,a.setCanvas(a._options.canvas||a._createCanvas()),a}return u()(e,t),e.prototype._createCanvas=function(){return l.i.createCanvas()},e.prototype._createContext=function(){var t=this._canvas,i=t.getContext("2d");return this._options.debug&&(i=new c.a(i)),this.id=i.id=e.contextId++,this._context=i,i.renderer=this,this.emit("context",i),i},e.prototype._setupContext=function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(e){t[e]&&(t[e]=!0)}),this._defaultRenderTarget=new p.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new d.a(this)},e.prototype.render=function(t){var e=this._renderTarget.getContext(),i=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(i),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var r=this._canvas,n=r.width,o=r.height;e.clearRect(0,0,n,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,n,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)},e.prototype.renderDisplayObject=function(t,e){var i=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(i)},e.prototype.getCurrentRenderTarget=function(){return this._renderTarget},e.prototype.setRenderTarget=function(t){this._renderTarget=t},e.prototype.getContext=function(){return this._renderTarget.getContext()},e.prototype.dispose=function(){this._filterManager.dispose()},e}(h.a);_.contextId=0,_.type="Canvas2D",e.a=_},function(t,e,i){t.exports={default:i(179),__esModule:!0}},function(t,e,i){i(49),i(42),t.exports=i(180)},function(t,e,i){var r=i(67),n=i(10)("iterator"),o=i(26);t.exports=i(8).isIterable=function(t){var e=Object(t);return void 0!==e[n]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,i){t.exports={default:i(182),__esModule:!0}},function(t,e,i){i(49),i(42),t.exports=i(183)},function(t,e,i){var r=i(15),n=i(94);t.exports=i(8).getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,i){i(185);var r=i(8).Object;t.exports=function(t,e,i){return r.defineProperty(t,e,i)}},function(t,e,i){var r=i(14);r(r.S+r.F*!i(20),"Object",{defineProperty:i(18).f})},function(t,e,i){i(187),t.exports=i(8).Object.keys},function(t,e,i){var r=i(89),n=i(46);i(188)("keys",function(){return function(t){return n(r(t))}})},function(t,e,i){var r=i(14),n=i(8),o=i(31);t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],s={};s[t]=e(i),r(r.S+r.F*o(function(){i(1)}),"Object",s)}},function(t,e,i){"use strict";var r={defaults:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n={};for(var o in t)n[o]=t[o];for(var s=0;s<i.length;s++){var a=i[s];for(var u in a)void 0===n[u]&&(n[u]=a[u])}return n},extend:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n={};for(var o in t)n[o]=t[o];for(var s=0;s<i.length;s++){var a=i[s];for(var u in a)n[u]=a[u]}return n}};e.a=r},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(103),h=i(54),p=i(104),d=i(191),f=i(74),_=i(76),g=i(77),m=i(102),y=i(105),v=l.c.RendererType,b=i(17),x=void 0!==b?b.Image:void 0,T=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._type=v.WEBGL,a._textures=[],a._fakeObject=new _.a,a._onContextLost=a._onContextLost.bind(a),a._onContextRestored=a._onContextRestored.bind(a),a.setCanvas(a._options.canvas||l.i.createCanvas()),a.shaders=a._initShaders(),a.renderers=a._initRenderers(),a}return u()(e,t),e.prototype._onContextLost=function(t){t.preventDefault(),l.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")},e.prototype._onContextCreationError=function(t){t.preventDefault(),l.f.warn(this.constructor.name,"Failed to create WebGL context: "+(t.statusMessage||"Unknown error"))},e.prototype._onContextRestored=function(){var t=this;l.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)}),this._createContext(),this._setupContext(),this.emit("context-restored")},e.prototype._onBeforeContext=function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new g.a(this),this._currentObjectRenderer=new p.a(this)},e.prototype.setShader=function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)},e.prototype.setCanvas=function(e){this._canvas&&this._removeContextEventListeners(),t.prototype.setCanvas.call(this,e),this._canvas.addEventListener&&this._addContextEventListeners()},e.prototype._addContextEventListeners=function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)},e.prototype._removeContextEventListeners=function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)},e.prototype._setAttributesForShader=function(t){var e=this._context,i=t.getAttributes(),r=t.getAttributeLocations();i.forEach(function(t){var i=r[t];e.enableVertexAttribArray(i)})},e.prototype._initShaders=function(){return{default:new f.a(this)}},e.prototype._initRenderers=function(){return{sprite:new d.a(this)}},e.prototype._createContext=function(){var t=this._canvas,r=null,n={preserveDrawingBuffer:!0};if(r=i(106)(t.width,t.height,n),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var o=function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")};r=window.WebGLDebugUtils.makeDebugContext(r,null,o)}return this._options.debug&&(r=new m.a(r)),this.id=r.id=e.contextId++,this._context=r,r.renderer=this,this._maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.emit("context",r),r},e.prototype._setupContext=function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new h.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()},e.prototype._getMaxPrecision=function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var i=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==i.rangeMax?"highp":"lowp"},e.prototype.resizeTo=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prototype.resizeTo.call(this,e,i),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context.resize(e.x,e.y)},e.prototype.setRenderTarget=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()},e.prototype.setObjectRenderer=function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()},e.prototype.render=function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)},e.prototype.renderDisplayObject=function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()},e.prototype.clear=function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)},e.prototype.save=function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}},e.prototype.restore=function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer},e.prototype.getOrCreateGLTexture=function(t){var e=this._context,i=t.getGLTextureForRenderer(this);return i||(i=e.createTexture(),t.setGLTextureForRenderer(i,this),this._textures.push(t)),i},e.prototype.updateTexture=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.getSource(),r=!!i,n=this._context,o=t.getGLUnit(),s=this.getOrCreateGLTexture(t);n.activeTexture(n.TEXTURE0+o),n.bindTexture(n.TEXTURE_2D,s),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&r&&("undefined"==typeof WEBPACK?((i instanceof x||i instanceof b.Canvas)&&(i=y.a.fromNodeCanvasImage(i)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,i.width,i.height,0,n.RGBA,n.UNSIGNED_BYTE,i.data)):i instanceof y.a?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,i.width,i.height,0,n.RGBA,n.UNSIGNED_BYTE,i.data):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),t.isMipMappingEnabled()?n.generateMipmap(n.TEXTURE_2D):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t.getGLRepeat(n,"x")),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t.getGLRepeat(n,"y"))),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t.getGLFilter(n,"min")),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t.getGLFilter(n,"mag")),n.activeTexture(n.TEXTURE0)},e.prototype.getMaxDimensions=function(){if("undefined"==typeof WEBPACK){var t=i(106),e=t(1,1);return e.getParameter(e.MAX_TEXTURE_SIZE)}var r=l.i.createCanvas(),n=r.getContext("webgl")||r.getContext("experimental-webgl");if(n){var o=n.getParameter(n.MAX_TEXTURE_SIZE),s=n.getExtension("WEBGL_lose_context");return s&&s.loseContext(),o}return null},e.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget},e.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer},e.isSupported=function(){if("undefined"==typeof WEBPACK)return!0;var t=l.i.createCanvas();t.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl");return t.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),!!e},e.prototype.getMaxFloatPrecision=function(){return this._maxFloatPrecision},e.prototype.getMaxIntPrecision=function(){return this._maxIntPrecision},e.prototype.dispose=function(){var t=this;this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(e){e.disposeGLTexturesForRenderer(t)});for(var e in this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var i=this._context,r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()},e}(c.a);T.contextId=0,T.type="WebGL",e.a=T},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(104),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));a._maxBatchSize=l.a,a._vertices=new ArrayBuffer(4*l.a*l.j),a._positions=new Float32Array(a._vertices),a._colors=new Uint32Array(a._vertices),a._indices=new Uint16Array(6*l.a);for(var u=0,c=0;u<6*l.a;u+=6,c+=4)a._indices[u+0]=c+0,a._indices[u+1]=c+1,a._indices[u+2]=c+2,a._indices[u+3]=c+0,a._indices[u+4]=c+2,a._indices[u+5]=c+3;return a._shaders=[],a._sprites=[],a._currentBatchSize=0,a._currentBaseTexture=null,a._onContextChange(),a}return u()(e,t),e.prototype.render=function(t){var e=t.getTexture(),i=e.getFrame(),r=e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=r);var n=e.getUVs();if(n){var o=this._currentBatchSize*l.j;this._addVertexCoordinates(t,o,i),this._addTextureUVs(t,o,n),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}},e.prototype._addColors=function(t,e){var i=this._colors,r=t.getTint(),n=(r>>16)+(65280&r)+((255&r)<<16)+(255*t.getWorldAlpha()<<24);i[e+4]=i[e+9]=i[e+14]=i[e+19]=n},e.prototype._addTextureUVs=function(t,e,i){var r=this._positions,n=i.getUVsAt(0);r[e+2]=n.x,r[e+3]=n.y,n=i.getUVsAt(1),r[e+7]=n.x,r[e+8]=n.y,n=i.getUVsAt(2),r[e+12]=n.x,r[e+13]=n.y,n=i.getUVsAt(3),r[e+17]=n.x,r[e+18]=n.y},e.prototype._addVertexCoordinates=function(t,e,i){for(var r=this._positions,n=t.getWorldTransform(),o=t.getAnchor(),s=n.rectangleToCoordinates(i,o),a=0;a<4;a++)r[e+5*a]=s[a].x,r[e+5*a+1]=s[a].y},e.prototype._onContextChange=function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)},e.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)},e.prototype.flush=function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*l.a)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var i=this._positions.subarray(0,this._currentBatchSize*l.j);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var r=0,n=null,o=null,s=null,a=null,u=!1,c=null,h=0,p=0,d=this._currentBatchSize;p<d;p++){if(c=this._sprites[p],o=c.getTexture().getBaseTexture(),a=c.getShader()||this._shader,u=s!==a,(n!==o||u)&&(this._renderBatch(n,r,h),h=p,r=0,n=o,u)){s=a,t.setShader(s);var f=t.getCurrentRenderTarget(),_=f.getProjectionMatrix().toArray();s.setUniform("u_projMatrix",_),s.syncUniforms(),e.activeTexture(e.TEXTURE0)}r++}this._renderBatch(n,r,h),this._currentBatchSize=0,this._sprites=[]}},e.prototype._renderBatch=function(t,e,i){if(0!==e){var r=this._renderer,n=r.getContext(),o=t.getGLTextureForRenderer(r);o||(o=r.getOrCreateGLTexture(t)),t.isDirty()&&(r.updateTexture(t),t.setDirty(!1)),n.activeTexture(n.TEXTURE0+t.getGLUnit()),n.bindTexture(n.TEXTURE_2D,o);var s=6*e,a=6*i*2;n.drawElements(n.TRIANGLES,s,n.UNSIGNED_SHORT,a)}},e.prototype.dispose=function(){var e=this._renderer,i=e.getContext();i.deleteBuffer(this._vertexBuffer),i.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,t.prototype.dispose.call(this)},e}(c.a);e.a=h},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=function(){function t(e){n()(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return t.prototype.map=function(t,e){var i=e.x,r=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=i,this._vertices[1]=r,this._vertices[2]=i+e.width,this._vertices[3]=r,this._vertices[4]=this._vertices[2],this._vertices[5]=r+e.height,this._vertices[6]=i,this._vertices[7]=this._vertices[5],this._uploadBuffers()},t.prototype._initBuffers=function(){var t=this._context;this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},t.prototype._uploadBuffers=function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)},t.prototype.getVertexBuffer=function(){return this._vertexBuffer},t.prototype.getIndexBuffer=function(){return this._indexBuffer},t.prototype.dispose=function(){var t=this._context;t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer)},t}();e.a=o},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(6),s=function(){function t(){n()(this,t),this._uvs=[new o.k(0,0),new o.k(1,0),new o.k(1,1),new o.k(0,1)]}return t.prototype.update=function(t,e){var i=this._uvs[0];i.x=t.x/e.width,i.y=t.y/e.height,i=this._uvs[1],i.x=(t.x+t.width)/e.width,i.y=t.y/e.height,i=this._uvs[2],i.x=(t.x+t.width)/e.width,i.y=(t.y+t.height)/e.height,i=this._uvs[3],i.x=t.x/e.width,i.y=(t.y+t.height)/e.height},t.prototype.getUVsAt=function(t){return this._uvs[t]},t.prototype.getUVs=function(){return this._uvs},t}();e.a=s},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(108),h=i(36),p=i(54),d=i(53),f=i(77),_=i(73),g=l.c.RendererType,m=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n()(this,e);var u=s()(this,t.call(this,new h.a,new l.h(0,0,r,o)));return u._loaded=!0,u._width=r,u._height=o,u._pixelRatio=a,u._renderer=i,u._setupFilterManager(),u._setupBuffer(),u.setBaseTexture(u._renderTarget.getBaseTexture()),u._updateUVs(),u}return u()(e,t),e.prototype._setupFilterManager=function(){this._renderer.isOfType(g.WEBGL)?this._filterManager=new f.a(this._renderer):this._renderer.isOfType(g.CANVAS)&&(this._filterManager=new _.a(this._renderer)),this._filterManager.resizeTo(new l.k(this._width,this._height))},e.prototype._setupBuffer=function(){this._renderer.isOfType(g.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(g.CANVAS)&&this._setupCanvasRenderTarget()},e.prototype._setupWebGLRenderTarget=function(){this._renderTarget=new p.a(this._renderer,this._width,this._height,this._pixelRatio)},e.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new d.a(this._width,this._height,this._pixelRatio)},e.prototype.clear=function(t){this._renderTarget.clear(t)},e.prototype.resizeTo=function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))},e.prototype.render=function(t){if(this._renderer.isOfType(g.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(g.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(t)}},e.prototype._renderWebGL=function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype._renderCanvas=function(t){t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype.getRenderTarget=function(){return this._renderTarget},e.prototype.dispose=function(){this._renderTarget.dispose(),this._filterManager.dispose()},e}(c.a);e.a=m},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(107),h=i(198),p=function(t){function e(i){n()(this,e);var r=s()(this,t.call(this));return r._onTextureUpdate=r._onTextureUpdate.bind(r),r._texture=i,r._shader=null,r._width=0,r._height=0,r._anchor=new l.k(0,0),r.setTexture(i),r}return u()(e,t),e.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype._renderWebGL=function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new h.a),this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)},e.prototype._renderCanvas=function(t){var e=this._worldTransform,i=this._texture.getFrame(),r=i.width,n=i.height,o=t.getCurrentRenderTarget().getPixelRatio(),s=this._anchor.x*-r|0,a=this._anchor.y*-n|0,u=t.getContext();u.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),c=l.getPixelRatio(),h=l.getSource();u.drawImage(this._texture.getBaseTexture().getSource(),0,0,(h.naturalWidth||r)*c,(h.naturalHeight||n)*c,s*o,a*o,r*o,n*o)},e.prototype.isAtPosition=function(t){var e=this._worldTransform.applyInverseToVector(t),i=this._texture.getFrame(),r=i.width,n=i.height,o=new l.k(-r,-n);o.multiply(this._anchor);var s=o.clone().add(r,n);return!(e.x<o.x||e.x>s.x||e.y<o.y||e.y>s.y)},e.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()},e.prototype.getBounds=function(){if(this._boundsNeedUpdate){var t=this._bounds,e=this._texture.getFrame(),i=this._worldTransform,r=this._anchor,n=i.rectangleToCoordinates(e,r),o=n[0].x,s=n[0].y,a=o,u=s;n.forEach(function(t){var e=t.x,i=t.y;o=Math.min(o,e),s=Math.min(s,i),a=Math.max(a,e),u=Math.max(u,i)}),t.x=o,t.width=Math.abs(a-o),t.y=s,t.height=Math.abs(u-s),this._boundsNeedUpdate=!1}return this._bounds.clone()},e.prototype.getTexture=function(){return this._texture},e.prototype.setTexture=function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))},e.prototype.getShader=function(){return this._shader},e.prototype.setShader=function(t){this._shader=t},e.prototype.getWidth=function(){return this._width},e.prototype.setWidth=function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getHeight=function(){return this._height},e.prototype.setHeight=function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getDimensions=function(){return new l.k(this._width,this._height)},e.prototype.getAnchor=function(){return this._anchor},e.prototype.setAnchor=function(t,e){t instanceof l.k?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.isSmoothDownscaling=function(){return this._smoothDownscaling},e.prototype.setSmoothDownscaling=function(t){this._smoothDownscaling=t},e.prototype.dispose=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()},e}(c.a);e.a=p},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(28),s=function(){function t(){n()(this,t),this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite)}return t.prototype.render=function(t,e,i){var r=i.getDimensions(),n=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(n):this._renderTexture=new o.Engine.RenderTexture(t,n.x,n.y);var s=this._renderTexture.getDimensions();this._sprite.setTexture(i),this._sprite.updateTransform(),this._renderTexture.render(this._container),this._updateSprite(t,e,r,s)},t.prototype._updateSprite=function(t,e,i,r){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new o.Rectangle(0,0,i.x,i.y))},t.prototype._getNextHighestPOT=function(t){return new o.Vector2(o.Utils.nextHighestPOT(t.x),o.Utils.nextHighestPOT(t.y))},t.prototype.getRenderTexture=function(){return this._renderTexture},t.prototype.dispose=function(){this._renderTexture.dispose(),this._renderTexture=null},t}();e.a=s},function(t,e,i){"use strict";var r=i(74);e.a={TextureShader:r.a}},function(t,e,i){t.exports={default:i(201),__esModule:!0}},function(t,e,i){i(202),t.exports=i(8).setImmediate},function(t,e,i){var r=i(14),n=i(68);r(r.G+r.B,{setImmediate:n.set,clearImmediate:n.clear})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(204);i.d(e,"UnpremultiplyFilter",function(){return r.a});var n=i(206);i.d(e,"ColorOverlayFilter",function(){return n.a});var o=i(208);i.d(e,"TintFilter",function(){return o.a});var s=i(210);i.d(e,"OverlayFilter",function(){return s.a})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(37),c=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(205),r}return u()(e,t),e}(l.a);e.a=c},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(37),h=l.c.OptionType,p=l.c.UniformType,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(207),u}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=this._options.color,a=n.getImageData(0,0,r.width,r.height),u=o.getImageData(0,0,r.width,r.height),c=r.width*r.height,h=new l.b,p=new l.b,d=0;d<4*c;d+=4){h.set(a.data[d]/255,a.data[d+1]/255,a.data[d+2]/255,a.data[d+3]/255),p.set(u.data[d]/255,u.data[d+1]/255,u.data[d+2]/255,u.data[d+3]/255);var f=p.r+h.a*(h.r-p.r);u.data[d]=255*(f+h.a*(s.r-f));var _=p.g+h.a*(h.g-p.g);u.data[d+1]=255*(_+h.a*(s.g-_));var g=p.b+h.a*(h.b-p.b);u.data[d+2]=255*(g+h.a*(s.b-g))}o.putImageData(u,0,0)},e}(c.a);d.prototype.availableOptions={color:{type:h.COLOR,default:l.b.WHITE,uniformType:p.FLOAT4}},e.a=d},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(37),h=l.c.OptionType,p=l.c.UniformType,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(209),u}return u()(e,t),e.prototype._applyCanvas=function(t,i,r){var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],i.getCanvas()),o=i.getContext(),s=r.getContext(),a=o.getImageData(0,0,n.width,n.height),u=this._options,c=u.mode,h=u.color,p=h.r,d=h.g,f=h.b,_=h.a,g=[.2125,.7154,.0721];switch(c){case e.MODES.SOLID:for(var m=0;m<n.width*n.height;m++){var y=4*m;a.data[y]+=(255*p-a.data[y])*_,a.data[y+1]+=(255*d-a.data[y+1])*_,a.data[y+2]+=(255*f-a.data[y+2])*_}break;case e.MODES.COLORIZED:for(var v=0;v<n.width*n.height;v++){var b=4*v,x=a.data[b]/255*g[0]+a.data[b+1]/255*g[1]+a.data[b+2]/255*g[2],T=new l.b(x*p,x*d,x*f);a.data[b]+=(255*T.r-a.data[b])*_,a.data[b+1]+=(255*T.g-a.data[b+1])*_,a.data[b+2]+=(255*T.b-a.data[b+2])*_}}s.putImageData(a,0,0)},e}(c.a);d.MODES={NONE:0,SOLID:1,COLORIZED:2},d.prototype.availableOptions={color:{type:h.COLOR,default:l.b.WHITE,uniformType:p.FLOAT4},mode:{type:h.NUMBER,default:d.MODES.NONE,uniformType:p.INT}},e.a=d},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(6),c=i(37),h=l.c.OptionType,p=l.c.UniformType,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(211),u._lastImage=null,u}return u()(e,t),e.prototype._applyCanvas=function(t,i,r){for(var n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options.overlayTexture.getRenderTarget().getContext()),o=i.getCanvas(),s=i.getContext(),a=r.getContext(),u=s.getImageData(0,0,o.width,o.height),c=n.getImageData(0,0,o.width,o.height),h=this._options,p=h.blendMode,d=h.alpha,f=new l.b,_=new l.b,g=new l.b,m=0;m<o.width*o.height*4;m+=4){f.set(u.data[m]/255,u.data[m+1]/255,u.data[m+2]/255,u.data[m+3]/255),_.set(c.data[m]/255,c.data[m+1]/255,c.data[m+2]/255,c.data[m+3]/255);var y=void 0,v=void 0,b=void 0,x=void 0,T=void 0,k=void 0,w=void 0,C=void 0,O=void 0;switch(p){case e.BLEND_MODES.NORMAL:g.set(f.r+_.a*d*(_.r-f.r),f.g+_.a*d*(_.g-f.g),f.b+_.a*d*(_.b-f.b),f.a);break;case e.BLEND_MODES.OVERLAY:y=1-2*(1-f.r)*(1-_.r),v=2*f.r*_.r,b=y+(f.r<.5?1:0)*(v-y),x=1-2*(1-f.g)*(1-_.g),T=2*f.g*_.g,k=x+(f.g<.5?1:0)*(T-x),w=1-2*(1-f.b)*(1-_.b),C=2*f.b*_.b,O=w+(f.b<.5?1:0)*(C-w),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.HARD_LIGHT:y=1-2*(1-_.r)*(1-f.r),v=2*_.r*f.r,b=y+(_.r<.5?1:0)*(v-y),x=1-2*(1-_.g)*(1-f.g),T=2*_.g*f.g,k=x+(_.g<.5?1:0)*(T-x),w=1-2*(1-_.b)*(1-f.b),C=2*_.b*f.b,O=w+(_.b<.5?1:0)*(C-w),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.SOFT_LIGHT:y=2*f.r*(1-_.r)+(2*_.r-1)*Math.sqrt(f.r),v=2*f.r*_.r+f.r*f.r*(1-2*_.r),b=y+(_.r<.5?1:0)*(v-y),x=2*f.g*(1-_.g)+(2*_.g-1)*Math.sqrt(f.g),T=2*f.g*_.g+f.g*f.g*(1-2*_.g),k=x+(_.g<.5?1:0)*(T-x),w=2*f.b*(1-_.b)+(2*_.b-1)*Math.sqrt(f.b),C=2*f.b*_.b+f.b*f.b*(1-2*_.b),O=w+(_.b<.5?1:0)*(C-w),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.MULTIPLY:b=f.r*_.r,k=f.g*_.g,O=f.b*_.b,g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.DARKEN:b=Math.min(f.r,_.r),k=Math.min(f.g,_.g),O=Math.min(f.b,_.b),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.LIGHTEN:b=Math.max(f.r,_.r),k=Math.max(f.g,_.g),O=Math.max(f.b,_.b),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.SCREEN:b=1-(1-f.r)*(1-_.r),k=1-(1-f.g)*(1-_.g),O=1-(1-f.b)*(1-_.b),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a);break;case e.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-f.r)/Math.max(_.r,1e-6))),k=Math.max(0,Math.min(1,1-(1-f.g)/Math.max(_.g,1e-6))),O=Math.max(0,Math.min(1,1-(1-f.b)/Math.max(_.b,1e-6))),g.set(f.r+_.a*d*(b-f.r),f.g+_.a*d*(k-f.g),f.b+_.a*d*(O-f.b),f.a)}u.data[m]=255*g.r,u.data[m+1]=255*g.g,u.data[m+2]=255*g.b,u.data[m+3]=255*g.a}a.putImageData(u,0,0)},e}(c.a);d.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},d.prototype.availableOptions={blendMode:{type:h.NUMBER,default:d.BLEND_MODES.NORMAL,uniformType:p.INT},overlayImage:{type:h.NUMBER,required:!0,uniformType:p.SAMPLER2D},overlayTexture:{type:h.OBJECT,required:!0},alpha:{type:h.NUMBER,default:1,uniformType:p.FLOAT}},e.a=d},function(t,e){t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), 1.0);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(t,e,i){"use strict";function r(t){return t.map(function(t){return("0"+(255&t).toString(16)).slice(-2)}).join("")}var n=i(13),o=i.n(n),s=i(9),a=i.n(s),u=i(0),l=i.n(u),c=i(21),h=i(213),p=i(35),d=i(39),f=i(215),_=function(t){return c.a.byteArrayToString(p.a.decode(t))},g=function(){function t(e){l()(this,t),this._version="2.0",this._l="string"==typeof e?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return t.prototype.v=function(){return this._sigValid()&&!this.isExp()},t.prototype._jsonValid=function(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0},t.prototype._hostnameValid=function(){if("undefined"==typeof window)return!0;if(!this._decLic[_("YXBwX2lkZW50aWZpZXJz")].length)return!0;var t=window.location.hostname,e=!1;return this._decLic[_("YXBwX2lkZW50aWZpZXJz")].forEach(function(i){c.a.wildCardMatch(t,i)&&(e=!0)}),e},t.prototype._platformValid=function(){var t=this._decLic[_("cGxhdGZvcm0=")];return("undefined"==typeof WEBPACK?"Server":"HTML5")===t},t.prototype.c=function(){var t=this;return new a.a(function(e,i){if("string"!==o()(t._l)||!t._jsonValid()){var r=new Error;return r.code="ELICINVFMT",i(r)}if(!t._sigValid()){var n=new Error;return n.code="ELICINV",i(n)}if(!t._hostnameValid()){var s=new Error;return s.code="ELICINVHOST",i(s)}if(!t._platformValid()){var a=new Error;return a.code="ELICINVPLAT",i(a)}if(t.isExp()){var u=new Error;return u.code="ELICEXP",i(u)}e()})},t.prototype.isToolAllowed=function(t){return this._decLic[_("ZmVhdHVyZXM=")]&&-1!==this._decLic[_("ZmVhdHVyZXM=")].indexOf(t)},t.prototype.t=function(){if(this._decLic.enterprise_license)return a.a.resolve();var t=this._decLic[_("ZG9tYWlucw==")][0]+_(_("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[_("YXBpX3Rva2Vu")];return new d.a(t).load()},t.prototype.isENT=function(){return!!this._decLic&&this._decLic[_("ZW50ZXJwcmlzZV9saWNlbnNl")]},t.prototype._sigValid=function(){return this._verify(this._message,this._sig)},t.prototype.exp=function(){return!!this._decLic[_("ZXhwaXJlc19hdA==")]},t.prototype.dl=function(){return Math.ceil((this._expAt()-Date.now())/864e5)},t.prototype.isExp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[_("ZXhwaXJlc19hdA==")]&&t>this._expAt()},t.prototype._expAt=function(){return 1e3*this._decLic[_("ZXhwaXJlc19hdA==")]},t.prototype._verify=function(t,e){var i=void 0,r=void 0;return r=this._encodeMessage(t),i=this._decodeSignature(e),i=i.substr(-64),r===i},t.prototype._encodeMessage=function(t){return Object(f.a)(t)},t.prototype._decodeSignature=function(t){var e=void 0;return t=p.a.decode(t),t=r(t),t=this._parseBigInt(t,16),e=t.modPowInt(this._e,this._n),e=e.toString(16)},t.prototype._parseBigInt=function(t,e){return new h.a(t,e)},t.prototype._parseLicense=function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[_("c2lnbmF0dXJl")]||"",delete this._decLic[_("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+\/=]/g,""),this._message=this._l.replace(new RegExp(',"'+_("c2lnbmF0dXJl")+'":"([^"]*)"'),""))},t}();e.a=g},function(t,e,i){"use strict";function r(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new r(null)}function o(t,e,i,r,n,o){for(;--o>=0;){var s=e*this[t++]+i[r]+n;n=Math.floor(s/67108864),i[r++]=67108863&s}return n}function s(t,e,i,r,n,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],l=this[t++]>>15,c=a*u+l*s;u=s*u+((32767&c)<<15)+i[r]+(1073741823&n),n=(u>>>30)+(c>>>15)+a*l+(n>>>30),i[r++]=1073741823&u}return n}function a(t,e,i,r,n,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],l=this[t++]>>14,c=a*u+l*s;u=s*u+((16383&c)<<14)+i[r]+n,n=(u>>28)+(c>>14)+a*l,i[r++]=268435455&u}return n}function u(t){return oe.charAt(t)}function l(t,e){var i=se[t.charCodeAt(e)];return null==i?-1:i}function c(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function h(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function p(t){var e=n();return e.fromInt(t),e}function d(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,o=!1,s=0;--n>=0;){var a=8==i?255&t[n]:l(t,n);a<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=i)>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)}function f(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function _(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(i=this[s]>>a)>0&&(n=!0,o=u(i));s>=0;)a<e?(i=(this[s]&(1<<a)-1)<<e-a,i|=this[--s]>>(a+=this.DB-e)):(i=this[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),i>0&&(n=!0),n&&(o+=u(i));return n?o:"0"}function g(){var t=n();return r.ZERO.subTo(this,t),t}function m(){return this.s<0?this.negate():this}function y(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function v(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function b(){return this.t<=0?0:this.DB*(this.t-1)+v(this[this.t-1]^this.s&this.DM)}function x(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function T(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function k(t,e){var i,r=t%this.DB,n=this.DB-r,o=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>n|a,a=(this[i]&o)<<r;for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function w(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var r=t%this.DB,n=this.DB-r,o=(1<<r)-1;e[0]=this[i]>>r;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<n,e[s-i]=this[s]>>r;r>0&&(e[this.t-i-1]|=(this.s&o)<<n),e.t=this.t-i,e.clamp()}function C(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function O(t,e){var i=this.abs(),n=t.abs(),o=i.t;for(e.t=o+n.t;--o>=0;)e[o]=0;for(o=0;o<n.t;++o)e[o+i.t]=i.am(0,n[o],e,o,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)}function R(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function E(t,e,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),u=this.s,l=t.s,c=this.DB-v(o[o.t-1]);c>0?(o.lShiftTo(c,a),s.lShiftTo(c,i)):(o.copyTo(a),s.copyTo(i));var h=a.t,p=a[h-1];if(0!=p){var d=p*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),f=this.FV/d,_=(1<<this.F1)/d,g=1<<this.F2,m=i.t,y=m-h,b=null==e?n():e;for(a.dlShiftTo(y,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),r.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--y>=0;){var x=i[--m]==p?this.DM:Math.floor(i[m]*f+(i[m-1]+g)*_);if((i[m]+=a.am(0,x,i,y,0,h))<x)for(a.dlShiftTo(y,b),i.subTo(b,i);i[m]<--x;)i.subTo(b,i)}null!=e&&(i.drShiftTo(h,e),u!=l&&r.ZERO.subTo(e,e)),i.t=h,i.clamp(),c>0&&i.rShiftTo(c,i),u<0&&r.ZERO.subTo(i,i)}}}function S(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e}function F(t){this.m=t}function M(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function D(t){return t}function B(t){t.divRemTo(this.m,null,t)}function I(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function A(t,e){t.squareTo(e),this.reduce(e)}function N(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function L(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function P(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e}function z(t){var e=n();return t.copyTo(e),this.reduce(e),e}function U(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function G(t,e){t.squareTo(e),this.reduce(e)}function j(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function V(){return 0==(this.t>0?1&this[0]:this.s)}function W(t,e){if(t>4294967295||t<1)return r.ONE;var i=n(),o=n(),s=e.convert(this),a=v(t)-1;for(s.copyTo(i);--a>=0;)if(e.sqrTo(i,o),(t&1<<a)>0)e.mulTo(o,s,i);else{var u=i;i=o,o=u}return e.revert(i)}function H(t,e){var i;return i=t<256||e.isEven()?new F(e):new L(e),this.exp(t,i)}function q(){var t=n();return this.copyTo(t),t}function X(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Y(){return 0==this.t?this.s:this[0]<<24>>24}function Z(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=p(i),o=n(),s=n(),a="";for(this.divRemTo(r,o,s);o.signum()>0;)a=(i+s.intValue()).toString(t).substr(1)+a,o.divRemTo(r,o,s);return s.intValue().toString(t)+a}function $(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),o=!1,s=0,a=0,u=0;u<t.length;++u){var c=l(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(a=e*a+c,++s>=i&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),o&&r.ZERO.subTo(this,this)}function tt(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),ut,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}}function et(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function it(t){return 0==this.compareTo(t)}function rt(t){return this.compareTo(t)<0?this:t}function nt(t){return this.compareTo(t)>0?this:t}function ot(t,e,i){var r,n,o=Math.min(t.t,this.t);for(r=0;r<o;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=o;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=o;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function st(t,e){return t&e}function at(t){var e=n();return this.bitwiseTo(t,st,e),e}function ut(t,e){return t|e}function lt(t){var e=n();return this.bitwiseTo(t,ut,e),e}function ct(t,e){return t^e}function ht(t){var e=n();return this.bitwiseTo(t,ct,e),e}function pt(t,e){return t&~e}function dt(t){var e=n();return this.bitwiseTo(t,pt,e),e}function ft(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function _t(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function gt(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function mt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function yt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+mt(this[t]);return this.s<0?this.t*this.DB:-1}function vt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bt(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=vt(this[i]^e);return t}function xt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Tt(t,e){var i=r.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function kt(t){return this.changeBit(t,ut)}function wt(t){return this.changeBit(t,pt)}function Ct(t){return this.changeBit(t,ct)}function Ot(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function Rt(t){var e=n();return this.addTo(t,e),e}function Et(t){var e=n();return this.subTo(t,e),e}function St(t){var e=n();return this.multiplyTo(t,e),e}function Ft(){var t=n();return this.squareTo(t),t}function Mt(t){var e=n();return this.divRemTo(t,e,null),e}function Dt(t){var e=n();return this.divRemTo(t,null,e),e}function Bt(t){var e=n(),i=n();return this.divRemTo(t,e,i),new Array(e,i)}function It(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function At(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Nt(){}function Lt(t){return t}function Pt(t,e,i){t.multiplyTo(e,i)}function zt(t,e){t.squareTo(e)}function Ut(t){return this.exp(t,new Nt)}function Gt(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;var n;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function jt(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function Vt(t){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Wt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function Ht(t){return t}function qt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Xt(t,e){t.squareTo(e),this.reduce(e)}function Yt(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Zt(t,e){var i,r,o=t.bitLength(),s=p(1);if(o<=0)return s;i=o<18?1:o<48?3:o<144?4:o<768?5:6,r=o<8?new F(e):e.isEven()?new Vt(e):new L(e);var a=new Array,u=3,l=i-1,c=(1<<i)-1;if(a[1]=r.convert(this),i>1){var h=n();for(r.sqrTo(a[1],h);u<=c;)a[u]=n(),r.mulTo(h,a[u-2],a[u]),u+=2}var d,f,_=t.t-1,g=!0,m=n();for(o=v(t[_])-1;_>=0;){for(o>=l?d=t[_]>>o-l&c:(d=(t[_]&(1<<o+1)-1)<<l-o,_>0&&(d|=t[_-1]>>this.DB+o-l)),u=i;0==(1&d);)d>>=1,--u;if((o-=u)<0&&(o+=this.DB,--_),g)a[d].copyTo(s),g=!1;else{for(;u>1;)r.sqrTo(s,m),r.sqrTo(m,s),u-=2;u>0?r.sqrTo(s,m):(f=s,s=m,m=f),r.mulTo(m,a[d],s)}for(;_>=0&&0==(t[_]&1<<o);)r.sqrTo(s,m),f=s,s=m,m=f,--o<0&&(o=this.DB-1,--_)}return r.revert(s)}function Jt(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(n<o&&(o=n),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i}function Kt(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function Qt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var i=t.clone(),n=this.clone(),o=p(1),s=p(0),a=p(0),u=p(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);i.compareTo(n)>=0?(i.subTo(n,i),e&&o.subTo(a,o),s.subTo(u,s)):(n.subTo(i,n),e&&a.subTo(o,a),u.subTo(s,u))}return 0!=n.compareTo(r.ONE)?r.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function $t(t){var e,i=this.abs();if(1==i.t&&i[0]<=ae[ae.length-1]){for(e=0;e<ae.length;++e)if(i[0]==ae[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<ae.length;){for(var r=ae[e],n=e+1;n<ae.length&&r<ue;)r*=ae[n++];for(r=i.modInt(r);e<n;)if(r%ae[e++]==0)return!1}return i.millerRabin(t)}function te(t){var e=this.subtract(r.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var o=e.shiftRight(i);(t=t+1>>1)>ae.length&&(t=ae.length);for(var s=n(),a=0;a<t;++a){s.fromInt(ae[Math.floor(Math.random()*ae.length)]);var u=s.modPow(o,this);if(0!=u.compareTo(r.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<i&&0!=u.compareTo(e);)if(u=u.modPowInt(2,this),0==u.compareTo(r.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
var ee,ie=ie||{};"Microsoft Internet Explorer"==ie.appName?(r.prototype.am=s,ee=30):"Netscape"!=ie.appName?(r.prototype.am=o,ee=26):(r.prototype.am=a,ee=28),r.prototype.DB=ee,r.prototype.DM=(1<<ee)-1,r.prototype.DV=1<<ee;r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-ee,r.prototype.F2=2*ee-52;var re,ne,oe="0123456789abcdefghijklmnopqrstuvwxyz",se=new Array;for(re="0".charCodeAt(0),ne=0;ne<=9;++ne)se[re++]=ne;for(re="a".charCodeAt(0),ne=10;ne<36;++ne)se[re++]=ne;for(re="A".charCodeAt(0),ne=10;ne<36;++ne)se[re++]=ne;F.prototype.convert=M,F.prototype.revert=D,F.prototype.reduce=B,F.prototype.mulTo=I,F.prototype.sqrTo=A,L.prototype.convert=P,L.prototype.revert=z,L.prototype.reduce=U,L.prototype.mulTo=j,L.prototype.sqrTo=G,r.prototype.copyTo=c,r.prototype.fromInt=h,r.prototype.fromString=d,r.prototype.clamp=f,r.prototype.dlShiftTo=x,r.prototype.drShiftTo=T,r.prototype.lShiftTo=k,r.prototype.rShiftTo=w,r.prototype.subTo=C,r.prototype.multiplyTo=O,r.prototype.squareTo=R,r.prototype.divRemTo=E,r.prototype.invDigit=N,r.prototype.isEven=V,r.prototype.exp=W,r.prototype.toString=_,r.prototype.negate=g,r.prototype.abs=m,r.prototype.compareTo=y,r.prototype.bitLength=b,r.prototype.mod=S,r.prototype.modPowInt=H,r.ZERO=p(0),r.ONE=p(1),Nt.prototype.convert=Lt,Nt.prototype.revert=Lt,Nt.prototype.mulTo=Pt,Nt.prototype.sqrTo=zt,Vt.prototype.convert=Wt,Vt.prototype.revert=Ht,Vt.prototype.reduce=qt,Vt.prototype.mulTo=Yt,Vt.prototype.sqrTo=Xt;var ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ue=(1<<26)/ae[ae.length-1];r.prototype.chunkSize=J,r.prototype.toRadix=Q,r.prototype.fromRadix=$,r.prototype.fromNumber=tt,r.prototype.bitwiseTo=ot,r.prototype.changeBit=Tt,r.prototype.addTo=Ot,r.prototype.dMultiply=It,r.prototype.dAddOffset=At,r.prototype.multiplyLowerTo=Gt,r.prototype.multiplyUpperTo=jt,r.prototype.modInt=Kt,r.prototype.millerRabin=te,r.prototype.clone=q,r.prototype.intValue=X,r.prototype.byteValue=Y,r.prototype.shortValue=Z,r.prototype.signum=K,r.prototype.toByteArray=et,r.prototype.equals=it,r.prototype.min=rt,r.prototype.max=nt,r.prototype.and=at,r.prototype.or=lt,r.prototype.xor=ht,r.prototype.andNot=dt,r.prototype.not=ft,r.prototype.shiftLeft=_t,r.prototype.shiftRight=gt,r.prototype.getLowestSetBit=yt,r.prototype.bitCount=bt,r.prototype.testBit=xt,r.prototype.setBit=kt,r.prototype.clearBit=wt,r.prototype.flipBit=Ct,r.prototype.add=Rt,r.prototype.subtract=Et,r.prototype.multiply=St,r.prototype.divide=Mt,r.prototype.remainder=Dt,r.prototype.divideAndRemainder=Bt,r.prototype.modPow=Zt,r.prototype.modInverse=Qt,r.prototype.pow=Ut,r.prototype.gcd=Jt,r.prototype.isProbablePrime=$t,r.prototype.square=Ft,e.a=r},function(t,e){t.exports=require("url")},function(t,e,i){"use strict";/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
function r(t){function e(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function i(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function n(t,e,i){return t&e^~t&i}function o(t,e,i){return t&e^t&i^e&i}function s(t){return i(t,2)^i(t,13)^i(t,22)}function a(t){return i(t,6)^i(t,11)^i(t,25)}function u(t){return i(t,7)^i(t,18)^r(t,3)}function l(t){return i(t,17)^i(t,19)^r(t,10)}var c=8,h=0;return t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t),function(t){for(var e=h?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<4*t.length;r++)i+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return i}(function(t,i){var r,c,h,p,d,f,_,g,m,y,v,b,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),T=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),k=new Array(64);t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;for(var m=0;m<t.length;m+=16){r=T[0],c=T[1],h=T[2],p=T[3],d=T[4],f=T[5],_=T[6],g=T[7];for(var y=0;y<64;y++)k[y]=y<16?t[y+m]:e(e(e(l(k[y-2]),k[y-7]),u(k[y-15])),k[y-16]),v=e(e(e(e(g,a(d)),n(d,f,_)),x[y]),k[y]),b=e(s(r),o(r,c,h)),g=_,_=f,f=d,d=e(p,v),p=h,h=c,c=r,r=e(v,b);T[0]=e(r,T[0]),T[1]=e(c,T[1]),T[2]=e(h,T[2]),T[3]=e(p,T[3]),T[4]=e(d,T[4]),T[5]=e(f,T[5]),T[6]=e(_,T[6]),T[7]=e(g,T[7])}return T}(function(t){for(var e=Array(),i=(1<<c)-1,r=0;r<t.length*c;r+=c)e[r>>5]|=(t.charCodeAt(r/c)&i)<<24-r%32;return e}(t),t.length*c))}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o});for(var r="undefined"==typeof window?global:window,n=r.requestAnimationFrame,o=r.cancelAnimationFrame,s=0,a=["ms","moz","webkit","o"],u=0;u<a.length&&!n;++u)n=r[a[u]+"RequestAnimationFrame"],o=r[a[u]+"CancelAnimationFrame"]||r[a[u]+"CancelRequestAnimationFrame"];n&&(n=n.bind(r)),o&&(o=o.bind(r)),n||(n=function(t,e){var i=(new Date).getTime(),r=Math.max(0,16-(i-s)),n=setTimeout(function(){t(i+r)},r);return s=i+r,n}),o||(o=function(t){clearTimeout(t)})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(28),c=i(25),h=i(29),p=i(112),d=l.Constants.OptionType,f=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._getRotation=function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t},e.prototype._getFlipVertically=function(){return-1!==[5,7].indexOf(this.getTags().Orientation)},e.prototype._getFlipHorizontally=function(){return-1!==[2,4].indexOf(this.getTags().Orientation)},e.prototype._getFinalOptions=function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}},e.prototype._render=function(t){var e=this._getFinalOptions(),i=e.rotation%360,r=i*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(r),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var n=this._sprite.getBounds();return this._renderTexture.resizeTo(new h.a(n.width,n.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),c.a.resolve()},e.prototype.getNewDimensions=function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t},e}(p.a);f.identifier="exif-orientation",f.prototype.availableOptions={tags:{type:d.OBJECT,default:{}}},e.a=f},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(28),s=function(){function t(e){n()(this,t),this._version=e,this._check()}return t.prototype._check=function(){var t=this;if("undefined"==typeof document)return o.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var e=this;window.imglySDKVersionCallback=function(i){i.outdated&&o.Log.warn(t.constructor.name,"Your Version "+e._version+" is outdated. Current version is "+i.version+".")};var i=document.createElement("script");i.src="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback=imglySDKVersionCallback&version="+this._version,i.async=!0,document.getElementsByTagName("head")[0].appendChild(i)},t}();e.a=s},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(79),s=i(80),a=s.a.MARKERS,u=function(){function t(e){n()(this,t),this._buf=e,this._stream=new o.a(this._buf),this._stream.setHead(0)}return t.prototype.isValid=function(){if(this._stream.setHead(0),this._stream.readInt16()!==a.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e},t.prototype.setUnitDensity=function(t){this._stream.setHead(11),this._stream.writeInt8(t)},t.prototype.setDensityX=function(t){this._stream.setHead(12),this._stream.writeInt16(t)},t.prototype.setDensityY=function(t){this._stream.setHead(13),this._stream.writeInt16(t)},t.prototype.getUnitDensity=function(){return this._stream.setHead(11),this._stream.readInt8()},t.prototype.getDensityX=function(){return this._stream.setHead(12),this._stream.readInt16()},t.prototype.getDensityY=function(){return this._stream.setHead(14),this._stream.readInt16()},t}();e.a=u},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(79),s=i(80),a=i(21),u=a.a.invariant,l=s.a.MARKERS,c=s.a.EXIF_TAGS,h=function(){function t(e){n()(this,t),this._buf=e,this._stream=new o.a(this._buf),this._stream.setHead(0),this._parse()}return t.prototype.isValid=function(){return this._stream.setHead(0),this._stream.readInt16()===l.EXIF&&(this._stream.readInt16()>0&&"Exif"===this._stream.readString(4))},t.prototype._parse=function(){if(this.isValid()){this._stream.setHead(10);var t=this._stream.getHead(),e=!1,i=this._stream.readInt16();18761===i?e=!1:19789===i?e=!0:u(!1,"Invalid TIFF data: No endian type found"),u(42===this._stream.readInt16(!e),"Invalid TIFF data: No 0x002A");var r=this._stream.readInt32(!e);u(r>=8,"Invalid TIFF data: First IFD offset < 8");var n=t+r,o=this._readTags(this._stream,t,n,e);this._tags=o.tags,this._tagData=o.tagData}},t.prototype.getTags=function(){return this._tags},t.prototype.getTagData=function(){return this._tagData},t.prototype.setOrientation=function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._stream.setHead(e+8),this._stream.writeInt16(t)}},t.prototype._readTags=function(t,e,i,r){t.setHead(i);for(var n=t.readInt16(!r),o={},s=[],a=0;a<n;a++){var u=i+12*a+2;t.setHead(u);var l=t.readInt16(!r),h=void 0,p=void 0,d=void 0;if(c[l]){l=c[l],h=t.readInt16(!r),p=t.readInt32(!r),d=t.readInt32(!r)+e;var f=null;switch(h){case 1:case 7:if(1===p)f=t.readInt8(!r);else{f=[];for(var _=0;_<p;_++)f.push(t.readInt8(!r))}break;case 2:t.setHead(p>4?d:u+8),f=t.readString(p);break;case 3:if(t.setHead(p>2?d:u+8),1===p)f=t.readInt16(!r);else{f=[];for(var g=0;g<p;g++)f.push(t.readInt16(!r))}break;case 4:case 9:if(t.setHead(p>1?d:u+8),1===p)f=t.readInt32(!r);else{f=[];for(var m=0;m<p;m++)f.push(t.readInt32(!r))}break;case 5:case 10:if(t.setHead(d),1===p){f=t.readInt32(!r)/t.readInt32(!r)}else{f=[];for(var y=0;y<p;y++){var v=t.readInt32(!r),b=t.readInt32(!r),x=v/b;f.push(x)}}}o[l]=f,s[l]={value:f,numValues:p,entryOffset:u,valueOffset:d,type:h}}}return{tags:o,tagData:s}},t.prototype.getBuffer=function(){return this._buf},t}();e.a=h},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(24),p=i(50),d=i(21),f=i(78),_=i(38),g=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(this,e);var n=u()(this,t.call(this,r));return n._sdk=i,n}return c()(e,t),e.prototype.export=function(){var t=this,e=this._sdk.getRenderer(),r=this._options,o=r.renderType,s=r.imageFormat,a=r.quality;return this.validateSettings().then(function(){return t._prepareSDK()}).then(function(r){var u=e.getCanvas();e.isOfType(h.RendererType.WEBGL)&&(u=t._createCanvasFromTexture(r));var l=void 0;if(o===h.RenderType.IMAGE||o===h.RenderType.DATAURL){l="undefined"==typeof window?u.toDataURL(s):u.toDataURL(s,a);var c=t._sdk.getImage(),p=f.a.isJPEG(c.src),d=f.a.isJPEG(l);if(p&&d){var _=t._sdk.getExif();_&&(l=_.restoreSegments(l))}}if(o===h.RenderType.IMAGE){var g=void 0;return g=new(0,i(17).Image),g.src=l,g}return o===h.RenderType.DATAURL?l:o===h.RenderType.BUFFER?u.toBuffer():o===h.RenderType.MSBLOB?u.msToBlob():o===h.RenderType.BLOB?new n.a(function(t,e){u.toBlob(function(e){t(e)},s,a)}):void 0}).then(function(e){return t._restoreSDK().then(function(){return e})})},e.prototype._prepareSDK=function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(h.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var i=this._sdk.getOperationsStack();return i.forEach(function(t){t.disposeRenderTextures()}),i.disableCache(),this._sdk.render()},e.prototype._restoreSDK=function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),e=t.isOfType(h.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()},e.prototype._createCanvasFromTexture=function(t){var e=this._sdk.getRenderer(),i=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n);var o=t.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var s=new Uint8Array(i.x*i.y*4);r.readPixels(0,0,i.x,i.y,r.RGBA,r.UNSIGNED_BYTE,s);var a=this._checkPixelsForTransparency(s),u=void 0;if(a){var l=new p.a.Sprite(t);l.setFilters([new p.a.Filters.UnpremultiplyFilter]);var c=new p.a.Container;c.addChild(l),u=new p.a.RenderTexture(e,i.x,i.y),u.render(c);var h=u.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0),r.readPixels(0,0,i.x,i.y,r.RGBA,r.UNSIGNED_BYTE,s),e.setRenderTarget(),u.dispose()}var f=d.a.createCanvas();f.width=i.x,f.height=i.y;var _=f.getContext("2d"),g=_.createImageData(i.x,i.y);return g.data.set(s),_.putImageData(g,0,0),r.deleteFramebuffer(n),f},e.prototype._checkPixelsForTransparency=function(t){for(var e=this._sdk.getFinalDimensions(),i=e.x*e.y*4,r=3;r<i;r+=4)if(255!==t[r])return!0;return!1},e}(_.a);g.prototype.availableOptions={renderType:{type:h.OptionType.STRING,available:d.a.values(h.RenderType),default:h.RenderType.IMAGE},imageFormat:{type:h.OptionType.STRING,available:d.a.values(h.ImageFormat),default:h.ImageFormat.PNG},quality:{type:h.OptionType.NUMBER,default:.8}},e.a=g},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=function(){function t(){n()(this,t)}return t.current=function(){return"production"},t.isTest=function(){return!1},t.isDevelopment=function(){return!1},t.isProduction=function(){return!0},t}();e.a=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(40);i.d(e,"ImageLoader",function(){return r.a});var n=i(39);i.d(e,"JSONLoader",function(){return n.a})},function(t,e){t.exports=require("fs")},function(t,e){t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(3),n=i.n(r),o=i(227),s=i(231),a=i(233),u=i(296),l=i(297),c=i(300),h=i(303),p=i(304),d=i(305),f=i(308),_=i(314),g=i(319),m=i(321),y=[o.a,s.a,a.a,u.a,l.a,c.a,h.a,p.a,d.a,f.a,_.a,g.a,m.a];n.a.AllOperations=y,e.default=y},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(116),p=i(229),d=l.Math.ColorMatrix,f=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._clarityFilter=new p.a,a._filter=new h.a,a._sprite.setFilters([a._clarityFilter,a._filter]),a}return u()(e,t),e.prototype._render=function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y,this._clarityFilter.set({clarity:this._options.clarity,texSize:e});var i=new d;return i.multiply(d.createExposureMatrix(this._options.exposure)),i.multiply(d.createSaturationMatrix(this._options.saturation+1)),i.multiply(d.createContrastMatrix(this._options.contrast+1)),i.multiply(d.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,colorMatrix:i,colorOffset:i.getOffsets()}),0!==this._options.clarity?this._sprite.setFilters([this._clarityFilter,this._filter]):this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._clarityFilter.dispose()},e}(l.Operation);f.identifier="adjustments",f.prototype.availableOptions={brightness:{type:l.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:l.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:l.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:l.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:l.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:l.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:l.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:l.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},c.a.Operations.AdjustmentsOperation=f,e.a=f},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 color = texColor;\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = dot(color.rgb, luminanceWeighting);\n  float shadow = u_shadows >= 0.0\n      ? clamp(\n            pow(luminance, 1.0 / (u_shadows + 1.0))\n            + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n            - luminance\n      , 0.0, max(u_shadows, 1.0))\n      : -clamp(\n            pow(luminance, 1.0 / (-u_shadows + 1.0))\n            + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n            - luminance\n      , 0.0, max(-u_shadows, 1.0));\n\n    float highlight = u_highlights < 0.0\n      ? clamp(\n            1.0\n            - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n            - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n            - luminance\n       , -1.0, 0.0)\n      : -clamp(\n            1.0\n            - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n            - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n            - luminance\n       , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n  color.rgb = clamp((luminance + highlight + shadowContrast) * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n\n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(41)),h=i.n(c),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(230),r._lastClarity=null,r._blurredRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),n=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),n&&this._blurImage(e),this._applyClarity(e,i)},e.prototype._blurImage=function(t){var e=t.getCanvas(),i=t.getContext(),r=i.getImageData(0,0,e.width,e.height);h.a.stackBlurCanvasRGBA(r,0,0,e.width,e.height,1),this._blurredRenderTarget.getContext().putImageData(r,0,0)},e.prototype._applyClarity=function(t,e){for(var i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._options.clarity,a=n.getImageData(0,0,r.width,r.height),u=a.data,l=o.getImageData(0,0,r.width,r.height).data,c=Math.max(.2*this._options.clarity,0),h=1-c,p=1+s,d=1-(1+s),f=0;f<r.width*r.height*4;f+=4){var _=l[f]*d+u[f]*p,g=l[f+1]*d+u[f+1]*p,m=l[f+2]*d+u[f+2]*p,y=.2125*_+.7154*g+.0721*m,v=y*c;u[f]=_*h+v,u[f+1]=g*h+v,u[f+2]=m*h+v}i.putImageData(a,0,0)},e}(l.Engine.Filter);d.prototype.availableOptions={clarity:{type:l.OptionType.NUMBER,default:0,uniformType:l.UniformType.FLOAT},texSize:{type:l.OptionType.VECTOR2,default:new p(100,100),uniformType:l.UniformType.FLOAT2}},e.a=d},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_clarity;\nuniform vec2 u_texSize;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n  vec4 original = texture2D(u_image, v_texCoord);\n\n  vec4 color = texture2D(u_image, v_texCoord);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 0.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 0.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, 1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, 1.0) * u_texSize);\n\n  color +=  texture2D(u_image, v_texCoord + vec2(0.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(-1.0, -1.0) * u_texSize);\n  color +=  texture2D(u_image, v_texCoord + vec2(1.0, -1.0) * u_texSize);\n\n  // apply unsharp mask\n  vec4 blurred = color / 9.0;\n  color = mix(blurred, original, 1.0 + u_clarity);\n\n  // desaturation, to emphesize the effect\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, color.xyz));\n  float desaturation = clamp(u_clarity * 0.13, 0.0, 1.0);\n  gl_FragColor = vec4(mix(color.xyz, gray, desaturation) * color.a, color.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(117),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._lastBlurRadius=a._options.blurRadius,a._horizontalFilter=new h.a,a._verticalFilter=new h.a,a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new p(1,1)),a._verticalFilter.setDelta(new p(-1,1)),a._filter=new h.a,a}return u()(e,t),e.prototype._renderWebGL=function(t){var e=t.getDimensions(),i=e.min(),r=this._options.blurRadius,n={blurRadius:r*i,texSize:e};return this._horizontalFilter.set(n),this._verticalFilter.set(n),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=this._options.blurRadius,i=t.getDimensions();return this._filter.set({blurRadius:e,texSize:i}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.transform=function(t){var e=this.getBlurRadius(),i=t.applyToRelativeSize(e);this.set({blurRadius:i},!1)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e}(l.Operation);d.identifier="blur",d.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:.025}},c.a.Operations.BlurOperation=d,e.a=d},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(118),p=i(5),d=i(264),f=i(4),_=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._render=function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)},e.prototype.render=function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?l.Promise.resolve(e):t.prototype.render.call(this,e)},e.prototype.setDirtyForRenderer=function(e,i){t.prototype.setDirtyForRenderer.call(this,e,i),this._selectedFilter.setDirtyForRenderer(e,i)},e.prototype.disposeRenderTextures=function(){t.prototype.disposeRenderTextures.call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._selectedFilter&&this._selectedFilter.dispose()},e}(l.Operation);_.identifier="filter",_.prototype.availableOptions={identifier:{type:l.OptionType.STRING,default:"identity"},intensity:{type:l.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:l.OptionType.OBJECT,default:new h.a,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},_.FilterPrimitives=p,_.Filters=d,_.Filter=f.a,c.a.Operations.FilterOperation=_,e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(235),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=i.getContext(),o=this._options.filteredCanvas;n.save(),n.drawImage(r,0,0),n.globalAlpha=this._options.intensity,n.drawImage(o,0,0),n.restore()},e}(l.Engine.Filter));c.prototype.availableOptions={filteredImage:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.INT},filteredCanvas:{type:l.OptionType.OBJECT,default:null},intensity:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.FLOAT}};var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n()(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new l.Engine.Container,this._sprite=new l.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new c}return t.prototype.push=function(t){this._stack.push(t)},t.prototype.clear=function(){this._stack=[]},t.prototype.render=function(t,e,i){if(0===this._stack.length)return l.Promise.resolve();var r=t.getRenderer();this._sprite.setTexture(e);var n=this._renderTextures[r.id];if(!n){var o=t.getSprite().getTexture().getFrame();n=new l.Engine.RenderTexture(t.getRenderer(),o.width,o.height),this._renderTextures[r.id]=n}var s=i.getDimensions();n.resizeTo(s);var a=this.isDirtyForRenderer(r);if(a){this._stack.forEach(function(e){e.update(t)});var u=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(u),n.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(l.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas());else if(r.isOfType(l.RendererType.WEBGL)){var c=n.getBaseTexture();c.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(c,!1)}return this._sprite.setFilters([this._blendFilter]),i.clear(l.Color.TRANSPARENT),i.render(this._container),a&&this.disposeRenderTextures(),l.Promise.resolve(i)},t.prototype.setIntensity=function(t){this._intensity=t},t.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},t.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},t.prototype.setDirty=function(t){for(var e in this._dirtiness)this._dirtiness[e]=t},t.prototype.disposeRenderTextures=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]},t.prototype.dispose=function(){this.disposeRenderTextures(),this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()},t}();e.a=h},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(237),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options.brightness;if(0!==a){a*=255;for(var u=0;u<r.width*r.height;u++){var l=4*u;s.data[l]+=a,s.data[l+1]+=a,s.data[l+2]+=a}o.putImageData(s,0,0)}},e}(l.Engine.Filter);h.prototype.availableOptions={brightness:{type:l.OptionType.NUMBER,default:0,uniformType:l.UniformType.FLOAT}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(239),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options.contrast;if(1!==a){for(var u=0;u<r.width*r.height;u++){var l=4*u;s.data[l]=(s.data[l]-127)*a+127,s.data[l+1]=(s.data[l+1]-127)*a+127,s.data[l+2]=(s.data[l+2]-127)*a+127}o.putImageData(s,0,0)}},e}(l.Engine.Filter);h.prototype.availableOptions={contrast:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.FLOAT}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setContrast(this._options.contrast)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=l.Math.ColorMatrix,p=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(241),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options.colorMatrix,u=new l.Color(0,0,0,0),c=0;c<r.width*r.height;c++){var h=4*c;u.r=s.data[h]/255,u.g=s.data[h+1]/255,u.b=s.data[h+2]/255,u=a.apply(u),s.data[h]=255*u.r,s.data[h+1]=255*u.g,s.data[h+2]=255*u.b}o.putImageData(s,0,0)},e}(l.Engine.Filter);p.prototype.availableOptions={colorMatrix:{type:l.OptionType.COLOR_MATRIX,default:new h,uniformType:l.UniformType.MAT4},colorMatrixOffset:{type:l.OptionType.ARRAY,default:[],uniformType:l.UniformType.FLOAT4}};var d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new p,a}return u()(e,t),e.prototype.update=function(){this._filter.setColorMatrix(this._options.colorMatrix)},e}(c.a);d.prototype.availableOptions=p.prototype.availableOptions,e.a=d},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(243),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=[.3,.59,.11],u=this._options.desaturation,l=0;l<r.width*r.height;l++){var c=4*l,h=a[0]*s.data[c]/255+a[1]*s.data[c+1]/255+a[2]*s.data[c+2]/255;s.data[c]+=(255*h-s.data[c])*u,s.data[c+1]+=(255*h-s.data[c+1])*u,s.data[c+2]+=(255*h-s.data[c+2])*u}o.putImageData(s,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={desaturation:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.FLOAT}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(245),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options.gamma,u=new Float32Array(256),l=0;l<256;l++)u[l]=255*Math.pow(l/255,a.r);for(var c=new Float32Array(256),h=0;h<256;h++)c[h]=255*Math.pow(h/255,a.g);for(var p=new Float32Array(256),d=0;d<256;d++)p[d]=255*Math.pow(d/255,a.b);for(var f=0;f<r.width*r.height;f++){var _=4*f;s.data[_]=u[s.data[_]],s.data[_+1]=c[s.data[_+1]],s.data[_+2]=p[s.data[_+2]]}o.putImageData(s,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={gamma:{type:l.OptionType.COLOR,default:l.Color.WHITE,uniformType:l.UniformType.FLOAT3}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setGamma(this._options.gamma)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(247),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r,n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),u=this._options.color,l=0;l<n.width;l++)for(var c=0;c<n.height;c++){var h=4*(n.width*c+l),p=l/n.width,d=c/n.height,f=(p-.5)/.75,_=(d-.5)/.75,g=f*f,m=_*_;r=1-(g+m),r=Math.min(Math.max(r,.1),1),a.data[h]=a.data[h]*(r*u.r),a.data[h+1]=a.data[h+1]*(r*u.g),a.data[h+2]=a.data[h+2]*(r*u.b),a.data[h+3]=255}s.putImageData(a,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={color:{type:l.OptionType.COLOR,default:l.Color.WHITE,uniformType:l.UniformType.FLOAT3}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(249),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=0;a<r.width;a++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+a);s.data[l+2]=.33*s.data[l+1],s.data[l]=.6*s.data[l],s.data[l+2]+=.33*s.data[l],s.data[l+1]=.7*s.data[l+1],s.data[l+3]=255}o.putImageData(s,0,0)},e}(l.Engine.Filter),p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e}(c.a);e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(251),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=0;a<r.width;a++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+a),c=.2125*s.data[l]+.7154*s.data[l+1]+.0721*s.data[l+2];s.data[l]=c,s.data[l+1]=c,s.data[l+2]=c}o.putImageData(s,0,0)},e}(l.Engine.Filter),p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e}(c.a);e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=l.Math.Vector2,p=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._precomputeQuads(),r._fragmentSource=i(254),r}return u()(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,i=new h;i.y=.125*(0|e)|0,i.x=(0|e)-8*i.y,this._quads.push(i)}},e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=this._options.lookupTableImage,a=this._createImageCanvas(s),u=a.getContext("2d"),l=n.getImageData(0,0,r.width,r.height),c=u.getImageData(0,0,s.width,s.height),p=new h,d=0;d<r.width*r.height*4;d+=4){var f=l.data[d],_=l.data[d+1],g=l.data[d+2],m=l.data[d+3]/255,y=this._quads[g];p.x=64*y.x,p.y=64*y.y,p.x+=Math.floor(f/4),p.y+=Math.floor(_/4);var v=4*(s.width*p.y+p.x)|0,b=c.data[v];b=f*(1-m)+b*m;var x=c.data[v+1];x=_*(1-m)+x*m;var T=c.data[v+2];T=g*(1-m)+T*m,l.data[d]=b,l.data[d+1]=x,l.data[d+2]=T}o.putImageData(l,0,0)},e.prototype._createImageCanvas=function(t){var e=l.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},e}(l.Engine.Filter);p.prototype.availableOptions={lookupTable:{type:l.OptionType.NUMBER,default:3,uniformType:l.UniformType.INT},lookupTableImage:{type:l.OptionType.IMAGE,uniformType:null}};var d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new p,a._textures={},a}return u()(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(l.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(l.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),i=e.id;this._textures[i]||(this._textures[i]=new l.Engine.BaseTexture);var r=this._textures[i];r.setSource(this._options.image),r.setGLUnit(3),e.updateTexture(r)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(c.a);d.prototype.availableOptions={image:{type:l.OptionType.IMAGE}},e.a=d},function(t,e){t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(256),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=this._options.saturation,u=0;u<r.width;u++)for(var l=0;l<r.height;l++){var c=4*(r.width*l+u),h=.2125*s.data[c]+.7154*s.data[c+1]+.0721*s.data[c+2];s.data[c]=h*(1-a)+s.data[c]*a,s.data[c+1]=h*(1-a)+s.data[c+1]*a,s.data[c+2]=h*(1-a)+s.data[c+2]*a}o.putImageData(s,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={saturation:{type:l.OptionType.NUMBER,default:0,uniformType:l.UniformType.FLOAT}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(258),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=0;a<r.width;a++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+a);s.data[l]=Math.max(255*this._options.color.r,s.data[l]),s.data[l+1]=Math.max(255*this._options.color.g,s.data[l+1]),s.data[l+2]=Math.max(255*this._options.color.b,s.data[l+2])}o.putImageData(s,0,0)},e}(l.Engine.Filter);h.prototype.availableOptions={color:{type:l.OptionType.COLOR,default:l.Color.WHITE,uniformType:l.UniformType.FLOAT3}};var p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(c.a);p.prototype.availableOptions=h.prototype.availableOptions,e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(119)),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._options.rgbControlPoints||(a._options.rgbControlPoints={red:a._options.controlPoints,green:a._options.controlPoints,blue:a._options.controlPoints}),a._updateLookupTable(),a}return u()(e,t),e.prototype._updateLookupTable=function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),i=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,i)},e.prototype._buildLookupTable=function(t,e,i){for(var r=[],n=0;n<256;n++)r.push(Math.min(Math.max(n+t[n],0),255)),r.push(Math.min(Math.max(n+e[n],0),255)),r.push(Math.min(Math.max(n+i[n],0),255)),r.push(255);return r},e.prototype._calculateSplineCurve=function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,i=this._getSplineCurve(t),r=i[0];if(r[0]>0)for(e=0;e<r[0];e++)i.unshift([0,0]);var n=[];for(e=0;e<i.length;e++){var o=i[e],s=[o[0],o[0]],a=Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2));s[1]>o[1]&&(a=-a),n.push(a)}return n},e.prototype._getSplineCurve=function(t){var e,i=this._secondDerivative(t),r=i.length,n=[];for(e=0;e<r;e++)n[e]=i[e];var o=[];for(e=0;e<r-1;e++)for(var s=t[e],a=t[e+1],u=s[0];u<a[0];u++){var l=(u-s[0])/(a[0]-s[0]),c=1-l,h=l,p=a[0]-s[0],d=c*s[1]+h*a[1]+p*p/6*((c*c*c-c)*n[e]+(h*h*h-h)*n[e+1]);d>255?d=255:d<0&&(d=0),o.push([u,d])}return 255===o.length&&o.push(t[t.length-1]),o},e.prototype._secondDerivative=function(t){var e=t.length;if(e<=0||1===e)return null;var i,r,n=[],o=[];for(n[0]=[0,1,0],i=1;i<e-1;i++){var s=t[i-1],a=t[i],u=t[i+1];n[i]=n[i]||[],n[i][0]=(a[0]-s[0])/6,n[i][1]=(u[0]-s[0])/3,n[i][2]=(u[0]-a[0])/6,o[i]=(u[1]-a[1])/(u[0]-a[0])-(a[1]-s[1])/(a[0]-s[0])}for(o[0]=0,o[e-1]=0,n[e-1]=[0,1,0],i=1;i<e;i++)r=n[1][0]/n[i-1][1],n[i][1]-=r*n[i-1][2],n[i][0]=0,o[i]-=r*o[i-1];for(i=e-2;i>0;i--)r=n[i][2]/n[i+1][1],n[i][1]-=r*n[i+1][0],n[i][2]=0,o[i]-=r*o[i+1];var l=[];for(i=0;i<e;i++)l[i]=o[i]/n[i][1];return l},e}(c.a);h.prototype.availableOptions={rgbControlPoints:{type:l.OptionType.OBJECT},controlPoints:{type:l.OptionType.ARRAY,default:[]},textureGLUnit:{type:l.OptionType.NUMBER,default:1}},e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(261),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=n.getImageData(0,0,r.width,r.height),a=0;a<r.width;a++)for(var u=0;u<r.height;u++){var l=4*(r.width*u+a),c=s.data[l]/255*.3+s.data[l+1]/255*.3+s.data[l+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,s.data[l]=c,s.data[l+1]=c,s.data[l+2]=c}o.putImageData(s,0,0)},e}(l.Engine.Filter),p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new h,a}return u()(e,t),e}(c.a);e.a=p},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(11)),h=l.Math.Vector2,p=function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._precomputeQuads(),r._fragmentSource=i(263),r}return u()(e,t),e.prototype._precomputeQuads=function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,i=new h;i.y=.125*(0|e)|0,i.x=(0|e)-8*i.y,this._quads.push(i)}},e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],this._options),n=r.resolution,o=r.horizontalTileCount,s=r.verticalTileCount,a=e.getCanvas(),u=e.getContext(),c=i.getContext(),p=this._options.lookupTableImage,d=this._createImageCanvas(p),f=d.getContext("2d"),_=u.getImageData(0,0,a.width,a.height),g=f.getImageData(0,0,p.width,p.height),m=Math.floor(n/o-1),y=Math.floor(n/s-1),v=Math.floor(o*s-1),b=void 0,x=void 0,T=void 0,k=void 0,w=void 0,C=void 0,O=new l.Color,R=new l.Color,E=new l.Color,S=new l.Color,F=new l.Color,M=new l.Color,D=new l.Color,B=new l.Color,I=new h,A=new h,N=function(t,e,i,r){t.r=e.r+r*(i.r-e.r),t.g=e.g+r*(i.g-e.g),t.b=e.b+r*(i.b-e.b)},L=function(t,e,i){var r=4*(Math.floor(i)*p.width+Math.floor(e));t.r=g.data[r]/255,t.g=g.data[r+1]/255,t.b=g.data[r+2]/255,t.a=g.data[r+3]/255},P=new l.Color,z=new l.Color,U=function(t,e,i){L(F,I.x+b,I.y+x),L(M,I.x+b,I.y+w),L(D,I.x+k,I.y+x),L(B,I.x+k,I.y+w),N(P,F,D,O.r*m%1),N(z,D,B,O.r*m%1),N(t,P,z,O.g*y%1)},G=new h(n,n).divide(o,s).floor(),j=0;j<a.width*a.height*4;j+=4)O.set(_.data[j]/255,_.data[j+1]/255,_.data[j+2]/255,_.data[j+3]/255),b=O.r*m|0,x=O.g*y|0,T=O.b*v|0,k=Math.ceil(O.r*m),w=Math.ceil(O.g*y),C=Math.ceil(O.b*v),I.y=T/o|0,I.x=T/(I.y*o)|0,A.y=C/o|0,A.x=C-A.y*o|0,I.multiply(G),A.multiply(G),U(E),U(S),N(R,E,S,O.b*v%1),_.data[j]=255*R.r,_.data[j+1]=255*R.g,_.data[j+2]=255*R.b;c.putImageData(_,0,0)},e.prototype._createImageCanvas=function(t){var e=l.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},e}(l.Engine.Filter);p.prototype.availableOptions={lookupTable:{type:l.OptionType.NUMBER,default:3,uniformType:l.UniformType.INT},lookupTableImage:{type:l.OptionType.IMAGE,uniformType:null},resolution:{type:l.OptionType.NUMBER,default:128,uniformType:l.UniformType.FLOAT},horizontalTileCount:{type:l.OptionType.NUMBER,default:5,uniformType:l.UniformType.FLOAT},verticalTileCount:{type:l.OptionType.NUMBER,default:5,uniformType:l.UniformType.FLOAT}};var d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._filter=new p,a._textures={},a}return u()(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType(l.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(l.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var i=this._options,r=i.resolution,n=i.verticalTileCount,o=i.horizontalTileCount;this._filter.set({resolution:r,verticalTileCount:n,horizontalTileCount:o})},e.prototype._updateWebGLTexture=function(t){var e=t.getRenderer(),i=e.id;this._textures[i]||(this._textures[i]=new l.Engine.BaseTexture);var r=this._textures[i];r.setSource(this._options.image),r.setGLUnit(3),r.setMinFilter(l.Engine.BaseTexture.NearestFilter),e.updateTexture(r)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e]},e}(c.a);d.prototype.availableOptions={image:{type:l.OptionType.IMAGE},resolution:{type:l.OptionType.NUMBER,default:128},horizontalTileCount:{type:l.OptionType.NUMBER,default:5},verticalTileCount:{type:l.OptionType.NUMBER,default:5}},e.a=d},function(t,e){t.exports="uniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 belinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON));\n\n    float rRange = floor(u_resolution / u_horizontalTileCount - 1.0);\n    float gRange = floor(u_resolution / u_verticalTileCount - 1.0);\n    float bRange = floor(u_horizontalTileCount * u_horizontalTileCount - 1.0);\n\n    int rFloor = int(sourceColor.r * rRange);\n    int gFloor = int(sourceColor.g * gRange);\n    int bFloor = int(sourceColor.b * bRange);\n\n    int rCeil = int(ceil(sourceColor.r * rRange));\n    int gCeil = int(ceil(sourceColor.g * gRange));\n    int bCeil = int(ceil(sourceColor.b * bRange));\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = bFloor / int(u_horizontalTileCount);\n    tileFloor.x = bFloor - (tileFloor.y * int(u_horizontalTileCount));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = bCeil / int(u_horizontalTileCount);\n    tileCeil.x = bCeil - (tileCeil.y * int(u_horizontalTileCount));\n\n    // Map tile index to tile pixel pos.\n    tileFloor *= int(u_resolution / u_horizontalTileCount);\n    tileCeil  *= int(u_resolution / u_verticalTileCount);\n\n    // Interpolate between red and green\n    vec3 lutColorFB = belinearInterpolate(\n        lutColor(tileFloor.x + rFloor, tileFloor.y + gFloor),\n        lutColor(tileFloor.x + rFloor, tileFloor.y + gCeil),\n        lutColor(tileFloor.x + rCeil,  tileFloor.y + gFloor),\n        lutColor(tileFloor.x + rCeil,  tileFloor.y + gCeil),\n        fract(sourceColor.r * rRange), fract(sourceColor.g * gRange)\n    );\n    vec3 lutColorCB = belinearInterpolate(\n        lutColor(tileCeil.x + rFloor, tileCeil.y + gFloor),\n        lutColor(tileCeil.x + rFloor, tileCeil.y + gCeil),\n        lutColor(tileCeil.x + rCeil,  tileCeil.y + gFloor),\n        lutColor(tileCeil.x + rCeil,  tileCeil.y + gCeil),\n        fract(sourceColor.r * rRange), fract(sourceColor.g * gRange)\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fract(sourceColor.b * bRange));\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n\n\n\n"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(118);i.d(e,"IdentityFilter",function(){return r.a});var n=i(265);i.d(e,"A15Filter",function(){return n.a});var o=i(266);i.d(e,"BreezeFilter",function(){return o.a});var s=i(267);i.d(e,"BWFilter",function(){return s.a});var a=i(268);i.d(e,"BWHardFilter",function(){return a.a});var u=i(269);i.d(e,"CelsiusFilter",function(){return u.a});var l=i(270);i.d(e,"ChestFilter",function(){return l.a});var c=i(271);i.d(e,"FixieFilter",function(){return c.a});var h=i(272);i.d(e,"FoodFilter",function(){return h.a});var p=i(273);i.d(e,"FridgeFilter",function(){return p.a});var d=i(274);i.d(e,"FrontFilter",function(){return d.a});var f=i(275);i.d(e,"GlamFilter",function(){return f.a});var _=i(276);i.d(e,"GobblinFilter",function(){return _.a});var g=i(277);i.d(e,"K1Filter",function(){return g.a});var m=i(278);i.d(e,"K2Filter",function(){return m.a});var y=i(279);i.d(e,"K6Filter",function(){return y.a});var v=i(280);i.d(e,"KDynamicFilter",function(){return v.a});var b=i(281);i.d(e,"LeninFilter",function(){return b.a});var x=i(282);i.d(e,"LomoFilter",function(){return x.a});var T=i(283);i.d(e,"MellowFilter",function(){return T.a});var k=i(284);i.d(e,"MetalFilter",function(){return k.a});var w=i(285);i.d(e,"MorningFilter",function(){return w.a});var C=i(286);i.d(e,"OrchidFilter",function(){return C.a});var O=i(287);i.d(e,"PolaFilter",function(){return O.a});var R=i(288);i.d(e,"Pola669Filter",function(){return R.a});var E=i(289);i.d(e,"QuoziFilter",function(){return E.a});var S=i(290);i.d(e,"SemiredFilter",function(){return S.a});var F=i(291);i.d(e,"SunnyFilter",function(){return F.a});var M=i(292);i.d(e,"TexasFilter",function(){return M.a});var D=i(293);i.d(e,"X400Filter",function(){return D.a});var B=i(294);i.d(e,"LUTFilter",function(){return B.a});var I=i(295);i.d(e,"ThreeDLUTFilter",function(){return I.a})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Contrast({contrast:.63})),a._stack.push(new c.Brightness({brightness:.12})),a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),a}return u()(e,t),e}(l.a);h.identifier="a15",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Desaturation({desaturation:.5})),a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),a}return u()(e,t),e}(l.a);h.identifier="breeze",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Grayscale),a}return u()(e,t),e}(l.a);h.identifier="bw",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Grayscale),a._stack.push(new c.Contrast({contrast:1.5})),a}return u()(e,t),e}(l.a);h.identifier="bwhard",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),a}return u()(e,t),e}(l.a);h.identifier="celsius",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),a}return u()(e,t),e}(l.a);h.identifier="chest",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),a}return u()(e,t),e}(l.a);h.identifier="fixie",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Saturation({saturation:1.35})),a._stack.push(new c.Contrast({contrast:1.1})),a}return u()(e,t),e}(l.a);h.identifier="food",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),a}return u()(e,t),e}(l.a);h.identifier="fridge",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),a}return u()(e,t),e}(l.a);h.identifier="front",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Contrast({contrast:1.1})),a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),a}return u()(e,t),e}(l.a);h.identifier="glam",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Gobblin),a}return u()(e,t),e}(l.a);h.identifier="gobblin",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),a._stack.push(new c.Saturation({saturation:.9})),a}return u()(e,t),e}(l.a);h.identifier="k1",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(4)),h=i(5),p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new h.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),a._stack.push(new h.SoftColorOverlay({color:new l.Color(40/255,40/255,40/255)})),a}return u()(e,t),e}(c.a);p.identifier="k2",e.a=p},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Saturation({saturation:.5})),a}return u()(e,t),e}(l.a);h.identifier="k6",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),a._stack.push(new c.Saturation({saturation:.7})),a}return u()(e,t),e}(l.a);h.identifier="kdynamic",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Desaturation({desaturation:.4})),a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),a}return u()(e,t),e}(l.a);h.identifier="lenin",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),a}return u()(e,t),e}(l.a);h.identifier="lomo",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),a}return u()(e,t),e}(l.a);h.identifier="mellow",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(4)),h=i(5),p=l.Math.ColorMatrix,d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r))),u=new p(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);a._stack.push(new h.ColorMatrixPrimitive({colorMatrix:u}));var c=new l.Color(.8,.6,.9);return a._stack.push(new h.Gamma({gamma:c})),a}return u()(e,t),e}(c.a);d.identifier="metal",e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),a._stack.push(new c.Glow),a}return u()(e,t),e}(l.a);h.identifier="morning",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),a._stack.push(new c.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),a._stack.push(new c.Desaturation({desaturation:.65})),a}return u()(e,t),e}(l.a);h.identifier="orchid",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),a._stack.push(new c.Saturation({saturation:.8})),a._stack.push(new c.Contrast({contrast:1.5})),a}return u()(e,t),e}(l.a);h.identifier="pola",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),a._stack.push(new c.Saturation({saturation:.8})),a._stack.push(new c.Contrast({contrast:1.5})),a}return u()(e,t),e}(l.a);h.identifier="pola669",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.Desaturation({desaturation:.65})),a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),a}return u()(e,t),e}(l.a);h.identifier="quozi",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),a._stack.push(new c.Glow),a}return u()(e,t),e}(l.a);h.identifier="semired",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),a._stack.push(new c.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),a}return u()(e,t),e}(l.a);h.identifier="sunny",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),a}return u()(e,t),e}(l.a);h.identifier="texas",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(4),c=i(5),h=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._stack.push(new c.X400),a}return u()(e,t),e}(l.a);h.identifier="x400",e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(4)),h=i(5),p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._lutPrimitive=new h.LookupTableImage({image:a._options.image}),a._stack.push(a._lutPrimitive),a}return u()(e,t),e}(c.a);p.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},p.identifier="lut",e.a=p},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(4)),h=i(5),p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r))),u=a._options,l=u.image,c=u.resolution,p=u.verticalTileCount,d=u.horizontalTileCount;return a._lutPrimitive=new h.ThreeDLookupTableImage({image:l,resolution:c,verticalTileCount:p,horizontalTileCount:d}),a._stack.push(a._lutPrimitive),a}return u()(e,t),e}(c.a);p.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:l.OptionType.NUMBER,default:128},horizontalTileCount:{type:l.OptionType.NUMBER,default:5},verticalTileCount:{type:l.OptionType.NUMBER,default:5}},p.identifier="3d-lut",e.a=p},function(t,e,i){"use strict";var r=i(13),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(3),p=i.n(h),d=h.Math.Vector2,f=void 0;f=i(17).Image;var _=function(t){function e(){s()(this,e);for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];var o=u()(this,t.call.apply(t,[this].concat(r)));return o._colorOverlayFilter=new h.Engine.Filters.ColorOverlayFilter({color:o.getTintColor()}),o._frameContainer=new h.Engine.Container,o._resetSprites(),o._options.frame&&o._createSpritesForFrame(o._options.frame),o}return c()(e,t),e.prototype._resetSprites=function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}},e.prototype._createSpritesForFrame=function(t){var e=this;if(!t)return this._disposeSprites();var i=t.imageGroups,r=t.layoutMode;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(t){void 0!==i[t]&&["start","mid","end"].forEach(function(r){if(void 0!==i[t][r]){var n=i[t][r];"image"in n&&(n=n.image);var o=h.Engine.Texture.fromImage(n),s=new h.Engine.Sprite(o);e._spriteGroups[t][r]=s,e._sprites.push(s),e._frameContainer.addChild(s)}})})},e.prototype._render=function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new h.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new h.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),h.Promise.resolve(this._renderTexture)},e.prototype._updateSprites=function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)},e.prototype._updateHorizontalSpriteGroup=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getDimensions(),n="vertical-inside"===this._layoutMode,o=this._spriteGroups[e].start,s=this._spriteGroups[e].mid,a=this._spriteGroups[e].end,u=0,l=0,c=void 0,h=void 0;if(o){c=o.getTexture().getDimensions(),h=c.y/c.x,u=Math.floor(this._frameWidth/h);var p=new d(0,i);p.x=n?this._frameWidth:0,o.setPosition(p),o.setHeight(this._frameWidth),o.setWidth(u)}if(a){c=a.getTexture().getDimensions(),h=c.y/c.x,l=Math.floor(this._frameWidth*h);var f=new d(r.x-l,i);f.x-=n?this._frameWidth:0,a.setPosition(f),a.setHeight(this._frameWidth),a.setWidth(l)}if(s){c=s.getTexture().getDimensions(),h=c.y/c.x;var _=new d(u,i),g=r.x-u-l;if(n&&(_.x+=this._frameWidth,g-=2*this._frameWidth),s.setPosition(_),s.setWidth(g),s.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var m=this._frameWidth/h,y=Math.ceil(g/m),v=0;if(-1!==y){var b=Math.round(g/y);s.setWidth(b),v+=b,this._ensureRepeatSpritesExist(y-1,e,s);for(var x=0;x<y-1;x++){b=Math.round((g-v)/(y-x-1));var T=this._repeatSprites[e][x],k=_.clone().add(v,0).floor();T.setPosition(k),T.setWidth(b),T.setHeight(this._frameWidth),v+=b}}}}},e.prototype._ensureRepeatSpritesExist=function(t,e,i){var r=this;i.getTexture().setMaxListeners(t+1);var n=this._repeatSprites[e].length;if(t>n)for(var o=t-n,s=0;s<o;s++){var a=new h.Engine.Sprite(i.getTexture());this._repeatSprites[e].push(a),this._frameContainer.addChild(a),this._sprites.push(a)}else if(t<n){var u=this._repeatSprites[e].splice(t);u.forEach(function(t){var e=r._sprites.indexOf(t);-1!==e&&(r._sprites.splice(e,1),r._frameContainer.removeChild(t),t.dispose())})}},e.prototype._updateVerticalSpriteGroup=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.getDimensions(),n="horizontal-inside"===this._layoutMode,o=this._spriteGroups[e].start,s=this._spriteGroups[e].mid,a=this._spriteGroups[e].end,u=0,l=0,c=void 0,h=void 0;if(o){c=o.getTexture().getDimensions(),h=c.y/c.x,u=Math.floor(this._frameWidth*h);var p=new d(i,0);p.y=n?this._frameWidth:0,o.setPosition(p),o.setWidth(this._frameWidth),o.setHeight(u)}if(a){c=a.getTexture().getDimensions(),h=c.y/c.x,l=Math.floor(this._frameWidth*h);var f=new d(i,r.y-l);f.y-=n?this._frameWidth:0,a.setPosition(f),a.setWidth(this._frameWidth),a.setHeight(l)}if(s){c=s.getTexture().getDimensions(),h=c.y/c.x;var _=new d(i,u),g=r.y-u-l;if(n&&(_.y+=this._frameWidth,g-=2*this._frameWidth),s.setPosition(_),s.setHeight(g),s.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var m=this._frameWidth*h,y=Math.ceil(g/m),v=0;if(-1!==y){var b=Math.round(g/y);s.setHeight(b),v+=b,this._ensureRepeatSpritesExist(y-1,e,s);for(var x=0;x<y-1;x++){b=Math.round((g-v)/(y-x-1));var T=this._repeatSprites[e][x],k=_.clone().add(0,v).floor();T.setPosition(k),T.setHeight(b),T.setWidth(this._frameWidth),v+=b}}}}},e.prototype._disposeSprites=function(){var t=this;this._sprites.forEach(function(e){t._frameContainer.removeChild(e),e.getTexture().getBaseTexture().dispose(),e.dispose()}),this._resetSprites()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeSprites()},e.validateFrame=function(t){if(t){var e=t.imageGroups,i=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==n()(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var r=function(t){var i=e[t],r=i.start,o=i.end,s=i.mid;if(void 0!==e[t]){if("object"!==n()(e[t]))throw new Error("Frame: `imageGroups."+t+"` needs to be of type Object.");if(void 0!==r&&!(r instanceof f||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".start` needs to be of type Image.");if(void 0!==s&&!(r instanceof f||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)&&"object"!==(void 0===s?"undefined":n()(s)))throw new Error("Frame: `imageGroups."+t+".mid` needs to be of type Image or Object.");if(void 0!==o&&!(o instanceof f||"undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+t+".end` needs to be of type Image.")}};if(void 0!==i&&-1===["vertical-inside","horizontal-inside"].indexOf(i))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");r("top"),r("left"),r("right"),r("bottom")}},e}(h.Operation);_.identifier="frame",_.prototype.availableOptions={frame:{type:h.OptionType.OBJECT,validation:_.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t}},alpha:{type:h.OptionType.NUMBER,default:1},tintColor:{type:h.OptionType.COLOR,default:new h.Color(1,1,1,0)},scale:{type:h.OptionType.NUMBER,default:.1}},p.a.Operations.FrameOperation=_,e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(298),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._lastBlurRadius=a._options.blurRadius,a._lastControlPoint1=a._options.controlPoint1.clone(),a._lastControlPoint2=a._options.controlPoint2.clone(),a._horizontalFilter=new h.a,a._verticalFilter=new h.a,a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new p(1,1)),a._verticalFilter.setDelta(new p(-1,1)),a._filter=new h.a,a}return u()(e,t),e.prototype.rotate=function(t){var e=this._options.controlPoint1,i=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,i.flip(),i.x=1-i.x):-90===t&&(e.flip(),e.y=1-e.y,i.flip(),i.y=1-i.y),this.set({controlPoint1:e,controlPoint2:i})},e.prototype.flip=function(t){var e=this._options.controlPoint1,i=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,i.x=1-i.x;break;case"vertical":e.y=1-e.y,i.y=1-i.y}this.set({controlPoint1:e,controlPoint2:i})},e.prototype.transform=function(t){var e=this,i={};["controlPoint1","controlPoint2"].forEach(function(r){var n=e.getOption(r);i[r]=t.applyToRelativePoint(n)}),["blurRadius"].forEach(function(r){var n=e.getOption(r);i[r]=t.applyToRelativeSize(n)}),this.set(i,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),i=e.min(),r=this._options,n=r.blurRadius,o=r.controlPoint1,s=r.controlPoint2,a={blurRadius:n*i,controlPoint1:o,controlPoint2:s,texSize:e};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),i=this._options,r=i.blurRadius,n=i.controlPoint1,o=i.controlPoint2;return this._filter.set({blurRadius:r,controlPoint1:n.clone(),controlPoint2:o.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(l.Operation);d.identifier="linear-focus",d.prototype.availableOptions={controlPoint1:{type:l.OptionType.VECTOR2,default:new p(0,.5)},controlPoint2:{type:l.OptionType.VECTOR2,default:new p(1,.5)},blurRadius:{type:l.OptionType.NUMBER,default:.025}},c.a.Operations.LinearFocusOperation=d,e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(41)),h=i.n(c),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(299),u._lastBlurRadius=null,u._lastControlPoint1=new p,u._lastControlPoint2=new p,u._blurredRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),n=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastControlPoint1.equals(this._options.controlPoint1)&&this._lastControlPoint2.equals(this._options.controlPoint2)&&!n||(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),(this._lastBlurRadius!==this._options.blurRadius||n)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,i)},e.prototype._blurImage=function(t){var e=t.getCanvas(),i=t.getContext(),r=new p(e.width,e.height),n=i.getImageData(0,0,e.width,e.height);h.a.stackBlurCanvasRGBA(n,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(n,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),i=new p(t.width,t.height),r=this._options.controlPoint1.clone().multiply(i),n=this._options.controlPoint2.clone().multiply(i),o=e.createLinearGradient(r.x,r.y,n.x,n.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,r.width,r.height),u=a.data,l=o.getImageData(0,0,r.width,r.height).data,c=s.getImageData(0,0,r.width,r.height).data,h=void 0,p=0;p<r.width*r.height*4;p+=4)h=c[p]/255,u[p]=h*u[p]+(1-h)*l[p],u[p+1]=h*u[p+1]+(1-h)*l[p+1],u[p+2]=h*u[p+2]+(1-h)*l[p+2];i.putImageData(a,0,0)},e}(l.Engine.Filter);d.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:30,uniformType:l.UniformType.FLOAT},controlPoint1:{type:l.OptionType.VECTOR2,default:new p(0,.5),uniformType:l.UniformType.FLOAT2},controlPoint2:{type:l.OptionType.VECTOR2,default:new p(1,.5),uniformType:l.UniformType.FLOAT2},delta:{type:l.OptionType.VECTOR2,default:new p(1,1),uniformType:l.UniformType.FLOAT2},texSize:{type:l.OptionType.VECTOR2,default:new p(100,100),uniformType:l.UniformType.FLOAT2}},e.a=d},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      _sample.rgb *= _sample.a;\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(301),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._lastBlurRadius=a._options.blurRadius,a._lastSize=a._options.size,a._lastGradientSize=a._options.gradientSize,a._horizontalFilter=new h.a,a._verticalFilter=new h.a,a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new p(1,1)),a._verticalFilter.setDelta(new p(-1,1)),a._filter=new h.a,a}return u()(e,t),e.prototype.rotate=function(t){var e=this._options.start,i=this._options.end;90===t?(e.flip(),e.x=1-e.x,i.flip(),i.x=1-i.x):-90===t&&(e.flip(),e.y=1-e.y,i.flip(),i.y=1-i.y),this.set({start:e,end:i})},e.prototype.flip=function(t){var e=this._options.start,i=this._options.end;switch(t){case"horizontal":e.x=1-e.x,i.x=1-i.x;break;case"vertical":e.y=1-e.y,i.y=1-i.y}this.set({start:e,end:i})},e.prototype.transform=function(t){var e=this,i={};["start","end"].forEach(function(r){var n=e.getOption(r);i[r]=t.applyToRelativePoint(n)}),["blurRadius","size","gradientSize"].forEach(function(r){var n=e.getOption(r);i[r]=t.applyToRelativeSize(n)}),this.set(i,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),i=e.min(),r=this._options.start.clone(),n=this._options.end.clone(),o=this._options,s=o.blurRadius,a=o.size,u=o.gradientSize,c={blurRadius:s*i,size:a*i,gradientSize:u*i,start:r.clone().multiply(e),end:n.clone().multiply(e),texSize:e};return this._horizontalFilter.set(c),this._verticalFilter.set(c),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=t.getDimensions(),i=this._options,r=i.blurRadius,n=i.size,o=i.gradientSize,s=i.start,a=i.end;return this._filter.set({blurRadius:r,gradientSize:o,size:n,start:s.clone(),end:a.clone(),texSize:e}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(l.Operation);d.identifier="mirrored-focus",d.prototype.availableOptions={start:{type:l.OptionType.VECTOR2,default:new p(0,.5)},end:{type:l.OptionType.VECTOR2,default:new p(1,.5)},blurRadius:{type:l.OptionType.NUMBER,default:.025},size:{type:l.OptionType.NUMBER,default:.1},gradientSize:{type:l.OptionType.NUMBER,default:.1}},c.a.Operations.MirroredFocusOperation=d,e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(41)),h=i.n(c),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(302),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastStart=new p,u._lastEnd=new p,u._blurredRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),n=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!n||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||n)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,i)},e.prototype._blurImage=function(t){var e=t.getCanvas(),i=t.getContext(),r=new p(e.width,e.height),n=i.getImageData(0,0,e.width,e.height);h.a.stackBlurCanvasRGBA(n,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(n,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),i=this._maskRenderTarget.getPixelRatio(),r=new p(t.width,t.height),n=this._options.size*r.min()*i,o=this._options.gradientSize*r.min()*i,s=this._options.start.clone().multiply(r),a=this._options.end.clone().multiply(r),u=a.clone().subtract(s),l=s.clone().add(u.clone().divide(2)),c=u.len(),h=u.clone().divide(c),d=l.clone().add((n+o)*h.y,-(n+o)*h.x),f=l.clone().add(-(n+o)*h.y,(n+o)*h.x),_=e.createLinearGradient(d.x,d.y,f.x,f.y),g=f.clone().subtract(d).len();_.addColorStop(0,"#000000"),_.addColorStop(o/2/g,"#FFFFFF"),_.addColorStop(1-o/2/g,"#FFFFFF"),_.addColorStop(1,"#000000"),e.fillStyle=_,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,r.width,r.height),u=a.data,l=o.getImageData(0,0,r.width,r.height).data,c=s.getImageData(0,0,r.width,r.height).data,h=void 0,p=0;p<r.width*r.height*4;p+=4)h=c[p]/255,u[p]=h*u[p]+(1-h)*l[p],u[p+1]=h*u[p+1]+(1-h)*l[p+1],u[p+2]=h*u[p+2]+(1-h)*l[p+2];i.putImageData(a,0,0)},e}(l.Engine.Filter);d.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:30,uniformType:l.UniformType.FLOAT},size:{type:l.OptionType.NUMBER,default:50,uniformType:l.UniformType.FLOAT},gradientSize:{type:l.OptionType.NUMBER,default:50,uniformType:l.UniformType.FLOAT},start:{type:l.OptionType.VECTOR2,default:new p(0,.5),uniformType:l.UniformType.FLOAT2},end:{type:l.OptionType.VECTOR2,default:new p(1,.5),uniformType:l.UniformType.FLOAT2},delta:{type:l.OptionType.VECTOR2,default:new p(1,1),uniformType:l.UniformType.FLOAT2},texSize:{type:l.OptionType.VECTOR2,default:new p(100,100),uniformType:l.UniformType.FLOAT2}},e.a=d},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=l.Math.Vector2,p=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._render=function(t){var e=this._options.rotation%360,i=e*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var r=this._sprite.getBounds();return this._renderTexture.resizeTo(new h(r.width,r.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.getNewDimensions=function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t},e.prototype.flip=function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}},e}(l.Operation);p.identifier="orientation",p.prototype.availableOptions={rotation:{type:l.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:l.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:l.OptionType.BOOLEAN,default:!1}},c.a.Operations.OrientationOperation=p,e.a=p},function(t,e,i){"use strict";var r=i(52),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(3),p=i.n(h),d=h.Engine.Filters.OverlayFilter,f=h.Math.Vector2,_=function(t){function e(){s()(this,e);for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];var o=u()(this,t.call.apply(t,[this].concat(r)));return o._overlayTexture=h.Engine.Texture.fromImage(o._options.image),o._overlayContainer=new h.Engine.Container,o._overlaySprite=new h.Engine.Sprite,o._overlaySprite.setTexture(o._overlayTexture),o._overlaySprite.setAnchor(0,0),o._overlayContainer.addChild(o._overlaySprite),o._overlayFilter=new h.Engine.Filters.OverlayFilter({overlayImage:o._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:o._overlayTexture}),o._sprite.setFilters([o._overlayFilter]),o._renderedOverlaySprite=new h.Engine.Sprite,o._renderedOverlayContainer=new h.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayRendered=!1,o._lastInputDimensions=new f(0,0),o}return c()(e,t),e.prototype.setOption=function(e,i){if(t.prototype.setOption.call(this,e,i),"image"===e&&i&&this._sdk){var r=this._sdk.getRenderer(),n=this._overlayTexture.getBaseTexture();n.setSource(i),r.isOfType(h.RendererType.WEBGL)&&r.updateTexture(n),this._overlayRendered=!1}},e.prototype._render=function(t){var e=t.getDimensions(),i=this._options,r=i.image,n=i.alpha,o=i.blendMode;return r?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:n}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),h.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),h.Promise.resolve())},e.prototype._renderOverlayToRenderTexture=function(t){var e=this._sdk.getRenderer(),i=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new h.Engine.RenderTexture(e,i.x,i.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var r=this._options.image,n=r.width,o=r.height,s=h.Utils.resizeVectorToFill(new f(n,o),i);this._overlaySprite.setWidth(s.x),this._overlaySprite.setHeight(s.y);var a=this._overlayRenderTexture.getBaseTexture();e.isOfType(h.RendererType.WEBGL)&&(a.setGLUnit(4),e.updateTexture(a,!1)),this._overlayRenderTexture.resizeTo(i),this._overlayRenderTexture.render(this._overlayContainer)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._overlaySprite.dispose()},e}(h.Operation);_.identifier="overlay",_.BLEND_MODES=d.BLEND_MODES,_.prototype.availableOptions={identifier:{type:h.OptionType.STRING},image:{type:h.OptionType.IMAGE},blendMode:{type:h.OptionType.NUMBER,default:d.BLEND_MODES.MULTIPLY,available:n()(d.BLEND_MODES).map(function(t){return d.BLEND_MODES[t]})},alpha:{type:h.OptionType.NUMBER,default:1}},p.a.Operations.OverlayOperation=_,e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(306),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._lastBlurRadius=a._options.blurRadius,a._lastGradientRadius=a._options.gradientRadius,a._horizontalFilter=new h.a,a._verticalFilter=new h.a,a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new p(1,1)),a._verticalFilter.setDelta(new p(-1,1)),a._filter=new h.a,a}return u()(e,t),e.prototype.rotate=function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})},e.prototype.flip=function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})},e.prototype.transform=function(t){var e=this,i={},r=this.getPosition();i.position=t.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach(function(r){var n=e.getOption(r);i[r]=t.applyToRelativeSize(n)}),this.set(i,!1)},e.prototype._renderWebGL=function(t){var e=t.getDimensions(),i=e.min(),r=this._options,n=r.position,o=r.blurRadius,s=r.radius,a=r.gradientRadius,u={blurRadius:o*i,radius:s*i,gradientRadius:a*i,position:n.clone().multiply(e),texSize:e};return this._horizontalFilter.set(u),this._verticalFilter.set(u),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype._renderCanvas=function(t){var e=this._options,i=e.blurRadius,r=e.radius,n=e.gradientRadius,o=e.position,s=t.getDimensions();return this._filter.set({blurRadius:i,radius:r,gradientRadius:n,position:o,texSize:s}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()},e.prototype.hasChanges=function(){return!0},e}(l.Operation);d.identifier="radial-focus",d.prototype.availableOptions={position:{type:l.OptionType.VECTOR2,default:new p(.5,.5)},radius:{type:l.OptionType.NUMBER,default:.25},gradientRadius:{type:l.OptionType.NUMBER,default:.125},blurRadius:{type:l.OptionType.NUMBER,default:.025}},c.a.Operations.RadialFocusOperation=d,e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(41)),h=i.n(c),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=s()(this,t.call.apply(t,[this].concat(o)));return u._fragmentSource=i(307),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastPosition=new p,u._blurredRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),u}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getDimensions()),n=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!n||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||n)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,i)},e.prototype._blurImage=function(t){var e=t.getCanvas(),i=t.getContext(),r=new p(e.width,e.height),n=i.getImageData(0,0,e.width,e.height);h.a.stackBlurCanvasRGBA(n,0,0,e.width,e.height,this._options.blurRadius*r.min()),this._blurredRenderTarget.getContext().putImageData(n,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),i=new p(t.width,t.height),r=this._maskRenderTarget.getPixelRatio(),n=this._options.position.clone().multiply(i),o=this._options,s=o.radius,a=o.gradientRadius;s*=t.height,a*=t.height;var u=e.createRadialGradient(n.x,n.y,0,n.x,n.y,(s+a)*r);u.addColorStop(0,"#FFFFFF"),u.addColorStop(s/(s+a),"#FFFFFF"),u.addColorStop(1,"#000000"),e.fillStyle=u,e.fillRect(0,0,i.x,i.y)},e.prototype._applyMask=function(t,e){for(var i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,r.width,r.height),u=a.data,l=o.getImageData(0,0,r.width,r.height).data,c=s.getImageData(0,0,r.width,r.height).data,h=void 0,p=0;p<r.width*r.height*4;p+=4)h=c[p]/255,u[p]=h*u[p]+(1-h)*l[p],u[p+1]=h*u[p+1]+(1-h)*l[p+1],u[p+2]=h*u[p+2]+(1-h)*l[p+2];i.putImageData(a,0,0)},e}(l.Engine.Filter);d.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:30,uniformType:l.UniformType.FLOAT},radius:{type:l.OptionType.NUMBER,default:50,uniformType:l.UniformType.FLOAT},gradientRadius:{type:l.OptionType.NUMBER,default:25,uniformType:l.UniformType.FLOAT},position:{type:l.OptionType.VECTOR2,default:new p(.5,.5),uniformType:l.UniformType.FLOAT2},delta:{type:l.OptionType.VECTOR2,default:new p(1,1),uniformType:l.UniformType.FLOAT2},texSize:{type:l.OptionType.VECTOR2,default:new p(100,100),uniformType:l.UniformType.FLOAT2}},e.a=d},function(t,e){t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        _sample.rgb *= _sample.a;\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(120),p=i(117),d=i(312),f=l.Math.Vector2,_=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r))),u=a._sdk.getRenderer();a._lastBlurRadius=null,a._blurredRenderTexture=new l.Engine.RenderTexture(u,100,100,1),a._maskRenderTexture=new l.Engine.RenderTexture(u,100,100,1),a._brushSprite=new h.a(a),a._brushSpriteContainer=new l.Engine.Container;var c=a._brushSprite.getDisplayObject();if(a._brushSpriteContainer.addChild(c),a._outputSprite=new l.Engine.Sprite,a._outputContainer=new l.Engine.Container,a._outputContainer.addChild(a._outputSprite),a._maskFilter=new d.a,u.isOfType(l.RendererType.WEBGL)){a._horizontalFilter=new p.a,a._verticalFilter=new p.a,a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new f(1,1)),a._verticalFilter.setDelta(new f(-1,1));var _=a._maskRenderTexture.getBaseTexture();_.setGLUnit(a._maskFilter.getMaskImage()),u.updateTexture(_,!1),_=a._blurredRenderTexture.getBaseTexture(),_.setGLUnit(a._maskFilter.getFilterImage()),u.updateTexture(_,!1)}else u.isOfType(l.RendererType.CANVAS)&&(a._blurFilter=new p.a,a._sprite.setFilters([a._blurFilter]),a._maskFilter.setMaskCanvas(a._maskRenderTexture.getRenderTarget().getCanvas()),a._maskFilter.setFilterCanvas(a._blurredRenderTexture.getRenderTarget().getCanvas()));return a._outputSprite.setFilters([a._maskFilter]),a}return u()(e,t),e.prototype.flip=function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.rotate=function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype.transform=function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null},e.prototype._render=function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),l.Promise.resolve()},e.prototype._renderMask=function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(l.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var i=this._sdk.getRenderer();i.isOfType(l.RendererType.WEBGL)&&i.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)},e.prototype._renderBlur=function(t){var e=t.getDimensions(),i=this._blurredRenderTexture.getDimensions();i.equals(e)||this._blurredRenderTexture.resizeTo(e);var r=this._options.blurRadius;if(this._lastBlurRadius!==r||!i.equals(e)){var n=this._sdk.getRenderer(),o=void 0;if(n.isOfType(l.RendererType.WEBGL)){o={blurRadius:r*e.min(),texSize:e},this._horizontalFilter.set(o),this._verticalFilter.set(o)}else n.isOfType(l.RendererType.CANVAS)&&(o={blurRadius:r},this._blurFilter.set(o));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}},e.prototype.getBrush=function(){return this._brushSprite},e.prototype.createPath=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=new h.a.Brushes.RadialBrush({size:t,hardness:e,color:l.Color.WHITE}),r=this._brushSprite.createPath(i);return this._options.paths.push(r),this.setDirty(!0),r},e.prototype.setDirtyForRenderer=function(e,i,r){t.prototype.setDirtyForRenderer.call(this,e,i,r),this._brushSprite.setDirtyForRenderer(e,i,r)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._sdk.getRenderer().isOfType(l.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()},e.prototype.hasChanges=function(){return!0},e}(l.Operation);_.identifier="selective-blur",_.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:.05},paths:{type:l.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},c.a.Operations.SelectiveBlurOperation=_,e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(310)),h=function(t){function e(i,r,o){n()(this,e);var a=s()(this,t.call(this,r));return a._operation=i,a._canvas=o||l.Utils.createCanvas(),a._context=a._canvas.getContext("2d"),a}return u()(e,t),e.prototype.serializeOption=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map(function(t){var e=t.getPosition();return i?e.toObject():e.clone()}):t.prototype.serializeOption.call(this,e,i)},e.prototype._optionEquals=function(e,i){if("controlPoints"===e){for(var r=this._options.controlPoints,n=0,o=r.length;n<o;n++)if(!r[n].getPosition().equals(i[n]))return!1;return!0}return t.prototype._optionEquals.call(this,e,i)},e.prototype.render=function(t){var e=this._options,i=e.controlPoints,r=e.size;if(!(i.length<2)){l.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===r&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=r);for(var n=i[0],o=n,s=1;s<i.length;s++)o=i[s],o.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,n),n=o}},e.prototype._createBrush=function(t){var e=this._options,i=e.size,r=e.hardness,n=e.color,o=l.Utils.createCanvas();o.width=o.height=Math.ceil(i*t.min());var s=o.getContext("2d");if(n=n.clone(),n.a=1,1===o.width)s.fillStyle=n.toRGBA(),s.fillRect(0,0,1,1);else{var a=s.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);a.addColorStop(0,n.toRGBA());var u=n.clone();u.a=0,a.addColorStop(1,u.toRGBA()),s.fillStyle=a,s.fillRect(0,0,o.width,o.height)}return o},e.prototype.addControlPoint=function(t){var e=new c.a(this,t);this._options.controlPoints.push(e),this.emit("update",this)},e.prototype.getCanvas=function(){return this._canvas},e.prototype.setCanvas=function(t){this._canvas=t,this._context=t.getContext("2d")},e.prototype.setDirty=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(t){t.setDirty()})},e.prototype.forEachControlPoint=function(t){this._options.controlPoints.forEach(t)},e.prototype.renderToCanvas=function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()},e.prototype.getCanvasDimensions=function(){return this._canvasDimensions},e}(l.Configurable);h.prototype.availableOptions={id:{type:l.OptionType.STRING,default:function(){return l.Utils.getUUID()}},brush:{type:l.OptionType.OBJECT,required:!0},controlPoints:{type:l.OptionType.ARRAY,default:[]},closed:{type:l.OptionType.BOOLEAN,default:!1}},e.a=h},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(3),s=(i.n(o),o.Math.Vector2),a=function(){function t(e,i){n()(this,t),this._path=e,this._drawnCanvases=[],this._position=i}return t.prototype.renderToCanvas=function(t,e,i){if(-1===this._drawnCanvases.indexOf(e)){for(var r=new s(e.width,e.height),n=e.getContext("2d"),o=this._position.clone().multiply(r),a=i.getPosition().clone().multiply(r),u=o.clone().subtract(a).len(),l=t.width/10,c=0;c<=u;){var h=Math.max(0,Math.min(1,c/u)),p=a.x+(o.x-a.x)*h,d=a.y+(o.y-a.y)*h;n.drawImage(t,p-t.width/2,d-t.height/2,t.width,t.height),c+=l}this._drawnCanvases.push(e)}},t.prototype.setPosition=function(t){this._position=t},t.prototype.getPosition=function(){return this._position.clone()},t.prototype.setDirty=function(){this._drawnCanvases=[]},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(121)),h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype.getBrushImage=function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,i=e.size,r=e.hardness,n=e.color,o=l.Utils.createCanvas();o.width=o.height=Math.ceil(i*t.min());var s=o.getContext("2d");if(n=n.clone(),n.a=1,1===o.width)s.fillStyle=n.toRGBA(),s.fillRect(0,0,1,1);else{var a=s.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*r),o.width/2,o.height/2,o.width/2);a.addColorStop(0,n.toRGBA());var u=n.clone();u.a=0,a.addColorStop(1,u.toRGBA()),s.fillStyle=a,s.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=t.clone(),o},e}(c.a);e.a=h,h.identifier="imgly_brush_radial",h.prototype.availableOptions=l.Utils.extend(c.a.prototype.availableOptions,{hardness:{type:l.OptionType.NUMBER,default:1}})},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),function(t){function e(){n()(this,e);var r=s()(this,t.call(this));return r._fragmentSource=i(313),r}return u()(e,t),e.prototype._applyCanvas=function(t,e,i){for(var r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.getCanvas()),n=e.getContext(),o=i.getContext(),s=this._options,a=s.maskCanvas,u=s.filterCanvas,l=a.getContext("2d"),c=u.getContext("2d"),h=l.getImageData(0,0,r.width,r.height).data,p=n.getImageData(0,0,r.width,r.height),d=p.data,f=c.getImageData(0,0,r.width,r.height).data,_=void 0,g=0;g<r.width*r.height*4;g+=4)_=h[g]/255,d[g]=_*f[g]+(1-_)*d[g],d[g+1]=_*f[g+1]+(1-_)*d[g+1],d[g+2]=_*f[g+2]+(1-_)*d[g+2];o.putImageData(p,0,0)},e}(l.Engine.Filter));c.prototype.availableOptions={maskImage:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.INT},maskCanvas:{type:l.OptionType.OBJECT,default:null},filterImage:{type:l.OptionType.NUMBER,default:2,uniformType:l.UniformType.INT},filterCanvas:{type:l.OptionType.OBJECT,default:null}},e.a=c},function(t,e){t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(55),p=i(315),d=i(316),f=i(120),_=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._onSpriteUpdate=a._onSpriteUpdate.bind(a),a._options.sprites.slice().forEach(function(t){a.removeSprite(t),a.addSprite(t)}),a}return u()(e,t),e.prototype.getSpritesOfType=function(t){return this._options.sprites.filter(function(e){return e instanceof t})},e.prototype.rotate=function(t){this._options.sprites.forEach(function(e){e.applyRotation(t)})},e.prototype.flip=function(t){this._options.sprites.forEach(function(e){e.applyFlip(t)})},e.prototype._onSpriteUpdate=function(t,e){this.setDirty(!0)},e.prototype._applyRotation=function(t,e){this._options.sprites.forEach(function(i){return i.applyRotation(t,e)})},e.prototype.transform=function(t){this._options.sprites.forEach(function(e){return e.applyTransform(t)})},e.prototype.scale=function(t){this._options.sprites.forEach(function(e){return e.applyScale(t)})},e.prototype.serializeOption=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map(function(t){return t.serializeOptions(void 0,i)}):t.prototype.serializeOption.call(this,e,i)},e.prototype.createSticker=function(t){return new p.a(this,t)},e.prototype.createText=function(t){return new d.a(this,t)},e.prototype.createBrush=function(t){return new f.a(this,t)},e.prototype.addSprite=function(t){this._options.sprites.push(t),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate)},e.prototype.removeSprite=function(t){var e=this._options.sprites,i=e.indexOf(t);return-1!==i&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(i,1),this.setDirty(!0),!0)},e.prototype._render=function(t){var e=this,i=this._container,r=this._options.sprites,n=t.getDimensions().clone().floor();return l.Promise.all(r.map(function(t){return t.validateSettings()})).then(function(){r.forEach(function(t){return t.update(e._sdk,n)})}).then(function(){e._renderTexture.clear(),e._renderTexture.render(i)})},e.prototype.takeSpriteToFront=function(t){var e=this._options.sprites,i=e.indexOf(t);if(-1!==i){l.Utils.moveArrayItem(e,i,e.length-1);var r=t.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}},e.prototype.getSpritesAtPosition=function(t,e){var i=this,r=[];this._options.sprites.forEach(function(t){return t.update(i._sdk,e)});var n=this._sdk.getSprite(),o=n.getWorldTransform().applyInverseToVector(t),s=n.getTexture().getFrame(),a=s.width,u=s.height,l=n.getAnchor().clone().multiply(-a,-u);o.subtract(l);for(var c=this._options.sprites.slice(0).reverse(),h=0,p=c.length;h<p;h++){var d=c[h];d.getHitTestDisplayObject().isAtPosition(o)&&r.push(d)}return r},e.prototype.setDirtyForRenderer=function(e,i,r){t.prototype.setDirtyForRenderer.call(this,e,i,r),this._options.sprites.forEach(function(t){t.setDirtyForRenderer(e,i,r)})},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._options.sprites.forEach(function(t){t.dispose()})},e}(l.Operation);_.StickerSprite=p.a,_.TextSprite=d.a,_.BrushSprite=f.a,_.identifier="sprite",_.prototype.availableOptions={sprites:{type:l.OptionType.ARRAY,default:[],setter:function(t,e){var i=this;if(t=t.map(function(t,e){if(t instanceof h.a)return t;var r=t.type;switch(delete t.type,r){case"text":return new d.a(i,t);case"sticker":return new p.a(i,t);case"brush":return new f.a(i,t);default:l.Log.error(i.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites){this._options.sprites.slice().forEach(function(t){t.dispose(),i.removeSprite(t)})}t.forEach(function(t){i.addSprite(t)})}return t}}},c.a.Operations.SpriteOperation=_,e.a=_},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(55)),h=i(116),p=l.Math.Vector2,d=l.Math.ColorMatrix,f=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r))),u=a._options.image,c=u.src||u.filePath;return a._isSVG=c&&!!c.match(/\w+\.svg(?=\?|$)/i),a._isSVG&&(a._canvas=l.Utils.createCanvas(),a._context=a._canvas.getContext("2d")),u&&a._onImageUpdate(),a._tintFilter=new l.Engine.Filters.TintFilter,a._adjustmentsFilter=new h.a,a._lastRenderedDimensions=p.NULL,a._lastRenderedInputDimensions=p.NULL,a._onOptionsChange=a._onOptionsChange.bind(a),a._options.adjustments.on("updated",a._onOptionsChange),a}return u()(e,t),e.prototype.applyScale=function(t){this.setDimensions(this.getDimensions().multiply(t))},e.prototype.serializeOptions=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.prototype.serializeOptions.call(this,e,i);return e||(r.type="sticker"),r},e.prototype._rendersToRenderTexture=function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(l.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode},e.prototype._getTexture=function(){return this._inputTexture},e.prototype.update=function(t,e){var i=this._options,r=i.dimensions,n=i.image;if(r.equals(p.NULL)&&r.set(n.width,n.height),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==n)&&this._isSVG&&t.getRenderer().isOfType(l.RendererType.WEBGL)){var o=t.getOutputDimensions();if(r.x>o.x||r.y>o.y){var s=l.Utils.resizeVectorToFit(r,o);n.width=s.x,n.height=s.y}else n.width=r.x,n.height=r.y;this._canvas.width=n.width,this._canvas.height=n.height,this._context.clearRect(0,0,n.width,n.height),this._context.drawImage(n,0,0,n.width,n.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var a=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){a.push(this._adjustmentsFilter);var u=this._options.adjustments,c=new d;c.multiply(d.createBrightnessMatrix(u.getBrightness())),c.multiply(d.createSaturationMatrix(u.getSaturation())),c.multiply(d.createContrastMatrix(u.getContrast())),this._adjustmentsFilter.set({colorMatrix:c})}this._options.tintMode&&"none"!==this._options.tintMode&&(a.push(this._tintFilter),this._tintFilter.set({mode:l.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(a)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=n},e.prototype._applyFlip=function(){var t=this._sprite.getScale();this._options.flipVertically&&(t.y*=-1),this._options.flipHorizontally&&(t.x*=-1),this._sprite.setScale(t)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var i={rotation:this._options.rotation},r=i.rotation/Math.PI*180,n=-1*r;switch(i.rotation=n*Math.PI/180,e){case"horizontal":i.flipHorizontally=!this._options.flipHorizontally,this.set(i);break;case"vertical":i.flipVertically=!this._options.flipVertically,this.set(i)}},e.prototype._hasAdjustments=function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()},e.prototype._onImageUpdate=function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(l.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture=l.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)},e.prototype.setOption=function(e,i){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.prototype.setOption.call(this,e,i,r),"image"===e&&this._identitySprite&&this._onImageUpdate()},e.prototype._onOptionsChange=function(){var t=this._dirtiness;for(var e in t)t[e]=!0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)},e}(c.a);f.prototype.availableOptions={id:{type:l.OptionType.STRING,default:function(){return l.Utils.getUUID()}},identifier:{type:l.OptionType.STRING,default:""},image:{type:l.OptionType.IMAGE,required:!0},position:{type:l.OptionType.VECTOR2,default:p.NULL},dimensions:{type:l.OptionType.VECTOR2,default:p.NULL},anchor:{type:l.OptionType.VECTOR2,default:new p(0,0)},pivot:{type:l.OptionType.VECTOR2,default:new p(.5,.5)},rotation:{type:l.OptionType.NUMBER,default:0},flipHorizontally:{type:l.OptionType.BOOLEAN,default:!1},flipVertically:{type:l.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:l.OptionType.BOOLEAN,default:!1},tintColor:{type:l.OptionType.COLOR,default:l.Color.WHITE},tintMode:{type:l.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:l.OptionType.NUMBER,default:1},adjustments:{type:l.OptionType.CONFIGURABLE,structure:{brightness:{type:l.OptionType.NUMBER,default:0},saturation:{type:l.OptionType.NUMBER,default:1},contrast:{type:l.OptionType.NUMBER,default:1}}}},f.type="sticker",e.a=f},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),i(55)),h=i(317),p=l.Math.Vector2,d=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._textRenderer=new h.a(a,a._operation),a._textRenderer.rotation=a.getRotation(),a._sprite.setTexture(a._textRenderer.getFinalTexture()),a._hitTestSprite.setTexture(a._textRenderer.getTexture()),a}return u()(e,t),e.prototype.serializeOptions=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.prototype.serializeOptions.call(this,e,i);return e||(r.type="text"),r},e.prototype.getDOMStyle=function(t,e){var i=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:i+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},e.prototype.getAbsoluteTextHeight=function(t){var e=this.getFontSize()*t.y,i=this.getTextMetrics();if(i){var r=1/i.unitsPerEm*e,n=i.ascender*r,o=i.descender*r;return n+Math.abs(o)}return e*this.getLineHeight()*1.1},e.prototype.getDimensions=function(t,e){return this._textRenderer.getDimensions(t,e)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var i=this._options.rotation;switch(e){case"horizontal":i+=2*(Math.PI-i),this.setRotation(i);break;case"vertical":i+=2*(Math.PI/2-i),this.setRotation(i)}},e.prototype.applyTransform=function(e){t.prototype.applyTransform.call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)},e.prototype.applyRotation=function(e){t.prototype.applyRotation.call(this,e);var i=(e+360)%360,r=this._operation.getInputDimensions();90!==i&&270!==i||(this.setMaxWidth(this.getMaxWidth()/r.x*r.y),this.setFontSize(this.getFontSize()/r.y*r.x))},e.prototype.setOption=function(e,i){if("rotation"===e)return this._options.rotation=i,this._textRenderer&&(this._textRenderer.rotation=i),this._rotation=i,void this.emit("update");t.prototype.setOption.call(this,e,i)},e.prototype.getOption=function(e){return"rotation"===e?this._rotation:t.prototype.getOption.call(this,e)},e.prototype.getHitTestDisplayObject=function(){return this._hitTestSprite},e.prototype.update=function(e,i){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,i);var r=this._textRenderer.getFinalTexture();r.getBaseTexture().update();var n=e.getRenderer();n.isOfType(l.RendererType.WEBGL)&&n.updateTexture(r.getBaseTexture()),t.prototype.update.call(this,e,i),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}},e.prototype._getTexture=function(){return this._textRenderer.getFinalTexture()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._textRenderer.dispose()},e}(c.a);d.prototype.availableOptions={id:{type:l.OptionType.STRING,default:function(){return l.Utils.getUUID()}},fontSize:{type:l.OptionType.NUMBER,default:.1},characterSpacing:{type:l.OptionType.NUMBER,default:0},lineHeight:{type:l.OptionType.NUMBER,default:1.1},fontIdentifier:{type:l.OptionType.STRING},fontFamily:{type:l.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:l.OptionType.ALL,default:"normal"},fontStyle:{type:l.OptionType.STRING,default:"normal"},textMetrics:{type:l.OptionType.OBJECT,default:null},outlineWidth:{type:l.OptionType.NUMBER,default:0},outlineColor:{type:l.OptionType.COLOR,default:l.Color.BLACK},alignment:{type:l.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:l.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:l.OptionType.COLOR,default:new l.Color(1,0,0,1)},backgroundColor:{type:l.OptionType.COLOR,default:l.Color.TRANSPARENT},position:{type:l.OptionType.VECTOR2,default:new p(.5,.5)},anchor:{type:l.OptionType.VECTOR2,default:new p(0,0)},pivot:{type:l.OptionType.VECTOR2,default:new p(.5,.5)},rotation:{type:l.OptionType.NUMBER,default:0},text:{type:l.OptionType.STRING,required:!0},maxWidth:{type:l.OptionType.NUMBER,default:.5},maxHeight:{type:l.OptionType.NUMBER,default:0},visible:{type:l.OptionType.BOOLEAN,default:!0}},d.type="text",e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(3),s=(i.n(o),i(318)),a=o.Math.Vector2,u=function(){function t(e,i){n()(this,t),this._text=e,this._operation=i,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return t.prototype._createCanvas=function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new s.a(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")},t.prototype._createTexture=function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)},t.prototype._applyTextOptions=function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var i=this._text.getOutlineWidth();i>0&&(e.lineWidth=i)},t.prototype._buildOutputLines=function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()},t.prototype._renderTextLine=function(t,e){var i=this._text.getAlignment(),r=new a(0,e);switch(i){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,r.x,r.y))},t.prototype.update=function(t,e){var i=this.calculateFontStyles(t,e);if(i){var r=this._calculateText(t,i,e),n=r.dimensions,o=r.lines;this._renderText(t,n,o,i,e),this._updateFinalTexture()}},t.prototype._updateFinalTexture=function(){var t=this._canvas,e=t.width,i=t.height,r=this.rotation,n=Math.cos(r),o=Math.sin(r),s=new a(Math.abs(e*n)+Math.abs(i*o),Math.abs(e*o)+Math.abs(i*n));this._finalCanvas.width=s.x,this._finalCanvas.height=s.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-i/2),this._finalContext.restore()},t.prototype._renderText=function(t,e,i,r,n){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*n.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(r,this._context);for(var o=0;o<i.length;o++){var s=i[o];this._renderTextLine(s,r.topPadding+r.lineHeight*o)}},t.prototype.calculateFontStyles=function(t,e){var i=this._text.getFontFamily(),r=this._text.getFontSize()*e.y,n=this._text.getAbsoluteTextHeight(e),o=n*this._text.getLineHeight(),s=n*(this._text.getLineHeight()-1)/2,a={fontFamily:i,fontSize:r,lineHeight:o,topPadding:s};return this._textOptions.fontFamily===i&&this._textOptions.fontSize===r&&this._textOptions.lineHeight===o||(this._textOptions=a),a},t.prototype._calculateText=function(t,e,i){var r=this._text.getMaxWidth()*i.x;this._applyTextOptions(e,this._context);var n=new a,o=this._text.getText().split("\n");if(void 0!==r)n.x=r,o=this._buildOutputLines(r);else for(var s=0;s<o.length;s++){var u=o[s];n.x=Math.max(n.x,this._context.measureText(u).width)}var l=e.lineHeight;return n.y=o.length*l,{dimensions:n,lines:o}},t.prototype.getTexture=function(){return this._texture},t.prototype.getFinalTexture=function(){return this._finalTexture},t.prototype.getDimensions=function(t,e){var i=this.calculateFontStyles(t,e);return this._calculateText(t,i,e).dimensions},t.prototype.dispose=function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture.getBaseTexture().dispose(),this._texture=null,this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null},t}();e.a=u},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=function(){function t(e){n()(this,t),this._context=e,this._lastFontStyle={}}return t.prototype.getLines=function(){for(var t=this,e=[],i=[],r=this._lines.length,n=0;n<r;n++){for(var o=this._lines[n],s=this._buildWords(o),a=s.length,u=0;u<a;u++){var l=s[u],c=i.concat(l).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){i.length>0&&(e.push(i.join("")),i=[l]);var h=l.replace(/\s+$/i,"");if(this._getWidth(h)>this._maxWidth){var p=this._splitWord(l);e=e.concat(p.lines),p.rest&&(i=[p.rest])}}else i.push(l)}e.push(i.join("")),i=[]}return e.map(function(e){return t._trimLine(e,t._context.textAlign)})},t.prototype._trimLine=function(t,e){return t},t.prototype._buildWords=function(t){for(var e=[],i="",r=t.length,n=0;n<r;n++){var o=t[n];i+=o," "!==o&&"-"!==o&&n!==r-1||(e.push(i),i="")}return e},t.prototype._splitWord=function(t){for(var e={lines:[],rest:null},i=t.length,r=[],n=0;n<i;n++){var o=t[n];this._getWidth(r.concat(o).join(""))>this._maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),n===i-1&&r.length>0&&(e.rest=r.join(""))}return e},t.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)},t.prototype._getWidth=function(t){return this._context.measureText(t).width},t.prototype.setText=function(t){this._text=t,this._lines=t.split("\n")},t.prototype.setMaxWidth=function(t){this._maxWidth=t},t}();e.a=o},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=i(320),p=l.Math.Vector2,d=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype._render=function(t){this._sprite.setRotation(0);var e=t.getDimensions(),i=this._options,r=i.start,n=i.end,o=i.rotation,s=i.textureScale,a=r.clone().add(n.clone().subtract(r).divide(2)),u=this.calculateScale(),c=u*s,h=this.getNewDimensions(e);return this._sprite.setAnchor(a),this._sprite.setRotation(o),this._sprite.setScale(c,c),this._sprite.setPosition(h.clone().multiply(.5)),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.calculateScale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),i=new p(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),r=e.clone().multiply(.5);r.subtract(i.clone().divide(2)),r.abs();return r.y>r.x?2*r.y/e.y+1:2*r.x/e.x+1},e.prototype.getNewDimensions=function(t){var e=this._options,i=e.start,r=e.end,n=e.textureScale,o=this.calculateScale();return t.clone().multiply(n*o).multiply(r.clone().subtract(i)).round()},e.prototype.flip=function(t){var e=this._options,i=e.start,r=e.end,n=i.clone();"horizontal"===t?(i.set(1-r.x,i.y),r.set(1-n.x,r.y)):"vertical"===t&&(i.set(i.x,1-r.y),r.set(r.x,1-n.y))},e.prototype.rotate=function(t){for(var e=this._options,i=e.start,r=e.end,n=(t+360)%360,o=Math.floor(n/90),s=0;s<o;s++){var a=i.clone();i.set(1-r.y,a.x),r.set(1-a.y,r.x)}},e}(l.Operation);d.identifier="transform",d.prototype.availableOptions={start:{type:l.OptionType.VECTOR2,default:new p(0,0)},end:{type:l.OptionType.VECTOR2,default:new p(1,1)},textureScale:{type:l.OptionType.NUMBER,default:1},rotation:{type:l.OptionType.NUMBER,default:0}},d.TransformChange=h.a,c.a.Operations.TransformOperation=d,e.a=d},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(3),s=(i.n(o),o.Math.Vector2),a=function(){function t(e,i){n()(this,t),this._operation=e,this._options=i,this._inputDimensions=this._operation.getInputDimensions(!1),this._rotationDelta=i.rotation-this._operation.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._operation.getEnd().clone().subtract(this._operation.getStart()).multiply(this._inputDimensions),this._newAbsoluteSize=i.end.clone().subtract(i.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._operation.getStart().clone().subtract(i.start).multiply(this._inputDimensions),this._scaleRatio=this._operation.calculateScale(i.rotation)/this._operation.calculateScale(),this._absoluteStart=this._operation.getStart().clone().multiply(this._inputDimensions),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/this._operation.getTextureScale()}return t.prototype.applyToRelativePoint=function(t){var e=this._operation.getStart(),i=this._operation.getEnd(),r=e.clone().add(i.clone().subtract(e).divide(2)),n=r.multiply(this._inputDimensions),o=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),a=n.clone().add(o),u=a.clone().subtract(this._inputDimensions.clone().divide(2)),l=new s(u.x*this._deltaCos-u.y*this._deltaSin,u.x*this._deltaSin+u.y*this._deltaCos),c=this._inputDimensions.clone().divide(2).add(l),h=this._options.start.clone().multiply(this._inputDimensions);return c.clone().subtract(h).divide(this._newAbsoluteSize)},t.prototype.applyToRelativeSize=function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()},t.prototype.applyToDimensions=function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t},t.prototype.scaleSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]},t.prototype.applyToRotation=function(t){return(t+this._rotationDelta)%(2*Math.PI)},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=i.n(l),h=l.Math.Vector2,p=function(t){function e(){n()(this,e);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=s()(this,t.call.apply(t,[this].concat(r)));return a._watermarkSprite=new l.Engine.Sprite,a._watermarkSprite.setAnchor(.5,.5),a._container.addChild(a._watermarkSprite),a}return u()(e,t),e.prototype._render=function(t){this._watermarkTexture||(this._watermarkTexture=l.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),i=this._options.image,r=i.width,n=i.height,o=l.Utils.resizeVectorToFit(new h(r,n),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),l.Promise.resolve()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._watermarkSprite.dispose()},e}(l.Operation);p.identifier="watermark",p.prototype.availableOptions={image:{type:l.OptionType.OBJECT,required:!0}},c.a.Operations.WatermarkOperation=p,e.a=p},function(t,e,i){"use strict";var r=i(3),n=i.n(r),o=[];void 0!==n.a.Operations.SpriteOperation&&o.push(n.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),e.a={EVENTS:{EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",WINDOW_RESIZE:"window:resize",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:updated",HISTORY_BEFORE_UNDO:"history:before-undo",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_REAPPLY_RATIO:"transform:reapply-ratio"},DEFAULTS:{TRANSFORM_RATIO_CATEGORIES:[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",ratio:1},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:new n.a.Math.Vector2(1200,627)},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:new n.a.Math.Vector2(940,788)},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:new n.a.Math.Vector2(851,315)}]}],FONTS:[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.otf",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.ttf",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.otf",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.otf",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.ttf",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.otf",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.otf",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.otf",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.otf",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.otf",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich Black",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.otf",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Ostrich Bold",variations:[{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.otf",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton Black",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.otf",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}}]},{fontFamily:"Panton Light",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.otf",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.otf",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.ttf",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}],BRUSHES:o}}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(7),c=i(324),h=i(123),p=i(328),d=i(329),f=function(t){function e(i,r,o){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n()(this,e);var u=s()(this,t.call(this));return u._ui=i,u._options=r,u._mediator=o,u._shallow=a,u._initFonts(),a||(u._initSDK(),u.operations=new d.a(u,u._sdk,u._mediator),u._initSerializers()),u}return u()(e,t),e.prototype._initFonts=function(){var t=l.k.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new h.a(this._ui,t);var e=this._fontManager.getFonts(),i=this._ui.getFontLoader();i.setFonts(e),i.load()},e.prototype.setImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.reset();var e=null;e=this._sdk.parseExif(t),this._setImage(t,e),this._initWatermark()},e.prototype._initWatermark=function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))},e.prototype._initSDK=function(){var t=this._options,e=t.logLevel,i=t.displayWelcomeMessage,r=t.debug,n=t.license,o=this._options.editor,s=o.smoothDownscaling,a=o.smoothUpscaling,u=o.preferredRenderer,c=o.pixelRatio,h={logLevel:e,debug:r,displayWelcomeMessage:i,pixelRatio:c,smoothDownscaling:s,smoothUpscaling:a,transparent:!0,license:n,renderMode:"export"};this._sdk=new l.j(u,h)},e.prototype.getMaxMegapixels=function(){return this._options.editor.maxMegaPixels},e.prototype.getOutputDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(t)},e.prototype.getOutputTextureDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(t)},e.prototype.getFinalDimensions=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(t)},e.prototype._setImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=t,this._sdk.setImage(t,e)},e.prototype._ensureImageIsResized=function(){var t=this,e=this._sdk.getImage(),i=this._sdk.getRenderer(),r=this.getMaxMegapixels(),n=r?1e6*r:null,o=i.getMaxDimensions(),s=new p.a(e,n,o);return!this._resizedImage&&s.needsResize()?s.resize().then(function(e){var i=e.canvas;e.dimensions,e.reason;return t._resizedImage=i,t._sdk.setImage(i),i}):l.h.resolve(e)},e.prototype.export=function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then(function(e){var i=t._options.editor.export;return new c.a(t._sdk,i,!1).export().then(function(e){return t.emit("export",e),t._mediator.emit(l.c.EVENTS.EXPORT,e,t),t._watermarkOperation&&(t._watermarkOperation.setEnabled(!0),t._sdk.render()),t._sdk.setAllOperationsToDirty(),e})})},e.prototype.broadcastTransform=function(t,e){var i=this,r=new l.j.Operations.TransformOperation.TransformChange(t,e);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(t){var e=i.operations.get(t);e&&e.transform(r)})},e.prototype.broadcastFlip=function(t){var e=this;["mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(i){var r=e.operations.get(i);r&&r.flip(t)})},e.prototype.broadcastRotate=function(t){var e=this;["transform","mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(i){var r=e.operations.get(i);r&&r.rotate(t)})},e.prototype._initSerializers=function(){this._serializers={"1.0.0":i(330).default,"1.0.1":i(335).default,"2.0.0":i(336).default,"3.0.0":i(340).default}},e.prototype.serialize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.0.0",i=this._serializers[e];return i?new i(this).serialize(t):l.h.reject(new Error("No serializer for version "+e+" found."))},e.prototype.deserialize=function(t){var e=this._serializers[t.version];return e?new e(this).deserialize(t):l.h.reject(new Error("No serializer for version "+t.version+" found."))},e.prototype.reset=function(){this._sdk.reset(),this.operations.reset()},e.prototype.dispose=function(){this.stop(),this._sdk.dispose()},e.prototype.getRenderer=function(){return this._sdk.getRenderer()},e.prototype.getSDK=function(){return this._sdk},e.prototype.getInputDimensions=function(){return this._sdk.getInputDimensions()},e.prototype.getImage=function(){return this._options.editor.image},e.prototype.getOptions=function(){return this._options},e.prototype.getUI=function(){return this._ui},e}(l.d);e.a=f},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=i(325),a=function(){function t(e,i,r){n()(this,t),this._sdk=e,this._options=i,this._download=r}return t.prototype.export=function(){var t=this,e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then(function(i){return t._download&&t._downloadData(e,i),i})},t.prototype._downloadData=function(t,e){switch(t){case o.i.DATAURL:s.a.downloadDataURL(e,this._options.fileBasename);break;case o.i.MSBLOB:s.a.downloadMSBlob(e,this._options.fileBasename)}},t.prototype._getRenderType=function(){var t=this._options;return t.type===o.i.IMAGE&&this._download?o.m.supportsMSBlob()?o.i.MSBLOB:o.i.DATAURL:t.type},t}();e.a=a},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=function(){function t(){n()(this,t)}return t.downloadDataURL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",i=this.createBlobURLFromDataURL(t),r=this.getExtensionFromDataURL(t),n=document.createElement("a");n.download=e+"."+r,n.href=i,document.body.appendChild(n),n.click(),document.body.removeChild(n)},t.downloadMSBlob=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob(t,e+".png")},t.getExtensionFromDataURL=function(t){return t.split(",")[0].split(":")[1].split(";")[0].split("/").pop()},t.createBlobURLFromDataURL=function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=o.a.decode(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),n=new Uint8Array(r),s=0;s<e.length;s++)n[s]=e[s];var a=new window.Blob([r],{type:i});return window.URL.createObjectURL(a)},t}();e.a=s},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e}(l.Configurable));e.a=c,c.prototype.availableOptions={fontFamily:{type:l.OptionType.STRING,required:!0},variations:{type:l.OptionType.ARRAY,required:!0}}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(3),c=(i.n(l),{100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"}),h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype.getLabel=function(){var t=c[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic"}return t},e}(l.Configurable);e.a=h,h.prototype.availableOptions={identifier:{type:l.OptionType.STRING,required:!0},fontFamily:{type:l.OptionType.STRING,required:!0},fontWeight:{type:l.OptionType.ALL,default:400},fontStyle:{type:l.OptionType.STRING,default:"normal"},textMetrics:{type:l.OptionType.OBJECT,default:null},provider:{type:l.OptionType.STRING,available:["google","file"]},filePath:{type:l.OptionType.STRING},default:{type:l.OptionType.BOOLEAN,default:!1},font:{type:l.OptionType.OBJECT}}},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=function(){function t(e,i,r){n()(this,t),this._image=e,this._maxPixels=i,this._maxDimensions=r}return t.prototype.needsResize=function(){var t=new o.n(this._image.width,this._image.height),e=t.x*t.y,i=null!==this._maxPixels&&e>this._maxPixels,r=null!==this._maxDimensions&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return i||r},t.prototype.resize=function(){var t=this,e=null,i=null,r=this._maxDimensions;return new o.h(function(n,s){setTimeout(function(){var s=new o.n(t._image.width,t._image.height),a=s.clone();if(null!==t._maxPixels&&a.x*a.y>t._maxPixels&&(a.copy(t._getDimensionsByMaxPixels()),e="maxMegaPixels"),null!==r&&(a.x>r||a.y>r)){var u=Math.min(r/a.x,r/a.y);a.multiply(u),e="maxDimensions"}a.floor(),i=t._createResizedImageCanvas(a),n({canvas:i,dimensions:a,reason:e})},1e3)})},t.prototype._createResizedImageCanvas=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this._image,r=o.k.createCanvas();r.width=t.x,r.height=t.y;var n=t.clone().subtract(e).divide(2);return r.getContext("2d").drawImage(i,0,0,i.width,i.height,n.x,n.y,e.x,e.y),r},t.prototype._getDimensionsByMaxPixels=function(){var t=this._image,e=this._maxPixels,i=t.width/t.height,r=t.height/t.width;return new o.n(Math.sqrt(e*i),Math.sqrt(e*r)).floor()},t}();e.a=s},function(t,e,i){"use strict";var r=i(13),n=i.n(r),o=i(0),s=i.n(o),a=i(7),u=function(){function t(e,i,r){s()(this,t),this._editor=e,this._sdk=i,this._mediator=r,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}return t.prototype.exists=function(t){return!!this._map[t]},t.prototype.add=function(t){var e=this,i=t.constructor.identifier;t.on("updated",function(){e._mediator.emit(a.c.EVENTS.OPERATION_UPDATED,t)});var r=this._preferredOrder.indexOf(i);if(-1===r)throw new Error("EditorOperations#add: `"+i+"` does not appear in `operationsOrder`");this._stack.set(r,t),this._map[i]=t,this._mediator.emit(a.c.EVENTS.OPERATION_CREATED,t)},t.prototype.remove=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i="object"===(void 0===t?"undefined":n()(t))?t.constructor.identifier:t,r=this._stack.getStack();t=this.get(i),delete this._map[i];var o=r.map(function(t){return t.constructor.identifier}).indexOf(i);if(-1!==o){this._stack.removeAt(o);for(var s=o+1;s<r.length;s++){var u=r[s];u&&u.setDirty(!0)}e&&this._mediator.emit(a.c.EVENTS.OPERATION_REMOVED,t)}},t.prototype.get=function(t){return this._map[t]},t.prototype.getOrCreate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[t]){return this._map[t]}var i=this._available[t],r=new i(this._sdk,e);return this.add(r),r},t.prototype.getStack=function(){return this._stack},t.prototype.reset=function(){this._map={}},t.prototype._fixStack=function(){var t=this,e=this._stack.getStack().slice();this._stack.clear(),e.forEach(function(e){t.add(e)})},t}();e.a=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i.n(r),o=i(124),s=i(125),a=function(){function t(e){n()(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new o.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new s.a(this._editor,t).deserialize()},t}();e.default=a,a.version="1.0.0"},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(7),u=function(){function t(e,i){s()(this,t),this._ui=e,this._options=i,this._categoriesById={},this._filtersByIdentifier={identity:a.j.Operations.FilterOperation.Filters.IdentityFilter},this._categories=a.l.DEFAULTS.FILTERS.slice(0),this._initCategories()}return t.prototype.instantiateFilterWithIdentifier=function(t){var e=this,i=this.getFilterByIdentifier(t);if(!i)return n.a.reject(new Error("Unknown filter with identifier `"+t+"`!"));if(i.prototype instanceof a.j.Operations.FilterOperation.Filter)return n.a.resolve(new i);var r=i.lutImage,o=i.resolution,s=i.horizontalTileCount,u=i.verticalTileCount,l=void 0;this._ui.getPreloader&&(l=this._ui.getPreloader().getAsset(r));var c=void 0;return c=l?n.a.resolve(l):a.f.load(this._ui.getAssetPath(r)),c.then(function(t){return a.f.load(e._ui.getAssetPath(r)).then(function(t){return new a.j.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:t,resolution:o,horizontalTileCount:s,verticalTileCount:u})})})},t.prototype._initCategories=function(){var t=this;if(this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=a.m.mergeCategories(this._categories,this._options.categories,"filters")),this._options.availableFilters){var e=[];this._categories.forEach(function(i){var r=i.filters.filter(function(e){return-1!==t._options.availableFilters.indexOf(e.identifier)});r.length>0&&e.push({identifier:i.identifier,defaultName:i.defaultName,filters:r})}),this._categories=e}var i={identifier:"all",defaultName:"All",filters:this._categories.map(function(t){return t.filters}).reduce(function(t,e){return t.concat(e)})};this._categories.unshift(i),this._categoriesById.all=i,this._categories.forEach(function(e){t._categoriesById[e.identifier]=e}),i.filters.forEach(function(e){t._filtersByIdentifier[e.identifier]=e})},t.prototype.getFiltersForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown filter category '"+t+"'");return this._categoriesById[t].filters},t.prototype.getFilterByIdentifier=function(t){return this._filtersByIdentifier[t]},t.prototype.getCategories=function(){return this._categories},t.prototype.getCategoryByIdentifier=function(t){return this._categoriesById[t]},t}();e.a=u},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=function(){function t(e,i){n()(this,t),this._ui=e,this._options=i,this._brushes=[],this._brushesById={},this._addBrushes(o.c.DEFAULTS.BRUSHES);var r=this._options,s=r.brushes,a=r.replaceBrushes,u=r.availableBrushes;this._options.brushes&&this._addBrushes(s,a),u&&(this._brushes=this._brushes.filter(function(t){return-1!==u.indexOf(t.identifier)}))}return t.prototype._addBrushes=function(t,e){var i=this;e&&(this._brushes=[],this._brushesById={}),t.forEach(function(t){i._brushes.push(t),i._brushesById[t.identifier]=t})},t.prototype.getBrushByIdentifier=function(t){return this._brushesById[t]},t.prototype.getBrushes=function(){return this._brushes},t.prototype.getFirstBrush=function(){return this._brushes[0]},t}();e.a=s},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(17),c=(i.n(l),i(334)),h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype.load=function(){var e=this;return this._fonts.forEach(function(t){var i=e._ui.getAssetPath(t.getFilePath(),!1,!0);Object(l.registerFont)(i,{family:t.getFont().getFontFamily(),weight:t.getFontWeight(),style:t.getFontStyle()})}),t.prototype.load.call(this)},e}(c.a);e.a=h},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=function(){function t(e){s()(this,t),this._ui=e,this._fonts=[]}return t.prototype.add=function(t){this._fonts.push(t)},t.prototype.load=function(){return n.a.resolve()},t.prototype.dispose=function(){},t}();e.a=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i.n(r),o=i(126),s=i(127),a=function(){function t(e){n()(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new o.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new s.a(this._editor,t).deserialize()},t}();e.default=a,a.version="1.0.1"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i.n(r),o=i(128),s=i(130),a=function(){function t(e){n()(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new o.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new s.a(this._editor,t).deserialize()},t}();e.default=a,a.version="2.0.0"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=function(){function t(e,i){n()(this,t),this._ui=e,this._options=i,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(o.l.DEFAULTS.FRAME_CATEGORIES);var r=this._options,s=r.categories,a=r.replaceCategories;this._options.categories?this._addCategories(s,a):this._updateAllCategory()}return t.prototype._addCategories=function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=i?t.slice(0):o.m.mergeCategories(this._categories,t,"frames"),this._categoriesById={},this._categories.forEach(function(t){e._categoriesById[t.identifier]=t});var r=this._options.availableFrames;r&&this._categories.forEach(function(t){t.frames=t.frames.filter(function(t){return-1!==r.indexOf(t.identifier)})}),this._categories.forEach(function(t){t.frames.forEach(function(t){e._framesById[t.identifier]=t})}),this._updateAllCategory()},t.prototype._updateAllCategory=function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(t){return t.frames}).reduce(function(t,e){return t.concat(e)},[])},this._categoriesById.all=this._allCategory},t.prototype.getFramesForCategory=function(t){if(!this._categoriesById[t])throw new Error("Unknown frame category '"+t+"'");return this._categoriesById[t].frames},t.prototype.getFrameByIdentifier=function(t){return this._framesById[t]},t.prototype.getCategories=function(){return this._categories},t.prototype.getCategory=function(t){return this._categoriesById[t]},t}();e.a=s},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(7),s=function(){function t(e,i){var r=this;n()(this,t),this._ui=e,this._options=i,this._overlays=o.l.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={},i.overlays&&(i.replaceOverlays?this._overlays=i.overlays:this._overlays=this._overlays.concat(i.overlays)),i.availableOverlays&&(this._overlays=this._overlays.filter(function(t){return-1!==i.availableOverlays.indexOf(t.identifier)})),this._overlays.forEach(function(t){r._overlaysByIdentifier[t.identifier]=t})}return t.prototype.getOverlays=function(){return this._overlays},t.prototype.getOverlayByIdentifier=function(t){return this._overlaysByIdentifier[t]},t}();e.a=s},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(7),p=i(40),d=h.j.OptionType,f=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(this,e);var n=u()(this,t.call(this,r));return n._loaded=!1,n._loading=!1,n._ui=i,n._frame=h.j.Utils.deepClone(n._options),n}return c()(e,t),e.prototype.load=function(){var t=this;if(this._loaded)return n.a.resolve();if(this._loading)return n.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var e=this._frame.imageGroups,i=[];return["top","left","right","bottom"].forEach(function(r){if(r in e){var n=e[r];["start","mid","end"].forEach(function(e){e in n&&i.push(t._loadPart(r,e))})}}),n.a.all(i).then(function(){t._loaded=!0,t._loading=!1}).catch(function(e){t._loaded=!1,t._loading=!1})},e.prototype._loadPart=function(t,e){var i=this,r=this._frame.imageGroups,n=r[t][e],o=n;return"string"!=typeof n&&"image"in n&&(o=n.image),p.a.load(this._ui.getAssetPath(o)).then(function(r){return"string"!=typeof n?i._frame.imageGroups[t][e].image=r:i._frame.imageGroups[t][e]=r,r})},e.prototype.getFrame=function(){return this._frame},e}(h.j.Configurable);e.a=f,f.prototype.availableOptions={identifier:{type:d.STRING,required:!0},defaultName:{type:d.STRING},thumbnail:{type:d.STRING},tintable:{type:d.BOOLEAN,default:!1},layoutMode:{type:d.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:d.OBJECT,required:!0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i.n(r),o=i(341),s=i(342),a=function(){function t(e){n()(this,t),this._editor=e}return t.prototype.serialize=function(){var t=new o.a(this._editor);return t.serialize.apply(t,arguments)},t.prototype.deserialize=function(t){return new s.a(this._editor,t).deserialize()},t}();e.default=a,a.version="3.0.0"},function(t,e,i){"use strict";var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(2),u=i.n(a),l=i(7),c=i(128),h=function(t){function e(){return n()(this,e),s()(this,t.apply(this,arguments))}return u()(e,t),e.prototype.serialize=function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.prototype.serialize.call(this,i).then(function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:l.k.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t})},e.prototype._serializeSticker=function(e,i){var r=t.prototype._serializeSticker.call(this,e,i);return r.options.alpha=i.getAlpha(),r.options.tintColor&&(r.options.tintColor={rgba:r.options.tintColor}),r},e.prototype._serializeText=function(e,i){var r=t.prototype._serializeText.call(this,e,i);return r.options.color={rgba:r.options.color},r.options.backgroundColor={rgba:r.options.backgroundColor},r.options.flipHorizontally=!1,r.options.flipVertically=!1,delete r.options.fontWeight,r},e.prototype._serializePath=function(e){var i=t.prototype._serializePath.call(this,e);delete i.hardness,delete i.size,delete i.color;var r=e.getBrush();i.brush=r.serializeOptions(["identifier","size","color"],!0),void 0===i.brush.identifier&&delete i.brush.identifier,i.brush.color={rgba:i.brush.color};var n=r.getOption("hardness");return"undefined"!==n&&(i.brush.hardness=n),i},e.prototype._serializeFrameOperation=function(e,i){t.prototype._serializeFrameOperation.call(this,e,i);var r=i.filter(function(t){return"sprite"===t.type}),n=void 0;if(r.length){n=r.pop();var o=n.options.sprites.filter(function(t){return"frame"===t.type})[0];e.getTintColor().equals(new l.b(1,1,1,0))||(o.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var s=e.serializeOptions(["scale","alpha"],!0);o.options=l.k.extend(o.options,s),o.options.size=o.options.scale,delete o.options.scale}},e.prototype._serializeTransformOperation=function(e){var i=t.prototype._serializeTransformOperation.call(this,e);return e._ratio&&(i.options.meta={identifier:e._ratio.identifier}),delete i.options.scale,i},e.prototype._serializeAdjustmentsOperation=function(e){var i=t.prototype._serializeAdjustmentsOperation.call(this,e),r=e.availableOptions,n=r.gamma,o=e.getGamma(),s=n.minValue,a=n.midValue,u=n.maxValue;return i.options.gamma=o<=a?(o-s)/(a-s)-1:(o-a)/(u-a),i},e.prototype._serializeOperation=function(e,i){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return t.prototype._serializeOperation.call(this,e,i)}},e.prototype._serializeMirroredFocusOperation=function(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}},e.prototype._serializeLinearFocusOperation=function(t){var e=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return e.start=e.controlPoint1,delete e.controlPoint1,e.end=e.controlPoint2,delete e.controlPoint2,{type:"focus",options:{type:"linear",options:e}}},e.prototype._serializeBlurOperation=function(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],!0)}}},e}(c.a);e.a=h,h.version="3.0.0"},function(t,e,i){"use strict";var r=i(9),n=i.n(r),o=i(0),s=i.n(o),a=i(1),u=i.n(a),l=i(2),c=i.n(l),h=i(7),p=i(130),d=i(81),f=i(40),_=void 0;void 0!==h.j.Operations.SpriteOperation&&(_=h.j.Operations.SpriteOperation.BrushSprite.Brush);var g=function(t){function e(){return s()(this,e),u()(this,t.apply(this,arguments))}return c()(e,t),e.prototype._deserializeSticker=function(t,e){var i=h.j.Operations.SpriteOperation,r=e.options,o=this._stickerManager.getStickerByIdentifier(r.identifier);if(!o)return h.g.warn("Deserializer","Unknown sticker `"+r.identifier+"`. Skipping sprite."),n.a.resolve();var s=d.a.getURLForSticker(o,"base"),a=this._editor.getUI().getAssetPath(s),u=t.getInputDimensions(!1);return f.a.load(a).then(function(e){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,s=r.rotation,a=r.flipHorizontally,l=r.flipVertically,c={identifier:r.identifier,image:e,position:h.n.fromObject(r.position),dimensions:h.n.fromObject(r.dimensions).multiply(u.min()),rotation:s||0,flipHorizontally:a,flipVertically:l,adjustments:{}};return void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach(function(t){void 0!==r.adjustments[t]&&(c.adjustments[t]=r.adjustments[t]+n[t].default)}),void 0!==r.tintColor&&void 0!==o.tintMode&&(c.tintColor=h.b.fromArray(r.tintColor.rgba),c.tintMode=o.tintMode),void 0!==r.alpha&&(c.alpha=r.alpha),t.createSticker(c)})},e.prototype._deserializeTransformOperation=function(e){return t.prototype._deserializeTransformOperation.call(this,e).then(function(t){if(t)return t._ratio=null,t})},e.prototype._deserializeInputImage=function(){var t=this,e=this._data.image,i=e.data,r=e.type,o=e.uri;return i&&r&&(o="data:"+r+";base64,"+i),o?f.a.load(o).then(function(e){t._editor.setImage(e)}):n.a.resolve()},e.prototype._deserializeAdjustmentsOperation=function(e){var i=h.j.Operations.AdjustmentsOperation;return t.prototype._deserializeAdjustmentsOperation.call(this,e).then(function(t){if(!t)return null;var r=e.options;if(void 0!==r.gamma){var n=i.prototype.availableOptions.gamma,o=n.minValue,s=n.midValue,a=n.maxValue;t.setGamma(r.gamma<0?s+(s-o)*r.gamma:s+(a-s)*r.gamma)}return t})},e.prototype._deserializeFocusOperation=function(e){var i=e.options.options;switch(e.options.type){case"radial":t.prototype._deserializeFocusOperation.call(this,e);break;case"linear":var r=i.start,n=i.end,o=i.blurRadius;this._editor.operations.getOrCreate("linear-focus",{controlPoint1:h.n.fromObject(r),controlPoint2:h.n.fromObject(n),blurRadius:o});break;case"mirrored":var s=i.start,a=i.end,u=i.size,l=i.gradientSize,c=i.blurRadius;this._editor.operations.getOrCreate("mirrored-focus",{start:h.n.fromObject(s),end:h.n.fromObject(a),size:u,gradientSize:l,blurRadius:c});break;case"gaussian":var p=i.blurRadius;this._editor.operations.getOrCreate("blur",{blurRadius:p})}},e.prototype._deserializeText=function(t,e){var i=e.options,r=i.fontSize,n=i.lineHeight,o=i.fontIdentifier,s=i.alignment,a=i.rotation,u=i.maxWidth,l=i.color,c=i.backgroundColor,p=this._ui.getFontLoader(),d=this._fontManager.getVariationByIdentifier(o);return d?p.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),p.load().then(function(){var e=t.getInputDimensions(!1),o=u*e.min()/e.x;return t.createText({fontSize:r,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:s,rotation:a,maxWidth:o,text:i.text,color:h.b.fromArray(l.rgba),backgroundColor:h.b.fromArray(c.rgba),position:h.n.fromObject(i.position)})})},e.prototype._createBrushForPath=function(t){var e=t.brush,i=e.identifier,r=e.color,n=e.size,o=e.hardness,a=h.b.fromArray(r.rgba),l={color:a,size:n};void 0!==o&&(l.hardness=o);var p=this._brushManager.getBrushByIdentifier(i);if(p||(p=this._brushManager.getFirstBrush()),p.prototype&&p.prototype instanceof _){return new p(l)}var d=h.k.extend({},p);delete d.image;var f=function(t){function e(){return s()(this,e),u()(this,t.apply(this,arguments))}return c()(e,t),e}(_);return f.identifier=p.identifier,new f(h.k.extend({},d,l))},e.prototype._deserializeFrame=function(e,i){var r=this;return t.prototype._deserializeFrame.call(this,e,i).then(function(){var t=r._editor.operations.get("frame"),e=i.options,n=e.size,o=e.alpha,s=e.tintColor,a={};void 0!==n&&(a.scale=n),void 0!==o&&(a.alpha=o),void 0!==s&&(a.tintColor=h.b.fromArray(s.rgba)),t.set(a)})},e}(p.a);e.a=g,g.version="3.0.0"}]).default});