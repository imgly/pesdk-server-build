!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("canvas"),require("chalk"),require("gl"),require("request")):"function"==typeof define&&define.amd?define(["canvas","chalk","gl","request"],t):"object"==typeof exports?exports.PhotoEditorServer=t(require("canvas"),require("chalk"),require("gl"),require("request")):e.PhotoEditorServer=t(e.canvas,e.chalk,e.gl,e.request)}("undefined"!=typeof self?self:this,function(e,t,n,i){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=217)}([function(e,t,n){e.exports={default:n(218),__esModule:!0}},function(e,t,n){e.exports={default:n(228),__esModule:!0}},function(e,t,n){e.exports={default:n(220),__esModule:!0}},function(e,t,n){e.exports={default:n(223),__esModule:!0}},function(e,t,n){e.exports=n(231).default},function(e,t,n){e.exports={default:n(270),__esModule:!0}},function(e,t,n){e.exports={default:n(256),__esModule:!0}},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(323)),_=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,e,_({intensity:{type:p.OptionType.NUMBER,default:1,setter:function(e){return this._stack&&this._stack.setIntensity(e),e}},dirty:{type:p.OptionType.BOOLEAN,default:!0}},n)));return i._stack=new d.a(i._options.intensity),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Configurable),g(t,[{key:"render",value:function(e,t,n){var i=this;return this._stack.render(e,t,n).then(function(e){return i.setDirty(!1),e})}},{key:"setDirtyForRenderer",value:function(e,t){this._stack.setDirtyForRenderer(e,t)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}]),t}();y.identifier=null,y.isIdentity=!1,y.displayName=null,y.PrimitivesStack=d.a,t.a=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(325);n.d(t,"Brightness",function(){return i.a});var r=n(327);n.d(t,"Contrast",function(){return r.a});var o=n(329);n.d(t,"ColorMatrixPrimitive",function(){return o.a});var a=n(331);n.d(t,"Desaturation",function(){return a.a});var s=n(333);n.d(t,"DuoTone",function(){return s.a});var u=n(335);n.d(t,"Gamma",function(){return u.a});var l=n(337);n.d(t,"Glow",function(){return l.a});var c=n(339);n.d(t,"Gobblin",function(){return c.a});var f=n(341);n.d(t,"Grayscale",function(){return f.a});var h=n(172);n.d(t,"LookupTable",function(){return h.a});var p=n(344);n.d(t,"LookupTableImage",function(){return p.a});var d=n(346);n.d(t,"Saturation",function(){return d.a});var _=n(348);n.d(t,"SoftColorOverlay",function(){return _.a});var g=n(350);n.d(t,"ToneCurve",function(){return g.a});var y=n(351);n.d(t,"X400",function(){return y.a});var v=n(353);n.d(t,"ThreeDLookupTableImage",function(){return v.a})},function(e,t,n){"use strict";n.d(t,"h",function(){return p}),n.d(t,"n",function(){return v}),n.d(t,"k",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return c}),n.d(t,"i",function(){return _}),n.d(t,"j",function(){return y}),n.d(t,"e",function(){return g});var i=n(230),r=n(468),o=n(24),a=n(89),s=n(71),u=n(35),l=n.n(u);n.d(t,"m",function(){return i.a}),n.d(t,"c",function(){return r.a}),n.d(t,"g",function(){return o.a}),n.d(t,"l",function(){return a.b}),n.d(t,"f",function(){return s.a});var c=l.a.Base64,f=l.a.Color,h=(l.a.Math.ColorMatrix,l.a.EventEmitter),p=(l.a.EXIF,l.a.OptionType,l.a.Promise),d=l.a.Utils,_=l.a.RenderType,g=l.a.ImageFormat,y=l.a,v=(l.a.UniformType,l.a.Math.Vector2);l.a.Math.Rectangle,l.a.Math.Range,"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(114)},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports={default:n(243),__esModule:!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"j",function(){return p});var i=n(24),r=n(65),o=n(152),a=n(153),s=n(44),u=n(66),l=n(30),c=n(154),f=n(39);n.d(t,"b",function(){return r.a}),n.d(t,"g",function(){return o.a}),n.d(t,"k",function(){return s.a}),n.d(t,"h",function(){return a.a}),n.d(t,"d",function(){return u.a}),n.d(t,"f",function(){return i.a}),n.d(t,"i",function(){return l.a}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return c.a});var h=2e3,p=20},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(140),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._fragmentSource=null,o._inputTextureSizeMap={},o._inputLogicalSizeMap={},o._inputShapeMap={},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Engine.Filter),d(t,[{key:"requiresFloatTextures",value:function(){return!0}},{key:"setTargetTextureSize",value:function(e){this._targetTextureSize=e}},{key:"setTargetLogicalSize",value:function(e){this._targetSize=e}},{key:"setTextureSizeForInputWithName",value:function(e,t){this._inputTextureSizeMap[t]=e}},{key:"setLogicalSizeForInputWithName",value:function(e,t){this._inputLogicalSizeMap[t]=e}},{key:"getShaderForRenderer",value:function(e){return this._fragmentSource||(this._fragmentSource=this._buildFragmentShader()),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"getShaderForRenderer",this).call(this,e)}},{key:"outputLogicalShape",value:function(){if(!this._options.outputLogicalShape){var e=this._calculateOutputShape();this._options.outputLogicalShape=e}return this._options.outputLogicalShape}},{key:"_applyWebGL",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;o||(o=this.getShaderForRenderer(e));var a=e.getContext(),s={},u=e.getCurrentRenderTarget().getProjectionMatrix().toArray();s.u_projMatrix=u,s.output_texRC=this._targetTextureSize,s.output_sizeRC=this._targetSize,s.output_shape=this.outputLogicalShape(),this._options.inputs.forEach(function(e){try{s[e.name+"_texRC"]=i._inputTextureSizeMap[e.name],s[e.name+"_sizeRC"]=i._inputLogicalSizeMap[e.name],s[e.name+"_shape"]=e.logicalShape}catch(t){throw new Error("Missing texture or logical size for input "+e.name+" in filter "+i.constructor.name+".")}},this),this._updateAdditionalUniforms(o),o.setUniforms(s),o.syncUniforms();var l=t.getBaseTexture(),c=e.getOrCreateGLTexture(l);a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,c),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,l.getGLRepeat(a,"x")),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,l.getGLRepeat(a,"y")),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,l.getGLFilter(a,"min")),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,l.getGLFilter(a,"mag")),a.bindFramebuffer(a.FRAMEBUFFER,n._framebuffer),r&&a.clear(a.COLOR_BUFFER_BIT),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}},{key:"getShaderIdentifier",value:function(){var e=this.outputLogicalShape().length,t=this.getInputs().map(function(e){return e.name+"_"+e.logicalShape.length}).join("");return this.constructor.name+"_"+e+"_"+t+"_"+this._getTensorOperationSource()}},{key:"_updateAdditionalUniforms",value:function(e){}},{key:"_calculateOutputShape",value:function(){return this.getInputs()[0].logicalShape}},{key:"prepareUniforms",value:function(){var e=this;this._uniforms.output_texRC={type:p.UniformType.FLOAT2,value:[0,0]},this._uniforms.output_sizeRC={type:p.UniformType.FLOAT2,value:[0,0]};var t=this._calculateOutputShape();this._uniforms.output_shape={type:2===t.length?p.UniformType.INT2:p.UniformType.INT4,value:t};var n=1,i=[];this.getInputs().forEach(function(t){if(-1!==i.indexOf(t.name))throw new Error("Input names must be unique.");var r=t.name+"_texRC",o=t.name+"_sizeRC",a=t.name+"_shape";switch(e._uniforms[r]={type:p.UniformType.FLOAT2,value:[0,0]},e._uniforms[o]={type:p.UniformType.FLOAT2,value:[0,0]},e._uniforms[a]={type:2===t.logicalShape.length?p.UniformType.INT2:p.UniformType.INT4,value:t.logicalShape},t.type){case g.PREVIOUS:e._uniforms[t.name]={type:p.UniformType.SAMPLER2D,value:0};break;case g.DATA:e._uniforms[t.name]={type:p.UniformType.SAMPLER2D,value:n++}}}),this.getInputs().forEach(function(t){t.type===g.INDEX&&(e._uniforms[t.name]={type:p.UniformType.SAMPLER2D,value:n++})}),delete this._availableUniforms.u_image,delete this._uniforms.u_image}},{key:"_getTensorOperationSource",value:function(){return"\n      void main () {\n        setOutput(0.0);\n      }\n    "}},{key:"_buildFragmentShader",value:function(){var e=this,t=n(459),i=this.outputLogicalShape();return 2===i.length?t+=this._create2DOutputInterfaceSnippet():4===i.length&&(t+=this._create4DOutputInterfaceSnippet()),this._options.inputs.forEach(function(n){t+=e._createInputInterfaceSnippet(n)}),t+=this._createOutputSnippet(),t+=this._getTensorOperationSource()}},{key:"_createOutputSnippet",value:function(){return"\n      void setOutput(float val) {\n        gl_FragColor = vec4(val, 0, 0, 0);\n      }\n    "}},{key:"_create2DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec2 output_shape;\n      ivec2 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n        int r = index / output_shape[1];\n        int c = index - r * output_shape[1];\n\n        return ivec2(r, c);\n      }\n    "}},{key:"_create4DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec4 output_shape;\n      ivec4 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n\n        int stride2 = output_shape[3];\n        int stride1 = output_shape[2] * stride2;\n        int stride0 = output_shape[1] * stride1;\n\n        int r = index / stride0;\n        index -= r * stride0;\n\n        int c = index / stride1;\n        index -= c * stride1;\n\n        int d = index / stride2;\n        int d2 = index - d * stride2;\n\n        return ivec4(r, c, d, d2);\n      }\n    "}},{key:"_createInputInterfaceSnippet",value:function(e){var t="",n=e.name,i=e.logicalShape,r=n+"_texRC",o=n+"_sizeRC",a=n+"_shape";return t+="\n      uniform sampler2D "+n+";\n      uniform vec2 "+r+";\n      uniform vec2 "+o+";\n      uniform "+(2===i.length?"ivec2":"ivec4")+" "+a+";\n    ",t+="\n      float get"+this._capitalize(n)+"Flat(int index) {\n        vec2 uv = UVfrom1D("+r+", "+o+", index);\n        return sampleTexture("+n+", uv);\n      }\n    ",2===i.length?t+="\n        float get"+this._capitalize(n)+"(int row, int col) {\n          vec2 uv = UVfrom2D("+r+", "+o+", "+a+"[1], row, col);\n          return sampleTexture("+n+", uv);\n        }\n      ":4===i.length&&(t+="\n      float get"+this._capitalize(n)+"(int row, int col, int depth, int depth2) {\n        int stride2 = "+a+"[3];\n        int stride1 = "+a+"[2] * stride2;\n        int stride0 = "+a+"[1] * stride1;\n\n        vec2 uv = UVfrom4D("+r+", "+o+", stride0, stride1, stride2, row, col, depth, depth2);\n        return sampleTexture("+n+", uv);\n      }\n\n      float get"+this._capitalize(n)+"(ivec4 coords) {\n        return get"+this._capitalize(n)+"(coords.x, coords.y, coords.z, coords.w);\n      }\n    "),t}},{key:"_capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"_getInputWithName",value:function(e){return p.Utils.Array.find(this._options.inputs,function(t){return t.name===e})}}]),t}(),g={PREVIOUS:"previous",INDEX:"index",DATA:"data"};_.prototype.availableOptions={inputs:{type:p.OptionType.ARRAY},outputLogicalShape:{type:p.OptionType.ARRAY},outputTextureDimensions:{type:p.OptionType.ARRAY}},t.b=_},function(e,t,n){var i=n(16),r=n(10),o=n(29),a=n(33),s=n(41),u=function(e,t,n){var l,c,f,h=e&u.F,p=e&u.G,d=e&u.S,_=e&u.P,g=e&u.B,y=e&u.W,v=p?r:r[t]||(r[t]={}),m=v.prototype,b=p?i:d?i[t]:(i[t]||{}).prototype;for(l in p&&(n=t),n)(c=!h&&b&&void 0!==b[l])&&s(v,l)||(f=c?b[l]:n[l],v[l]=p&&"function"!=typeof b[l]?n[l]:g&&c?o(f,i):y&&b[l]==f?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):_&&"function"==typeof f?o(Function.call,f):f,_&&((v.virtual||(v.virtual={}))[l]=f,e&u.R&&m&&!m[l]&&a(m,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){e.exports={default:n(251),__esModule:!0}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(100)("wks"),r=n(83),o=n(16).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),h(t,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}]),t}();t.a=p},function(e,t,n){e.exports=!n(40)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._seed=void 0===t?e.TimeSeed():t}return o(e,[{key:"seed",value:function(t){this._seed=void 0===t?e.TimeSeed():t}},{key:"next",value:function(){var t=0|this._seed,n=t/e.SEED_DIVIDER|0,i=t%e.SEED_DIVIDER|0;return(t=e.SEED_LOW_MULTIPLY*i-e.SEED_HIGH_MULTIPLY*n)<=0&&(t+=e.MAX),-1===t&&(t=e.MAX-1),this._seed=t,t}},{key:"nextInRange",value:function(e,t){return void 0===t&&(t=e,e=0),e+this.next()%(t-e+1)}},{key:"nextBool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(e+t-1)>=e}},{key:"pickNext",value:function(e){return Array.isArray(e)?e[this.next()%e.length]:null}}],[{key:"TimeSeed",value:function(){return Date.now()}}]),e}();a.MAX=2147483647,a.SEED_DIVIDER=127773,a.SEED_LOW_MULTIPLY=16807,a.SEED_HIGH_MULTIPLY=2836},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(4),u=(n.n(s),r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=s.Math.Rectangle,f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.top=t,this.left=n,this.bottom=i,this.right=r}return l(e,[{key:"multiply",value:function(e){this.top*=e,this.left*=e,this.bottom*=e,this.right*=e}},{key:"toObject",value:function(){return u({},this)}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(e.top-this.top)<=t&&Math.abs(e.left-this.left)<=t&&Math.abs(e.bottom-this.bottom)<=t&&Math.abs(e.right-this.right)<=t}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];return void 0===t&&(t=e),this.top*=t,this.bottom*=t,this.left*=e,this.right*=e,this}},{key:"clone",value:function(){return new e(this.top,this.left,this.bottom,this.right)}},{key:"applyToRectangle",value:function(e){return new c(e.x+this.left,e.y+this.top,e.width-this.left-this.right,e.height-this.top-this.bottom)}}],[{key:"ZERO",get:function(){return new e(0,0,0,0)}}]),e}()},function(e,t,n){var i=n(27),r=n(136),o=n(94),a=Object.defineProperty;t.f=n(19)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return o()(e)}var r=n(15),o=n.n(r),a=n(0),s=n.n(a),u=n(254),l=n.n(u),c=n(30),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(262),p=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],d=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},_=new(function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._levels=[].concat(i(r)),this._maxLevel=this.getLevelIndexByName(n),this._consoleFuncs={trace:function(){var e,t;d()?((e=console).groupCollapsed.apply(e,arguments),console.trace(),console.groupEnd()):(t=console).trace.apply(t,arguments)}},this._levels.forEach(function(e){var n=e.name;t[n]=function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t._log.apply(t,[n,e].concat(r))}})}return f(e,[{key:"getLevelIndexByName",value:function(e){return c.a.Array.findIndex(this._levels,function(t){return t.name===e})}},{key:"getLevelObjectByName",value:function(e){return c.a.Array.find(this._levels,function(t){return t.name===e})}},{key:"canLog",value:function(e){var t=this.getLevelIndexByName(e);return!(t<0)&&t>=this._maxLevel}},{key:"setLevel",value:function(e){var t=this.getLevelIndexByName(e);t<0||(this._maxLevel=t)}},{key:"_log",value:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a=this.getLevelObjectByName(e);if(a&&this.canLog(e)){a.name;var s=a.type,u=a.background,c=a.color,f=r.filter(function(e){return void 0!==e}).map(function(e){return e.toObject?JSON.parse(l()(e.toObject())):e}),p=this._consoleFuncs[s]||console[s]?function(){var e;return(e=console)[s].apply(e,arguments)}:function(){var e;return(e=console).log.apply(e,arguments)},_=f.length,g=function(e,t){return[h.bgHex("#2D7BFF"),h.bgHex("#2B2B2B").white,h.bgHex("#2D7BFF"),h.bgHex(e).hex(t).bold,h.bgHex("#2B2B2B").white,h.bgHex("#2D7BFF")]}(u,c),y=g[0](" ")+" "+g[1]("PhotoEditorSDK")+" "+g[2](" ")+" "+g[3](t),v=g[5](" ")+" ";_<=0?p(y+" "+v):1!==_||"string"!=typeof f[0]?d()?(console.groupCollapsed(y+" "+v),p.apply(void 0,i(f)),console.groupEnd()):p.apply(void 0,[y+" "+v].concat(i(f))):p(y+" "+g[4](f[0])+" "+v)}}},{key:"image",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]}},{key:"texture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]}},{key:"logGlTexture",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]}}]),e}())("warn");t.a=_},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(91)),_=n(21),g=n(77),y=n(53),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),m(t,[{key:"_calculateLayoutElements",value:function(){var e=this.serializeOptions(),t=e.attributes,n=e.imageInsets,i=e.size,r=(e.width,this.getWords().joined(1)[0]||""),o=t.fontIdentifier,a=new g.a({text:r,fontIdentifier:o});a.fitWidth(this._getTextFrame().width);var s=a.getTextMetrics().height+n.top+n.bottom;i.height=s;var u=this._getTextFrame();return[new y.a({text:r,frame:u,font:a})]}}]),t}();b.prototype.availableOptions=v({},d.a.prototype.availableOptions,{imageInsets:{type:p.OptionType.OBJECT,default:new _.a}})},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(11),c=n.n(l),f=n(78),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,_.Configurable),g(t,[{key:"loadImages",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new c.a(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return c.a.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}(h.a.mark(function e(t){var n,i,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=0;case 2:if(!(i<t.length)){e.next=10;break}return r=t[i],e.next=6,this.addImage(r.path,r.fullPath,r.image);case 6:n.push(r);case 7:i++,e.next=2;break;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addImage",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",r=this.getImages();return n?(r[e]={fullPath:t,image:n},c.a.resolve({fullPath:t,image:n})):new c.a(function(o,a){(n=new _.Image).onload=function(){r[e]={fullPath:t,image:n},o({fullPath:t,image:n})},n.crossOrigin=_.Utils.getCrossOriginValue(i),n.onerror=a,n.src=t})}},{key:"getImage",value:function(e){var t=this.getImages()[e];return t?t.image:null}},{key:"getVariation",value:function(e){return this.getFonts()[e]}},{key:"addFont",value:function(e,t){return this.getFonts()[e]=t,t}}]),t}();y.prototype.availableOptions={images:{type:_.OptionType.OBJECT,default:{}},fonts:{type:_.OptionType.OBJECT,default:{}}};var v=new y},function(e,t,n){var i=n(23);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports={default:n(265),__esModule:!0}},function(e,t,n){var i=n(56);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return s()(e)}var r=n(6),o=n.n(r),a=n(15),s=n.n(a),u=n(36),l=n.n(u),c=n(37),f=n.n(c),h=n(0),p=n.n(h),d=n(11),_=n.n(d),g=n(43),y=n.n(g),v=n(1),m=n.n(v),b=n(64),w=n(261),x=o.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k="function"==typeof f.a&&"symbol"==typeof l.a?function(e){return typeof e}:function(e){return e&&"function"==typeof f.a&&e.constructor===f.a&&e!==f.a.prototype?"symbol":typeof e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),p()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return T(e,null,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"mapRange",value:function(e,t,n){return(e-t.getMin())*n.getLength()/t.getLength()+n.getMin()}},{key:"isPlainObject",value:function(e){if("object"!==(void 0===e?"undefined":k(e))||!e)return!1;if("function"==typeof m.a){var t=m()(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&"undefined"!=typeof global}},{key:"values",value:function(e){var t=[];for(var n in e)t.push(e[n]);return t}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}},{key:"isDOMElement",value:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":k(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":k(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},{key:"isTouchEvent",value:function(e){return-1!==e.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(e,t){var n=Math.min(t.x/e.x,t.y/e.y);return e.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(e,t){var n=e.x/e.y;return n>t.x/t.y?t.clone().set(t.y*n,t.y):t.clone().set(t.x,t.x/n)}},{key:"isExtendable",value:function(e){return void 0!==e&&null!==e&&("object"===(void 0===e?"undefined":k(e))||"function"==typeof e)}},{key:"defaults",value:function(e){var t={};for(var n in e)t[n]=e[n];for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)void 0===t[u]&&(t[u]=s[u])}return t}},{key:"deepMerge",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(function t(n,r){if(void 0===r)return t(null,n);if(Array.isArray(r))return[].concat(i(r));if(!e.isPlainObject(r))return r;if(!e.isPlainObject(n))return x({},r);var o=x({},n);return y()(r).forEach(function(e){var i=r[e];void 0!==i&&(o[e]=t(n[e],i))}),o},t)}},{key:"deepDefaults",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=[].concat(r).reverse();return e.deepMerge.apply(e,i(a).concat([t]))}},{key:"deepClone",value:function(t){var n={};for(var i in t)e.isExtendable(t[i])?n[i]=e.deepClone(t[i]):n[i]=t[i];return n}},{key:"getDeepProperty",value:function(e,t){return"string"==typeof t?e[t]:Array.isArray(t)?t.reduce(function(e,t){return e?"function"==typeof t?function(e,t){var n=void 0;try{n=t(e)}catch(e){if(!(e instanceof TypeError))throw e}return n}(e,t):e[t]:null},e):void 0}},{key:"extend",value:function(e){var t={};for(var n in e)t[n]=e[n];for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)t[u]=s[u]}return t}},{key:"clone",value:function(e){return this.extend({},e)}},{key:"createBlobURIFromDataURI",value:function(e){var t="undefined"==typeof window?global:window;if(!(t.Blob&&t.URL&&ArrayBuffer&&Uint8Array))return e;for(var n=b.a.decode(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(n.length),o=new Uint8Array(r),a=0;a<n.length;a++)o[a]=n[a];var s=new t.Blob([r],{type:i});return t.URL.createObjectURL(s)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"createCanvas",value:function(){return"undefined"==typeof WEBPACK?new(0,n(52).Canvas)(300,150):document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(t,n){var i=n||e.createCanvas();i.width=t.width,i.height=t.height;var r=i.getContext("2d");return r.clearRect(0,0,i.width,i.height),r.drawImage(t,0,0,t.width,t.height),i}},{key:"isPowerOfTwo",value:function(e){return 0==(e.x&e.x-1)&&0==(e.y&e.y-1)}},{key:"nextLowestPOT",value:function(e){for(var t=1;t<32;t<<=1)e|=e>>t;return e-(e>>1)}},{key:"nextHighestPOT",value:function(e){e--;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}},{key:"moveArrayItem",value:function(e,t,n){if(n>=e.length)for(var i=n-e.length;1+i--;)e.push(void 0);e.splice(n,0,e.splice(t,1)[0])}},{key:"ensureCanvasDimensions",value:function(e,t){e.width===t.x&&e.height===t.y||(e.width=t.x,e.height=t.y)}},{key:"byteArrayToString",value:function(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}},{key:"clamp",value:function(e,t,n){return Math.max(t,Math.min(e,n))}},{key:"wildCardMatch",value:function(e,t){return new RegExp("^"+t.split("*").join(".*")+"$").test(e)}},{key:"flipObject",value:function(e){var t={};for(var n in e)t[e[n]]=n;return t}},{key:"cloneOptions",value:function(e){var t={};for(var n in e){var i=e[n];Array.isArray(i)?i=i.slice():i.clone&&(i=i.clone()),t[n]=i}return t}},{key:"ISODateString",value:function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(e){return e?"none"!==e?e:void 0:"anonymous"}},{key:"shallowEqual",value:function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":k(e))||null===e||"object"!==(void 0===t?"undefined":k(t))||null===t)return!1;var n=y()(e),i=y()(t);if(n.length!==i.length)return!1;for(var r=hasOwnProperty.bind(t),o=0;o<n.length;o++)if(!r(n[o])||e[n[o]]!==t[n[o]])return!1;return!0}},{key:"enableIf",value:function(e,t){return e?t:void 0}},{key:"invariant",value:function(e,t){if(!e)throw new Error(t)}},{key:"executePromises",value:function(e){var t=e.length,n=0,i=[],r=[];return new _.a(function(o,a){var s=function(){++n>=t&&(r.length<=0?o(i):a(r))},u=function(e){i.push(e),s()},l=function(e){r.push(e),s()};e.forEach(function(e){e.then(u).catch(l)})})}}]),e}();C.Array=w.a,t.a=C},function(e,t,n){e.exports={default:n(263),__esModule:!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=o.Math.Rectangle,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=n}return a(e,[{key:"set",value:function(e,t){this.width=e,this.height=t}},{key:"aspect",value:function(){return this.width/this.height}},{key:"rectangle",value:function(e,t){return new s(e,t,this.width,this.height)}},{key:"clone",value:function(){return new e(this.width,this.height)}},{key:"scale",value:function(e,t){return void 0===t&&(t=e),this.width*=e,this.height*=t,this}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this}},{key:"fitInWidthWithOther",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return this.copy(e.fitTwoInWidth(t,this,n)[0]),this}}],[{key:"fitTwoInWidth",value:function(t,n,i){var r=n.width*i.height+n.height*i.width,o=i.height*t/r,a=n.width*o,s=n.height*o;return[new e(a,s),new e(t-a,s)]}}]),e}()},function(e,t,n){var i=n(22),r=n(57);e.exports=n(19)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(96),r=n(97);e.exports=function(e){return i(r(e))}},function(e,t,n){/*!
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 */
e.exports=n(4),n(311)},function(e,t,n){e.exports={default:n(232),__esModule:!0}},function(e,t,n){e.exports={default:n(237),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),r=n(39),o=n(64),a=n(66),s=n(89),u=n(30),l=n(69),c=n(65),f=n(24),h=n(45),p=n(154),d=n(294),_=n(299);n.d(t,"requestAnimationFrame",function(){return _.b}),n.d(t,"cancelAnimationFrame",function(){return _.a}),n.d(t,"Engine",function(){return i.a}),n.d(t,"EventEmitter",function(){return a.a}),n.d(t,"Events",function(){return s.a}),n.d(t,"Utils",function(){return u.a}),n.d(t,"Configurable",function(){return l.a}),n.d(t,"Color",function(){return c.a}),n.d(t,"Constants",function(){return r}),n.d(t,"Log",function(){return f.a}),n.d(t,"Promise",function(){return h.a}),n.d(t,"GLUtils",function(){return p.a}),n.d(t,"Base64",function(){return o.a}),n.d(t,"LicenseChecker",function(){return d.b}),n.d(t,"FreeLicenseChecker",function(){return d.a});var g=n(163);n.d(t,"Vector2",function(){return g.Vector2}),n.d(t,"Vector3",function(){return g.Vector3}),n.d(t,"Range",function(){return g.Range}),n.d(t,"Rectangle",function(){return g.Rectangle}),n.d(t,"Matrix",function(){return g.Matrix}),n.d(t,"ColorMatrix",function(){return g.ColorMatrix}),n.d(t,"CubicBezierCurve",function(){return g.CubicBezierCurve})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"RenderType",function(){return i}),n.d(t,"ImageFormat",function(){return r}),n.d(t,"OptionType",function(){return o}),n.d(t,"UniformType",function(){return a}),n.d(t,"RendererType",function(){return s});var i={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},r={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"},o={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},a={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",INT2:"2i",INT3:"3i",INT4:"4i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},s={WEBGL:"webgl",CANVAS:"canvas"}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(97);e.exports=function(e){return Object(i(e))}},function(e,t,n){e.exports={default:n(259),__esModule:!0}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return o(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clamp",value:function(t,n){var i=null!==t&&void 0!==t,r=null!==n&&void 0!==n;return t instanceof e||!i||(t=new e(t,t)),n instanceof e||!r||(n=new e(n,n)),i&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y)),r&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y)),this}},{key:"divide",value:function(t,n){return t instanceof e?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=void 0===n?t:n),this}},{key:"subtract",value:function(t,n){return t instanceof e?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=void 0===n?t:n),this}},{key:"multiply",value:function(t,n){return t instanceof e?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=void 0===n?t:n),this}},{key:"add",value:function(t,n){return t instanceof e?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=void 0===n?t:n),this}},{key:"dot",value:function(t,n){return t instanceof e?this.x*t.x+this.y*t.y:this.x*t+this.y*(void 0===n?t:n)}},{key:"equals",value:function(t,n){return t instanceof e?t.x===this.x&&t.y===this.y:t===this.x&&n===this.y}},{key:"flip",value:function(){var e=this.x;return this.x=this.y,this.y=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this}},{key:"asArray",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this.y,this.x]:[this.x,this.y]}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y)}},{key:"NULL",get:function(){return new e(0,0)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(11),u=n.n(s),l=n(0),c=n.n(l),f=n(281),h=n.n(f),p="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},d="undefined"==typeof global?window:global,_=void 0!==u.a?u.a:function(){function e(e,t){f.add(e,t),l||(l=_(f.drain))}function t(e){var t,n=void 0===e?"undefined":p(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,n,i){var r,o;try{!1===n?i.reject(e.msg):(r=!0===n?e.msg:n.call(void 0,e.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(o=t(r))?o.call(r,i.resolve,i.reject):i.resolve(r)}catch(e){i.reject(e)}}function r(t){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=t,i.state=2,i.chain.length>0&&e(n,i))}function o(e,t,n,i){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then(function(e){n(r,e)},i)}(r)}function a(e){this.def=e,this.triggered=!1}function s(i){if("function"!=typeof i)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new function(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(t,i){var r={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return r.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t}),o.chain.push(r),0!==o.state&&e(n,o),r.promise},this.catch=function(e){return this.then(void 0,e)};try{i.call(void 0,function(i){(function i(o){var s,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(s=t(o))?e(function(){var e=new a(u);try{s.call(o,function(){i.apply(e,arguments)},function(){r.apply(e,arguments)})}catch(t){r.call(e,t)}}):(u.msg=o,u.state=1,u.chain.length>0&&e(n,u))}catch(i){r.call(new a(u),i)}}}).call(o,i)},function(e){r.call(o,e)})}catch(i){r.call(o,i)}}var u,l,f,d=Object.prototype.toString,_=void 0!==h.a?function(e){return h()(e)}:setTimeout;try{Object.defineProperty({},"x",{}),u=function(e,t,n,i){return c()(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(l){u=function(e,t,n){return e[t]=n,e}}f=function(){var e,t,n;return{add:function(i,r){n=new function(e,t){this.fn=e,this.self=t,this.next=void 0}(i,r),t?t.next=n:e=n,t=n,n=void 0},drain:function(){var n=e;for(e=t=l=void 0;n;)n.fn.call(n.self),n=n.next}}}();var g=u({},"constructor",s,!1);return s.prototype=g,u(g,"__NPO__",0,!1),u(s,"resolve",function(e){return e&&"object"==(void 0===e?"undefined":p(e))&&1===e.__NPO__?e:new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),u(s,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),u(s,"all",function(e){var t=this;return"[object Array]"!=d.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=e.length,a=Array(r),s=0;o(t,e,function(e,t){a[e]=t,++s===r&&n(a)},i)})}),u(s,"race",function(e){var t=this;return"[object Array]"!=d.call(e)?t.reject(TypeError("Not an array")):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");o(t,e,function(e,t){n(t)},i)})}),s}();d.Promise=d.Promise||_,t.a=_},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return o()(e)}n.d(t,"a",function(){return c});var r=n(15),o=n.n(r),a=n(0),s=n.n(a),u=n(4),l=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.words=[],t&&this.splitIntoWords(t)}return l(e,[{key:"splitIntoWords",value:function(e){return this.words=e.match(/\S+/g)||[],[].concat(i(this.words))}},{key:"get",value:function(){return[].concat(i(this.words))}},{key:"getWord",value:function(e){return this.words[e]}},{key:"set",value:function(e){return this.words=[].concat(i(e)),this}},{key:"slice",value:function(t,n){return e.fromWords(this.words.slice(t,n))}},{key:"getLowerCase",value:function(){return this.words.map(function(e){return e.toLowerCase()})}},{key:"getUpperCase",value:function(){return this.words.map(function(e){return e.toUpperCase()})}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:function(){return this.words.reduce(function(e,t){return e+t.length},0)}},{key:"joined",value:function(e){var t=this,n=this.size(),i=Math.floor(n/e),r=n%e,o=0,a=0;return u.Utils.Array.range(0,e).map(function(e){o=a;var s=i+(e<r?1:0);return a=Math.min(o+s,n),u.Utils.Array.range(o,a).reduce(function(e,n){return e+(n===o?"":" ")+t.words[n]},"")})}}],[{key:"fromWords",value:function(t){var n=new e;return n.words=[].concat(i(t)),n}}]),e}()},function(e,t,n){"use strict";n.d(t,"d",function(){return h}),n.d(t,"c",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"e",function(){return _}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return v});var i=n(31),r=n.n(i),o=n(28),a=n.n(o),s=n(4),u=(n.n(s),function(){return function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=a()(e);!(i=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),l=s.Math.Rectangle,c=s.Math.Vector2,f=function(e,t,n,i){e.drawImage(t,n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height)},h=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.save(),e.fillStyle=n.toRGBA(),e.globalCompositeOperation=i,e.fillRect(t.x,t.y,t.width,t.height),r&&(e.strokeStyle=n.toRGBA(),e.strokeWith=1,e.strokeRect(t.x,t.y,t.width,t.height)),e.restore()},p=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-over",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e.save(),e.fillStyle=i.toRGBA(),e.globalCompositeOperation=r,n=Math.min(Math.max(n,0),.5*Math.min(t.height,t.width));var a=t.x,s=t.x+t.width,u=t.y,l=t.y+t.height;e.beginPath(),e.moveTo(a+n,u),e.arcTo(s,u,s,l,n),e.arcTo(s,l,a,l,n),e.arcTo(a,l,a,u,n),e.arcTo(a,u,s,u,n),e.closePath(),e.fill(),o&&e.stroke(),e.restore()},d=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;e.save(),e.strokeStyle=n.toRGBA(),e.lineWidth=i,e.strokeRect(t.x,t.y,t.width,t.height),e.restore()},_=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";e.save();var r=t.height/2,o=t.y+r,a=t.x+r,s=t.x+t.width;for(e.fillStyle=n.toRGBA(),e.globalCompositeOperation=i;a<s;)e.beginPath(),e.arc(a,o,r,0,2*Math.PI),e.fill(),a+=4*r;e.restore()},g=function(e,t){var n=t.applyToRectangle(e),i=e.x,r=e.y,o=e.width,a=e.height;return{corners:[l.FromDiagonalPoints(new c(0,0),new c(n.x,n.y)),l.FromDiagonalPoints(new c(0,n.y+n.height),new c(n.x,a)),l.FromDiagonalPoints(new c(n.x+n.width,n.y+n.height),new c(o,a)),l.FromDiagonalPoints(new c(n.x+n.width,0),new c(o,n.y))].map(function(e){return e.translate(i,r)}),bars:[l.FromDiagonalPoints(new c(n.x,0),new c(n.x+n.width,n.y)),l.FromDiagonalPoints(new c(0,n.y),new c(n.x,n.y+n.height)),l.FromDiagonalPoints(new c(n.x,n.y+n.height),new c(n.x+n.width,a)),l.FromDiagonalPoints(new c(n.x+n.width,n.y),new c(o,n.y+n.height))].map(function(e){return e.translate(i,r)}),center:n}},y=function(e,t,n,i){var r=t.naturalWidth||t.width,o=t.naturalHeight||t.height,a=g(new l(0,0,r,o),i),c=g(n,i);f(e,t,a.center,c.center),s.Utils.Array.zip(a.corners,c.corners).forEach(function(n){var i=u(n,2),r=i[0],o=i[1];return f(e,t,r,o)}),s.Utils.Array.zip(a.bars,c.bars).forEach(function(n){var i=u(n,2),r=i[0],o=i[1];return f(e,t,r,o)})},v=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(e.save(),i&&(e.globalAlpha=i.a),e.drawImage(t,n.x,n.y,n.width,n.height),i&&(e.globalAlpha=1),i){var o=i.clone();o.a=1,h(e,n,o,r)}e.restore()}},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(9),u=n(473),l=n(24),c=n(474),f=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return h(e,[{key:"_initFonts",value:function(){var e=this,t=this._options,n=t.fonts,i=t.replaceFonts,r=t.availableVariations,o=s.c.DEFAULTS.FONTS,a=void 0;o=(o=i?n:o.concat(n||[])).map(function(t){var n=t.fontFamily,i=t.variations;if(r&&(i=i.filter(function(e){return-1!==r.indexOf(e.identifier)})),0===i.length)return null;var o=new u.a({fontFamily:n});return i=i.map(function(t){var i=new c.a(t);return i.setFontFamily(n),i.setFont(o),t.default&&!a&&(a=i),null==i.getTextMetrics()&&l.a.warn("Missing font metrics for "+i.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),e._variationsByIdentifier[i.getIdentifier()]=i,i}),o.setVariations(i),e._fontsByFontFamily[n]=o,o}).filter(function(e){return e}),a||(a=o[0].getVariations()[0]),this._defaultVariation=a,this._fonts=o}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(e){return this._fontsByFontFamily[e]}},{key:"getVariationByIdentifier",value:function(e){return this._variationsByIdentifier[e]}},{key:"getVariationsByIdentifier",value:function(){return f({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}]),e}();t.a=p},function(e,t,n){var i=n(137),r=n(101);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){"use strict";var i=n(233)(!0);n(103)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports={}},function(t,n){t.exports=e},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4);n.n(l);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.Configurable),t}();c.prototype.availableOptions={text:{type:l.OptionType.STRING,default:""},frame:{type:l.OptionType.OBJECT,default:null},font:{type:l.OptionType.OBJECT,default:null}}},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(75)),y=n(46),v=n(79),m=n(127),b=n(26),w=n(20),x=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},C=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._rowType=v.a.Box,o._alignmentRandomizer=new w.a(0),o._isMaskedRandomizer=new w.a(0),o._seedPool.push(o._alignmentRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),k(t,[{key:"getImagePaths",value:function(){return[v.a.Box.getImagePath()]}},{key:"_modifiedText",value:function(e){return T(t.prototype.__proto__||d()(t.prototype),"_modifiedText",this).call(this,e).toLowerCase()}},{key:"_modifiedLines",value:function(e){var t=new y.a;return t.set([e.reduce(function(e,t){return e+(""===e?"":"\n")+t.joined(1)[0]},"")]),[t]}},{key:"_layoutRows",value:function(e,n){var i=T(t.prototype.__proto__||d()(t.prototype),"_layoutRows",this).call(this,e,n),r=i[0];if(r&&this.getSquareLayout()){var o=r.getSize();o.height=o.width}return i}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||t.ValidAlignments)}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=this.getAlignment(),o=this._rowType,a=b.a.getImage(o.getImagePath());i.setAlignment(r);var s=new m.a({words:e,width:n,attributes:i,image:a,imageInsets:o.insetsForWidth(n),capInsets:o.getCapInsets(),backgroundColor:_.Color.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===v.a.Box&&(s.serverImageSmoothingFix=!0);var u=s.getSize();return this.getSquareLayout()?u.height=u.width:u.height=Math.max(u.height,u.width*o.getMinimumHeightRatio()),s}}]),t}();C.defaultFontIdentifiers=["imgly_font_galano_grotesque_bold"],C.Alignment={Left:"left",Center:"center",Right:"right"},C.ValidAlignments=[C.Alignment.Left,C.Alignment.Center,C.Alignment.Right],C.identifier="imgly_text_design_masked",C.prototype.availableOptions=x({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:C.defaultFontIdentifiers},squareLayout:{type:_.OptionType.BOOLEAN,default:!0}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getSizeOfLogicalShape",value:function(e){for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}},{key:"getTextureDimensionsForLogicalShape",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048,i=e.getSizeOfLogicalShape(t);if(t.length<=1&&i<=n)return[i,1];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];for(var r=Math.floor(Math.sqrt(i));r>1;--r)if(i%r==0)return[r,i/r];return[1,i]}},{key:"isSameShape",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}]),e}();t.a=a},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){var i=n(22).f,r=n(41),o=n(17)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){n(235);for(var i=n(16),r=n(33),o=n(51),a=n(17)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=i[l],f=c&&c.prototype;f&&!f[a]&&r(f,a,l),o[l]=o.Array}},function(e,t,n){var i=n(29),r=n(145),o=n(146),a=n(27),s=n(82),u=n(110),l={},c={};(t=e.exports=function(e,t,n,f,h){var p,d,_,g,y=h?function(){return e}:u(e),v=i(n,f,t?2:1),m=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(p=s(e.length);p>m;m++)if((g=t?v(a(d=e[m])[0],d[1]):v(e[m]))===l||g===c)return g}else for(_=y.call(e);!(d=_.next()).done;)if((g=r(_,v,d.value,t))===l||g===c)return g}).BREAK=l,t.RETURN=c},function(e,t,n){"use strict";/*
 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
 * https://github.com/hMatoba/MinifyJpeg
 * @license
 */
var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={encode:function(e){var t="",n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=0;do{a=(n=e[c++])>>2,s=(3&n)<<4|(r=e[c++])>>4,u=(15&r)<<2|(o=e[c++])>>6,l=63&o,isNaN(r)?u=l=64:isNaN(o)&&(l=64),t=t+i.charAt(a)+i.charAt(s)+i.charAt(u)+i.charAt(l),n=r=o="",a=s=u=l=""}while(c<e.length);return t},decode:function(e){var t=void 0,n=void 0,r=void 0,o=void 0,a=void 0,s=void 0,u=0,l=[];if(/[^A-Za-z0-9+\/=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");e=e.replace(/[^A-Za-z0-9+\/=]/g,"");do{t=i.indexOf(e.charAt(u++))<<2|(o=i.indexOf(e.charAt(u++)))>>4,n=(15&o)<<4|(a=i.indexOf(e.charAt(u++)))>>2,r=(3&a)<<6|(s=i.indexOf(e.charAt(u++))),l.push(t),64!==a&&l.push(n),64!==s&&l.push(r),t=n=r="",o=a=s=""}while(u<e.length);return l}};t.a=r},function(e,t,n){"use strict";var i=n(31),r=n.n(i),o=n(28),a=n.n(o),s=n(0),u=n.n(s),l=function(){return function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=a()(e);!(i=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=t,this.g=n,this.b=i,this.a=r}return c(e,[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=e,this.g=t,this.b=n,this.a=i,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var e,t=Math.max(this.r,this.g,this.b),n=Math.min(this.r,this.g,this.b),i=void 0,r=t,o=t-n;if(e=0===t?0:o/t,t===n)i=0;else{switch(t){case this.r:i=(this.g-this.b)/o,this.g<this.b&&(i+=6);break;case this.g:i=(this.b-this.r)/o+2;break;case this.b:i=(this.r-this.g)/o+4}i/=6}return[i,e,r]}},{key:"fromHSV",value:function(t,n,i){return this.copy(e.fromHSV(t,n,i)),this}},{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.a)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this}},{key:"minus",value:function(e){return this.r-=e.r,this.g-=e.g,this.b-=e.b,this.a-=e.a,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this.a*=e,this}},{key:"divideScalar",value:function(e){return this.r/=e,this.g/=e,this.b/=e,this.a/=e,this}},{key:"clamp",value:function(e,t){return this.r=Math.min(Math.max(this.r,e),t),this.g=Math.min(Math.max(this.g,e),t),this.b=Math.min(Math.max(this.b,e),t),this.a=Math.min(Math.max(this.a,e),t),this}},{key:"mix",value:function(e,t){return this.r=(1-t)*this.r+t*e.r,this.g=(1-t)*this.g+t*e.g,this.b=(1-t)*this.b+t*e.b,this.a=(1-t)*this.a+t*e.a,this}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}},{key:"equals",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}},{key:"_componentToHex",value:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"fromHSV",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],u=o[2],l=Math.floor(6*t),c=6*t-l,f=i*(1-n),h=i*(1-c*n),p=i*(1-(1-c)*n);switch(l%6){case 0:a=i,s=p,u=f;break;case 1:a=h,s=i,u=f;break;case 2:a=f,s=i,u=p;break;case 3:a=f,s=h,u=i;break;case 4:a=p,s=f,u=i;break;case 5:a=i,s=f,u=h}return new e(a,s,u,r)}},{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2],t[3])}},{key:"fromHex",value:function(t){var n=t.match(/[0-9A-fa-f]{1,2}/g),i=l(n,3),r=i[0],o=i[1],a=i[2];return new e(parseInt(r,16)/255,parseInt(o,16)/255,parseInt(a,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new e(0,0,0,0)}},{key:"WHITE",get:function(){return new e(1,1,1,1)}},{key:"BLACK",get:function(){return new e(0,0,0,1)}},{key:"RED",get:function(){return new e(1,0,0,1)}},{key:"BLUE",get:function(){return new e(0,0,1,1)}},{key:"GREEN",get:function(){return new e(0,1,0,1)}}]),e}();t.a=f},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(24),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=12,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._maxListeners=s,this._events={},this._pipeDestinations=[]}return a(e,[{key:"pipeEvents",value:function(e){this._pipeDestinations.push(e)}},{key:"unpipeEvents",value:function(e){var t=this._pipeDestinations.indexOf(e);-1!==t&&this._pipeDestinations.splice(t,1)}},{key:"on",value:function(e,t){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");if("function"!=typeof t)throw new TypeError;var n=this._events[e]||(this._events[e]=[]);return-1!==n.indexOf(t)?this:(n.push(t),this._maxListeners&&n.length>this._maxListeners&&(o.a.warn("EventEmitter","Possible memory leak detected, added "+n.length+" `"+e+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)}},{key:"once",value:function(e,t){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");var n=this;return this.on(e,function i(){n.off(e,i),t.apply(null,arguments)})}},{key:"off",value:function(e){if(void 0===e)throw new Error("Invalid event type: `"+e+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[e]=null,this;var t=arguments.length<=1?void 0:arguments[1];if("function"!=typeof t)throw new TypeError;var n=this._events[e];if(!n||!n.length)return this;var i=n.indexOf(t);return-1===i?this:(n.splice(i,1),this)}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(void 0===e)throw new Error("Invalid event type: `"+e+"`");this._pipeDestinations.forEach(function(t){t.emit.apply(t,[e].concat(n))});var r=this._events[e];return!(!r||!r.length||(r.slice(0).forEach(function(e){return e.apply(null,n)}),0))}},{key:"setMaxListeners",value:function(e){if(parseInt(e,10)!==e)throw new TypeError;this._maxListeners=e}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(12),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this));return n.id=t.id++,n._onSourceLoaded=n._onSourceLoaded.bind(n),n._renderers=[],n._glTextures={},n._source=e,n._dirty=!0,n._glUnit=0,n._mipMapping=!1,n._magFilter=t.DefaultMagFilter,n._minFilter=t.DefaultMinFilter,n._repeatX=t.ClampToEdge,n._repeatY=t.ClampToEdge,n._pixelRatio=1,n._loaded=!1,n._frame=new p.h(0,0,100,100),e&&n._loadSource(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.d),d(t,[{key:"resizeTo",value:function(e){this._frame.width===e.x&&this._frame.height===e.y||(this._frame.width=e.x,this._frame.height=e.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var e=this._source,t=e.complete,n="Canvas"===e.constructor.name||e.tagName&&"CANVAS"===e.tagName.toUpperCase();if(t||n)return this._onSourceLoaded();e.addEventListener&&e.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var e=new p.k(this._source.width,this._source.height);p.i.isPowerOfTwo(e)?(p.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=t.TrilinearFilter,this._mipMapping=!0):(this._minFilter=t.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new p.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(this._renderers))}},{key:"getGLFilter",value:function(e,t){switch(t){case"min":return this.constructor.getGLFilter(e,this._minFilter);case"mag":return this.constructor.getGLFilter(e,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(e){this._loaded=e}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(e){this._source=e}},{key:"getGLTextureForRenderer",value:function(e){return this._glTextures[e.id]}},{key:"setGLTextureForRenderer",value:function(e,t){this._renderers[t.id]=t,this._glTextures[t.id]=e}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getDimensions",value:function(){return new p.k(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(e){this._glUnit=e}},{key:"setMinFilter",value:function(e){this._minFilter=e}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(e){this._magFilter=e}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(e){this._repeatX=e}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(e){this._repeatY=e}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(e,n){switch("x"===n?this.getRepeatX():this.getRepeatY()){case t.ClampToEdge:return e.CLAMP_TO_EDGE;case t.Repeat:return e.REPEAT;case t.MirroredRepeat:return e.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(e){this._dirty=e}},{key:"disposeGLTextures",value:function(){var e=this;this._renderers.forEach(function(t){e.disposeGLTexturesForRenderer(t)})}},{key:"disposeGLTexturesForRenderer",value:function(e){this._glTextures[e.id]&&(e.getContext().deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id],this._renderers[e.id]||delete this._renderers[e.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(e){this._mipMapping=e}},{key:"dispose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.disposeGLTextures(),this._source=void 0}}],[{key:"getGLFilter",value:function(e,n){switch(n){case t.LinearFilter:return e.LINEAR;case t.NearestFilter:return e.NEAREST;case t.BilinearFilter:return e.LINEAR_MIPMAP_NEAREST;case t.TrilinearFilter:return e.LINEAR_MIPMAP_LINEAR}}}]),t}();_.NearestFilter=0,_.LinearFilter=1,_.BilinearFilter=2,_.TrilinearFilter=3,_.DefaultMagFilter=_.NearestFilter,_.DefaultMinFilter=_.LinearFilter,_.ClampToEdge=0,_.Repeat=1,_.MirroredRepeat=2,_.id=0,t.a=_},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(12),d=n(69),_=n(117),g=n(116),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},m=p.c.OptionType,b=p.c.UniformType,w=p.c.RendererType,x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),y(t,[{key:"_initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=g.a.defaultUniforms,this._attributes=g.a.defaultAttributes,this._vertexSource=g.a.defaultVertexSource,this._fragmentSource=g.a.defaultFragmentSource,this._initUniforms(),v(t.prototype.__proto__||h()(t.prototype),"_initOptions",this).call(this,e)}},{key:"_initUniforms",value:function(){for(var e in this._uniforms={},this._availableUniforms){var t=this._availableUniforms[e];this._uniforms[e]={type:t.type,value:t.default||null}}for(var n in this.availableOptions){var i=this.availableOptions[n];i.uniformType?this._uniforms["u_"+n]={type:i.uniformType,value:i.default||null}:p.f.trace(this.constructor.name,"Option `"+n+"` is missing a `uniformType`!")}}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,n,i);var r=n,o=this.availableOptions[e];if(o.uniformType){var a="u_"+e;switch(o.type){case m.COLOR:o.uniformType===b.FLOAT4?r=n.toGLColor():o.uniformType===b.FLOAT3&&(r=n.toRGBGLColor());break;case m.VECTOR2:r=[n.x,n.y];break;case m.COLOR_MATRIX:r=[n.a,n.b,n.c,n.d,n.f,n.g,n.h,n.i,n.k,n.l,n.m,n.n,n.p,n.q,n.r,n.s];var s=[n.e,n.j,n.o,n.t];this._uniforms[a+"_vec"]={value:s,type:b.FLOAT4}}this.setUniform(a,r)}}},{key:"setUniform",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],this._uniforms[e].value=t}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this._uniforms[n].value=e[n],t&&this.syncUniform(n)}},{key:"syncUniform",value:function(e){this._shaders.forEach(function(t){t.syncUniform(e)})}},{key:"syncUniforms",value:function(){this._shaders.forEach(function(e){e.syncUniforms()})}},{key:"getShaderForRenderer",value:function(e){var t=e.getContext(),n=this._shaders[t.id];return n||(n=new _.a(e,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[t.id]=n),n}},{key:"apply",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.isOfType(w.WEBGL)?this._applyWebGL(e,t,n,i):e.isOfType(w.CANVAS)&&this._applyCanvas(e,t,n,i)}},{key:"_applyWebGL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=this.getShaderForRenderer(e);e.setRenderTarget(n),i&&n.clear(),e.setShader(o);var a=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getCanvas(),r=n.getContext();p.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),r.clearRect(0,0,i.width,i.height),r.drawImage(i,0,0)}},{key:"dispose",value:function(){this._shaders.forEach(function(e){return e.dispose()}),this._shaders=[]}}]),t}();t.a=x},function(e,t,n){"use strict";var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(6),u=n.n(s),l=n(0),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(43),g=n.n(_),y=n(1),v=n.n(y),m=n(45),b=n(24),w=n(66),x=n(44),k=n(65),T=n(30),C=n(88),E=n(162),R=n(39),O="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},S=u.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),A=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||v()(t)).call(this));return i.availableOptions=i.availableOptions||{},i.availableOptions=T.a.extend(i.availableOptions,n),i._onConfigurableUpdate=i._onConfigurableUpdate.bind(i),i._initOptions(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,w.a),I(t,[{key:"_buildConfigError",value:function(e){var t="";return this.constructor.name&&(t=this.constructor.name+": "),t+=e,new Error(t)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var e=this;return new m.a(function(t,n){for(var i in e.availableOptions)if(e.availableOptions[i].required&&void 0===e._options[i])return n(e._buildConfigError("Option `"+i+"` is required."));t()})}},{key:"_initOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var n=void 0,i=void 0,r=void 0,o=this;for(n in this.availableOptions){if(r=n.charAt(0).toUpperCase()+n.slice(1),i=this.availableOptions[n],-1===[R.OptionType.STRING,R.OptionType.NUMBER,R.OptionType.BOOLEAN,R.OptionType.OBJECT,R.OptionType.VECTOR2,R.OptionType.COLOR,R.OptionType.CONFIGURABLE,R.OptionType.COLOR_MATRIX,R.OptionType.ARRAY,R.OptionType.IMAGE,R.OptionType.FUNCTION,R.OptionType.ALL].indexOf(i.type))throw this._buildConfigError("Unknown option type: `"+i.type+"`");if(function(e,t){o["set"+r]=function(t,n,i){o.setOption(e,t,n,i)},o["get"+r]=function(){return o.getOption(e)}}(n),i.type===R.OptionType.CONFIGURABLE&&(this._options[n]=new t(void 0,i.structure||{}),this._options[n].on("update",this._onConfigurableUpdate)),!(n in e)||void 0===e[n])if(void 0!==i.default){var a=i.default;"function"==typeof i.default&&(a=i.default()),this["set"+r](a,!1,!0)}else i.type!==R.OptionType.CONFIGURABLE&&(this._options[n]=void 0)}for(n in e){if(void 0===this.availableOptions[n])throw new Error("Invalid option: "+n);void 0!==e[n]&&this["set"+(r=n.charAt(0).toUpperCase()+n.slice(1))](e[n],!1,!0)}}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in e)this.setOption(n,e[n],!1);this._onOptionsChange(),t&&this.emit("update",this,e)}},{key:"getOption",value:function(e){return this._options[e]}},{key:"hasOption",value:function(e){return!!this.availableOptions[e]}},{key:"getOptionDefault",value:function(e){var t=this.availableOptions[e];if(!t)throw new Error("Invalid option: "+e);return t.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var e={};for(var t in this.availableOptions){var n=this.availableOptions[t].default;void 0!==n&&(e[t]=n)}return e}},{key:"getOptions",value:function(){return S({},this._options)}},{key:"equals",value:function(e){var t=e.getOptions();return this.optionsEqual(t)}},{key:"optionsEqual",value:function(e){for(var t in e){var n=e[t];if(!this._optionEquals(t,n))return!1}return!0}},{key:"_optionEquals",value:function(e,t){if(void 0===this.availableOptions[e])throw new Error("Invalid option: "+e);var n=this.availableOptions[e].type,i=this._options[e];if(i===t)return!0;if(void 0===t||void 0===i)return!1;switch(n){case R.OptionType.OBJECT:return"function"==typeof i.optionsEqual?i.optionsEqual(t._options):i===t;case R.OptionType.STRING:case R.OptionType.NUMBER:case R.OptionType.BOOLEAN:case R.OptionType.FUNCTION:case"*":return i===t;case R.OptionType.VECTOR2:return i.equals(t);case R.OptionType.COLOR:case R.OptionType.COLOR_MATRIX:return t.equals(i);case R.OptionType.CONFIGURABLE:return i.optionsEqual(t);case R.OptionType.ARRAY:return this._arrayOptionEquals(e,t);case R.OptionType.IMAGE:return i.src===t.src}}},{key:"_arrayOptionEquals",value:function(e,n){var i=this._options[e];if(n.length!==i.length)return!1;for(var r=!0,o=0;o<i.length;o++){var a=i[o],s=n[o];if(a instanceof t){if(void 0===s||!a.optionsEqual(s)){r=!1;break}}else if(s!==a){r=!1;break}}return r}},{key:"serializeOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g()(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={};return t.forEach(function(t){if(void 0===e.availableOptions[t])return b.a.warn("Trying to serialize a key that does not exist: "+t);!1!==e.availableOptions[t].serializable&&(i[t]=e.serializeOption(t,n))}),i}},{key:"serializeOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[e],i=n.type,r=this._options[e];if(!r)return r;if(!1===n.serializable)throw new Error("Option `"+e+"` is not serializable.");switch(i){case R.OptionType.STRING:case R.OptionType.NUMBER:case R.OptionType.BOOLEAN:case R.OptionType.OBJECT:case R.OptionType.FUNCTION:case R.OptionType.ALL:return r;case R.OptionType.VECTOR2:return t?r.toObject():r.clone();case R.OptionType.COLOR:case R.OptionType.COLOR_MATRIX:return t?r.toArray():r.clone();case R.OptionType.CONFIGURABLE:return r.serializeOptions(void 0,t);case R.OptionType.ARRAY:return r.slice(0);case R.OptionType.IMAGE:return t?r.src:r}}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.availableOptions[e];if(!o)throw new Error("Invalid option: "+e);if(void 0!==o.setter&&(n=o.setter.call(this,n,r)),void 0!==o.validation&&o.validation(n),null===n||void 0===n){if(o.required)throw this._buildConfigError("Option `"+e+"` is required.");this._options[e]=n}else switch(o.type){case R.OptionType.STRING:if((void 0===n?"undefined":O(n))!==R.OptionType.STRING)throw this._buildConfigError("Option `"+e+"` has to be a string.");var a=o.available;if(void 0!==a&&-1===a.indexOf(n))throw this._buildConfigError("Invalid value for `"+e+"` (valid values are: "+o.available.join(", ")+")");this._options[e]=n;break;case R.OptionType.NUMBER:if((void 0===n?"undefined":O(n))!==R.OptionType.NUMBER)throw this._buildConfigError("Option `"+e+"` has to be a number.");this._options[e]=n;break;case R.OptionType.BOOLEAN:if((void 0===n?"undefined":O(n))!==R.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+e+"` has to be a boolean.");this._options[e]=n;break;case R.OptionType.VECTOR2:if(!(n instanceof x.a||"object"===(void 0===n?"undefined":O(n))&&"x"in n&&"y"in n))throw this._buildConfigError("Option `"+e+"` has to be an instance of Vector2 or an Object holding x and y values.");n instanceof x.a?this._options[e]=n.clone():this._options[e]=x.a.fromObject(n);break;case R.OptionType.COLOR:if(!(n instanceof k.a))throw this._buildConfigError("Option `"+e+"` has to be an instance of Color.");this._options[e]=n;break;case R.OptionType.COLOR_MATRIX:if(!(n instanceof E.a))throw this._buildConfigError("Option `"+e+"` has to be an instance of ColorMatrix.");this._options[e]=n.clone();break;case R.OptionType.FUNCTION:if("function"!=typeof n)throw this._buildConfigError("Option `"+e+"` has to be a function.");this._options[e]=n;break;case R.OptionType.OBJECT:case"*":this._options[e]=n;break;case R.OptionType.IMAGE:if("string"==typeof n){var s=new C.a;s.crossOrigin=T.a.getCrossOriginValue(o.crossOrigin),s.src=n,this._options[e]=s}else{if(!(n instanceof C.a||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement))throw this._buildConfigError("Option `"+e+"` has to be an Image, Canvas or String.");this._options[e]=n}break;case R.OptionType.CONFIGURABLE:n instanceof t?this._options[e]=n:this._options[e].set(n);break;case R.OptionType.ARRAY:if(!(n instanceof Array))throw this._buildConfigError("Option `"+e+"` has to be an Array.");this._options[e]=n.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+o.type+"`")}i&&(this._onOptionsChange(),this.emit("update",this,function(e,t,n){return t in e?c()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n)))}},{key:"_onConfigurableUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["update"].concat(t))}},{key:"hasChanges",value:function(){var e=this.getDefaultOptions();return!this.optionsEqual(e)}}]),t}();t.a=A},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(45),a=n(297),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l="undefined"!=typeof window?window:global,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._parsedUrl=s.a.parse(this._url,!0)}return u(e,[{key:"_isJSONPRequest",value:function(){var e=this._parsedUrl.query;for(var t in e)if("?"===e[t])return!0;return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var e=this;return new o.a(function(t,n){var i=void 0;l.XDomainRequest?((i=new l.XDomainRequest).onload=function(){var e=JSON.parse(i.responseText);t(e)},i.onerror=function(e){n(e)},i.open("GET",e._url,!0),i.send()):l.XMLHttpRequest&&((i=new XMLHttpRequest).onreadystatechange=function(e){if(4===i.readyState)if(200===i.status){var r=JSON.parse(i.responseText);t(r)}else n(new Error("HTTP Status "+i.status))},i.open("GET",e._url,!0),i.send())})}},{key:"_loadJSONP",value:function(){var e=this,t=!1,n=!1,i="pesdk"+Math.round(99999999999999*Math.random());return new o.a(function(r,o){var a=e._createJSONPNode(i);l[i]=function(i){e._removeJSONPNode(a),t||(n=!0,r(i))},l.setTimeout(function(){n||(e._removeJSONPNode(a),t=!0,o(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(e){var t=this._buildJSONPUrl(e),n=document.querySelector("head"),i=document.createElement("script");return i.src=t,n.appendChild(i),i}},{key:"_removeJSONPNode",value:function(e){e.parentNode.removeChild(e)}},{key:"_buildJSONPUrl",value:function(e){var t=this._parsedUrl.query,n=null;for(var i in t)if("?"===t[i]){n=i;break}return delete this._parsedUrl.search,t[n]=e,s.a.format(this._parsedUrl)}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(31),r=n.n(i),o=n(28),a=n.n(o),s=n(11),u=n.n(s),l=n(52),c=n.n(l),f=n(309),h=n.n(f),p=n(310),d=n.n(p),_=function(){return function(e,t){if(Array.isArray(e))return e;if(r()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=a()(e);!(i=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.a={load:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return("data:"===e.substr(0,5)||"undefined"!=typeof WEBPACK?u.a.resolve([e,e]):e.match(/^(https?|ftp|file):\/\//)?function(e){return new u.a(function(t,n){d.a.get(e,{encoding:null},function(i,r,o){return i?n(i):200!==r.statusCode?n(new Error("Server responded with status code "+r.statusCode)):void t([e,r.body])})})}(e):function(e){return new u.a(function(t,n){try{h.a.readFile(e,function(i,r){i?n(i):t([e,r])})}catch(e){n(e)}})}(e)).then(function(e){var i=_(e,2),r=i[0],o=i[1];return t._createAndLoadImage(r,o,n)})},loadImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return"undefined"!=typeof WEBPACK?this._loadWithoutExif(e,t):this.load(e,t)},_loadWithoutExif:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new u.a(function(n,i){var r=new window.Image;r.addEventListener("load",function(){n(r)}),r.addEventListener("error",function(){i(new Error("Failed to load image at "+e))}),t.cors&&(r.crossOrigin=t.value),r.src=e})},_createAndLoadImage:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new u.a(function(r,o){if("undefined"!=typeof WEBPACK){var a=n._loadWithoutExif(t,i).then(function(e){return r(e)}),s=new u.a(function(e,r){n._loadAsDataURL(t,i).then(function(t){var n=new window.Image;n.addEventListener("load",function(){e(n)}),n.src=t,n.rawSource=t}).catch(function(t){a.then(function(t){return e(t)})})});return n._stringEndsWith(t,".svg")?a.then(function(e){return r(e)}):s.then(function(e){return r(e)})}var l=new c.a.Image;l.src=t,l.rawSource=t,l.filePath=e,r(l)})},_stringEndsWith:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t},_loadAsDataURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return"undefined"!=typeof WEBPACK?new u.a(function(n,i){var r=new XMLHttpRequest;r.onload=function(){var e=new FileReader;e.onloadend=function(){e.error&&i(e.error),n(e.result)},e.readAsDataURL(r.response)},r.open("GET",e),r.responseType="blob",r.withCredentials=t.cors&&"use-credentials"===t.value,r.send()}):u.a.reject(new Error("Loading images as data urls is only supported in browser environments."))},loadXHR:function(e,t){return new u.a(function(n,i){var r=void 0;window.XDomainRequest?(r=new window.XDomainRequest,t&&r.overrideMimeType(t),r.onload=function(){n(r)},r.onerror=function(e){i(e)}):window.XMLHttpRequest&&(r=new window.XMLHttpRequest,t&&r.overrideMimeType(t),r.onreadystatechange=function(e){4===r.readyState&&(200===r.status?n(r):i(new Error("HTTP Status "+r.status)))}),r.open("GET",e,!0),r.send()})}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(90)),p=n.n(h),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=f.Math.Vector2,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(321),a._lastBlurRadius=null,a._lastDimensions=new _(0,0),a._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Engine.Filter),d(t,[{key:"_applyCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var o=t.getCanvas(),a=t.getContext(),s=n.getContext();this._lastBlurRadius===this._options.blurRadius&&s.drawImage(o,0,0);for(var u=a.getImageData(0,0,o.width,o.height),l=s.getImageData(0,0,o.width,o.height),c=this._options.blurRadius,f=this._options.delta,h=0;h<o.width;h++)for(var p=0;p<o.height;p++){var d=4*(h+p*o.width),g=0,y=0,v=0,m=0,b=0;r&&(c=r(h/o.width,p/o.height));for(var w=this._random(h,1-p/o.height),x=-30;x<=30;x++){var k=(x+w-.5)/30,T=1-Math.abs(k),C=f.x*k*c,E=f.y*k*c,R=Math.max(Math.min(h+C,o.width-1),0),O=Math.max(Math.min(p+E,o.height-1),0),S=4*(Math.round(O)*o.width+Math.round(R)),I=u.data[S+3];g+=I*u.data[S]*T,y+=I*u.data[S+1]*T,v+=I*u.data[S+2]*T,m+=I*T,b+=T}g/=b,y/=b,v/=b,m/=b,l.data[d]=g/m,l.data[d+1]=y/m,l.data[d+2]=v/m,l.data[d+3]=m}s.putImageData(l,0,0),this._lastDimensions.copy(new _(o.width,o.height))}else this._renderLQBlur(e,t,n,i)}},{key:"_renderLQBlur",value:function(e,t,n,i){var r=t.getDimensions(),o=!this._lastDimensions.equals(r);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),n.setPixelRatio(t.getPixelRatio()),n.resizeTo(t.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(r)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new _(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);p.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_random",value:function(e,t){var n=12.9898*e+78.233*t,i=n-3.14*Math.floor(n/3.14),r=43758.5453*Math.sin(i);return r-Math.floor(r)}}]),t}();g.prototype.availableOptions={blurRadius:{type:f.OptionType.NUMBER,default:30,uniformType:f.UniformType.FLOAT},delta:{type:f.OptionType.VECTOR2,default:new _(1,1),uniformType:f.UniformType.FLOAT2},texSize:{type:f.OptionType.VECTOR2,default:new _(100,100),uniformType:f.UniformType.FLOAT2},blurQuality:{type:f.OptionType.STRING,default:"low"}},t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_=p.Math.Vector2,g=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,n));return i._operation=e,i._dirtiness={},i.id=p.Utils.getUUID(),i._renderTextures={},i._identitySprite=new p.Engine.Sprite,i._sprite=new p.Engine.Sprite,i._hitTestSprite=new p.Engine.Sprite,i._renderers=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Configurable),d(t,[{key:"applyScale",value:function(e){}},{key:"applyRotation",value:function(e){var t=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=e,this.setRotation(n*Math.PI/180);var i=(e+360)%360*Math.PI/180,r=Math.cos(i),o=Math.sin(i),a=this._options.position.clone().subtract(.5).multiply(t),s=new _(a.x*r-a.y*o,a.x*o+a.y*r).divide(t.clone().flip());this.setPosition(new _(.5,.5).add(s))}},{key:"applyFlip",value:function(e){var t=this.getPosition().clone();switch(e){case"horizontal":t.x=1-this._options.position.x;break;case"vertical":t.y=1-this._options.position.y}this.setPosition(t)}},{key:"applyTransform",value:function(e){var t={};t.rotation=e.applyToRotation(this.getRotation()),t.position=e.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(t.dimensions=e.applyToDimensions(this.getDimensions())),this.set(t,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(e){if(this._renderTexture)this._renderTexture.clear();else{var t=this._getTexture();this._renderTextureContainer=new p.Engine.Container,this._renderTextureSprite=new p.Engine.Sprite(t),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(e.getRenderer(),t.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(e){return e.getOptions().smoothDownscaling&&e.getRenderer().isOfType(p.RendererType.WEBGL)}},{key:"_optionEquals",value:function(e,n){return"type"===e||function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,n)}},{key:"update",value:function(e,t){this._rendersToRenderTexture(e)&&(this._prepareRenderTexture(e),this._renderToRenderTexture(e)),this._updateSprite(t)}},{key:"_updateSprite",value:function(e){var t=this;[this._sprite,this._hitTestSprite].forEach(function(n){if(n.getTexture()){n.setAnchor(t._options.anchor),n.setPosition(t._options.position.clone().multiply(e)),void 0!==t._options.alpha&&n.setAlpha(t._options.alpha);var i=t._options.dimensions;i&&(i=i.clone().multiply(t._operation.getSDK().getTextureScale()),n.setWidth(i.x),n.setHeight(i.y)),n.updateTransform();var r=n.getTexture().getFrame(),o=new _(r.width,r.height);n.setPivot(t._options.pivot.clone().multiply(o)),n.setRotation(t._options.rotation),n.updateTransform()}})}},{key:"_renderToRenderTexture",value:function(e){var t=this._getTexture().getDimensions(),n=this._getRenderTexture(e.getRenderer(),t),i=t.clone();if(this._options.smoothDownscaling&&(i.x=p.Utils.nextHighestPOT(i.x),i.y=p.Utils.nextHighestPOT(i.y)),this._renderTexture.resizeTo(i),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var r=i.clone().subtract(t.x,t.y).divide(i),o=n.getUVs().getUVs();o[0].x=o[3].x=0,o[1].x=o[2].x=1-r.x,o[0].y=o[1].y=0,o[2].y=o[3].y=1-r.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._renderers[t.id]=t,this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[t])}},{key:"_getRenderTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _(100,100);return this._renderTextures[e.id]||(this._renderTextures[e.id]=new p.Engine.RenderTexture(e,t.x,t.y,1)),this._renderTextures[e.id]}},{key:"dispose",value:function(){for(var e in this._renderTextures)this._renderTextures[e].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}]),t}();t.a=g},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(75)),m=n(420),b=n(123),w=n(25),x=n(124),k=n(76),T=n(26),C=n(20),E=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o.getImagePaths=function(){var e=o.getBanderoles();return e&&e.map(function(e){return e.getImagePath()})||[]},o.onImagesLoaded=function(){var e=o.getBanderoles();e&&e.forEach(function(e){var t=T.a.getImage(e.getImagePath());t?e.setImage(t):y.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+e.getImagePath()+"'")})},o._rowTypeLessThan3WordsRandomizer=new C.a(0),o._rowTypeMoreThan3WordsRandomizer=new C.a(0),o._banderolesRandomizer=new C.a(0),o._seedPool=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}(o._seedPool),[o._rowTypeLessThan3WordsRandomizer,o._rowTypeMoreThan3WordsRandomizer,o._banderolesRandomizer]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.a),R(t,[{key:"_modifiedText",value:function(e){return O(t.prototype.__proto__||g()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"generateLayoutData",value:function(e,n){return this._options.hasMaskedText=!1,O(t.prototype.__proto__||g()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_randomLayoutRow",value:function(e,t,n,i){if(e.size()<3){var r=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(e,n,i,r)}var o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new m.a({words:e,width:n,attributes:i,orientation:m.a.Orientations.Left});case 1:return new m.a({words:e,width:n,attributes:i,orientation:m.a.Orientations.Right});case 2:return this._layoutRow(e,n,i,!0);case 3:return new w.a({words:e,width:n,attributes:i});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: "+o+".")}}},{key:"_layoutRow",value:function(e,t,n,i){if(this.getHasMaskedText()&&(i=!1),i){this.setHasMaskedText(!0);var r=this._banderolesRandomizer.pickNext(this.getBanderoles()),o=new x.a({words:e,width:t,attributes:new k.a({alignment:"left",fontIdentifier:r.getFontIdentifier()}),image:r.getImage(),imageInsets:r.insetsForWidth(t),capInsets:null,backgroundColor:y.Color.WHITE});return r.getNeedsImageSmoothingFix()&&(o.serverImageSmoothingFix=!0),o}return new w.a({words:e,width:t,attributes:n})}}]),t}();S.defaultFontIdentifiers=["imgly_font_campton_bold"],S.identifier="imgly_text_design_blocks",S.defaultBanderoles=[b.a.Rectangle,b.a.Small],S.prototype.availableOptions=E({},v.a.prototype.availableOptions,{fontIdentifiers:{type:y.OptionType.ARRAY,default:S.defaultFontIdentifiers},relativeLineSpacing:{type:y.OptionType.NUMBER,default:.025/3},hasMaskedText:{type:y.OptionType.BOOLEAN,default:!1},banderoles:{type:y.OptionType.ARRAY,default:S.defaultBanderoles}})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return o()(e)}n.d(t,"a",function(){return T});var r=n(15),o=n.n(r),a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(414),p=n.n(h),d=n(1),_=n.n(d),g=n(4),y=(n.n(g),n(20)),v=n(21),m=n(46),b=n(417),w=n(76),x=n(25),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||_()(t)).call(this,e));return n._relativeInsets=new v.a,n._background=null,n._fontRandomizer=new y.a(0),n._lineNumberRandomizer=new y.a(0),n._wordsPerLineRandomizer=new y.a(0),n._seedPool=[n._fontRandomizer,n._lineNumberRandomizer,n._wordsPerLineRandomizer],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}(t,g.Configurable),k(t,[{key:"seed",value:function(e){this._seedPool.forEach(function(t){return t.seed(e)})}},{key:"getImagePaths",value:function(){return[]}},{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(e,t){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:function(e){return e.replace("\n"," ").replace("\t"," ")}},{key:"_minimumNumberOfLines",value:function(e){return Math.ceil(Math.sqrt(e.size()))}},{key:"_maximumNumberOfLines",value:function(e){return e.size()}},{key:"_calculatedNumberOfLines",value:function(e){var t=this._minimumNumberOfLines(e);if(e.size()>=this.getMinLineCountOfRandom()){var n=Math.floor(Math.max(1,t*this.getRandomAdditionalLinePercentage()));t+=this._lineNumberRandomizer.nextInRange(0,n)}return Math.min(t,this._maximumNumberOfLines(e))}},{key:"_randomizedNumberOfWordsPerLine",value:function(e,t){var n=this;if(e>t)return g.Log.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),t;var i=g.Utils.Array.repeat(1,e);return g.Utils.Array.range(e,t).forEach(function(t){var r=n._wordsPerLineRandomizer.nextInRange(0,e-1);i[r]+=1}),i}},{key:"_textLines",value:function(e){var t=new m.a(e),n=this._calculatedNumberOfLines(t);return this._randomizedNumberOfWordsPerLine(n,t.size()).reduce(function(e,n){return{index:e.index+n,lines:[].concat(i(e.lines),[t.slice(e.index,Math.min(e.index+n,t.size()))])}},{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(e){var t=this._textLines(e),n=0;do{if((n=g.Utils.Array.findIndex(t,function(e){return e.countNumberOfCharacters()<3}))>=0){var r=t[n-1],o=t[n+1];(r?r.countNumberOfCharacters():p.a)<(o?o.countNumberOfCharacters():p.a)&&r?(r.words=[].concat(i(r.words),i(t[n].words)),t=[].concat(i(t.slice(0,n)),i(t.slice(n+1)))):o&&(o.words=[].concat(i(t[n].words),i(o.words)),t=[].concat(i(t.slice(0,n)),i(t.slice(n+1))))}}while(n>-1&&t.length>1);return t}},{key:"_modifiedLines",value:function(e){return e}},{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(e,t){var n=this._modifiedText(e),i=this._modifiedLines(this._validTextLines(n)),r=t*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(i,r);return new b.a({text:n,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:i,rows:o,width:t})}},{key:"_layoutRows",value:function(e,t){var n=this;return e.map(function(e,i){return n._randomLayoutRow(e,i,t,new w.a({fontIdentifier:n._fontForRow(i,e)})).layout()})}},{key:"_randomLayoutRow",value:function(e,t,n,i){return new x.a({words:e,width:n,attributes:i})}}]),t}();T.defaultFontIdentifiers=[],T.identifier="textdesign",T.prototype.availableOptions={fontIdentifiers:{type:g.OptionType.ARRAY,default:[]},relativeLineSpacing:{type:g.OptionType.NUMBER,default:0}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4);n.n(l);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.Configurable),t}();c.prototype.availableOptions={tintColor:{type:l.OptionType.COLOR,default:l.Color.BLACK},textColor:{type:l.OptionType.COLOR,default:l.Color.BLACK},alignment:{type:l.OptionType.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:l.OptionType.NUMBER,default:1},fontIdentifier:{type:l.OptionType.STRING,default:"imgly_font_open_sans_bold"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(32)),y=n(26),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).call(this,e)),i=y.a.getVariation(n.getFontIdentifier());return i||_.Log.warn("TextDesignFont: Unable to find font '"+n._fontIdentifier+"'"),n.set({fontVariation:i}),n._metrics=null,n._canvas=_.Utils.createCanvas(),n._context=n._canvas.getContext("2d"),n._isDirty=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.Configurable),m(t,[{key:"_onOptionsChange",value:function(){this._isDirty=!0}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||d()(t.prototype),"setOption",this).call(this,e,n,i,r),"fontIdentifier"!==e||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var e=y.a.getVariation(this.getFontIdentifier());return e||_.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(e),e}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=v({},this._options,e),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v({},this._options,t),i=n.fontSize,r=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=r.serializeOptions(),u=s.fontStyle,l=s.fontWeight,c=s.fontFamily;e.font=u+" "+l+" "+i+"px "+c,e.fillStyle=o,e.textBaseline="alphabetic",e.textAlign=a||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),v({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new g.a(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(e){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var t=e/this._context.measureText(this.getText()).width,n=Math.floor(50*t);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}_.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(e){if(this.getFontVariation()){var t=e/this._calculateTextMetrics({fontSize:50}).height,n=Math.floor(50*t);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}_.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._canvas,n=this._context,i=v({},this._options,e),r=this.getText();this._applyTextOptions(n,i);var o=Math.ceil(n.measureText(r).width),a=Math.floor(o+2*i.fontSize),s=Math.floor(3*i.fontSize);t.width=a,t.height=s;var u=Math.floor(i.fontSize),l=Math.floor(.6*s);this._applyTextOptions(n,i),n.fillText(r,u,l);var c=n.getImageData(0,0,t.width,t.height).data,f=C(c,a,s,l,this._options.excludeAccents),h=T(c,a,s,l,this._options.excludeAccents),p=o,d=f+h;return this._metrics={width:p,height:d,ascender:f,descender:h},this._isDirty=!1,v({},this._metrics)}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(e,i),e.fillText(this.getText(),t,n+this._metrics.ascender),r&&(R(e,t,n,this._metrics.width,this._metrics.height),E(e,n+this._metrics.ascender,t,t+this._metrics.width)),e.restore()}}]),t}(),w=function(e,t,n,i){var r=n*(4*i)+4*t;return{r:e[r],g:e[r+1],b:e[r+2],a:e[r+3]}},x=function(e){return e.a<=254},k=function(e,t,n){for(var i=!0,r=0;r<n;r++){var o=w(e,r,t,n);if(!x(o)){i=!1;break}}return i},T=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=i+1;a<n;a++)if(k(e,a,t)){if(r)break}else o=a-i+1;return o},C=function(e,t,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=i-1;a>=0;a--)if(k(e,a,t)){if(r)break}else o=i-a;return o},E=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";e.save(),e.strokeStyle=r,function(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(i,r),e.stroke()}(e,n,t,i,t),e.restore()},R=function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";e.save(),e.strokeStyle=o,e.strokeRect(t,n,i,r),e.restore()};b.prototype.availableOptions={text:{type:_.OptionType.STRING,default:""},fontIdentifier:{type:_.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:_.OptionType.OBJECT,default:null},lineHeight:{type:_.OptionType.NUMBER,default:1},fontSize:{type:_.OptionType.NUMBER,default:22},textColor:{type:_.OptionType.STRING,default:"black"},strokeStyle:{type:_.OptionType.STRING,default:"black"},outlineWidth:{type:_.OptionType.NUMBER,default:0},textBaseline:{type:_.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:_.OptionType.BOOLEAN,default:!1}}},function(e,t,n){e.exports=n(418)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(21)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),p(t,[{key:"insetsForWidth",value:function(e){return this.getRelativeInsets().clone().scale(e)}}]),t}();d.prototype.availableOptions={imagePath:{type:f.OptionType.STRING,default:""},minimumHeightRatio:{type:f.OptionType.NUMBER,default:0},sizeToFitContent:{type:f.OptionType.BOOLEAN,default:!0},capInsets:{type:f.OptionType.OBJECT,default:new h.a},relativeInsets:{type:f.OptionType.OBJECT,default:new h.a}},d.Box=new d({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new h.a(.1,.1,.1,.1)}),d.Badge1=new d({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new h.a(.3,.18,.2,.18)}),d.Badge2=new d({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new h.a(.3,.18,.2,.18)}),d.Badge3=new d({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new h.a(.3,.18,.2,.18)}),d.Badge4=new d({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new h.a(.3,.18,.2,.18)}),d.SpeechBubble1=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new h.a(.04,.07,.12,.07),capInsets:new h.a(57,171,123,51)}),d.SpeechBubble2=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new h.a(.04,.07,.12,.07),capInsets:new h.a(6,105,87,15)}),d.SpeechBubble3=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new h.a(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),d.SpeechBubble4=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new h.a(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),d.SpeechBubble5=new d({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new h.a(.114892823,.27,.15984926,.27)}),d.Watercolor1=new d({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new h.a(.2,.25,.2,.25)}),d.Watercolor2=new d({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new h.a(.08,.25,.3,.25)}),d.Watercolor3=new d({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new h.a(.1,.2,.15,.2)})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return o()(e)}var r=n(15),o=n.n(r),a=n(6),s=n.n(a),u=n(0),l=n.n(u),c=n(489),f=n.n(c),h=n(43),p=n.n(h),d=n(9),_=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._defaultLayouts=d.j.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=d.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}return g(e,[{key:"_init",value:function(){var e=this._options.availableLayouts,t=_({},this._defaultLayouts,this._legacyLayouts);this._layouts=p()(t).map(function(e){return{identifier:t[e].identifier,layout:t[e]}}),e&&(e.push.apply(e,i(f()(this._legacyLayouts).map(function(e){return e.identifier}))),this._layouts=this._layouts.filter(function(t){return e.indexOf(t.identifier)>=0}))}},{key:"getLayoutByIdentifier",value:function(e){var t=d.k.Array.find(this._layouts,function(t){return t.identifier===e});return t&&t.layout}},{key:"getLayouts",value:function(){return[].concat(i(this._layouts))}},{key:"getDefaultLayout",value:function(){return this.getLayouts()[0]}}]),e}();t.a=y},function(e,t,n){var i=n(27),r=n(225),o=n(101),a=n(99)("IE_PROTO"),s=function(){},u=function(){var e,t=n(93)("iframe"),i=o.length;for(t.style.display="none",n(138).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;i--;)delete u.prototype[o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(98),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){var i=n(59),r=n(17)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){"use strict";var i=n(250),r=n(269),o=n(115),a=n(119),s=n(118),u=n(160),l=n(67),c=n(161),f=n(277),h=n(87),p=n(86),d=n(278),_=n(280),g=n(117),y=n(68),v=n(284),m=n(159),b={WebGLRenderer:r.a,CanvasRenderer:i.a,WebGLFilterManager:a.a,CanvasFilterManager:o.a,DisplayObject:s.a,Container:u.a,BaseTexture:l.a,Texture:c.a,RenderTexture:f.a,WebGLRenderTarget:h.a,CanvasRenderTarget:p.a,Sprite:d.a,Shaders:_.a,Shader:g.a,Filter:y.a,Filters:v,PixelArrayImage:m.a,autoDetectRenderer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.a.isSupported()?new r.a(e,t,n):new i.a(e,t,n)}};t.a=b},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=n(67),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._width=t,this._height=n,this._pixelRatio=i,this._baseTexture=new a.a,this._canvas=r||this._createCanvas(),this._context=o||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return s(e,[{key:"_createCanvas",value:function(){return o.i.createCanvas()}},{key:"clear",value:function(){var e=this._context;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(e){this._baseTexture.resizeTo(e),this._width!==e.x&&(this._width=e.x,this._canvas.width=this._width*this._pixelRatio),this._height!==e.y&&(this._height=e.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e}},{key:"getDimensions",value:function(){return new o.k(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null,this._baseTexture.dispose()}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=n(67),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._gl=t.getContext(),this._width=n,this._height=i,this._frame=null,this._pixelRatio=r,this._projectionMatrix=new o.g,this._mipMapping=!1,this._baseTexture=new a.a;var u=this._baseTexture.getFrame();u.width=n,u.height=i,this._baseTexture.setPixelRatio(r),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=s,this._filterStack=[{renderTarget:this,filter:[]}],s||this._initFrameBuffer()}return s(e,[{key:"resizeTo",value:function(e){this._width=0|e.x,this._height=0|e.y,this._baseTexture.resizeTo(e),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var e=a.a.DefaultMinFilter;return this._mipMapping&&(e=a.a.TrilinearFilter),e}},{key:"_getMagFilter",value:function(){return a.a.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var e=this._gl,t=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e);var i=new o.k(this._width,this._height);o.i.isPowerOfTwo(i)?(o.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),e.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),e.disable(e.STENCIL_TEST)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.b.TRANSPARENT,t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&o.e.checkFramebufferStatus("WebGLRenderTarget#clear",t),t.clearColor.apply(t,e.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var e=this._projectionMatrix;e.reset();var t=this._frame||new o.h(0,0,this._width,this._height),n=t.x,i=t.y;this._isRoot?(e.a=1/this._width*2,e.d=-1/this._height*2,e.tx=-1-n*e.a,e.ty=1-i*e.d):(e.a=1/this._width*2,e.d=1/this._height*2,e.tx=-1-n*e.a,e.ty=-1-i*e.d)}},{key:"_initFrameBuffer",value:function(){var e=this._gl;this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null),this._framebuffer=e.createFramebuffer(),this._texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._texture),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new o.k(this._width,this._height)),this._renderer._options.debug&&o.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",e)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var e=this._gl;this._baseTexture.dispose(),this._framebuffer&&(e.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(e.deleteTexture(this._texture),this._texture=null)}}]),e}();t.a=u},function(e,t,n){"use strict";var i;i=n(52).Image,t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(293),r={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};t.b={DEFAULTS:{ART_FILTERS:i.a,FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(e,t,n){"use strict";function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!
StackBlur - a fast almost Gaussian Blur For Canvas

Version:  0.5
Author:   Mario Klingemann
Contact:  mario@quasimondo.com
Website:  http://www.quasimondo.com/StackBlurForCanvas
Twitter:  @quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr:
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
@license
*/
var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={stackBlurCanvasRGBA:function(e,t,n,a,s,u){if(!(isNaN(u)||u<1)){u|=0;var l,c,f,h,p,d,_,g,y,v,m,b,w,x,k,T,C,E,R,O,S,I,A,F,M,B=e.data,D=u+u+1,L=a-1,N=s-1,P=u+1,z=P*(P+1)/2,U=new i,j=U;for(f=1;f<D;f++)j=j.next=new i,f==P&&(M=j);j.next=U;var G=null,V=null;_=d=0;var W=r[u],H=o[u];for(c=0;c<s;c++){for(T=C=E=R=g=y=v=m=0,b=P*(O=B[d]),w=P*(S=B[d+1]),x=P*(I=B[d+2]),k=P*(A=B[d+3]),g+=z*O,y+=z*S,v+=z*I,m+=z*A,j=U,f=0;f<P;f++)j.r=O,j.g=S,j.b=I,j.a=A,j=j.next;for(f=1;f<P;f++)h=d+((L<f?L:f)<<2),g+=(j.r=O=B[h])*(F=P-f),y+=(j.g=S=B[h+1])*F,v+=(j.b=I=B[h+2])*F,m+=(j.a=A=B[h+3])*F,T+=O,C+=S,E+=I,R+=A,j=j.next;for(G=U,V=M,l=0;l<a;l++)B[d+3]=A=m*W>>H,0!==A?(A=255/A,B[d]=(g*W>>H)*A,B[d+1]=(y*W>>H)*A,B[d+2]=(v*W>>H)*A):B[d]=B[d+1]=B[d+2]=0,g-=b,y-=w,v-=x,m-=k,b-=G.r,w-=G.g,x-=G.b,k-=G.a,h=_+((h=l+u+1)<L?h:L)<<2,g+=T+=G.r=B[h],y+=C+=G.g=B[h+1],v+=E+=G.b=B[h+2],m+=R+=G.a=B[h+3],G=G.next,b+=O=V.r,w+=S=V.g,x+=I=V.b,k+=A=V.a,T-=O,C-=S,E-=I,R-=A,V=V.next,d+=4;_+=a}for(l=0;l<a;l++){for(C=E=R=T=y=v=m=g=0,b=P*(O=B[d=l<<2]),w=P*(S=B[d+1]),x=P*(I=B[d+2]),k=P*(A=B[d+3]),g+=z*O,y+=z*S,v+=z*I,m+=z*A,j=U,f=0;f<P;f++)j.r=O,j.g=S,j.b=I,j.a=A,j=j.next;for(p=a,f=1;f<=u;f++)d=p+l<<2,g+=(j.r=O=B[d])*(F=P-f),y+=(j.g=S=B[d+1])*F,v+=(j.b=I=B[d+2])*F,m+=(j.a=A=B[d+3])*F,T+=O,C+=S,E+=I,R+=A,j=j.next,f<N&&(p+=a);for(d=l,G=U,V=M,c=0;c<s;c++)B[3+(h=d<<2)]=A=m*W>>H,A>0?(A=255/A,B[h]=g*W>>H,B[h+1]=y*W>>H,B[h+2]=v*W>>H):B[h]=B[h+1]=B[h+2]=0,g-=b,y-=w,v-=x,m-=k,b-=G.r,w-=G.g,x-=G.b,k-=G.a,h=l+((h=c+P)<N?h:N)*a<<2,g+=T+=G.r=B[h],y+=C+=G.g=B[h+1],v+=E+=G.b=B[h+2],m+=R+=G.a=B[h+3],G=G.next,b+=O=V.r,w+=S=V.g,x+=I=V.b,k+=A=V.a,T-=O,C-=S,E-=I,R-=A,V=V.next,d+=a}}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(32)),p=n(76),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=f.Math.Rectangle,g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this,e));return n.setSize(new h.a(n.getWidth(),0)),n.serverImageSmoothingFix=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),d(t,[{key:"_getFrame",value:function(){var e=this.getSize();return new _(0,0,e.width,e.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:function(e){return e.getFrame().clone()}},{key:"_calculateLayoutElements",value:function(){f.Log.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:function(e){return f.Log.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}},{key:"layout",value:function(){return this.setElements(this._calculateLayoutElements()),this}},{key:"textFrame",value:function(e,t){return e.getFrame().clone()}},{key:"willRender",value:function(e){}},{key:"didRender",value:function(e){}},{key:"render",value:function(e){var t=this;e.save(),this._getLayoutElements().forEach(function(n){var i=n.serializeOptions(),r=(i.text,i.frame),o=i.font,a=t.getAttributes();o.draw(e,r.x,r.y,{textColor:a.getTextColor().toRGBA(),alignment:a.getAlignment()})}),e.restore()}}]),t}();g.prototype.availableOptions={words:{type:f.OptionType.OBJECT,default:null},width:{type:f.OptionType.NUMBER,default:100},attributes:{type:f.OptionType.CONFIGURABLE,default:new p.a},shearingAngle:{type:f.OptionType.NUMBER,default:0},elements:{type:f.OptionType.ARRAY,default:[]},size:{type:f.OptionType.OBJECT,default:null}}},function(e,t,n){"use strict";function i(e,t,n){return t in e?a()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,o=n(0),a=n.n(o),s=n(9).j.Engine.Filters.OverlayFilter;t.a=(i(r={},s.BLEND_MODES.NORMAL,"normal"),i(r,s.BLEND_MODES.OVERLAY,"overlay"),i(r,s.BLEND_MODES.HARD_LIGHT,"hard light"),i(r,s.BLEND_MODES.SOFT_LIGHT,"soft light"),i(r,s.BLEND_MODES.MULTIPLY,"multiply"),i(r,s.BLEND_MODES.DARKEN,"darken"),i(r,s.BLEND_MODES.LIGHTEN,"lighten"),i(r,s.BLEND_MODES.SCREEN,"screen"),i(r,s.BLEND_MODES.COLOR_BURN,"color burn"),r)},function(e,t,n){var i=n(23),r=n(16).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(23);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(58),r=n(57),o=n(34),a=n(94),s=n(41),u=n(136),l=Object.getOwnPropertyDescriptor;t.f=n(19)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(59);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(100)("keys"),r=n(83);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(10),r=n(16),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(60)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(14),r=n(10),o=n(40);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){"use strict";var i=n(60),r=n(14),o=n(141),a=n(33),s=n(51),u=n(234),l=n(61),c=n(139),f=n(17)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,d,_,g,y){u(n,t,d);var v,m,b,w=function(e){if(!h&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",k="values"==_,T=!1,C=e.prototype,E=C[f]||C["@@iterator"]||_&&C[_],R=E||w(_),O=_?k?w("entries"):R:void 0,S="Array"==t&&C.entries||E;if(S&&(b=c(S.call(new e)))!==Object.prototype&&b.next&&(l(b,x,!0),i||"function"==typeof b[f]||a(b,f,p)),k&&E&&"values"!==E.name&&(T=!0,R=function(){return E.call(this)}),i&&!y||!h&&!T&&C[f]||a(C,f,R),s[t]=R,s[x]=p,_)if(v={values:k?R:w("values"),keys:g?R:w("keys"),entries:O},y)for(m in v)m in C||o(C,m,v[m]);else r(r.P+r.F*(h||T),t,v);return v}},function(e,t,n){t.f=n(17)},function(e,t,n){var i=n(83)("meta"),r=n(23),o=n(41),a=n(22).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(40)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!o(e,i)&&c(e),e}}},function(e,t,n){var i=n(16),r=n(10),o=n(60),a=n(104),s=n(22).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(84),r=n(17)("iterator"),o=n(51);e.exports=n(10).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var i,r,o,a=n(29),s=n(245),u=n(138),l=n(93),c=n(16),f=c.process,h=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,_=c.Dispatch,g=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},m=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete y[e]},"process"==n(59)(f)?i=function(e){f.nextTick(a(v,e,1))}:_&&_.now?i=function(e){_.now(a(v,e,1))}:d?(o=(r=new d).port2,r.port1.onmessage=m,i=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",m,!1)):i="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){"use strict";var i=n(56);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=i(t),this.reject=i(n)}(e)}},function(e,t,n){var i=n(33);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t){(function(){var t,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-i)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=n(86),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new o.h(0,0,t.getWidth(),t.getHeight())}return s(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._textures.forEach(function(t){return t.resizeTo(e)})}},{key:"pushFilters",value:function(e,t){var n=e.getBounds();this._currentFrame=n;var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),this._filterStack.push({renderTarget:i,filters:t}),i.clear()}},{key:"popFilters",value:function(){var e=this._filterStack.pop(),t=e.filters,n=e.renderTarget,i=this._filterStack[this._filterStack.length-1].renderTarget;return 1===t.length?(t[0].apply(this._renderer,n,i),this._textures.push(n)):this._applyFilters(t,n,i),t}},{key:"_applyFilters",value:function(e,t,n){var i=this,r=t,o=this._getOrCreateRenderTarget(!0),a=e[e.length-1];e.forEach(function(e,t){if(e===a)e.apply(i._renderer,r,n);else{e.apply(i._renderer,r,o);var s=r;r=o,o=s}}),this._textures.push(r),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(e){var t=this._textures.pop();return t||(t=new a.a(this._textureFrame.width,this._textureFrame.height,1)),e&&t.clear(),t}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"dispose",value:function(){}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(12),c=n(117),f=l.c.UniformType,h=function(e){function t(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=n||t.defaultVertexSource,i=i||t.defaultFragmentSource,function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).call(this,e,n,i,t.defaultUniforms,t.defaultAttributes))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c.a),t}();h.defaultVertexSource=n(273),h.defaultFragmentSource=n(274);var p=new l.g;h.defaultUniforms={u_image:{type:f.SAMPLER2D,value:0},u_projMatrix:{type:f.MAT3,value:p.toArray()}},h.defaultAttributes=["a_position","a_texCoord","a_color"],t.a=h},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(43),a=n.n(o),s=n(12),u=n(39),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=s.f,f=s.i,h=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._vertexSource=n,this._fragmentSource=i,this._uniforms=r||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return l(e,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(e,t){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,e),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,s.j,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,s.j,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,s.j,16)}},{key:"syncUniforms",value:function(){var e=this;a()(this._uniforms).forEach(function(t){e.syncUniform(t)})}},{key:"syncUniform",value:function(e){var t=this._renderer.getContext(),n=this._uniforms[e],i=this._uniformLocations[e];switch(n.type){case u.UniformType.SAMPLER2D:t.uniform1i(i,n.value);break;case u.UniformType.INT:case u.UniformType.INT1:t.uniform1i(i,n.value);break;case u.UniformType.INT2:t.uniform2i(i,n.value[0],n.value[1]);break;case u.UniformType.INT3:t.uniform3i(i,n.value[0],n.value[1],n.value[2]);break;case u.UniformType.INT4:t.uniform4i(i,n.value[0],n.value[1],n.value[2],n.value[3]);break;case u.UniformType.FLOAT:case u.UniformType.FLOAT1:t.uniform1f(i,n.value);break;case u.UniformType.FLOAT2:t.uniform2f(i,n.value[0],n.value[1]);break;case u.UniformType.FLOAT3:t.uniform3f(i,n.value[0],n.value[1],n.value[2]);break;case u.UniformType.FLOAT4:t.uniform4f(i,n.value[0],n.value[1],n.value[2],n.value[3]);break;case u.UniformType.FLOAT_VECTOR2:t.uniform2fv(i,n.value);break;case u.UniformType.MAT3:case u.UniformType.MAT3FV:t.uniformMatrix3fv(i,!1,n.value);break;case u.UniformType.MAT4:t.uniformMatrix4fv(i,!1,n.value);break;default:c.warn(this.constructor.name,"Unknown uniform type: "+n.type)}}},{key:"_cacheAttributeLocations",value:function(){var e=this,t=this._renderer.getContext();this._attributes.forEach(function(n){e._attributeLocations[n]=t.getAttribLocation(e._program,n)})}},{key:"_cacheUniformLocations",value:function(){var e=this,t=this._renderer.getContext();a()(this._uniforms).forEach(function(n){e._uniformLocations[n]=t.getUniformLocation(e._program,n)})}},{key:"_addPrecisionToSource",value:function(e){var t=this._renderer.getMaxFloatPrecision(),n="mediump";return f.isMobile()&&"highp"===t&&(n="highp"),"precision "+n+" float;\n"+e}},{key:"_compile",value:function(){var e=this._renderer.getContext(),t=this._compileShader(e.VERTEX_SHADER,this._vertexSource);this._vertexShader=t;var n=this._addPrecisionToSource(this._fragmentSource),i=this._compileShader(e.FRAGMENT_SHADER,n);this._fragmentShader=i;var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,i),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))this._program=r;else{var o=e.getProgramInfoLog(r);e.isContextLost()&&(o="WebGL context lost"),e.deleteProgram(r),c.error(this.constructor.name,"WebGL program linking error: "+o)}}},{key:"_compileShader",value:function(e,t){var n=this._renderer.getContext(),i=n.createShader(e);if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){var r=n.getShaderInfoLog(i);n.isContextLost()&&(r="WebGL context lost"),n.deleteShader(i),c.error(this.constructor.name,"WebGL shader compilation error: "+r)}return i}},{key:"setUniform",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[e].value=t,n&&this.syncUniform(e)}},{key:"setUniforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in e)this._uniforms[n].value=e[n],t&&this.syncUniform(n)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var e=this._renderer.getContext();e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}]),e}();t.a=h},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._position=new o.k(0,0),this._scale=new o.k(1,1),this._pivot=new o.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new o.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new o.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new o.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new o.h(0,0,0,0)}return a(e,[{key:"renderWebGL",value:function(e){o.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(e){o.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var e=this._parent?this._parent.getWorldTransform():o.g.IDENTITY,t=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),t.a=this._cosRotation*this._scale.x,t.b=this._sinRotation*this._scale.x,t.c=-this._sinRotation*this._scale.y,t.d=this._cosRotation*this._scale.y,t.tx=this._position.x,t.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(t.tx-=this._pivot.x*t.a+this._pivot.y*t.c,t.ty-=this._pivot.x*t.b+this._pivot.y*t.d),t.multiply(e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(e){this._shaders.push(e)}},{key:"removeShader",value:function(e){var t=this._shaders.indexOf(e);return-1!==t&&(this._shaders.splice(t,1),!0)}},{key:"removeShaderAt",value:function(e){return!!this._shaders[e]&&(this._shaders.splice(e,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(e,t){e instanceof o.k?this._position.copy(e):this._position.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(e,t){e instanceof o.k?this._scale.copy(e):this._scale.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(e,t){e instanceof o.k?this._pivot.copy(e):this._pivot.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(e){this._rotation=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(e){this._alpha=e}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(e){this._parent=e}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(e){this._filterRectangle.copy(e)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(e){this._tint=e}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(e){this._visible=e}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=n(87),s=n(158),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=o.c.RendererType,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new o.h(0,0,t.getWidth(),t.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return u(e,[{key:"resizeTo",value:function(e){this._textureFrame.width=e.x,this._textureFrame.height=e.y,this._renderTargets.forEach(function(t){return t.resizeTo(e)})}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(e){this._filterStack=e}},{key:"_getOrCreateRenderTarget",value:function(e){var t=this._renderTargets.pop();return t||(t=new a.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),t.setFrame(this._currentFrame),e&&t.clear(),t}},{key:"pushFilters",value:function(e,t){var n=e.getBounds();this._currentFrame=n;var i=e.getFilterRectangle();i.width>0&&i.height>0&&(this._currentFrame=i);var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),r.clear(),this._filterStack.push({renderTarget:r,filters:t})}},{key:"popFilters",value:function(){var e=this._filterStack.pop(),t=e.filters,n=e.renderTarget,i=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,n.getFrame());var r=t[0].getShaderForRenderer(this._renderer),o=this._quad.getVertexBuffer(),a=this._quad.getIndexBuffer(),s=this._renderer.getContext();s.bindBuffer(s.ARRAY_BUFFER,o),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a);var u=r.getAttributeLocations();return s.vertexAttribPointer(u.a_position,2,s.FLOAT,!1,0,0),s.vertexAttribPointer(u.a_texCoord,2,s.FLOAT,!1,0,32),s.vertexAttribPointer(u.a_color,4,s.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===t.length?(t[0].apply(this._renderer,n,i),this._renderTargets.push(n)):this._applyFilters(t,n,i),t}},{key:"_applyFilters",value:function(e,t,n){var i=this,r=t,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=e[e.length-1];e.forEach(function(e,t){if(e===a)e.apply(i._renderer,r,n,!0);else{e.apply(i._renderer,r,o,!0);var s=r;r=o,o=s}}),this._renderTargets.push(r),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(l.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new s.a(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(e){e.dispose()})}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(64),a=n(121),s=n(30),u=n(122),l=n(304),c=n(305),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();/*
 * Based on https://github.com/exif-js/exif-js by Jacob Seidelin
 * Licensed under MIT
 * @license
 */
s.a.invariant;var h=u.a.MARKERS,p=new RegExp("^data:image/jpeg;base64,","i"),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new a.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new c.a(this._getMarkerBuffer(h.EXIF)),this._jfifData=new l.a(this._getMarkerBuffer(h.JFIF))}return f(e,[{key:"restoreSegmentsInArray",value:function(e){return e=this.restoreExifTagsToImageData(e),this.restoreJfifSegmentToImageData(e)}},{key:"restoreSegments",value:function(t){var n=e.fromDataURL(t);return n=this.restoreSegmentsInArray(n),e.toDataURL(n)}},{key:"restoreExifTagsToImageData",value:function(e){if(!this._exifData.isValid())return e;var t=this._sliceIntoSegments(e)[1][0],n=e.slice(0,t),i=e.slice(t),r=n.concat(this._exifData.getBuffer());return r=r.concat(i)}},{key:"restoreJfifSegmentToImageData",value:function(e){if(!this._jfifData.isValid())return e;var t=this._sliceIntoSegments(e),n=this._findSegment(h.JFIF,t);if(!n)return e;var i=n[0],r=n[1],o=e.slice(0,i),a=e.slice(i,r),s=e.slice(r),u=new l.a(a);return u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity()),o.concat(a).concat(s)}},{key:"restoreExifTags",value:function(t){var n=e.fromDataURL(t),i=this.restoreExifTagsToImageData(n);return e.toDataURL(i)}},{key:"restoreJfifSegment",value:function(t){if(!this._jfifData.isValid())return t;var n=e.fromDataURL(t),i=this.restoreJfifSegmentToImageData(n);return e.toDataURL(i)}},{key:"setOrientation",value:function(e){return this._exifData.setOrientation(e)}},{key:"_findSegment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<t.length;n++){var i=t[n][0],r=t[n][1];if(this._stream.setHead(i),this._stream.peekInt16()===e)return[i,r]}return!1}},{key:"_getLastSegment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return e[e.length-1]}},{key:"_getMarkerBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(e,t);if(n){var i=n[0],r=n[1];return this._buf.slice(i,r)}return!1}},{key:"_sliceIntoSegments",value:function(e){for(var t=new a.a(e),n=[];t.getHead()<e.length;){var i=t.readInt16();if(i!==h.SOI){if(i===h.SOS)break;if(!(i>=65280&&i<=65535))throw new Error("Invalid marker: 0x"+i.toString(16));var r=t.readInt16(),o=t.getHead()+r-2;n.push([t.getHead()-4,o]),t.setHead(o)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}],[{key:"toDataURL",value:function(e){return"data:image/jpeg;base64,"+o.a.encode(e)}},{key:"fromDataURL",value:function(e){var t=e.replace("data:image/jpeg;base64,","");return o.a.decode(t)}},{key:"isJPEG",value:function(e){return p.test(e)}},{key:"bufferIsJPEG",value:function(e){return 255===e[0]&&216===e[1]&&255===e[2]}},{key:"fromBase64String",value:function(t){var n=t.replace("data:image/jpeg;base64,","");return new e(o.a.decode(n))}}]),e}();t.a=d},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=0,this._buf=t}return o(e,[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1];return e?(n<<8)+t:(t<<8)+n}},{key:"peekInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1],i=this._buf[this._head+2];return e?(i<<16)+(n<<8)+t:(t<<16)+(n<<8)+i}},{key:"peekInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._buf[this._head],n=this._buf[this._head+1],i=this._buf[this._head+2],r=this._buf[this._head+3];return e?(r<<32)+(i<<16)+(n<<8)+t:(t<<32)+(n<<16)+(i<<8)+r}},{key:"writeInt8",value:function(e){this._buf[this._head]=255&e}},{key:"writeInt16",value:function(e){this._buf[this._head]=e>>8,this._buf[this._head+1]=255&e}},{key:"readInt8",value:function(){var e=this.peekInt8();return this._head+=1,e}},{key:"readInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt16(e);return this._head+=2,t}},{key:"readInt24",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt24(e);return this._head+=3,t}},{key:"readInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.peekInt32(e);return this._head+=4,t}},{key:"readString",value:function(e){for(var t="",n=0;n<e;n++){var i=this.readInt8();t+=String.fromCharCode(i)}return t}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(e){this._head=e}}]),e}();t.a=a},function(e,t,n){"use strict";t.a={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(21)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),p(t,[{key:"insetsForWidth",value:function(e){return this.getRelativeInsets().clone().scale(e)}}],[{key:"Small",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new h.a(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new h.a(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new h.a(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new t({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new h.a(.05,.2,.05,.2)})}}]),t}();d.prototype.availableOptions={image:{type:f.OptionType.IMAGE,default:null},imagePath:{type:f.OptionType.STRING,default:null},relativeInsets:{type:f.OptionType.OBJECT,default:new h.a},fontIdentifier:{type:f.OptionType.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:f.OptionType.BOOLEAN,default:!1}}},function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(21)),y=n(25),v=n(47),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,y.a),b(t,[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(_.Color.WHITE)?_.Color.BLACK:_.Color.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:function(){return this.getImageInsets().applyToRectangle(this._getFrame())}},{key:"_getTextFrameForElement",value:function(e){var n=w(t.prototype.__proto__||d()(t.prototype),"_getTextFrameForElement",this).call(this,e),i=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(n.y-=i.top),n}},{key:"willRender",value:function(e){this.serverImageSmoothingFix&&(e.imageSmoothingEnabled=!0),this.getAttributes().setTextColor(this._getTextColor());var t=this.getImage();if(t){var n=this.getCapInsets(),i=this._getFrame();n&&!n.equals(g.a.ZERO)?Object(v.b)(e,t,i,n):e.drawImage(t,i.x,i.y,i.width,i.height),Object(v.d)(e,i,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t&&(e.save(),e.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(e){w(t.prototype.__proto__||d()(t.prototype),"didRender",this).call(this,e),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e.restore()}}]),t}();x.prototype.availableOptions=m({},y.a.prototype.availableOptions,{image:{type:_.OptionType.IMAGE,default:null},capInsets:{type:_.OptionType.OBJECT,default:new g.a},backgroundColor:{type:_.OptionType.COLOR,default:_.Color.WHITE},autoAdjustTextColor:{type:_.OptionType.BOOLEAN,default:!0},isMasked:{type:_.OptionType.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:_.OptionType.BOOLEAN,default:!1}})},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(25)),y=n(77),v=n(53),m=n(32),b=n(47),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},T=_.Math.Rectangle,C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),x(t,[{key:"getImageSize",value:function(){var e=this.getLeftImage(),t=this.getRightImage(),n=this.getWords(),i=this.getAttributes().getFontIdentifier(),r=e?new m.a(e.width,e.height):new m.a,o=n.joined(1)[0];if(!o)return r;var a=new y.a({text:o,fontIdentifier:i,fontSize:50}).getSizeValue(),s=t?2:1;r.scale(s,1);var u=r.clone().fitInWidthWithOther(this._getFrame().width,a);return u.scale(1/s,1),u}},{key:"_getTextFrame",value:function(){var e=k(t.prototype.__proto__||d()(t.prototype),"_getTextFrame",this).call(this).clone(),n=this.getImageSize(),i=this.getRightImage(),r=this.getImagePosition();return i?(e.x+=n.width,e.width-=2*n.width):r===t.ImagePosition.Left&&(e.x+=n.width),e}},{key:"_calculateLayoutElements",value:function(){var e=k(t.prototype.__proto__||d()(t.prototype),"_calculateLayoutElements",this).call(this),n=this._getFrame(),i=this.getRightImage(),r=this.getImageSize(),o=this.getImagePosition(),a=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),u=new y.a({text:"stickerClock",fontIdentifier:s});u.fitWidth(this._getTextFrame().width);var l=(new T).set(n.x,n.y,r.width,r.height);if(i||o!==t.ImagePosition.Right||(l.x+=a.width),e.push(new v.a({text:"stickerClock",frame:l,font:u})),i){var c=e[0];if(c){var f=l.clone();f.translate(c.getFrame().width+f.width,0),e.push(new v.a({text:"stickerClock",frame:f,font:u}))}}return e}},{key:"render",value:function(e){var t=this._getLayoutElements(),n=this.getAttributes(),i=n.getTextColor(),r=this.getLeftImage(),o=this.getRightImage(),a=t[0],s=t[1],u=a.serializeOptions().font,l=this._getTextFrameForElement(a);if(u.draw(e,l.x,l.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()}),r){var c=s.getFrame();e.drawImage(r,c.x,c.y,c.width,c.height),Object(b.d)(e,c,i,"source-atop")}if(t.length>2){var f=t[2].getFrame().clone();e.drawImage(o,f.x,f.y,f.width,f.height),Object(b.d)(e,f,i,"source-atop")}}}]),t}();C.ImagePosition={Left:"LEFT",right:"RIGHT"},C.prototype.availableOptions=w({},g.a.prototype.availableOptions,{leftImage:{type:_.OptionType.IMAGE,default:null},rightImage:{type:_.OptionType.IMAGE,default:null},imagePosition:{type:_.OptionType.STRING,default:C.ImagePosition.Left,available:[C.ImagePosition.Left,C.ImagePosition.Right]}})},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(91)),_=n(46),g=n(76),y=n(53),v=n(77),m=n(47),b=n(32),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o.setSize(new b.a(o.getWidth(),o.getHeight())),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),x(t,[{key:"_getImageFrame",value:function(){var e=this._getTextFrame().clone(),t=this.getImage();if(this.getDrawingModeAspectFit()&&t){var n=Math.min(e.width/t.width,e.height/t.height),i=t.width*n,r=t.height*n;e.x+=(e.width-i)/2,e.y+=(e.height-r)/2,e.width=i,e.height=r}return e}},{key:"_calculateLayoutElements",value:function(){return[new y.a({text:"",frame:this._getImageFrame(),font:new v.a})]}},{key:"render",value:function(e){var t=this.getImage(),n=this._getImageFrame(),i=this.getAttributes().getTextColor();Object(m.a)(e,t,n,i)}}]),t}();k.RowImages={decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"},k.prototype.availableOptions=w({},d.a.prototype.availableOptions,{words:{type:p.OptionType.OBJECT,default:new _.a},height:{type:p.OptionType.NUMBER,default:0},image:{type:p.OptionType.IMAGE,default:null},imagePath:{type:p.OptionType.STRING,default:k.RowImages.decorative1},drawingModeAspectFit:{type:p.OptionType.BOOLEAN,default:!1},attributes:{type:p.OptionType.CONFIGURABLE,default:new g.a}})},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(124)),_=n(53),g=n(77),y=(n(175),n(426)),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),m(t,[{key:"_calculateLayoutElements",value:function(){var e=this.getWords(),t=this._getTextFrame(),n=this.getAttributes().getFontIdentifier(),i=this.getImageInsets(),r=new g.a({text:e.getWord(0),fontIdentifier:n});r.fitWidth(t.width);var o=new _.a({text:e.getWord(0),frame:t,font:r});o.setFrame(this._getTextFrameForElement(o));var a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=i.top+o.getFrame().height+i.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[o]}},{key:"_getTextFrameForElement",value:function(e){var t=this.getWords().getWord(0),n=this.getAttributes(),i=n.getFontIdentifier(),r=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new y.a({text:t,fontIdentifier:i,alignment:n.getAlignment(),lineHeight:1});a.fitInFrame(o);var s=a.getSize();o.height=s.height;var u=s.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(u+=r.top+r.bottom);var l=this._getFrame(),c=n.getAlignment();if(this.getCenteredVertically())o.y=l.height/2-u/2+r.top;else switch(c){case"left":o.y=l.height-u-r.bottom;break;case"center":o.y=l.height/2-u/2+u*this.getCenterOffset(),o.x=(l.width-o.width)/2;break;case"right":o.x=l.width-o.width-r.right}return o}},{key:"render",value:function(e){var t=this;e.save(),this._getLayoutElements().forEach(function(n){var i=n.serializeOptions(),r=i.text,o=i.frame,a=t.getAttributes(),s=a.getFontIdentifier(),u=new y.a({text:r,fontIdentifier:s,alignment:a.getAlignment(),lineHeight:1,textColor:a.getTextColor().toRGBA()});o=t._getTextFrameForElement(n),u.fitInFrame(o),u.draw(e,o.x,o.y)}),e.restore()}}]),t}();b.prototype.availableOptions=v({},d.a.prototype.availableOptions,{centerOffset:{type:p.OptionType.NUMBER,default:0},sizeToFitContent:{type:p.OptionType.BOOLEAN,default:!1},textScaleFactor:{type:p.OptionType.NUMBER,default:.95},rowScaleFactor:{type:p.OptionType.NUMBER,default:1},minimumHeight:{type:p.OptionType.NUMBER,default:0},centeredVertically:{type:p.OptionType.BOOLEAN,default:!1}})},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(79)),y=n(54),v=n(20),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[g.a.SpeechBubble1,g.a.SpeechBubble3],o._rowTypesRandomizer=new v.a(0),o._isMaskedRandomizer=new v.a(0),o._seedPool.push(o._rowTypesRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,y.a),b(t,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map(function(e){return e.getImagePath()})}},{key:"_rowTypes",value:function(e){return this._possibleRowTypes}},{key:"_randomLayoutRow",value:function(e,n,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(e)),r.setLineSpacing(.9);var o=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r);return o.set({textScaleFactor:1,minimumHeight:i*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),o}}]),t}();w.defaultFontIdentifiers=["imgly_font_panton_black_caps","imgly_font_panton_light_caps","imgly_font_panton_black_italic_caps","imgly_font_panton_light_italic_caps"],w.identifier="imgly_text_design_masked_speech_bubble",w.prototype.availableOptions=m({},y.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:w.defaultFontIdentifiers},squareLayout:{type:_.OptionType.BOOLEAN,default:!1},alignment:{type:_.OptionType.STRING,default:"left",available:y.a.ValidAlignments}})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return f()(e)}n.d(t,"a",function(){return D});var r=n(6),o=n.n(r),a=n(31),s=n.n(a),u=n(28),l=n.n(u),c=n(15),f=n.n(c),h=n(0),p=n.n(h),d=n(5),_=n.n(d),g=n(2),y=n.n(g),v=n(3),m=n.n(v),b=n(1),w=n.n(b),x=n(4),k=(n.n(x),n(75)),T=n(25),C=n(26),E=n(21),R=n(46),O=n(126),S=n(125),I=n(20),A=o.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},F=function(){return function(e,t){if(Array.isArray(e))return e;if(s()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=l()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),p()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),B=function e(t,n,i){null===t&&(t=Function.prototype);var r=_()(t,n);if(void 0===r){var o=w()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},D=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||w()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new E.a(0,0,0,0),o._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],o._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],o._lineCount=0,o._decorativeRowCreated=!1,o._useImageRowRandomizer=new I.a(0),o._rowTypeRandomizer=new I.a(0),o._lineDecorativeTypeRandomizer=new I.a(0),o._seedPool.push(o._useImageRowRandomizer),o._seedPool.push(o._rowTypeRandomizer),o._seedPool.push(o._lineDecorativeTypeRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=m()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(y.a?y()(e,t):e.__proto__=t)}(t,k.a),M(t,[{key:"getImagePaths",value:function(){return[].concat(i(t.DecoratorImages),i(t.RowImages))}},{key:"_fontForRow",value:function(e,t){var n=this,i=t.countNumberOfCharacters(),r=this.getFontIdentifiers();return i<4?r=r.filter(function(e){return n._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(e)<0}):i<5&&(r=r.filter(function(e){return n._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(e)<0})),r[e%r.length]}},{key:"_modifiedText",value:function(e){return B(t.prototype.__proto__||w()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_modifiedLines",value:function(e){return this._lineCount=e.length,e}},{key:"generateLayoutData",value:function(e,n){return this._decorativeRowCreated=!1,B(t.prototype.__proto__||w()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=e;switch(i.getFontIdentifier()){case"imgly_font_wolesbro":r=(new R.a).set(e.getLowerCase());break;case"imgly_font_permanent_marker":r=(new R.a).set(e.getUpperCase())}var o=this.getDecorativeRowsInTheMiddleOnly()&&(0===t||t===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new T.a({words:r,width:n,attributes:i});this._decorativeRowCreated=!0;var a=this._randomDecoratorImages(),s=F(a,2),u=s[0],l=s[1];return new S.a({words:e,width:n,attributes:i,leftImage:u,rightImage:l})}},{key:"_layoutRows",value:function(e,n){var r=B(t.prototype.__proto__||w()(t.prototype),"_layoutRows",this).call(this,e,n);if(!this.getDecorationsVisible())return r;var o=.0625*n,a=new O.a({width:n,height:o,image:C.a.getImage(this._rowTypeRandomizer.pickNext(t.RowImages))}).layout(),s=new O.a({width:n,height:o,image:C.a.getImage(this._rowTypeRandomizer.pickNext(t.RowImages))}).layout();return[a].concat(i(r),[s])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?t.DecoratorImages.slice(0,2).map(function(e){return C.a.getImage(e)}):t.DecoratorImages.slice(2).map(function(e){return C.a.getImage(e)})}}]),t}();D.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],D.identifier="imgly_text_design_sunshine",D.RowImages=[O.a.RowImages.decorative1,O.a.RowImages.decorative2,O.a.RowImages.decorative3,O.a.RowImages.decorative4],D.DecoratorImages=["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"],D.prototype.availableOptions=A({},k.a.prototype.availableOptions,{fontIdentifiers:{type:x.OptionType.ARRAY,default:D.defaultFontIdentifiers},relativeLineSpacing:{type:x.OptionType.NUMBER,default:.025/3*4},decorationsVisible:{type:x.OptionType.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:x.OptionType.BOOLEAN,default:!1}})},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(181)),_=n(26),g=n(47),y=n(434),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=p.Math.Rectangle,w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._MAX_TRIES=1e3,o._PRECISION=1e3,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),m(t,[{key:"render",value:function(e,t,n,i,r){var o=this._options,a=o.imagePaths,s=o.relativeParticleSize;if(!(a.length<=0)){var u=t.width/t.height,l=new b(Math.round(n.left*this._PRECISION),Math.round(n.top*this._PRECISION*u),this._PRECISION,this._PRECISION);l.width-=l.x+Math.round(n.right*this._PRECISION),l.height-=l.y+Math.round(n.bottom*this._PRECISION*u);for(var c=[],f=0,h=0;f<this.getParticleCount()&&h<this._MAX_TRIES;){var p=s/2,d=Math.round(p*this._PRECISION),v=Math.round(p*this._PRECISION*u),m=Math.floor(this._PRECISION)-d,w=Math.floor(this._PRECISION)-v,x=r.nextInRange(d,m),k=r.nextInRange(v,w),T=new b(x-d,k-v,2*d,2*v);T.intersects(l)||this.hasCollision(c,T)||(c.push(new y.a({frame:T})),f+=1),h+=1}for(var C=0;C<c.length;C++){var E=c[C],R=r.pickNext(a),O=_.a.getImage(R),S=r.nextInRange(140,230)/255,I=t.width/this._PRECISION,A=t.height/this._PRECISION,F=E.getContentFrame();F.x*=I,F.y*=A,F.width*=I,F.height*=A;var M=i.clone();M.a=S,Object(g.a)(e,O,F,M,"source-atop")}}}},{key:"hasCollision",value:function(e,t){for(var n=0;n<e.length;n++)if(t.intersects(e[n].getFrame()))return!0;return!1}}]),t}();w.prototype.availableOptions=v({},d.a.prototype.availableOptions,{particleCount:{type:p.OptionType.NUMBER,default:50},relativeParticleSize:{type:p.OptionType.NUMBER,default:.08},imagePaths:{type:p.OptionType.ARRAY,default:[]}})},function(e,t,n){e.exports={default:n(445),__esModule:!0}},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(13)),_=n(55),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.b),g(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x").logicalShape;if(4!==e.length)throw new Error("UnpackRGBAFilter expects 4D inputs");var t=e[0];if(3!==e[3])throw new Error("Expected RGB values");if(1!==t)throw new Error("PackRGBAFilter does not support batches of images.");var n=this._options.outputSize;if(2!==n.length)throw new Error("Expected outputSize of length 2");if(n[0]*n[1]!=_.a.getSizeOfLogicalShape(e)/3)throw new Error("Input shape "+e+" can't be broken up into 3 channels.");return n}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec2 outputCoords = getOutputCoords();\n        int row = outputCoords.x;\n        int col = outputCoords.y;\n        float r = getX(0, row, col, 0);\n        float g = getX(0, row, col, 1);\n        float b = getX(0, row, col, 2);\n        gl_FragColor = vec4(r, g, b, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}]),t}();y.prototype.availableOptions=r()({outputSize:{type:p.OptionType.ARRAY}},d.b.prototype.availableOptions),t.a=y},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"calculatePadding",value:function(e,t,n,i,r,o,a){var s=void 0,u=void 0,l=void 0;if("same"===e){var c=((s=Math.ceil(t/i))-1)*i+o-t,f=((u=Math.ceil(n/r))-1)*r+a-n,h=Math.floor(c/2),p=c-h,d=Math.floor(f/2);l={top:h,bottom:p,left:d,right:f-d,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},s=Math.ceil((t-o+1)/i),u=Math.ceil((n-a+1)/r)}return{padInfo:l,outHeight:s,outWidth:u}}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(6),a=n.n(o),s=n(28),u=n.n(s),l=n(35),c=(n.n(l),n(9)),f=n(89),h=n(70),p=n(196),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new p.a,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=l.Utils.createCanvas(),this.reload()}return d(e,[{key:"reload",value:function(){this._categoriesById={},this._categories=[],this._stickersById={};var e=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(f.b.DEFAULTS.STICKER_CATEGORIES);var t=this._options,n=t.categories,i=t.replaceCategories;if(e&&this._options.categories?this._addCategories(n,i):(this._updateCategoriesMap(),this._updateAllCategory()),e){var r=this._dynamicAssetsLibrary.getAssets("sticker");if(r.length>0){var o=this._createCustomStickerCategory(r);this._addCategories([o],!1,!0)}}}},{key:"loadExternal",value:function(e){var t=this;return new h.a(e).load().then(function(e){t._addCategories(e.categories,t._options.replaceCategories)})}},{key:"_addCategories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._categories=t?e.slice(0):n?this._mergeCategories(e,this._categories):this._mergeCategories(this._categories,e),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_mergeCategories",value:function(e,t){e=c.m.cloneCategories(e,"stickers");var n=!0,i=!1,r=void 0;try{for(var o,s=u()(t);!(n=(o=s.next()).done);n=!0){var l=o.value,f=!1,h=!0,p=!1,d=void 0;try{for(var _,g=u()(e);!(h=(_=g.next()).done);h=!0){var y=_.value;if(l.identifier===y.identifier){var v=!0,m=!1,b=void 0;try{for(var w,x=u()(l.stickers);!(v=(w=x.next()).done);v=!0){var k=w.value,T=!1,C=!0,E=!1,R=void 0;try{for(var O,S=u()(y.stickers);!(C=(O=S.next()).done);C=!0){var I=O.value;if(k.identifier===I.identifier){a()(I,k),T=!0;break}}}catch(e){E=!0,R=e}finally{try{!C&&S.return&&S.return()}finally{if(E)throw R}}T||y.stickers.push(k)}}catch(e){m=!0,b=e}finally{try{!v&&x.return&&x.return()}finally{if(m)throw b}}f=!0;break}}}catch(e){p=!0,d=e}finally{try{!h&&g.return&&g.return()}finally{if(p)throw d}}f||e.push(l)}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return e}},{key:"_updateCategoriesMap",value:function(){var e=this;this._categoriesById={},this._categories.forEach(function(t){e._categoriesById[t.identifier]=t}),this._categories.forEach(function(t){t.stickers.forEach(function(t){e._stickersById[t.identifier]=t})}),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach(function(t){"imgly_sticker_custom"!==t.identifier&&(t.stickers=t.stickers.filter(function(t){return-1!==e._options.availableStickers.indexOf(t.identifier)}))}),this._categories=this._categories.filter(function(e){return e.stickers.length>0})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(e){return e.stickers}).reduce(function(e,t){return e.concat(t)},[])},this._categoriesById.all=this._allCategory}},{key:"renderStickerThumbnailFromImage",value:function(e){var t=this._customStickerCanvas,n=t.getContext("2d");n.save();var i=62/e.width,r=i*e.height;t.width=62,t.height=62,n.clearRect(0,0,e.width,e.height),n.translate(0,.5*(t.height-r)),n.scale(i,i),n.drawImage(e,0,0);var o=t.toDataURL("image/png");return n.restore(),{data:o,width:62,height:r}}},{key:"addCustomStickerFromImage",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",r="data:image/svg"===e.src.substring(0,14);e=this._ui.getEditor().getSDK().correctExifOrientation(e);var o=function(e,t){var n=e.x/e.y;return n>1?new c.n(t,t/n):new c.n(t*n,t)}(new c.n(e.width,e.height),2048),a=r?o:function(e){var t=n._ui.getEditor().getSDK().getRenderer(),i=new c.n(e.width,e.height),r=1e6*n._ui.getEditor().getMaxMegapixels(),o=t.getMaxDimensions(),a=i.x*i.y>r,s=null!==o&&(i.x>o||i.y>o);if(a){var u=e.width/e.height,l=e.height/e.width;o=new c.n(Math.sqrt(r*u),Math.sqrt(r*l)).floor().max()}var f=i.clone();return(a||s)&&(i.x/i.y>1?(f.x=o,f.y=o/i.x*i.y):(f.x=o/i.y*i.x,f.y=o)),f}(e),s=this._customStickerCanvas,u=s.getContext("2d");u.save();var f=this.renderStickerThumbnailFromImage(e);r?(e.width>e.height?(s.width=2048,s.height=2048/e.width*e.height):(s.height=2048,s.width=2048/e.height*e.width),e.width=s.width,e.height=s.height):(s.width=a.x,s.height=a.y,u.scale(a.x/e.width,a.y/e.height)),u.drawImage(e,0,0,e.width,e.height);var h=s.toDataURL();u.restore();var p={identifier:l.Utils.generateUUID(),defaultName:t||"",tintMode:i,images:{mediaThumb:{uris:[f.data],rawData:!0,width:f.width,height:f.height},mediaBase:{uris:r?[h,e.src]:[h],rawData:!0,isSVG:r,width:a.x,height:a.y}}},d=this._dynamicAssetsLibrary;d.addAsset("sticker",p,!0);var _=d.getAssets("sticker");if(1===_.length){var g=this._createCustomStickerCategory(_);this._addCategories([g],!1,!0)}else this.getCategory("imgly_sticker_custom").stickers=_,this._updateAllCategory();this._updateCategoriesMap()}},{key:"_createCustomStickerCategory",value:function(e){return{identifier:"imgly_sticker_custom",defaultName:"Custom",metaData:{backgroundImage:e[e.length-1].images.mediaBase.uris[0],rawData:!0},stickers:e}}},{key:"getStickersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown sticker category '"+e+"'");return this._categoriesById[e].stickers}},{key:"getStickerByIdentifier",value:function(e){return this._stickersById[e]}},{key:"getCategories",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}],[{key:"getURLForSticker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=e.images,i="base"===t&&n.mediaBase||n.mediaThumb,r=i.uris||[i.uri];if(void 0===c.m.Browser||c.m.Browser.getIEVersion()){var o=r.filter(function(e){return!/\.svg$/i.test(e)});return o.length?o[0]:r[0]}var a=r.filter(function(e){return/\.svg$/i.test(e)});return a.length?a[0]:r[0]}}]),e}();t.a=_},function(e,t,n){"use strict";var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),u=n.n(s),l=n(11),c=n.n(l),f=n(9),h=n(480),p="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._fonts=n,this._loadedFonts=[]}return d(e,[{key:"setFonts",value:function(e){this._fonts=e}},{key:"needsToLoad",value:function(){for(var e=this,t=0;t<this._fonts.length;t++){var n=function(t){var n=void 0;return e._fonts[t].getVariations().forEach(function(e){n=n||e.getProvider()}),n?{v:!0}:"continue"}(t);switch(n){case"continue":continue;default:if("object"===(void 0===n?"undefined":p(n)))return n.v}}}},{key:"fontLoaded",value:function(e){var t=e.getFontFamily();return-1!==this._loadedFonts.indexOf(t)}},{key:"setFontLoaded",value:function(e){if(!this.fontLoaded(e)){var t=e.getFontFamily();this._loadedFonts.push(t)}}},{key:"load",value:function(){var e=this,t=this._fonts,n={file:new h.a(this._ui)},i=function(){for(var e in n)n[e].dispose()};t.filter(function(t){return!e.fontLoaded(t)}).forEach(function(e){e.getVariations().forEach(function(e){var t=e.getProvider();if(t){var i=n[t];if(!i)return f.g.warn("No font loader for provider `"+t+"` found.");i.add(e)}})});var r=[];for(var o in n)r.push(n[o].load());return c.a.all(r).then(function(){i(),t.forEach(function(t){e.setFontLoaded(t)})}).catch(function(e){throw i(),e})}}]),e}();t.a=_},function(e,t,n){e.exports=!n(19)&&!n(40)(function(){return 7!=Object.defineProperty(n(93)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(41),r=n(34),o=n(226)(!1),a=n(99)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),u=0,l=[];for(n in s)n!=a&&i(s,n)&&l.push(n);for(;t.length>u;)i(s,n=t[u++])&&(~o(l,n)||l.push(n));return l}},function(e,t,n){var i=n(16).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(41),r=n(42),o=n(99)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var r=n(36),o=n.n(r),a=n(37),s=n.n(a),u=n(0),l=n.n(u),c=n(2),f=n.n(c),h=n(3),p=n.n(h),d=n(11),_=n.n(d),g=n(1),y=n.n(g),v=n(38),m=n(164),b=n(167),w=n(120),x=n(88),k=n(306),T=n(166),C="function"==typeof s.a&&"symbol"==typeof o.a?function(e){return typeof e}:function(e){return e&&"function"==typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),R=function(e){return A.byteArrayToString(L.decode(e))},O=v.Rectangle,S=v.Constants,I=v.Engine,A=v.Utils,F=v.EventEmitter,M=v.Events,B=v.Vector2,D=v.Log,L=v.Base64,N=v.Color,P=S.RenderType,z=S.ImageFormat,U=S.RendererType,j=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=i(this,(t.__proto__||y()(t)).call(this));o._onOperationUpdate=o._onOperationUpdate.bind(o),o._onContextRestored=o._onContextRestored.bind(o);var a=n(168).version;if(o.version=a,o[R("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,o._preferredRenderer=e,o._options=A.defaults(r,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:N.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),o._options.smoothUpscaling&&(I.BaseTexture.DefaultMagFilter=I.BaseTexture.LinearFilter),o._options.extensions=A.defaults(o._options.extensions,{operations:[],controls:[],languages:[]}),D.setLevel(o._options.logLevel),o[R("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,o[R("X29wdGlvbnM=")][R("bGljZW5zZQ==")]){if(!o._v())return i(o);var s=v[R("TGljZW5zZUNoZWNrZXI=")];o._l=new s(o[R("X29wdGlvbnM=")][R("bGljZW5zZQ==")]),o._cv(!0).then(function(){o._ct()}).catch(function(e){D.error(R("TGljZW5zaW5n"),e.message)})}else o[R("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,o._l=new(v[R("RnJlZUxpY2Vuc2VDaGVja2Vy")]);o._defaultRenderMode=o._options.renderMode,o._renderMode=o._options.renderMode,o._textureQuality=o._options.textureQuality,o._offset=new B,o._zoom=o._options.zoom,o._spriteScale=o._options.spriteScale,o._rotation=o._options.rotation,o._operations={},o._operationsStack=null,o.setOperationsStack(new b.a),o._container=new I.Container,o._sprite=new I.Sprite,o._container.addChild(o._sprite),o._inputTexture=o._options.inputTexture,o._currentInputTexture=null,o._currentTexture=null,o._resizedTexture=null,o._resizedContainer=new I.Container,o._resizedSprite=new I.Sprite,o._resizedContainer.addChild(o._resizedSprite),o._texturesToDispose=[],o.setSmoothDownscaling(o._options.smoothDownscaling),o._registerOperations(),o._initRenderer();var u=o._renderer.constructor.type;return o._options.displayWelcomeMessage&&D.log("Version:",o.version+" ("+u+") - https://www.photoeditorsdk.com"),o[R("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&D.log(R("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),o._options.image&&o.setImage(o._options.image,o._options.exif),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}(t,F),E(t,[{key:"_v",value:function(){return!!this[R("X29wdGlvbnM=")][R("bGljZW5zZQ==")]||(D.error(R("TGljZW5zaW5n"),R("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),D.error(R("TGljZW5zaW5n"),R("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?D.error(R("TGljZW5zaW5n"),R("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):D.warn(R("TGljZW5zaW5n"),R("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(n){e[R("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var i=R("SW52YWxpZCBsaWNlbnNlLg==");throw t&&(i="ELICEXP"===n.code?R("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===n.code?R("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===n.code?R("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===n.code?R("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",C(e._options.license)):R("ELICINV"===n.code?"SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu":"SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=i,new Error(n)})}},{key:"_t",value:function(){this._l.t()}},{key:"_fl",value:function(){return this[R("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}},{key:"_onOperationUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,[M.OPERATION_UPDATED].concat(t))}},{key:"_onContextRestored",value:function(){D.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(e){e.disposeRenderTextures()}),this.render()}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.DATAURL,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.PNG,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return t.hasChanges()&&t._t(),t._operationsStack.forEach(function(e){e.onBeforeExport()}),new k.a(t,{renderType:e,imageFormat:n,quality:i}).export().then(function(e){return t._operationsStack.forEach(function(e){e.onAfterExport()}),_.a.resolve(e)})})}},{key:"render",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n=this._renderer.getContext();n.startFrame&&n.startFrame();var i=void 0;D.canLog("info")&&(i=new T.a("","Frame rendering")),D.info("","Rendering starts");var r=this._operationsStack;return r.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(t){"export"===e._renderMode&&(t=e._inputTexture),e._currentTexture=t,e._sprite.setTexture(t),e._container.updateTransform()}).then(function(){return r.validateSettings()}).then(function(){return!e._fl()&&e[R("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]||(r.getByIdentifier("license-watermark")?r.moveToTop("license-watermark"):e.createOperation("license-watermark")),r.render(e,e._currentTexture)}).then(function(n){var i=n.outputTexture;switch(e._currentTexture=i,e._sprite.setTexture(e._currentTexture),e._renderMode){case"dynamic":var r=e._renderer.getDimensions().clone().divide(2).add(e._offset);e._container.setScale(e._zoom/e.getTextureScale(),e._zoom/e.getTextureScale()),e._container.setPosition(r),e._sprite.setAnchor(.5,.5),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(e._rotation);break;case"export":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(e._spriteScale,e._spriteScale),e._sprite.setRotation(0);break;case"adapter":e._container.setScale(1,1),e._container.setPosition(0,0),e._sprite.setAnchor(0,0),e._sprite.setPosition(0,0),e._sprite.setScale(1,1),e._sprite.setRotation(0)}return t&&e._renderer.render(e._container),n}).then(function(t){return i&&i.stop(),n.endFrame&&n.endFrame(),e._disposeTextures(),t})}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var e=this;return new _.a(function(t,n){var i=e.getTextureScale();if(1===e._textureQuality)return t(e._inputTexture);var r=e.getInputDimensions().multiply(i).floor(),o=void 0;e._resizedTexture?e._resizedTexture.getDimensions().equals(r)||(e._resizedTexture.resizeTo(r),o=!0):(e._resizedTexture=new I.RenderTexture(e._renderer,r.x,r.y),o=!0),o&&(e._resizedSprite.setScale(i,i),e._resizedSprite.setTexture(e._inputTexture),e._resizedTexture.render(e._resizedContainer)),t(e._resizedTexture)})}},{key:"_registerOperations",value:function(){for(var e in this._operations={},m){var t=m[e];this._operations[t.identifier]=t}this._operations=A.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(e){var t=this;e.forEach(function(e){t._operations[e.identifier]=e})}},{key:"setAllOperationsToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(e)}},{key:"createOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._operations[e];if(!i)throw new Error("No operation with identifier `"+e+"` found.");var r=new i(this,t);return n&&this.addOperation(r),r}},{key:"addOperation",value:function(e){this._operationsStack.push(e)}},{key:"removeOperation",value:function(e){this._operationsStack.remove(e)}},{key:"getInputDimensions",value:function(){var e=this._inputTexture.getFrame();return new B(e.width,e.height)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getInputDimensions();return this._operationsStack.forEach(function(e){e.getEnabled()&&(t=e.getNewDimensions(t))}),e&&t.multiply(this._spriteScale),t.floor()}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(e).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.getTextureScale(),t=this.getInputDimensions().multiply(e).floor();return this._operationsStack.forEach(function(e){t=e.getNewDimensions(t)}),t}},{key:"getCrossOrigin",value:function(){return A.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_initRenderer",value:function(){var e={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor},t=void 0,n=void 0;if("export"!==this._renderMode&&this._options.canvas){var i=this._options.canvas;t=i.width,n=i.height}else if(this._inputTexture){var r=this.getFinalDimensions();t=r.x,n=r.y}else t=1,n=1;switch(this._preferredRenderer){case U.WEBGL:this._renderer=I.autoDetectRenderer(t,n,e),this._renderer.on("context-restored",this._onContextRestored);break;case U.CANVAS:this._renderer=new I.CanvasRenderer(t,n,e),this._renderer.on("context-restored",this._onContextRestored);break;default:D.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=I.autoDetectRenderer(t,n,e)}}},{key:"resizeTo",value:function(e){this._renderer.resizeTo(e,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(e){if(e){var t=e.src,n=!1,i=null;if("undefined"!=typeof WEBPACK)n=w.a.isJPEG(t),i=t;else if(e instanceof x.a&&e.rawSource){var r=e.rawSource;if(e.rawSource instanceof Buffer)t=e.rawSource.toString("base64");else{var o=e.rawSource.replace("data:image/jpeg;base64,","");r=Buffer.from(o,"base64"),t=e.rawSource}(n=w.a.bufferIsJPEG(r))&&(i=t)}if(n){var a=null;try{a=w.a.fromBase64String(i)}catch(e){}if(!a)return;return a}}}},{key:"_handleExifOrientation",value:function(){var e=this._exif.getTags();if(e&&e.Orientation){var t=1!==e.Orientation&&2!==e.Orientation,n=-1!==[2,4,5,7].indexOf(e.Orientation);(t||n)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(e),this._exif.setOrientation(1))}}},{key:"correctExifOrientation",value:function(e){var t=this.parseExif(e);if(!t)return e;var n=t.getTags();if(n&&n.Orientation){var i=1!==n.Orientation&&2!==n.Orientation,r=-1!==[2,4,5,7].indexOf(n.Orientation);if(i||r){var o=this.createOperation("exif-orientation",{},!1);o.setTags(n);var a=o.applyTo(e);return t.setOrientation(1),n.Orientation=1,a}}return e}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(e){this._texturesToDispose.push(e)}},{key:"_disposeTextures",value:function(){for(var e=0;e<this._texturesToDispose.length;e++)this._texturesToDispose[e].dispose();this._texturesToDispose=[]}},{key:"setImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=e,this._image=e,this._exif=t||this.parseExif(e),this._exif&&this._handleExifOrientation();var i=new I.BaseTexture(this._image),r=new O(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(r.width=n.x,r.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new I.Texture(i,r),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(e){this._inputTexture=e}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(e){this._renderer.setCanvas(e)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(e){this._operationsStack&&this._operationsStack.off(M.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=e,this._operationsStack.on(M.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e,t){e instanceof B?this._offset.copy(e):this._offset.set(e,t)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(e){this._renderMode=e}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(e){this._zoom=e,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(e){e!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,e),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(e){this._spriteScale=e,this._sprite.setScale(e,e),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(e){this._options.smoothDownscaling=e,this._sprite.setSmoothDownscaling(e),this._resizedSprite.setSmoothDownscaling(e)}},{key:"setRotation",value:function(e){this._rotation=e}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),t}();t.a=j},function(e,t,n){e.exports=n(33)},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(59);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(137),r=n(101).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(27);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(51),r=n(17)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(27),r=n(56),o=n(17)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||void 0==(n=i(a)[o])?t:r(n)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(27),r=n(23),o=n(112);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(16),r=n(10),o=n(22),a=n(19),s=n(17)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(17)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(44),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}return a(e,[{key:"multiply",value:function(e){var t,n,i,r,o,a;return t=this.a*e.a+this.b*e.c,n=this.a*e.b+this.b*e.d,i=this.c*e.a+this.d*e.c,r=this.c*e.b+this.d*e.d,o=this.tx*e.a+this.ty*e.c+e.tx,a=this.tx*e.b+this.ty*e.d+e.ty,this.a=t,this.b=n,this.c=i,this.d=r,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(e){var t=e,n=t.x,i=t.y;return(e=e.clone()).x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.tx,e}},{key:"applyInverseToVector",value:function(e){var t=1/(this.a*this.d+this.c*-this.b),n=e,i=n.x,r=n.y;return(e=e.clone()).x=this.d*t*i+-this.c*t*r+(this.ty*this.c-this.tx*this.d)*t,e.y=this.a*t*r+-this.b*t*i+(-this.ty*this.a+this.tx*this.b)*t,e}},{key:"rectangleToCoordinates",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(0,0),n=e.width*(1-t.x),i=e.width*-t.x,r=e.height*(1-t.y),a=e.height*-t.y,s=[];return s.push(new o.a(this.a*i+this.c*a+this.tx,this.d*a+this.b*i+this.ty)),s.push(new o.a(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new o.a(this.a*n+this.c*r+this.tx,this.d*r+this.b*n+this.ty)),s.push(new o.a(this.a*i+this.c*r+this.tx,this.d*r+this.b*i+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var e=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?e:new Float32Array(e)}},{key:"toString",value:function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"}}],[{key:"IDENTITY",get:function(){return new e}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(44),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=i,this.height=r}return a(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"equals",value:function(t,n,i,r){return t instanceof e?t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height:t===this.x&&n===this.y&&i===this.width&&r===this.height}},{key:"translate",value:function(e,t){return e instanceof o.a&&(t=e.y,e=e.x),this.x+=e,this.y+=t,this}},{key:"scale",value:function(e,t){return e instanceof o.a?(t=e.y,e=e.x):void 0===t&&(t=e),this.width*=e,this.height*=t,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new o.a(this.x,this.y)}},{key:"getSize",value:function(){return new o.a(this.width,this.height)}},{key:"insetBy",value:function(e,t){return this.x+=e,this.y+=t,this.width-=2*e,this.height-=2*t,this}},{key:"intersects",value:function(e){var t=new o.a(this.x,this.y),n=new o.a(this.x+this.width,this.y+this.height),i=new o.a(e.x,e.y),r=new o.a(e.x+e.width,e.y+e.height);return!(i.x>n.x||t.x>r.x||r.y<t.y||n.y<i.y)}},{key:"toString",value:function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"}}],[{key:"FromDiagonalPoints",value:function(t,n){var i=!1;n.x-t.x<0&&(i=!0);var r=i?n:t,o=i?t:n,a=o.x-r.x,s=o.y-r.y;return new e(r.x,r.y,a,s)}}]),e}();t.a=s},function(e,t,n){"use strict";function i(e,t,n){return t in e?o()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n.n(r),a=n(24),s=n(267);n.n(s),t.a={checkFramebufferStatus:function(e,t){var n,r=t.checkFramebufferStatus(t.FRAMEBUFFER),o=(i(n={},t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),i(n,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),i(n,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),i(n,t.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);r!==t.FRAMEBUFFER_COMPLETE&&a.a.warn(e,"Framebuffer incomplete: "+o[r])},determineGPUName:function(e){var t=null,n=null;e||(e=(n=document.createElement("canvas")).getContext("experimental-webgl")||n.getContext("webgl"));var i=e&&e.getExtension("WEBGL_debug_renderer_info");return i&&(t=e.getParameter(i.UNMASKED_RENDERER_WEBGL),n&&n.remove()),t},isGPUBlacklisted:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],!1}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(114),u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._tracking=!1;var i=this;for(var r in t)!function(e){"function"==typeof t[e]?n[e]=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=t[e];if(!i._tracking)return a.apply(t,r);var u=s(),l=a.apply(t,r),c=s()-u,f={functionName:e,arguments:r,duration:c};return i._trackedCalls.push(f),l}:n._makePropertyWrapper(e)}(r)}return a(e,[{key:"_makePropertyWrapper",value:function(e){if(-1===["_context","_trackedCalls","_tracking"].indexOf(e)){var t=this._context;this.__defineGetter__(e,function(){return t[e]}),this.__defineSetter__(e,function(n){t[e]=n})}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var e="Rendering";o.f.log(e,"Frame rendering results:"),o.f.log(e,"Context calls: "+this._trackedCalls.length);var t={};this._trackedCalls.forEach(function(e){var n=e.functionName,i=e.duration;t[n]=t[n]||{totalDuration:0,calls:0},t[n].totalDuration+=i,t[n].calls++});var n=[];for(var i in t){var r=t[i];r.averageDuration=r.totalDuration/r.calls,n.push({functionName:i,data:r})}n.sort(function(e,t){return t.data.totalDuration-e.data.totalDuration}),(n=n.slice(0,3)).forEach(function(t){o.f.log(e,t.functionName+": "+t.data.calls+" calls, "+t.data.totalDuration.toFixed(2)+"ms")})}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(268),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return r._options=h.a.defaults(i,{pixelRatio:1,transparent:!1,clearColor:f.b.BLACK,debug:!1}),r.setMaxListeners(0),r._width=e||800,r._height=n||600,r._dimensions=new f.k(r._width,r._height),r._maxTextureSize=null,r._pixelRatio=r._options.pixelRatio,r._clearColor=r._options.transparent?f.b.TRANSPARENT:r._options.clearColor||f.b.BLACK,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.d),p(t,[{key:"setCanvas",value:function(e){var t=this._canvas;this._canvas=e,t!==e&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new f.k(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=e.x*this._pixelRatio,this._height=e.y*this._pixelRatio,t&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=e.clone()}},{key:"_createContext",value:function(){f.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){f.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(e){f.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(e)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(e){this._filterManager=e}},{key:"isOfType",value:function(e){return this._type===e}},{key:"dispose",value:function(){f.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}],[{key:"isSupported",value:function(){return!0}}]),t}();t.a=d},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return o(e,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return o(e,[{key:"map",value:function(e,t){var n=t.x,i=t.y;this._uvs[2]=t.width/e.width,this._uvs[4]=this._uvs[2],this._uvs[5]=t.height/e.height,this._uvs[7]=this._uvs[5],this._vertices[0]=n,this._vertices[1]=i,this._vertices[2]=n+t.width,this._vertices[3]=i,this._vertices[4]=this._vertices[2],this._vertices[5]=i+t.height,this._vertices[6]=n,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var e=this._context;this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var e=this._context;e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this._uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var e=this._context;this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(52),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=t,this.height=n,this.data=i}return a(e,null,[{key:"fromNodeCanvasImage",value:function(t){var n=new o.Canvas(t.width,t.height).getContext("2d");n.drawImage(t,0,0);var i=n.getImageData(0,0,t.width,t.height);return new e(t.width,t.height,i.data)}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(12),d=n(118),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._children=[],o._filters=[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),_(t,[{key:"addFilter",value:function(e){this._filters.push(e)}},{key:"removeFilter",value:function(e){var t=this._filters.indexOf(e);return-1!==t&&(this._filters.splice(t,1),!0)}},{key:"setFilters",value:function(e){this._filters=e}},{key:"addChild",value:function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.push(e)}},{key:"prependChild",value:function(e){var t=e.getParent();null!==t&&t.removeChild(e),e.setParent(this),this._children.unshift(e)}},{key:"hasChild",value:function(e){return-1!==this._children.indexOf(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);-1!==t?(this._children.splice(t,1),e.setParent(null)):p.f.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),e.getCurrentObjectRenderer().start(),this._renderWebGL(e),this._children.forEach(function(t){t.renderWebGL(e)}),e.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&t.popFilters(),e.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(e){}},{key:"renderCanvas",value:function(e){if(this._visible){var t=e.getFilterManager();this._filters&&this._filters.length&&t.pushFilters(this,this._filters),this._renderCanvas(e),this._children.forEach(function(t){t.renderCanvas(e)}),this._filters&&this._filters.length&&t.popFilters()}}},{key:"_renderCanvas",value:function(e){}},{key:"updateTransform",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"updateTransform",this).call(this),this._children.forEach(function(e){e.updateTransform()})}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),t}();t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(67),p=n(276),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));if(!(e instanceof h.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return i._uvs=new p.a,i._frame=n?n.clone():null,i._frameLocked=!!n,i._onBaseTextureLoaded=i._onBaseTextureLoaded.bind(i),i._onBaseTextureUpdated=i._onBaseTextureUpdated.bind(i),i._frame||(i._frame=new f.h(0,0,1,1)),i.setBaseTexture(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.d),d(t,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var e=this._baseTexture.getFrame().clone();this.setFrame(e)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var e=this._baseTexture.getFrame(),t=e.width,n=e.height;this._frame.width=t,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(e){if(this._baseTexture=e,this._baseTexture.isLoaded()){var t=e.getFrame(),n=t.width,i=t.height;this._frameLocked||(this._frame=new f.h(0,0,n,i)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(e){this._frame=e,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new f.k(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(e){return new t(new h.a(e))}},{key:"fromCanvas",value:function(e){return new t(new h.a(e))}}]),t}();t.a=_},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(65),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,_=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,y=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,v=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,m=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,b=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set(t,n,i,r,o,a,s,u,l,c,f,h,p,d,_,g,y,v,m,b)}return a(e,[{key:"set",value:function(e,t,n,i,r,o,a,s,u,l,c,f,h,p,d,_,g,y,v,m){this.a=e,this.b=t,this.c=n,this.d=i,this.e=r,this.f=o,this.g=a,this.h=s,this.i=u,this.j=l,this.k=c,this.l=f,this.m=h,this.n=p,this.o=d,this.p=_,this.q=g,this.r=y,this.s=v,this.t=m}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(e){var t=this.a*e.r+this.b*e.g+this.c*e.b+this.d*e.a+this.e,n=this.f*e.r+this.g*e.g+this.h*e.b+this.i*e.a+this.j,i=this.k*e.r+this.l*e.g+this.m*e.b+this.n*e.a+this.o,r=this.p*e.r+this.q*e.g+this.r*e.b+this.s*e.a+this.t;return new o.a(t,n,i,r)}},{key:"multiply",value:function(e){var t,n,i,r,o,a,s,u,l,c,f,h,p,d,_,g,y,v,m,b,w=e,x=this;return t=w.a*x.a+w.b*x.f+w.c*x.k+w.d*x.p,n=w.a*x.b+w.b*x.g+w.c*x.l+w.d*x.q,i=w.a*x.c+w.b*x.h+w.c*x.m+w.d*x.r,r=w.a*x.d+w.b*x.i+w.c*x.n+w.d*x.s,a=w.f*x.a+w.g*x.f+w.h*x.k+w.i*x.p,s=w.f*x.b+w.g*x.g+w.h*x.l+w.i*x.q,u=w.f*x.c+w.g*x.h+w.h*x.m+w.i*x.r,l=w.f*x.d+w.g*x.i+w.h*x.n+w.i*x.s,f=w.k*x.a+w.l*x.f+w.m*x.k+w.n*x.p,h=w.k*x.b+w.l*x.g+w.m*x.l+w.n*x.q,p=w.k*x.c+w.l*x.h+w.m*x.m+w.n*x.r,d=w.k*x.d+w.l*x.i+w.m*x.n+w.n*x.s,g=w.p*x.a+w.q*x.f+w.r*x.k+w.s*x.p,y=w.p*x.b+w.q*x.g+w.r*x.l+w.s*x.q,v=w.p*x.c+w.q*x.h+w.r*x.m+w.s*x.r,m=w.p*x.d+w.q*x.i+w.r*x.n+w.s*x.s,o=w.a*x.e+w.b*x.j+w.c*x.o+w.d*x.t+w.e,c=w.f*x.e+w.g*x.j+w.h*x.o+w.i*x.t+w.j,_=w.k*x.e+w.l*x.j+w.m*x.o+w.n*x.t+w.o,b=w.p*x.e+w.q*x.j+w.r*x.o+w.s*x.t+w.t,this.a=t,this.b=n,this.c=i,this.d=r,this.e=o,this.f=a,this.g=s,this.h=u,this.i=l,this.j=c,this.k=f,this.l=h,this.m=p,this.n=d,this.o=_,this.p=g,this.q=y,this.r=v,this.s=m,this.t=b,this}},{key:"clone",value:function(){var t=new e;return t.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),t}},{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f&&this.g===e.g&&this.h===e.h&&this.i===e.i&&this.j===e.j&&this.k===e.k&&this.l===e.l&&this.m===e.m&&this.n===e.n&&this.o===e.o&&this.p===e.p&&this.q===e.q&&this.r===e.r&&this.s===e.s&&this.t===e.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"}},{key:"toArray",value:function(){var e=this;return"abcdefghijklmnopqrst".split("").map(function(t){return e[t]})}}],[{key:"createBrightnessMatrix",value:function(t){var n=new e;return n.e=t,n.j=t,n.o=t,n}},{key:"createContrastMatrix",value:function(t){var n=new e,i=(1-t)/2;return n.a=n.g=n.m=t,n.e=n.j=n.o=i,n}},{key:"createSaturationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new e,i=1-t,r=.213*i,o=.715*i,a=.072*i;return n.a=r+t,n.b=o,n.c=a,n.f=r,n.g=o+t,n.h=a,n.k=r,n.l=o,n.m=a+t,n}},{key:"createExposureMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(2,t);return new e(n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new e;return i.a=i.g=i.m=t,i.e=i.j=i.o=n,i}},{key:"IDENTITY",get:function(){return new e}}]),e}();t.a=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(44),r=n(300),o=n(301),a=n(153),s=n(152),u=n(162),l=n(302);n.d(t,"Vector2",function(){return i.a}),n.d(t,"Vector3",function(){return r.a}),n.d(t,"Range",function(){return o.a}),n.d(t,"Rectangle",function(){return a.a}),n.d(t,"Matrix",function(){return s.a}),n.d(t,"ColorMatrix",function(){return u.a}),n.d(t,"CubicBezierCurve",function(){return l.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(303);n.d(t,"ExifOrientationOperation",function(){return i.a})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(39),h=n(45),p=n(24),d=n(85),_=n(69),g=n(166),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this,n,{enabled:{type:f.OptionType.BOOLEAN,default:!0,serializable:!1}}));return i._sdk=e,i._cacheEnabled=!1,i._dirtiness={},i._sprite=new d.a.Sprite,i._container=new d.a.Container,i._container.addChild(i._sprite),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,_.a),y(t,[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(e){var t=this;if(!this.getEnabled())return p.a.info(this.constructor.name,"Disabled - skipping"),h.a.resolve(e);if(!this._renderTexture){var n=e.getDimensions().floor();this._renderTexture=new d.a.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}var i=this._sdk.getRenderer(),r=void 0,o=void 0;if(p.a.canLog("info")&&(o=new g.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(i)){this._sprite.setTexture(e);var a=this.getNewDimensions(e.getDimensions()).floor();this._renderTexture.resizeTo(a),this._renderTexture.clear(),r=this._render(e).then(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.setDirtyForRenderer(e,i),t._renderTexture})}else p.a.info(this.constructor.name,"Rendering from cache"),r=h.a.resolve(this._renderTexture);return r.then(function(e){return o&&o.stop(),e})}},{key:"_render",value:function(e){return(this._sdk.getRenderer().isOfType(f.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(e)}},{key:"_renderWebGL",value:function(e){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(e){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(e){return e.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(e,t){this._tempTransformChange=e,this._tempInverseTransformChange=t}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(e){var t=this._dirtiness[e.id];return void 0===t||t}},{key:"setDirtyForRenderer",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(e,{id:n},t)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._sdk.getInputDimensions();t&&n.multiply(this._sdk.getZoom()).floor();var i=void 0;return this._sdk.getOperationsStack().forEach(function(t){i||(t!==e?n=t.getNewDimensions(n):i=!0)}),n.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}]),t}();v.identifier=null,t.a=v},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(38),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(114),u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tag=t,this._name=n,this._start=s()}return a(e,[{key:"stop",value:function(){var e=s()-this._start,t=Math.round(1e3/e);o.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+t+" FPS)")}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(38),h=n(45),p=n(66),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return n._onOperationUpdate=n._onOperationUpdate.bind(n),n._cacheEnabled=!0,n._stack=e,n._stack.forEach(function(e){e.on("update",n._onOperationUpdate)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,p.a),d(t,[{key:"clear",value:function(){var e=this;this.forEach(function(t){return e.remove(t)}),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter(function(e){return!!e}).some(function(e){return e.hasChanges()})}},{key:"_onOperationUpdate",value:function(e,t){this.emit(f.Events.OPERATION_UPDATED,e,t)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(e){return this._stack.filter(function(e){return!!e}).forEach(e)}},{key:"render",value:function(e,t){var n=this,i=t,r=this._stack.filter(function(e){return!!e}).filter(function(e){return e.getEnabled()});r.reverse();var o=r.filter(function(t){return!t.isDirtyForRenderer(e.getRenderer())})[0],a=r.indexOf(o);r.reverse();var s=0;-1!==a&&(s=r.length-a-1);for(var u=0;u<s;u++)f.Log.info(this.constructor.name,"Skipping "+r[u].constructor.name);for(var l=h.a.resolve(i),c=s;c<r.length;c++)!function(e){var t=r[e],i=void 0,o=void 0;l=l.then(function(e){return t.render(e).then(function(e){return i&&e!==i&&!n._cacheEnabled&&o.disposeRenderTextures(),i=e,o=t,e})})}(c);return l.then(function(t){return{outputTexture:t,renderDone:!r.some(function(t){return t.isDirtyForRenderer(e.getRenderer())})}})}},{key:"validateSettings",value:function(){return h.a.all(this._stack.filter(function(e){return!!e}).map(function(e){return e.validateSettings()}))}},{key:"setAllToDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(t){return t.setDirty(!0,e)})}},{key:"updateDirtinessForRenderer",value:function(e){for(var t=!1,n=0;n<this._stack.length;n++){var i=this._stack[n];i&&(i.isDirtyForRenderer(e)&&(t=!0),t&&i.setDirtyForRenderer(!0,e))}}},{key:"push",value:function(e){this._stack.push(e),e.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var e=this._stack.pop();e&&(e.off("update",this._onOperationUpdate),e.dispose())}},{key:"unshift",value:function(e){this._stack.unshift(e),e.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new t(this._stack.slice(0))}},{key:"get",value:function(e){return this._stack[e]}},{key:"getByIdentifier",value:function(e){return f.Utils.Array.find(this._stack,function(t){return t&&t.constructor.identifier===e})}},{key:"getIndexByIdentifier",value:function(e){return f.Utils.Array.findIndex(this._stack,function(t){return t&&t.constructor.identifier===e})}},{key:"moveToTop",value:function(e){var t=f.Utils.Array.findIndex(this._stack,function(t){return t&&t.constructor.identifier===e});if(!(t<0||t===this._stack.length-1)){var n=this.getByIdentifier(e);this._stack.splice(t,1),this._stack[this._stack.length]=n}}},{key:"set",value:function(e,t){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack[e]=t,t.on("update",this._onOperationUpdate)}},{key:"remove",value:function(e){var t=this._stack.indexOf(e);-1!==t&&(this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack.splice(t,1))}},{key:"removeAt",value:function(e){this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),delete this._stack[e]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach(function(e){e.dispose()})}}]),t}();t.a=_},function(e,t){e.exports={name:"photoeditorsdk",version:"4.22.3",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack -p --progress --colors && cross-env npm run prerender-desktop-css","release:production":"cross-env ENV=production npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",lint:"eslint --ext .jsx,.js src/js","lint:test":"eslint --ext .jsx,.js test","lint:sdk":"eslint --ext .jsx,.js src/js/sdk","lint:ui":"eslint --ext .jsx,.js src/js/ui","lint:ui:react-ui":"eslint --ext .jsx,.js src/js/ui/react-ui","lint:ui:desktop-ui":"eslint --ext .jsx,.js src/js/ui/desktop-ui",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true ENV=development webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui:react-ui && npm run test:ui:desktop-ui && npm run server","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:comparison":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/comparison/support/helpers "test/comparison/*.test.js" "test/comparison/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css",dist:"npm run dist:sdk && npm run dist:server","dist:sdk":"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.Server.min.*'  | sed 'p;s/.min././' | xargs -n2 cp  && npm run jsdoc:server","lerna:bootstrap":"$(npm bin)/lerna bootstrap","lerna:clean":"$(npm bin)/lerna clean --yes","lerna:publish":"$(npm bin)/lerna publish","clean:remake":"node config/rollup/clean.js","pre:remake":"node config/rollup/pre.js","clean-assets:remake":"node config/rollup/clean-assets.js","prewatch:remake":"npm run react-16-ready:remake && npm run pre:remake","watch:remake":"cross-env ENV=development node --max-old-space-size=8192 node_modules/.bin/rollup -c -w","prebuild:remake":"npm run react-16-ready:remake && npm run pre:remake","build:remake":"npm run dev-build:remake && npm run prod-build:remake","build-package:remake":"node config/rollup/build-for-package.js","dev-build:remake":"cross-env ENV=development NODE_ENV=development rollup -c","prod-build:remake":"cross-env ENV=production NODE_ENV=production rollup -c","lint:css":"stylelint './packages/**/*.tsx'","lint:remake":"tslint -p tsconfig.json -c tslint.json 'packages/**/*.{ts,tsx}'","test:remake":"jest","deploy:remake":"node config/rollup/deploy-ui.js","build:engine-wrapper":"cross-env ONLY_WRAPPER=true webpack","remake:new-to-old":"rm -rf 'node_modules' && npm i","remake:old-to-new":"npm run remake:new-to-old && npm run build:engine-wrapper && npm run clean-assets:remake && npx lerna clean --yes && npx lerna bootstrap && npm run clean:remake && npm run watch:remake","build-example:remake":"node config/rollup/build-example.js","react-16-ready:remake":"node config/rollup/react-16-ready.js","merge:remake":"node config/rollup/merge.js","build-typings:remake":"node_modules/.bin/tsc -p ./tsconfig-typings.json"},devDependencies:{"@rollup/plugin-image":"^2.0.0","@rollup/plugin-json":"^4.0.0","@rollup/plugin-node-resolve":"^6.0.0","@rollup/plugin-url":"^4.0.0","@svgr/rollup":"^4.3.3","@testing-library/react":"^8.0.4","@types/jest":"^24.0.11","@types/react":"^16.8.13","@types/react-dom":"^16.8.4","@types/styled-components":"^4.1.10",adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.3","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-env":"^1.7.0","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-preset-stage-0":"^6.24.1","babel-preset-stage-3":"^6.24.1","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chalk:"^2.4.1",chromedriver:"^2.37.0","circular-json-es6":"^2.0.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.5.2","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.14.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-react":"^7.11.1","eslint-plugin-standard":"^3.0.1",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2","html-webpack-plugin":"^3.2.0",husky:"^1.2.0",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jest:"^24.7.1","jest-axe":"^3.2.0","jest-dom":"^3.1.3",jsdoc:"^3.6.3","json-loader":"^0.5.7",lerna:"^3.13.4","lint-staged":"^8.1.0","lodash.defaults":"^4.2.0","lodash.defaultsdeep":"^4.6.1",minimist:"^1.2.0",mkdirp:"^0.5.1","mobx-react-devtools":"^6.1.1",mocha:"^3.5.3",ncp:"^2.0.0",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.12.0","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.3.0","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.8.3","react-dom":"^16.8.3",rembrandt:"^0.1.3","replace-in-file":"^5.0.2",rimraf:"^2.6.2",rollup:"^1.27.8","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-css-only":"^1.0.0","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-postcss":"^2.0.3","rollup-plugin-terser":"^5.1.0","rollup-plugin-typescript2":"^0.25.0","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","styled-components":"^4.2.0","term-img2":"^2.0.1","transform-loader":"^0.2.2","ts-jest":"^24.0.2",tslint:"^5.14.0","tslint-react":"~3.3.1",typescript:"~3.3.0","uglifyjs-webpack-plugin":"^1.2.5","vinyl-source-stream":"0.1.1",webpack:"^3.12.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{"can-use-dom":"^0.1.0",canvas:"^2.6.0",gl:"^4.1.1","lodash.debounce":"^4.0.8","lodash.memoize":"^4.1.2","lodash.throttle":"^4.1.1",mobx:"^4.0.0","mobx-react":"^5.0.0",opn:"^5.3.0",request:"^2.88.0","resize-observer-polyfill":"^1.5.1"},peerDependencies:{"prop-types":"^15.5.4",react:"^15.0.0 || ^16.0.0","react-dom":"^15.0.0 || ^16.0.0","styled-components":">= 3"},devEngines:{node:"8.x || 9.x || 10.x || 11.x || 12.x"},"lint-staged":{"*.{ts, tsx}":["npm run lint:remake -- --fix","git add"]},husky:{hooks:{"pre-commit":"lint-staged","pre-push":"true"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(71);n.d(t,"ImageLoader",function(){return i.a});var r=n(70);n.d(t,"JSONLoader",function(){return r.a})},function(e,t,n){"use strict";function i(e,t,n,i,r){return(e-t)*(r-i)/(n-t)+i}var r=n(0),o=n.n(r),a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),f=n.n(c),h=n(4),p=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),o()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=h.Math.ColorMatrix,_=function(e){return(Math.max(e.r,e.g,e.b)+Math.min(e.r,e.g,e.b))/2},g=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||f()(t)).call(this));return e._fragmentSource=n(313),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}(t,h.Engine.Filter),p(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=t.getCanvas(),o=t.getContext(),a=n.getContext(),s=o.getImageData(0,0,r.width,r.height),u=this._options,l=u.colorMatrix,c=u.gamma,f=u.shadows,p=u.highlights,d=u.whites,g=u.blacks,y=1!==c,v=0!==f||0!==p,m=new h.Color(0,0,0,0),b=0;b<r.width*r.height;b++){var w=4*b;if(m.r=s.data[w]/255,m.g=s.data[w+1]/255,m.b=s.data[w+2]/255,y&&(m.r=Math.pow(m.r,1/Math.max(c,1e-7)),m.g=Math.pow(m.g,1/Math.max(c,1e-7)),m.b=Math.pow(m.b,1/Math.max(c,1e-7))),v){var x=_(m),k=f>=0?h.Utils.clamp(Math.pow(x,1/(f+1))+-.76*Math.pow(x,2/(f+1))-x,0,Math.max(f,1)):-h.Utils.clamp(Math.pow(x,1/(1-f))+-.76*Math.pow(x,2/(1-f))-x,0,Math.max(-f,1)),T=k*x*x,C=k-T,E=x+T+(p<0?h.Utils.clamp(1-Math.pow(1-x,1/(1-p))- -.8*Math.pow(1-x,2/(1-p))-x,-1,0):-h.Utils.clamp(1-Math.pow(1-x,1/(1+p))- -.8*Math.pow(1-x,2/(1+p))-x,-1,0));m.r=h.Utils.clamp(E*((m.r+C)/Math.max(x,1e-7)),0,1),m.g=h.Utils.clamp(E*((m.g+C)/Math.max(x,1e-7)),0,1),m.b=h.Utils.clamp(E*((m.b+C)/Math.max(x,1e-7)),0,1)}(m=l.apply(m).clamp(0,1)).r=i(m.r,0,1,g/2,1+d/2),m.g=i(m.g,0,1,g/2,1+d/2),m.b=i(m.b,0,1,g/2,1+d/2),s.data[w]=255*m.r,s.data[w+1]=255*m.g,s.data[w+2]=255*m.b}a.putImageData(s,0,0)}}]),t}();g.prototype.availableOptions={gamma:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT},shadows:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},highlights:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT},whites:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},blacks:{type:h.OptionType.NUMBER,default:0,uniformType:h.UniformType.FLOAT},colorMatrix:{type:h.OptionType.COLOR_MATRIX,default:new d,uniformType:h.UniformType.MAT4},colorOffset:{type:h.OptionType.ARRAY,default:[],uniformType:h.UniformType.FLOAT4}},t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(7)),_=n(8),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new _.Brightness({brightness:0})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),g(t,[{key:"render",value:function(e,n,i){return this._stack.isEmpty()&&this._stack.push(new _.Brightness({brightness:0})),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"render",this).call(this,e,n,i)}}]),t}();y.isIdentity=!0,y.identifier="identity",t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(0),l=n.n(u),c=n(2),f=n.n(c),h=n(3),p=n.n(h),d=n(1),_=n.n(d),g=n(4),y=(n.n(g),n(18)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){var e;i(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(a)));return u._fragmentSource=n(343),u}return o(t,g.Engine.Filter),v(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.lookupTableData,u=0;u<i.width*i.height;u++){var l=4*u,c=a.data[l];a.data[l]=s[4*c];var f=a.data[l+1];a.data[l+1]=s[1+4*f];var h=a.data[l+2];a.data[l+2]=s[2+4*h]}o.putImageData(a,0,0)}}]),t}();m.prototype.availableOptions={lookupTable:{type:g.OptionType.NUMBER,default:1,uniformType:g.UniformType.INT},lookupTableData:{type:g.OptionType.ARRAY,default:[]}};var b=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(o)));return s._filter=new m({lookupTable:s._options.textureGLUnit}),s._textures={},s._renderers={},s}return o(t,y.a),v(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(g.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(g.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(e){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var t=new Uint8Array(this._options.data),n=e.getRenderer(),i=n.id;this._renderers[i]=n,this._textures[i]||(this._textures[i]=new g.Engine.BaseTexture);var r=this._textures[i],o=new g.Engine.PixelArrayImage(256,1,t);r.setSource(o),r.setGLUnit(this._options.textureGLUnit),n.isOfType(g.RendererType.WEBGL)&&n.updateTexture(r)}},{key:"dispose",value:function(){for(var e in function e(t,n,i){null===t&&(t=Function.prototype);var r=s()(t,n);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||_()(t.prototype),"dispose",this).call(this),this._textures)this._textures[e].dispose(),delete this._textures[e];delete this._options.data}}]),t}();t.a=b},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(405)),_=n(73),g=n(174),y=n(407),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},b=p.Math.Vector2,w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._persistedPaths=[],o._outputCanvasDirty=!0,o._outputCanvas=p.Utils.createCanvas(),o._outputContext=o._outputCanvas.getContext("2d"),o._persistCanvas=p.Utils.createCanvas(),o._persistContext=o._persistCanvas.getContext("2d"),o._nextCanvas=p.Utils.createCanvas(),o._texture=p.Engine.Texture.fromCanvas(o._outputCanvas),o._sprite.setTexture(o._texture),o._onPathUpdate=o._onPathUpdate.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_.a),v(t,[{key:"applyFlip",value:function(e){this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var n=t.getPosition().clone();switch(e){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}t.setPosition(n)}),t.setDirty(!0)}),this._reset()}},{key:"applyRotation",value:function(e){this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var n=t.getPosition().clone();90===e?(n.flip(),n.x=1-n.x):-90===e&&(n.flip(),n.y=1-n.y),t.setPosition(n)}),t.setDirty(!0)}),this._reset()}},{key:"applyTransform",value:function(e){var t=null;this._options.paths.forEach(function(n){n.forEachControlPoint(function(t){t.setPosition(e.applyToRelativePoint(t.getPosition()))});var i=n.getBrush();i!==t&&(i.setSize(e.applyToRelativeSize(i.getSize())),t=i),n.setDirty(!0)}),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var e=this._outputCanvas,t=e.width,n=e.height;this._outputContext.clearRect(0,0,t,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var e=this._persistCanvas,t=e.width,n=e.height;this._persistContext.clearRect(0,0,t,n)}}},{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=m(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(i.type="brush"),i}},{key:"serializeOption",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===e?this._options.paths.map(function(e){return e.serializeOptions(void 0,n)}):m(t.prototype.__proto__||h()(t.prototype),"serializeOption",this).call(this,e,n)}},{key:"createPath",value:function(e){var t=new d.a(this._operation,{brush:e},this._nextCanvas);return t.on("update",this._onPathUpdate),this._options.paths.push(t),this.setDirty(!0),t}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(e){e.renderToCanvas(this._persistCanvas),this._nextCanvas=e.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(e)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(t.prototype.__proto__||h()(t.prototype),"setDirtyForRenderer",this).call(this,e,n,i),e&&i&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach(function(e){e.setDirty(!0)}))}},{key:"setDirty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(e,this._renderers[n],t)}},{key:"render",value:function(e){var t=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,e),p.Utils.ensureCanvasDimensions(this._persistCanvas,e),this._options.paths.forEach(function(n){n.render(e),n.getClosed()&&-1===t._persistedPaths.indexOf(n)&&t._onPathPersist(n)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(e){e.getClosed()||e.renderToCanvas(t._outputCanvas)}),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(e,n){n&&(p.Utils.ensureCanvasDimensions(this._outputCanvas,n),p.Utils.ensureCanvasDimensions(this._persistCanvas,n),this._texture.getBaseTexture().update()),this.render(n);var i=e.getRenderer();i.isOfType(p.RendererType.WEBGL)&&i.updateTexture(this._texture.getBaseTexture()),m(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,n)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"_createRadialBrush",value:function(){return new y.a}},{key:"_getTempCanvas",value:function(){return this._nextCanvas}},{key:"dispose",value:function(){m(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}]),t}();w.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new b(0,0)},scale:{type:p.OptionType.VECTOR2,default:new b(1,1)},anchor:{type:p.OptionType.VECTOR2,default:new b(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new b(0,0)},rotation:{type:p.OptionType.NUMBER,default:0},paths:{type:p.OptionType.ARRAY,default:[],setter:function(e){var t=this;return e=e.map(function(e){if(e instanceof d.a)return e;var n=e.brush,i=e.closed,r=new d.a(t._operation,{brush:n,closed:i},t._nextCanvas);return e.controlPoints.forEach(function(e){r.addControlPoint(e)}),r}),this._reset(),e}}},w.type="brush",w.Brush=g.a,w.Path=d.a,w.Brushes={RadialBrush:y.a},t.a=w},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.Vector2,d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._lastOptions={},o._lastInputDimensions=new p(0,0),o._brush=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),h(t,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,n=t.image,i=t.size;n.width=n.height=Math.ceil(i*e.min());var r=f.Utils.createCanvas();r.width=n.width,r.height=n.height;var o=r.getContext("2d");o.drawImage(n,0,0,r.width,r.height);var a=this._tintImageData(o.getImageData(0,0,r.width,r.height),r.width,r.height);return o.putImageData(a,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=r,this._lastInputDimensions=e.clone(),r}},{key:"_tintImageData",value:function(e){for(var t=this._options.color,n=0;n<e.data.length;n+=4)e.data[n]+=(255*t.r-e.data[n])*t.a,e.data[n+1]+=(255*t.g-e.data[n+1])*t.a,e.data[n+2]+=(255*t.b-e.data[n+2])*t.a;return e}},{key:"clone",value:function(){return new(0,this.constructor)(this._options)}}]),t}();t.a=d,d.prototype.availableOptions={identifier:{type:f.OptionType.STRING},image:{type:f.OptionType.IMAGE},size:{type:f.OptionType.NUMBER,default:.05},color:{type:f.OptionType.COLOR,default:f.Color.RED}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),n(176)),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=o.Math.Vector2,l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return s(e,[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new a.a(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(e,t){t.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+e.fontSize+'px "'+this._text.getFontFamily()+'"',t.textBaseline="top",t.textAlign=this._text.getAlignment(),t.fillStyle=this._text.getColor().toRGBA(),t.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(t.lineWidth=n)}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines().map(function(e){return e.replace(/\s+$/i,"")})}},{key:"_renderTextLine",value:function(e,t){var n=this._text.getAlignment(),i=new u(0,t);switch(n){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width}this._context.fillText(e,i.x,i.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(e,i.x,i.y))}},{key:"update",value:function(e,t){var n=this.calculateFontStyles(e,t);if(n){var i=this._calculateText(e,n,t),r=i.dimensions,o=i.lines;this._renderText(e,r,o,n,t),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var e=this._canvas,t=e.width,n=e.height,i=this.rotation,r=Math.cos(i),o=Math.sin(i),a=new u(Math.abs(t*r)+Math.abs(n*o),Math.abs(t*o)+Math.abs(n*r));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(i),this._finalContext.drawImage(this._canvas,-t/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(e,t,n,i,r){this._canvas.width=t.x,this._canvas.height=t.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*r.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,t.x,t.y),this._applyTextOptions(i,this._context);for(var o=0;o<n.length;o++){var a=n[o];this._renderTextLine(a,i.topPadding+i.lineHeight*o)}}},{key:"calculateFontStyles",value:function(e,t){var n=this._text.getFontFamily(),i=this._text.getFontSize()*t.y,r=this._text.getAbsoluteTextHeight(t),o=r*this._text.getLineHeight(),a={fontFamily:n,fontSize:i,lineHeight:o,topPadding:r*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===i&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(e,t,n){var i=this._text.getMaxWidth()*n.x;this._applyTextOptions(t,this._context);var r=new u,o=this._text.getText().split("\n");if(void 0!==i)r.x=i,o=this._buildOutputLines(i);else for(var a=0;a<o.length;a++){var s=o[a];r.x=Math.max(r.x,this._context.measureText(s).width)}var l=t.lineHeight;return r.y=o.length*l,{dimensions:r,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(e,t){var n=this.calculateFontStyles(e,t);return this._calculateText(e,n,t).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}}]),e}();t.a=l},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._context=t,this._lastFontStyle={}}return o(e,[{key:"getLines",value:function(){for(var e=this,t=[],n=[],i=this._lines.length,r=0;r<i;r++){for(var o=this._lines[r],a=this._buildWords(o),s=a.length,u=0;u<s;u++){var l=a[u],c=n.concat(l).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(t.push(n.join("")),n=[l]);var f=l.replace(/\s+$/i,"");if(this._getWidth(f)>this._maxWidth){var h=this._splitWord(l);t=t.concat(h.lines),h.rest&&(n=[h.rest])}}else n.push(l)}t.push(n.join("")),n=[]}return t.map(function(t){return e._trimLine(t,e._context.textAlign)})}},{key:"_trimLine",value:function(e,t){return e}},{key:"_buildWords",value:function(e){for(var t=[],n="",i=e.length,r=0;r<i;r++){var o=e[r];n+=o," "!==o&&"-"!==o&&r!==i-1||(t.push(n),n="")}return t}},{key:"_splitWord",value:function(e){for(var t={lines:[],rest:null},n=e.length,i=[],r=0;r<n;r++){var o=e[r];this._getWidth(i.concat(o).join(""))>this._maxWidth?(i.length>0&&t.lines.push(i.join("")),i=[o]):i.push(o),r===n-1&&i.length>0&&(t.rest=i.join(""))}return t}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(e){return this._context.measureText(e).width}},{key:"setText",value:function(e){this._text=e,this._lines=e.split("\n")}},{key:"setMaxWidth",value:function(e){this._maxWidth=e}}]),e}();t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(74)),m=n(178),b=n(25),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.a),x(t,[{key:"_layoutRow",value:function(e,t,n,i){return new b.a({words:e,width:t,attributes:n})}},{key:"_layoutRows",value:function(e,n){var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||g()(t.prototype),"_layoutRows",this).call(this,e,n),r=.032*n,o=.08*n,s=new m.a({width:n,height:r,type:m.a.FormType.LongLine,shearingAngle:0}).layout(),u=new m.a({width:n,height:o,type:m.a.FormType.LongAndShortLine,shearingAngle:0}).layout();return[s].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}(i),[u])}}]),t}();k.defaultFontIdentifiers=["imgly_font_summer_font_light"],k.identifier="imgly_text_design_blocks_light",k.prototype.availableOptions=w({},v.a.prototype.availableOptions,{fontIdentifiers:{type:y.OptionType.ARRAY,default:k.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(53)),_=n(91),g=n(32),y=n(47),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=p.Math.Rectangle,w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o.setSize(new g.a(o.getWidth(),o.getHeight())),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_.a),m(t,[{key:"_calculateLayoutElements",value:function(){return[new d.a({frame:this._getTextFrame()})]}},{key:"render",value:function(e){var n=this._getFrame(),i=this.getType(),r=this.getAttributes().getTextColor(),o=n.height/3,a=new b(n.x,n.y,n.width,o),s=new b(n.x,n.y+2*o,n.width,o);switch(i){case t.FormType.Rect:Object(y.d)(e,n,r);break;case t.FormType.DoubleRect:Object(y.d)(e,a,r),Object(y.d)(e,s,r);break;case t.FormType.DoubleRectFirstPunctuated:Object(y.e)(e,a,r),Object(y.d)(e,s,r);break;case t.FormType.DoubleRectSecondPunctuated:Object(y.d)(e,a,r),Object(y.e)(e,s,r);break;case t.FormType.LongLine:var u=n.height/2,l=new b(n.x,n.y,n.width,u);Object(y.c)(e,l,.5*l.height,r);break;case t.FormType.LongAndShortLine:var c=.2*n.height,f=.75*c;a=new b(n.x,n.y+c,n.width,c);var h=n.x+.25*n.width,p=n.y+n.height-f;s=new b(h,p,.5*n.width,f),Object(y.c)(e,a,.5*a.height,r),Object(y.c)(e,s,.5*s.height,r)}}}]),t}();w.FormType={Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"},w.prototype.availableOptions=v({},_.a.prototype.availableOptions,{height:{type:p.OptionType.NUMBER,default:100},type:{type:p.OptionType.STRING,default:w.FormType.Rect,available:p.Utils.values(w.FormType)}})},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(74)),y=n(25),v=n(123),m=n(46),b=n(125),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),x(t,[{key:"_fontForRow",value:function(e,t){var n=this.getFontIdentifiers();return n[e%n.length]}},{key:"_minimumNumberOfLines",value:function(e){return Math.max(Math.floor(.7*function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_minimumNumberOfLines",this).call(this,e)),1)}},{key:"_maximumNumberOfLines",value:function(e){return Math.max(Math.floor(e.countNumberOfCharacters()/5),1)}},{key:"_randomLayoutRow",value:function(e,n,i,r){return this._createSingleRow(t.RowType.Single,e,i,r)}},{key:"_createSingleRow",value:function(e,n,i,r){var o=r.getFontIdentifier(),a="imgly_font_amberlight"===o||"imgly_font_handycheera_regular"===o?(new m.a).set(n.getLowerCase()):n;switch(e){case t.RowType.Single:return new y.a({words:a,width:i,attributes:r});case t.RowType.SingleImage:return new b.a({words:a,width:i,attributes:r});default:return _.Log.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '"+e+"'"),null}}}]),t}();k.defaultFontIdentifiers=["imgly_font_handycheera_regular","imgly_font_rasa_regular"],k.defaultBanderoles=[v.a.Celebrate1,v.a.Celebrate2],k.identifier="imgly_text_design_celebrate",k.RowType={Single:"SINGLE",SingleImage:"SINGLE_IMAGE"},k.prototype.availableOptions=w({},g.a.prototype.availableOptions,{relativeLineSpacing:{type:_.OptionType.NUMBER,default:.01875},fontIdentifiers:{type:_.OptionType.ARRAY,default:k.defaultFontIdentifiers},banderoles:{type:_.OptionType.ARRAY,default:k.defaultBanderoles}})},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(75)),y=n(25),v=n(21),m=n(424),b=n(46),w=n(20),x=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},C=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new v.a(.1,.1,.1,.1),o._alreadyContainsARowWithScriptFont=!1,o._backgroundsRandomizer=new w.a(0),o._seedPool.push(o._backgroundsRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),k(t,[{key:"getImagePaths",value:function(){return _.Utils.Array.flatten(m.a.Backgrounds.map(function(e){return e.getImagePaths()}))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(m.a.Backgrounds)}},{key:"generateLayoutData",value:function(e,n){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),T(t.prototype.__proto__||d()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_modifiedText",value:function(e){return T(t.prototype.__proto__||d()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_fontForRow",value:function(e,n){var i=T(t.prototype.__proto__||d()(t.prototype),"_fontForRow",this).call(this,e,n);return"imgly_font_petit_formal_script"===i&&(this._alreadyContainsARowWithScriptFont&&(i="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),i}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r="imgly_font_petit_formal_script"===i.getFontIdentifier();return new y.a({words:r?(new b.a).set(e.getLowerCase()):e,width:n,attributes:i})}}]),t}();C.identifier="imgly_text_design_equal_width",C.defaultFontIdentifiers=["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"],C.prototype.availableOptions=x({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:C.defaultFontIdentifiers},relativeLineSpacing:{type:_.OptionType.NUMBER,default:.025}})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),h(t,[{key:"render",value:function(e,t,n,i,r){f.Log.warn("TextDesignBackground#render: Abstract class")}}]),t}();p.prototype.availableOptions={}},function(e,t,n){var i=n(23);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.b),h(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x").logicalShape;if(2!==e.length)throw new Error("UnpackRGBAFilter expects 2D inputs");return[1,e[0],e[1],3]}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        //       x, y, z, w\n        // e.g. [0, 4, 3, 2] (which is the blue channel of the pixel at x: 3, y: 4)\n        ivec4 outputCoords = getOutputCoords();\n        \n        int row = outputCoords.y;\n        int col = outputCoords.z;\n        int offset = outputCoords.w;\n\n        int index = row * int(x_sizeRC.y) + col;\n        int logR = index / int(x_sizeRC.y);\n        int logC = index - logR * int(x_sizeRC.y);\n        vec2 uv = (vec2(logC, logR) + halfCR) / x_texRC.yx;\n        vec4 color = texture2D(x, uv);\n\n        float component = 0.0;\n        if (offset == 0) {\n          component = color.r;\n        } else if (offset == 1) {\n          component = color.g;\n        } else if (offset == 2) {\n          component = color.b;\n        }\n        gl_FragColor = vec4(component, 0.0, 0.0, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!0}}]),t}();t.a=p},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(13)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._uniforms.blendLeftTopRightBottom={type:p.UniformType.FLOAT4,value:o.availableOptions.blendLeftTopRightBottom.default},o._uniforms.blendRadius={type:p.UniformType.FLOAT,value:o.availableOptions.blendRadius.default},o.prepareUniforms(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.b),_(t,[{key:"requiresFloatTextures",value:function(){return!1}},{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x"),t=this._getInputWithName("y");if(e.logicalShape[0]!==t.logicalShape[0]||e.logicalShape[1]!==t.logicalShape[1])throw new Error("X and Y inputs of "+this.constructor.name+" must have same shape.");return e.logicalShape}},{key:"_updateAdditionalUniforms",value:function(e){e.setUniform("blendLeftTopRightBottom",this.getBlendLeftTopRightBottom()),e.setUniform("blendRadius",this.getBlendRadius())}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec4 blendLeftTopRightBottom;\n      uniform float blendRadius;\n\n      void main() {\n        vec2 coords = vec2(getOutputCoords());\n\n        vec2 blendVertical = vec2(coords.x, x_sizeRC.x - coords.x) / vec2(x_sizeRC.x * blendRadius); // topBlend, bottomBlend\n        vec2 blendHorizontal = vec2(coords.y, x_sizeRC.y - coords.y) / vec2(x_sizeRC.y * blendRadius); // leftBlend, rightBlend\n        vec4 factorLeftTopRightBottom = clamp(vec4(blendHorizontal.x, blendVertical.x, blendHorizontal.y, blendVertical.y), vec4(0.0), vec4(1.0));\n        vec4 maskVector = (vec4(1.0) - blendLeftTopRightBottom) * vec4(2.0); // [0, 1, 1, 1] becomes [2, 0, 0, 0]\n        vec4 maskedFactorLeftTopRightBottom = factorLeftTopRightBottom + maskVector; // [0.25, 0.5, 1.0, 1.0] becomes [2.25, 1.0, 1.0]\n        float factor = min(min(maskedFactorLeftTopRightBottom.x, maskedFactorLeftTopRightBottom.y), min(maskedFactorLeftTopRightBottom.z, maskedFactorLeftTopRightBottom.w)); // Choose the smallest blending factor\n        \n        vec2 uv = UVfrom2D(x_texRC, x_sizeRC, int(x_sizeRC.y), int(coords.x), int(coords.y));\n        vec4 xColor = texture2D(x, uv);\n        vec4 yColor = texture2D(y, uv);\n\n        gl_FragColor = mix(yColor, xColor, factor);\n      }\n    "}}]),t}();g.prototype.availableOptions=r()({blendLeftTopRightBottom:{type:p.OptionType.ARRAY,default:[1,1,1,1]},blendRadius:{type:p.OptionType.NUMBER,default:.2}},d.b.prototype.availableOptions),t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"determineSupportedConfiguration",value:function(t){var n=!1;if(e._cachedConfigs||(e._cachedConfigs={},n=!0),e._cachedConfigs[t.id])return e._cachedConfigs[t.id];var i=t.getExtension("OES_texture_float"),r=t.FLOAT,a=t.getExtension("OES_texture_half_float"),s=null!==a?a.HALF_FLOAT_OES:null,u=null!==i,l=e._canCreateTexture(t,r,t.LUMINANCE),c=null!==a&&e._canCreateTexture(t,s,t.RGBA),f=e._canCreateTexture(t,s,t.LUMINANCE),h=u&&(t.getExtension("WEBGL_color_buffer_float")||e._canBindBuffer(t,r,t.RGBA)),p=e._canBindBuffer(t,r,t.LUMINANCE),d=e._canBindBuffer(t,s,t.LUMINANCE),_=t.FLOAT,g=t.RGBA,y="?";f?(y="Float16 Luminance",_=s,g=t.LUMINANCE):c?(y="Float16 RGBA",_=s):l?(y="Float32 Luminance",g=t.LUMINANCE):y="Float32 RGBA";var v=r,m=t.RGBA,b="?";d?(b="Float16 Luminance",v=s,m=t.LUMINANCE):p?(b="Float32 Luminance",v=r,m=t.LUMINANCE):b="Float32 RGBA",n&&o.Log.info("\nArt Filter configuration:\nWeight Textures: "+y+"\nRender Textures: "+b);var w={environmentSupported:h,weightTextureType:_,weightTextureFormat:g,renderTextureType:v,renderTextureFormat:m};return e._cachedConfigs[t.id]=w,w}},{key:"_canCreateTexture",value:function(e,t,n){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);var r=n===e.RGBA?4:1,o=new Uint16Array(r);t===e.FLOAT&&(o=new Float32Array(r)),1===r&&e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,n,t,o),e.pixelStorei(e.UNPACK_ALIGNMENT,4);var a=e.isTexture(i),s=e.getError()!==e.NO_ERROR;return e.deleteTexture(i),a&&!s}},{key:"_canBindBuffer",value:function(e,t,n){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,n,t,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.deleteTexture(i),e.deleteFramebuffer(r),o===e.FRAMEBUFFER_COMPLETE}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(13),h=n(55),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.b),p(t,[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("AddFilter requires two inputs: x and y.");var e=this._getInputWithName("x"),t=this._getInputWithName("y");if(!h.a.isSameShape(e.logicalShape,t.logicalShape))throw Error("AddFilter inputs must have matching input shapes ("+e.logicalShape+" vs. "+t.logicalShape+").");return e.logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n        float yVal = getY(coords.x, coords.y, coords.z, coords.w);\n        \n        float result = xVal + yVal;\n        setOutput(result);\n      }\n    "}}]),t}();t.a=d},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.b),h(t,[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // WebGL doesn't offer tanh, taken from TFJS\n        float e2x = exp(-2.0 * abs(x));\n        float tanh = sign(x) * (1.0 - e2x) / (1.0 + e2x);\n\n        float rgbValue = (tanh * 150.0) + 127.5;\n        float clamped = clamp(rgbValue, 0.0, 255.0);\n        setOutput(clamped / 255.0);\n      }\n    "}}]),t}();t.a=p},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(31),a=n.n(o),s=n(28),u=n.n(s),l=n(0),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(13)),m=n(133),b=function(){return function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=u()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.b),w(t,[{key:"_calculateOutputShape",value:function(){if(2!==this._options.inputs.length)throw Error("Conv2DFilter requires two inputs: x and w.");var e=this._getInputWithName("x"),t=this._getInputWithName("w"),n=b(e.logicalShape,4),i=n[0],r=n[1],o=n[2],a=(n[3],b(t.logicalShape,4)),s=a[0],u=a[1],l=a[3],c=this._options.stride,f=this._options.stride,h=m.a.calculatePadding(this._options.padding,r,o,c,f,s,u),p=h.padInfo,d=h.outHeight,_=h.outWidth;return this._outChannels=l,this._padInfo=p,[i,d,_,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var e=this._getInputWithName("x").logicalShape[3],t=this._padInfo.top,n=this._padInfo.left,i=4*Math.floor(e/4),r=e%4,o=this._options.stride;return"\n    const ivec2 strides = ivec2("+o+", "+o+");\n    const ivec2 pads = ivec2("+t+", "+n+");\n\n    const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int batch = coords[0];\n      int d2 = coords[3];\n\n      ivec2 xRCCorner = coords.yz * strides - pads;\n      int xRCorner = xRCCorner.x;\n      int xCCorner = xRCCorner.y;\n\n      // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (int wR = 0; wR < max_filter_iterations; wR++) {\n        if (wR >= w_shape[0]) { break; }\n        int xR = xRCorner + wR;\n        if (xR < 0 || xR >= x_shape[1]) {\n          continue;\n        }\n\n        for (int wC = 0; wC < max_filter_iterations; wC++) {\n          if (wC >= w_shape[1]) { break; }\n          int xC = xCCorner + wC;\n\n          if (xC < 0 || xC >= x_shape[2]) {\n            continue;\n          }\n\n          for (int d1 = 0; d1 < "+i+"; d1 += 4) {\n            vec4 xValues = vec4(\n              getX(batch, xR, xC, d1),\n              getX(batch, xR, xC, d1 + 1),\n              getX(batch, xR, xC, d1 + 2),\n              getX(batch, xR, xC, d1 + 3)\n            );\n            vec4 wValues = vec4(\n              getW(wR, wC, d1, d2),\n              getW(wR, wC, d1 + 1, d2),\n              getW(wR, wC, d1 + 2, d2),\n              getW(wR, wC, d1 + 3, d2)\n            );\n\n            dotProd += dot(xValues, wValues);\n          }\n\n          if ("+(1===r)+") {\n            dotProd +=\n              getX(batch, xR, xC, "+i+") *\n              getW(wR, wC, "+i+", d2);\n          } else if ("+(2===r)+") {\n            vec2 xValues = vec2(\n              getX(batch, xR, xC, "+i+"),\n              getX(batch, xR, xC, "+i+" + 1)\n            );\n            vec2 wValues = vec2(\n              getW(wR, wC, "+i+", d2),\n              getW(wR, wC, "+i+" + 1, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          } else if ("+(3===r)+") {\n            vec3 xValues = vec3(\n              getX(batch, xR, xC, "+i+"),\n              getX(batch, xR, xC, "+i+" + 1),\n              getX(batch, xR, xC, "+i+" + 2)\n            );\n            vec3 wValues = vec3(\n              getW(wR, wC, "+i+", d2),\n              getW(wR, wC, "+i+" + 1, d2),\n              getW(wR, wC, "+i+" + 2, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          }\n        }\n      }\n      setOutput(dotProd);\n    }"}}]),t}();x.prototype.availableOptions=r()({stride:{type:y.OptionType.NUMBER,default:1},padding:{type:y.OptionType.STRING,default:"same"}},v.b.prototype.availableOptions),t.a=x},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(31),a=n.n(o),s=n(28),u=n.n(s),l=n(0),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(13)),m=n(133),b=function(){return function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=u()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.b),w(t,[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("DepthwiseConv2DFilter requires two inputs: x and w.");var e=this._getInputWithName("x"),t=this._getInputWithName("w"),n=b(e.logicalShape,4),i=n[0],r=n[1],o=n[2],a=n[3],s=b(t.logicalShape,4),u=s[0],l=s[1],c=s[3];if(u>9||l>9)throw new Error("Filter heights are limited to 9. Change shader source if larger ones are required.");var f=this._options.stride,h=this._options.stride,p=m.a.calculatePadding(this._options.padding,r,o,f,h,u,l),d=p.padInfo,_=p.outHeight,g=p.outWidth;return this._outChannels=c*a,this._padInfo=d,[i,_,g,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var e,t=this._padInfo.top,n=this._padInfo.left,i=this._options,r=i.stride,o=i.padMethod;switch(o){case"zero":e="return coords;";break;case"edge":e="return ivec4(clamp(vec4(coords), vec4(0.0), vec4(x_shape - 1)));"}return"\n      const ivec2 strides = ivec2("+r+", "+r+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n      const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n      \n    ivec4 convertCoordinatesForPadding(ivec4 coords) {\n      "+e+"\n    }\n    \n\n      void main() {\n        ivec4 coords = getOutputCoords();\n\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads; // current coordinates in x\n        int d2 = coords.w; // current channel index\n        int outChannels = w_shape[3] * x_shape[3];\n        int d1 = d2; // currently probed channel\n        int q = d2 - d1; // current filter index\n\n        int xRCorner = xRCCorner.x; // row index\n        int xCCorner = xRCCorner.y; // column index\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < max_filter_iterations; wR++) {\n          if (wR >= w_shape[0]) { break; }\n\n          int xR = xRCorner + wR; // x row index = current index + offset * y dilation\n          "+("zero"===o?"if (xR < 0 || xR >= x_shape[1]) { continue; }":"")+"\n\n          for (int wC = 0; wC < max_filter_iterations; wC++) {\n            if (wC >= w_shape[1]) { break; }\n\n            int xC = xCCorner + wC; // x column index = current index + offset * x dilation\n            "+("zero"===o?"if (xC < 0 || xC >= x_shape[2]) { continue; }":"")+"\n\n            float xVal = getX(convertCoordinatesForPadding(ivec4(batch, xR, xC, d1))); // Get value at current [batch, y, x, channel]\n            float wVal = getW(wR, wC, d1, q); // Get kernel value at current \n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}]),t}();x.prototype.availableOptions=r()({stride:{type:y.OptionType.NUMBER},padding:{type:y.OptionType.STRING,default:"same"},padMethod:{type:y.OptionType.STRING,default:"zero"}},v.b.prototype.availableOptions),t.a=x},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(31),a=n.n(o),s=n(28),u=n.n(s),l=n(0),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(13)),m=n(55),b=function(){return function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=u()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||g()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.b),w(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x").logicalShape[0],t=this._options,n=t.batchSize,i=t.windowSize;return[Math.ceil(e/i),n]}},{key:"_getTensorOperationSource",value:function(){var e=this._options.windowSize,t=this._getInputWithName("x").logicalShape[0],n=4*Math.floor(e/4),i=e%4,r="";return t%e>0&&(r="\n      if (inIdx < 0 || inIdx >= x_shape[0]) {\n        return initalizationValue;\n      }\n      "),"\n      const float initializationValue = 0.0;\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+r+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        // row, col\n        ivec2 coords = getOutputCoords();\n        int batch = coords[1];\n        int outIdx = coords[0];\n        int inOffset = outIdx * "+e+";\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+n+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            // row, col\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            getValue(inIdx + 3, batch)\n          );\n\n          sumValue += dot(values, ones);\n        }\n\n        int inIdx = inOffset + "+n+";\n        if ("+(1===i)+") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if ("+(2===i)+") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if ("+(3===i)+") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        }\n        setOutput(sumValue);\n      }\n    "}}],[{key:"addFiltersForReduceSumOperationToGraph",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,2],r=e.getLogicalShapeAtIndex(n),o=t._computeOutAndReduceShape(r,i),a=b(o,2),s=(a[0],a[1]),u=m.a.getSizeOfLogicalShape(s),l=[u,m.a.getSizeOfLogicalShape(r)/u],c=n===e.getLastIndex(),f={name:"x",logicalShape:l,type:c?v.a.PREVIOUS:v.a.INDEX};c||(f.data=n);var h=t._buildReduceFilter(f);e.addFilter(h,!1);for(var p=h.outputLogicalShape();1!==p[0];){var d={name:"x",type:v.a.PREVIOUS,logicalShape:h.outputLogicalShape()};p=(h=t._buildReduceFilter(d)).outputLogicalShape(),e.addFilter(h)}return e.getLastIndex()}},{key:"_buildReduceFilter",value:function(e){var n=b(e.logicalShape,2),i=n[0],r=n[1];return new t({inputs:[e],windowSize:t._computeWindowSize(i),batchSize:r})}},{key:"_computeWindowSize",value:function(e){if(e<=30)return e;for(var t=Math.floor(Math.sqrt(e));t<e;++t)if(e%t==0)return t;return e}},{key:"_computeOutAndReduceShape",value:function(e,t){for(var n=[],i=e.length,r=0;r<i;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map(function(t){return e[t]})]}}]),t}();x.prototype.availableOptions=r()({axes:{type:y.OptionType.ARRAY,default:[1,2]},windowSize:{type:y.OptionType.NUMBER},batchSize:{type:y.OptionType.NUMBER}},v.b.prototype.availableOptions),t.a=x},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.b),h(t,[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec4 coords = getOutputCoords();\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n\n        // 'Sum' input consists of a single value which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n\n        // 'X' is a 4D tensor holding arbitrary float values\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // Calculate the mean\n        float mean = xSum / numValuesPerChannel;\n\n        // Calculate a single variance component (x_i - mean)^2\n        float result = pow((x - mean), 2.0);\n        setOutput(result);\n      }\n    "}}]),t}();t.a=p},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(13)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.b),_(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x"),t=this._getInputWithName("variance"),n=this._getInputWithName("sum"),i=e.logicalShape[3];if(t.logicalShape[1]!==i||n.logicalShape[1]!==i)throw new Error("Variance and sum input depth must match x inputs channels for InstanceNormReluFilter.");return e.logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // 'variance' input consists of a single value per channel which holds the sum of all values in x reduced by it's mean and squared afterwards\n        float nonMeanedVariance = getVarianceFlat(coords.w);\n        float variance = nonMeanedVariance / numValuesPerChannel;\n\n        // 'sum' input consists of a single value per channel which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n        float mean = xSum / numValuesPerChannel;\n\n        float netmu = x - mean;\n        float sigmaEpsilonSqrt = sqrt(variance + 0.001);\n\n        float normalized = netmu / sigmaEpsilonSqrt;\n        \n        // Calculate the instance normalized value of x\n        float shift = getShiftFlat(coords.w);\n        float scale = getScaleFlat(coords.w);\n        float result = (scale * normalized) + shift;\n\n        // If it's not NaN, calculate relu\n        "+(this.getAddRelu()?"\n      if (isNaN(result)) {\n        setOutput(result);\n      } else {\n        float relu = (result < 0.0) ? 0.0 : result;\n        setOutput(relu);\n      }\n    ":"setOutput(result);")+"\n      }\n    "}}]),t}();g.prototype.availableOptions=r()({shift:{type:p.OptionType.NUMBER},scale:{type:p.OptionType.NUMBER},addRelu:{type:p.OptionType.BOOLEAN,default:!0}},d.b.prototype.availableOptions),t.a=g},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(31),a=n.n(o),s=n(28),u=n.n(s),l=n(0),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(13)),m=function(){return function(e,t){if(Array.isArray(e))return e;if(a()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=u()(e);!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._uniforms.sourceSizeRC={type:y.UniformType.FLOAT2,value:[0,0]},o._uniforms.targetSizeRC={type:y.UniformType.FLOAT2,value:[0,0]},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.b),b(t,[{key:"_calculateOutputShape",value:function(){var e=this._getInputWithName("x"),t=m(e.logicalShape,4),n=t[0],i=t[3],r=m(this._options.size,2);return[n,r[0],r[1],i]}},{key:"_updateAdditionalUniforms",value:function(e){var t=m(this._getInputWithName("x").logicalShape,3),n=(t[0],t[1]),i=t[2],r={targetSizeRC:this.getSize(),sourceSizeRC:[n,i]};e.setUniforms(r)}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec2 sourceSizeRC;\n      uniform vec2 targetSizeRC;\n\n      void main() {\n        vec2 effectiveInSize = sourceSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveOutSize = targetSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveInputOverOutputRatioRC = effectiveInSize / effectiveOutSize;\n\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(min(sourceSizeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}]),t}();w.prototype.availableOptions=r()({size:{type:y.OptionType.ARRAY,required:!0},alignCorners:{type:y.OptionType.BOOLEAN,default:!0}},v.b.prototype.availableOptions),t.a=w},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(13),d=n(4),_=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.b),_(t,[{key:"_calculateOutputShape",value:function(){var e=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var t=this.getInputs()[0].logicalShape;if(e.length!==t.length)throw new Error("Not enough or too many paddings for input shape "+t);return e.map(function(e,n){return e[0]+t[n]+e[1]})}},{key:"_getTensorOperationSource",value:function(){var e=this.getInputs()[0].logicalShape.length,t="vec"+e;return"\n      i"+t+" start = i"+t+"("+this._options.paddings.map(function(e){return e[0]}).join(",")+");\n\n      void main () {\n        i"+t+" outC = getOutputCoords();\n        "+t+" coordsInInput = "+t+"(outC - start);\n        i"+t+" coords = i"+t+"(clamp(coordsInInput, "+t+"(0.0), "+t+"(x_shape - 1)));\n        setOutput(getX("+["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e).join(",")+"));\n      }\n    "}}]),t}();g.prototype.availableOptions=r()({paddings:{type:d.OptionType.ARRAY,required:!0}},p.b.prototype.availableOptions),t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.b),h(t,[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      float kernel[9];\n      vec2 offset[9];\n      float factor = 0.1;\n    \n      void main ()\n      {\n        kernel[0] = 0.;\n        kernel[1] = -1. * factor;\n        kernel[2] = 0.;\n        kernel[3] = -1. * factor;\n        kernel[4] = 1. + 4. * factor;\n        kernel[5] = -1. * factor;\n        kernel[6] = 0.;\n        kernel[7] = -1. * factor;\n        kernel[8] = 0.;\n\n        float step_w = 1.0 / float(x_sizeRC.y);\n        float step_h = 1.0 / float(x_sizeRC.x);\n\n        offset[0] = vec2(-step_w, -step_h);\n        offset[1] = vec2(0.0, -step_h);\n        offset[2] = vec2(step_w, -step_h);\n        offset[3] = vec2(-step_w, 0.0);\n        offset[4] = vec2(0.0, 0.0);\n        offset[5] = vec2(step_w, 0.0);\n        offset[6] = vec2(-step_w, step_h);\n        offset[7] = vec2(0.0, step_h);\n        offset[8] = vec2(step_w, step_h);\n\n        vec2 uv = (gl_FragCoord.xy + halfCR) / x_texRC.yx;\n        vec4 sum = vec4(0.0);\n        for (int i = 0; i < 9; i++) {\n          vec4 color = texture2D(x, uv.xy + offset[i]);\n          sum += color * kernel[i];\n        }\n\n        gl_FragColor = sum;\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}]),t}();t.a=p},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._assetsByGroupId={}}return o(e,[{key:"addAsset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._assetsByGroupId[e]?n?this._assetsByGroupId[e].unshift(t):this._assetsByGroupId[e].push(t):this._assetsByGroupId[e]=[t]}},{key:"setAssets",value:function(e,t){this._assetsByGroupId[e]=t}},{key:"getAssets",value:function(e){return this._assetsByGroupId[e]=this._assetsByGroupId[e]||[],this._assetsByGroupId[e]}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(11),a=n.n(o),s=n(9),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=2*Math.PI,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._serializeOperations=this._serializeOperations.bind(this)}return u(e,[{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=s.k.defaults(e,{image:!0});var t={version:this.constructor.version};return this._serializeInputImage(t).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(e){var t=this._editor.getImage(),n=t.width,i=t.height;if(!this._options.image)return e.inputImage={width:n,height:i},a.a.resolve(e);var r=s.k.createCanvas();r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);var o=r.toDataURL(s.e.PNG);return e.inputImage={type:s.e.PNG,data:o.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i},a.a.resolve(e)}},{key:"_serializeOperations",value:function(e){var t=this,n=[];return this._editor.operations.getStack().forEach(function(e){var i=t._serializeOperation(e,n);i&&n.push(i)}),e.operations=n.filter(function(e){return e}),a.a.resolve(e)}},{key:"_serializeOperation",value:function(e,t){switch(e.constructor.identifier){case"transform":return this._serializeTransformOperation(e);case"orientation":return this._serializeOrientationOperation(e);case"filter":return this._serializeFilterOperation(e);case"adjustments":return this._serializeAdjustmentsOperation(e);case"sprite":return this._serializeSpriteOperation(e,t);case"radial-focus":return this._serializeRadialFocusOperation(e);case"mirrored-focus":return this._serializeLinearFocusOperation(e);default:s.g.warn("Unable to serialize operation of type "+e.constructor.identifier)}}},{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation"],!0);return t.rotation=(t.rotation+l)%l,{type:"crop",options:t}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(e){return"identity"===e.getIdentifier()?null:{type:"filter",options:{intensity:e.getIntensity(),name:e.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(e){var t=e.availableOptions,n={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach(function(i){var r=t[i],o=e.getOption(i),a=r.minValue,s=r.midValue,u=r.maxValue;n[i]=o<=s?(o-a)/(s-a)-1:(o-s)/(u-s)}),{type:"adjustments",options:n}}},{key:"_serializeSpriteOperation",value:function(e,t){var n=this,i=t.filter(function(e){return"sprite"===e.type}),r=void 0,o=!0;if(i.length?(r=i.pop(),o=!1):r={type:"sprite",options:{sprites:[]}},e.getSprites().forEach(function(t){var i=null;t instanceof e.constructor.StickerSprite?i=n._serializeSticker(e,t):t instanceof e.constructor.TextSprite?i=n._serializeText(e,t):t instanceof e.constructor.BrushSprite?i=n._serializeBrush(e,t):t instanceof e.constructor.TextDesignSprite&&(i=n._serializeTextDesign&&n._serializeTextDesign(e,t)),i&&r.options.sprites.push(i)}),o)return r}},{key:"_serializeSticker",value:function(e,t){var n=t.getAdjustments(),i=t.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);i.name=i.identifier,delete i.identifier,i.rotation=(i.rotation+l)%l;var r=n.availableOptions;return i.adjustments={brightness:n.getBrightness()-r.brightness.default,saturation:n.getSaturation()-r.saturation.default,contrast:n.getContrast()-r.contrast.default},{type:"sticker",options:i}}},{key:"_serializeText",value:function(e,t){var n=t.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+l)%l,{type:"text",options:n}}},{key:"_serializeBrush",value:function(e,t){var n=this;return{type:"brush",options:{paths:t.getPaths().map(function(e){return n._serializePath(e)})}}}},{key:"_serializePath",value:function(e){var t=e.getBrush().serializeOptions(["color","size"],!0);return t.points=e.getControlPoints().map(function(e){return e.getPosition().toObject()}),t}},{key:"_serializeRadialFocusOperation",value:function(e){return{type:"focus",options:{type:"radial",options:e.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){return{type:"focus",options:{type:"linear",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))}),n}}]),e}();t.a=c,c.version="1.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(2),o=n.n(r),a=n(3),s=n.n(a),u=n(0),l=n.n(u),c=n(1),f=n.n(c),h=n(78),p=n.n(h),d=n(11),_=n.n(d),g=n(9),y=n(478),v=n(134),m=n(479),b=n(48),w=n(135),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=void 0;void 0!==g.j.Operations.SpriteOperation&&(k=g.j.Operations.SpriteOperation.BrushSprite);var T=function(){function e(t,n){i(this,e),this._editor=t,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new y.a(this._ui,this._getOptions("filter")),this._stickerManager=new v.a(this._ui,this._getOptions("sticker")),this._brushManager=new m.a(this._ui,this._getOptions("brush")),this._fontManager=new b.a(this._ui,this._getOptions("text"))}return x(e,[{key:"_getOptions",value:function(e){var t=this._editor.controls,n={};t&&t.get(e)&&(n=t.get(e).defaultOptions);var i=this._editor.getOptions();return g.k.deepDefaults({},i.editor.controlsOptions[e]||{},n)}},{key:"deserialize",value:function(){var e=this;return this._validateVersion().then(function(){return e._deserializeInputImage()}).then(function(){return e._deserializeOperations()})}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?_.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):_.a.resolve()}},{key:"_deserializeInputImage",value:function(){var e=this;return new _.a(function(t,n){var i=e._data.inputImage,r=i.data,o=i.type;if(r&&o){var a=new window.Image;a.addEventListener("load",function(){e._editor.setImage(a),t()}),a.src="data:"+o+";base64,"+r}else t()})}},{key:"_deserializeOperations",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new _.a(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return _.a.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}(p.a.mark(function e(){var t,n,i,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._data.operations,n=[],i=0;case 3:if(!(i<t.length)){e.next=12;break}return r=t[i],e.next=7,this._deserializeOperation(r);case 7:o=e.sent,n.push(o);case 9:i++,e.next=3;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_deserializeOperation",value:function(e){switch(e.type){case"crop":return this._deserializeCropOperation(e);case"orientation":return this._deserializeOrientationOperation(e);case"filter":return this._deserializeFilterOperation(e);case"adjustments":return this._deserializeAdjustmentsOperation(e);case"sprite":return this._deserializeSpriteOperation(e);case"focus":return this._deserializeFocusOperation(e)}}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=g.n.fromObject(t.start),r=g.n.fromObject(t.end);n>Math.PI&&(n-=2*Math.PI);var o={start:i,end:r};void 0!==n&&(o.rotation=n);var a=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(a,o),a.set(o),_.a.resolve(a)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),_.a.resolve(n)):_.a.resolve()}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then(function(e){var i=t._editor.operations.getOrCreate("filter");return i.set({identifier:n.name,filter:e,intensity:n.intensity}),i}):(g.g.warn("Deserializer","Unknown filter `"+n.name+"`"),_.a.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(e){var t=g.j.Operations.AdjustmentsOperation,n=e.options,i={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach(function(e){if(void 0!==n[e]){var r=t.prototype.availableOptions[e],o=r.minValue,a=r.midValue,s=r.maxValue,u=n[e];u=u<0?a+(a-o)*u:a+(s-a)*u,i[e]=u}}),_.a.resolve(this._editor.operations.getOrCreate("adjustments",i))}},{key:"_deserializeSpriteOperation",value:function(e){var t=this,n=e.options,i=this._editor.operations.getOrCreate("sprite");if(!i)return _.a.resolve();var r=n.sprites.map(function(e){return t._deserializeSprite(i,e)}).filter(function(e){return e});return _.a.all(r).then(function(e){return i.setSprites(e.filter(function(e){return e})),i})}},{key:"_deserializeSprite",value:function(e,t){switch(t.type){case"sticker":return this._deserializeSticker(e,t);case"text":return this._deserializeText(e,t);case"brush":return this._deserializeBrush(e,t);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(e,t)}}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=g.j.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.name),a=this._stickerManager.getURLForSticker(o);return o?new _.a(function(t,o){var s=new window.Image;s.addEventListener("load",function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,o=r.rotation,a=r.flipHorizontally,u=r.flipVertically,l={identifier:r.name,image:s,position:g.n.fromObject(r.position),dimensions:g.n.fromObject(r.dimensions),rotation:o,flipHorizontally:a,flipVertically:u,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==r.adjustments[e]&&(l.adjustments[e]=r.adjustments[e]+n[e].default)}),t(e.createSticker(l))}),s.crossOrigin=n._editor.getCrossOrigin(),s.src=n._editor.getUI().getAssetPath(a)}):(g.g.warn("Deserializer","Unknown sticker '"+r.name+"'. Skipping sprite."),_.a.resolve())}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontFamily,a=n.fontWeight,s=n.alignment,u=n.rotation,l=n.maxWidth,c=n.color,f=n.backgroundColor,h=new w.a(this._ui),p=this._fontManager.getFontByFontFamily(o);return p||(p=this._fontManager.getDefaultFont()),h.setFonts([p]),h.load().then(function(){var t=e.createText({fontSize:i,lineHeight:r,fontFamily:o,fontWeight:a,alignment:s,rotation:u,maxWidth:l,text:n.text,color:g.b.fromArray(c),backgroundColor:g.b.fromArray(f),position:g.n.fromObject(n.position)});return t._edited=!0,t})}},{key:"_deserializeBrush",value:function(e,t){var n=this,i=t.options.paths,r=e.createBrush();return i.forEach(function(e){n._deserializeBrushPath(r,e)}),_.a.resolve(r)}},{key:"_deserializeBrushPath",value:function(e,t){var n=t.points,i=this._createBrushForPath(t),r=e.createPath(i);r.setClosed(!0),n.forEach(function(e){r.addControlPoint(g.n.fromObject(e))})}},{key:"_createBrushForPath",value:function(e){var t=e.color,n=e.size,r={color:g.b.fromArray(t),size:n},a=this._brushManager.getFirstBrush();if(a.prototype&&a.prototype instanceof k)return new a(r);var u=g.k.extend({},a);delete u.image;var l=function(e){function t(){return i(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||f()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=s()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.a?o()(e,t):e.__proto__=t)}(t,k),t}();return l.identifier=a.identifier,new l(g.k.extend({},u,r))}},{key:"_deserializeFocusOperation",value:function(e){var t=e.options.options;switch(e.options.type){case"radial":var n=t.position,i=t.radius,r=t.gradientRadius,o=t.blurRadius;return _.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:g.n.fromObject(n),radius:i,gradientRadius:r,blurRadius:o}));case"linear":var a=t.start,s=t.end,u=t.size,l=t.gradientSize,c=t.blurRadius;return _.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:g.n.fromObject(a),end:g.n.fromObject(s),size:u,gradientSize:l,blurRadius:c}))}}},{key:"_getInputDimensionsForOperation",value:function(e){var t=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(i){i===e&&(t=!0),t||(n=i.getNewDimensions(n))}),n}}]),e}();t.a=T,T.version="1.0.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(197),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=2*Math.PI,d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.a),h(t,[{key:"_serializeTransformOperation",value:function(e){var t=e.serializeOptions(["start","end","rotation","textureScale"],!0);return t.rotation=(t.rotation+p)%p,1!==t.textureScale&&(t.dimensions=e.getNewDimensions(e.getInputDimensions(!1))),delete t.textureScale,{type:"crop",options:t}}}]),t}();t.a=d,d.version="1.0.1"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(11),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(198),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,g.a),y(t,[{key:"_deserializeOperation",value:function(e){return"selective-blur"===e.type?this._deserializeSelectiveBlurOperation(e):function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeCropOperation",value:function(e){var t=e.options,n=t.rotation,i=_.n.fromObject(t.start),r=_.n.fromObject(t.end),o=t.dimensions?_.n.fromObject(t.dimensions):null;if(r.x-i.x<=0||r.y-i.y<=0)throw new Error("A crop should not result in negative or zero dimensions - start: "+i+" - end: "+r);n>Math.PI&&(n-=2*Math.PI);var a={start:i,end:r};void 0!==n&&(a.rotation=n);var s=this._editor.operations.getOrCreate("transform");if(!s)return h.a.resolve();if(this._editor.broadcastTransform(s,a),s.set(a),o){var u=r.clone().subtract(i),l=s.getInputDimensions(!1).multiply(u);s.setTextureScale(o.x/l.x)}return h.a.resolve(s)}}]),t}();t.a=v,v.version="1.0.1"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(199),d=n(92),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.a),_(t,[{key:"_serializeSticker",value:function(e,n){var i=e.getInputDimensions(!1),r=g(t.prototype.__proto__||h()(t.prototype),"_serializeSticker",this).call(this,e,n);return"none"!==n.getTintMode()&&(r.options.tintColor=n.serializeOption("tintColor",!0)),r.options.dimensions=n.getDimensions().clone().divide(i.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}},{key:"_serializePath",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializePath",this).call(this,e),i=e.getBrush();return i.hasOption("hardness")&&(n.hardness=i.getOption("hardness")),n}},{key:"_serializeOperation",value:function(e,n){return"frame"===e.constructor.identifier?(this._serializeFrameOperation(e,n),null):"overlay"===e.constructor.identifier?(this._serializeOverlayOperation(e,n),null):g(t.prototype.__proto__||h()(t.prototype),"_serializeOperation",this).call(this,e,n)}},{key:"_serializeFrameOperation",value:function(e,t){var n=t.filter(function(e){return"sprite"===e.type}),i=void 0;n.length?i=n.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"frame",options:this._getFrameOptions(e)})}},{key:"_serializeOverlayOperation",value:function(e,t){if(e.getIdentifier()){var n=t.filter(function(e){return"sprite"===e.type}),i=void 0;n.length?i=n.pop():(i={type:"sprite",options:{sprites:[]}},t.push(i)),i.options.sprites.push({type:"overlay",options:{identifier:e.getIdentifier(),intensity:e.getAlpha(),blendMode:d.a[e.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(e){return{identifier:e.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializeOrientationOperation",this).call(this,e);return 90!==n.options.rotation&&270!==n.options.rotation||(n.options.flipHorizontally=!n.options.flipHorizontally,n.options.flipVertically=!n.options.flipVertically),n}},{key:"_serializeTransformOperation",value:function(e){var n=this._editor.operations;if(n.exists("orientation")){e=e.clone();var i=n.get("orientation");e.rotate(-i.getRotation()),i.getFlipVertically()&&(e.flip("vertical"),e.setRotation(-1*e.getRotation())),i.getFlipHorizontally()&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation()))}var r=g(t.prototype.__proto__||h()(t.prototype),"_serializeTransformOperation",this).call(this,e);return r.type="transform",r}},{key:"_serializeText",value:function(e,n){var i=g(t.prototype.__proto__||h()(t.prototype),"_serializeText",this).call(this,e,n),r=e.getInputDimensions(!1);return i.options.fontIdentifier=n.getFontIdentifier(),i.options.maxWidth=i.options.maxWidth*r.x/r.min(),delete i.options.fontFamily,i}},{key:"_serializeFilterOperation",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializeFilterOperation",this).call(this,e);return n?(n.options.identifier=n.options.name,delete n.options.name,n):null}},{key:"_serializeRadialFocusOperation",value:function(e){var n=g(t.prototype.__proto__||h()(t.prototype),"_serializeRadialFocusOperation",this).call(this,e),i=n.options.options;return i.start=i.position,delete i.position,i.end={x:i.start.x+i.radius,y:i.start.y},delete i.radius,n}}]),t}();t.a=y,y.version="2.0.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(11),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(200),y=n(484),v=n(485),m=n(134),b=n(486),w=n(135),x=n(71),k=n(92),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},E=_.k.flipObject(k.a),R=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));o._frameManager=new y.a(o._ui,o._getOptions("frame"));var a=o._getOptions("overlay");return a&&(o._overlayManager=new v.a(o._ui,a)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,g.a),T(t,[{key:"_deserializeSprite",value:function(e,n){return"frame"===n.type?this._deserializeFrame(e,n):"overlay"===n.type?this._deserializeOverlay(e,n):C(t.prototype.__proto__||d()(t.prototype),"_deserializeSprite",this).call(this,e,n)}},{key:"_deserializeOperation",value:function(e){return"transform"===e.type?this._deserializeTransformOperation(e):C(t.prototype.__proto__||d()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){if(this._data.meta&&"html5"!==this._data.meta.platform)return C(t.prototype.__proto__||d()(t.prototype),"_deserializeOrientationOperation",this).call(this,e);var n=e.options,i=n.rotation,r=n.flipHorizontally,o=n.flipVertically,a=90===i&&!r&&!o;return a|=90===i&&r&&o,a|=270===i&&!r&&!o,(a|=270===i&&r&&o)&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),C(t.prototype.__proto__||d()(t.prototype),"_deserializeOrientationOperation",this).call(this,e)}},{key:"_deserializeTransformOperation",value:function(e){var n=this;return C(t.prototype.__proto__||d()(t.prototype),"_deserializeCropOperation",this).call(this,e).then(function(e){if(e){var t=_.k.Array.find(n._data.operations,function(e){return"orientation"===e.type});if(t){var i=t.options,r=i.rotation,o=i.flipHorizontally,a=i.flipVertically;90!==r&&270!==r||(!o&&a||o&&!a)&&(o=!o,a=!a),e.rotate(i.rotation),o&&(e.flip("horizontal"),e.setRotation(-1*e.getRotation())),a&&(e.flip("vertical"),e.setRotation(-1*e.getRotation()))}return e}})}},{key:"_deserializeFrame",value:function(e,t){var n=this,i=t.options.identifier,r=this._frameManager.getFrameByIdentifier(i);if(!r)return _.g.warn("Deserializer","Unknown frame `"+i+"`. Skipping frame."),h.a.resolve();var o=new b.a(this._ui,r);return o.load().then(function(){n._editor.operations.getOrCreate("frame",{frame:o.getFrame()})})}},{key:"_deserializeOverlay",value:function(e,t){var n=this,i=t.options,r=i.blendMode,o=i.intensity,a=i.identifier,s=this._overlayManager.getOverlayByIdentifier(a);if(!s)return _.g.warn("Deserializer","Unknown overlay `"+a+"`. Skipping overlay."),h.a.resolve();var u=this._editor.getUI().getAssetPath(s.image);return x.a.load(u).then(function(e){n._editor.operations.getOrCreate("overlay",{alpha:o,identifier:a,blendMode:parseInt(E[r||s.blendMode],10),image:e})})}},{key:"_createBrushForPath",value:function(e){var n=C(t.prototype.__proto__||d()(t.prototype),"_createBrushForPath",this).call(this,e);return void 0!==e.hardness&&n.hasOption("hardness")&&n.setHardness(e.hardness),n}},{key:"_deserializeSticker",value:function(e,t){var n=this,i=_.j.Operations.SpriteOperation,r=t.options,o=this._stickerManager.getStickerByIdentifier(r.identifier),a=m.a.getURLForSticker(o,"base");if(!o)return _.g.warn("Deserializer","Unknown sticker `"+r.identifier+"`. Skipping sprite."),h.a.resolve();var s=e.getInputDimensions(!1);return new h.a(function(t,u){var l=new window.Image;l.addEventListener("load",function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,a=r.rotation,u=r.flipHorizontally,c=r.flipVertically,f={identifier:r.identifier,image:l,position:_.n.fromObject(r.position),dimensions:_.n.fromObject(r.dimensions).multiply(s.min()),rotation:a,flipHorizontally:u,flipVertically:c,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==r.adjustments[e]&&(f.adjustments[e]=r.adjustments[e]+n[e].default)}),void 0!==r.tintColor&&void 0!==o.tintMode&&(f.tintColor=_.b.fromArray(r.tintColor),f.tintMode=o.tintMode),t(e.createSticker(f))}),l.crossOrigin=n._editor.getCrossOrigin(),l.src=n._editor.getUI().getAssetPath(a)})}},{key:"_deserializeFilterOperation",value:function(e){var t=this,n=e.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then(function(e){var i=t._editor.operations.getOrCreate("filter");if(i)return i.set({identifier:n.identifier,filter:e,intensity:n.intensity}),i}):(_.g.warn("Deserializer","Unknown filter `"+n.identifier+"`"),h.a.resolve())}},{key:"_deserializeFocusOperation",value:function(e){var n=e.options,i=n.options;if("radial"!==n.type)return C(t.prototype.__proto__||d()(t.prototype),"_deserializeFocusOperation",this).call(this,e);var r=this._editor.getImage(),o=r.width/r.height,a=i.start,s=i.end,u=i.gradientRadius,l=i.blurRadius,c=_.n.fromObject(s).subtract(_.n.fromObject(a)).multiply(o,1).len();return h.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:_.n.fromObject(a),radius:c,gradientRadius:u,blurRadius:l}))}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,u=n.maxWidth,l=n.color,c=n.backgroundColor,f=new w.a(this._ui),h=this._fontManager.getVariationByIdentifier(o);return h?f.setFonts([h.getFont()]):h=this._fontManager.getDefaultFont(),f.load().then(function(){var t=e.getInputDimensions(!1),o=u*t.min()/t.x,f=e.createText({fontSize:i,lineHeight:r,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:a,rotation:s,maxWidth:o,text:n.text,color:_.b.fromArray(l),backgroundColor:_.b.fromArray(c),position:_.n.fromObject(n.position)});return f._edited=!0,f})}}]),t}();t.a=R,R.version="2.0.0"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(201),y=n(488),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),m(t,[{key:"serialize",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(t.prototype.__proto__||d()(t.prototype),"serialize",this).call(this,n).then(function(t){return t.meta={platform:"html5",version:e._editor.getSDK().version,createdAt:_.k.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t})}},{key:"_serializeSticker",value:function(e,n){var i=b(t.prototype.__proto__||d()(t.prototype),"_serializeSticker",this).call(this,e,n);return i.options.alpha=n.getAlpha(),i.options.tintColor&&(i.options.tintColor={rgba:i.options.tintColor}),i}},{key:"_serializeText",value:function(e,n){var i=b(t.prototype.__proto__||d()(t.prototype),"_serializeText",this).call(this,e,n);return i.options.color={rgba:i.options.color},i.options.backgroundColor={rgba:i.options.backgroundColor},i.options.flipHorizontally=!1,i.options.flipVertically=!1,delete i.options.fontWeight,i}},{key:"_serializePath",value:function(e){var n=b(t.prototype.__proto__||d()(t.prototype),"_serializePath",this).call(this,e);delete n.hardness,delete n.size,delete n.color;var i=e.getBrush();n.brush=i.serializeOptions(["identifier","size","color"],!0),void 0===n.brush.identifier&&delete n.brush.identifier,n.brush.color={rgba:n.brush.color};var r=i.getOption("hardness");return"undefined"!==r&&(n.brush.hardness=r),n}},{key:"_serializeFrameOperation",value:function(e,n){b(t.prototype.__proto__||d()(t.prototype),"_serializeFrameOperation",this).call(this,e,n);var i=n.filter(function(e){return"sprite"===e.type});if(i.length){var r=i.pop().options.sprites.filter(function(e){return"frame"===e.type})[0];e.getTintColor().equals(new _.b(1,1,1,0))||(r.options.tintColor={rgba:e.serializeOption("tintColor",!0)});var o=e.serializeOptions(["scale","alpha"],!0);r.options=_.k.extend(r.options,o),r.options.size=r.options.scale,delete r.options.scale}}},{key:"_serializeTransformOperation",value:function(e){var n=b(t.prototype.__proto__||d()(t.prototype),"_serializeTransformOperation",this).call(this,e);if(e._ratio){var i=void 0;i=e._ratio instanceof y.a?e._ratio.getIdentifier():e._ratio.identifier,n.options.meta={identifier:i}}return delete n.options.scale,n}},{key:"_serializeAdjustmentsOperation",value:function(e){var n=b(t.prototype.__proto__||d()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i=e.availableOptions,r={};return["gamma","whites","blacks","temperature"].forEach(function(t){var n=i[t],o=e.getOption(t),a=n.minValue,s=n.midValue,u=n.maxValue;r[t]=o<=s?(o-a)/(s-a)-1:(o-s)/(u-s)}),n.options=v({},n.options,r),n}},{key:"_serializeOperation",value:function(e,n){switch(e.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(e);case"linear-focus":return this._serializeLinearFocusOperation(e);case"blur":return this._serializeBlurOperation(e);default:return b(t.prototype.__proto__||d()(t.prototype),"_serializeOperation",this).call(this,e,n)}}},{key:"_serializeMirroredFocusOperation",value:function(e){return{type:"focus",options:{type:"mirrored",options:e.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(e){var t=e.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return t.start=t.controlPoint1,delete t.controlPoint1,t.end=t.controlPoint2,delete t.controlPoint2,{type:"focus",options:{type:"linear",options:t}}}},{key:"_serializeBlurOperation",value:function(e){return{type:"focus",options:{type:"gaussian",options:e.serializeOptions(["blurRadius"],!0)}}}}]),t}();t.a=w,w.version="3.0.0"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=_()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}var a=n(6),s=n.n(a),u=n(0),l=n.n(u),c=n(5),f=n.n(c),h=n(2),p=n.n(h),d=n(3),_=n.n(d),g=n(11),y=n.n(g),v=n(1),m=n.n(v),b=n(9),w=n(202),x=n(134),k=n(80),T=n(71),C=n(48),E=s.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var r=f()(t,n);if(void 0===r){var o=m()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},S=void 0;void 0!==b.j.Operations.SpriteOperation&&(S=b.j.Operations.SpriteOperation.BrushSprite.Brush);var I=function(e){function t(){return i(this,t),r(this,(t.__proto__||m()(t)).apply(this,arguments))}return o(t,w.a),R(t,[{key:"_deserializeSticker",value:function(e,t){var n=b.j.Operations.SpriteOperation,i=t.options,r=this._stickerManager.getStickerByIdentifier(i.identifier);if(!r)return b.g.warn("Deserializer","Unknown sticker `"+i.identifier+"`. Skipping sprite."),y.a.resolve();var o=r.images.mediaBase,a=x.a.getURLForSticker(r,"base"),s=o.rawData?o.uris[0]:this._editor.getUI().getAssetPath(a),u=e.getInputDimensions(!1);return T.a.load(s).then(function(t){var o=n.StickerSprite.prototype.availableOptions.adjustments.structure,a=i.rotation,s=i.flipHorizontally,l=i.flipVertically,c={identifier:i.identifier,image:t,position:b.n.fromObject(i.position),dimensions:b.n.fromObject(i.dimensions).multiply(u.min()),rotation:a||0,flipHorizontally:s,flipVertically:l,resizeMode:r.resizeMode||"keepAspect",adjustments:{}};return void 0!==i.adjustments&&["brightness","contrast","saturation"].forEach(function(e){void 0!==i.adjustments[e]&&(c.adjustments[e]=i.adjustments[e]+o[e].default)}),void 0!==i.tintMode&&void 0!==i.tintColor?(c.tintColor=b.b.fromArray(i.tintColor.rgba),c.tintMode=i.tintMode):void 0!==i.tintColor&&void 0!==r.tintMode&&(c.tintColor=b.b.fromArray(i.tintColor.rgba),c.tintMode=r.tintMode),void 0!==i.alpha&&(c.alpha=i.alpha),e.createSticker(c)})}},{key:"_deserializeTransformOperation",value:function(e){return O(t.prototype.__proto__||m()(t.prototype),"_deserializeTransformOperation",this).call(this,e).then(function(e){if(e)return e._ratio=null,e})}},{key:"_deserializeInputImage",value:function(){var e=this,t=this._data.image,n=t.data,i=t.type,r=t.uri;return n&&i&&(r="data:"+i+";base64,"+n),r?T.a.load(r).then(function(t){e._editor.setImage(t)}):y.a.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(e){var n=b.j.Operations.AdjustmentsOperation;return O(t.prototype.__proto__||m()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then(function(t){if(!t)return null;var i=e.options,r={};return["gamma","whites","blacks","temperature"].forEach(function(e){if(void 0!==i[e]){var t=n.prototype.availableOptions[e],o=t.minValue,a=t.midValue,s=t.maxValue,u=i[e];u=u<0?a+(a-o)*u:a+(s-a)*u,r[e]=u}}),t.set(r),t})}},{key:"_deserializeFocusOperation",value:function(e){var n=e.options.options;switch(e.options.type){case"radial":return O(t.prototype.__proto__||m()(t.prototype),"_deserializeFocusOperation",this).call(this,e);case"linear":var i=n.start,r=n.end,o=n.blurRadius;return y.a.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:b.n.fromObject(i),controlPoint2:b.n.fromObject(r),blurRadius:o}));case"mirrored":var a=n.start,s=n.end,u=n.size,l=n.gradientSize,c=n.blurRadius;return y.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:b.n.fromObject(a),end:b.n.fromObject(s),size:u,gradientSize:l,blurRadius:c}));case"gaussian":var f=n.blurRadius;return y.a.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:f}))}}},{key:"_deserializeText",value:function(e,t){var n=t.options,i=n.fontSize,r=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,u=n.maxWidth,l=n.color,c=n.backgroundColor,f=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(o);return h?f.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),f.load().then(function(){var t=e.getInputDimensions(!1),o=u*t.min()/t.x,f=e.createText({fontSize:i,lineHeight:r,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:a,rotation:s,maxWidth:o,text:n.text,color:b.b.fromArray(l.rgba),backgroundColor:b.b.fromArray(c.rgba),position:b.n.fromObject(n.position)});return f._edited=!0,f})}},{key:"_createBrushForPath",value:function(e){var t=e.brush,n=t.identifier,a=t.color,s=t.size,u=t.hardness,l={color:b.b.fromArray(a.rgba),size:s};void 0!==u&&(l.hardness=u);var c=this._brushManager.getBrushByIdentifier(n);if(c||(c=this._brushManager.getFirstBrush()),c.prototype&&c.prototype instanceof S)return new c(l);var f=b.k.extend({},c);delete f.image;var h=function(e){function t(){return i(this,t),r(this,(t.__proto__||m()(t)).apply(this,arguments))}return o(t,S),t}();return h.identifier=c.identifier,new h(b.k.extend({},f,l))}},{key:"_deserializeFrame",value:function(e,n){var i=this;return O(t.prototype.__proto__||m()(t.prototype),"_deserializeFrame",this).call(this,e,n).then(function(){var e=i._editor.operations.get("frame"),t=n.options,r=t.size,o=t.alpha,a=t.tintColor,s={};void 0!==r&&(s.scale=r),void 0!==o&&(s.alpha=o),void 0!==a&&(s.tintColor=b.b.fromArray(a.rgba)),e.set(s)})}},{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,u=i.text,l=i.color,c=i.width,f=i.seed,h=i.inverted,p=i.identifier;p===b.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?p=b.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:p===b.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(p=b.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var d=new k.a(this._ui,this._getOptions("textdesign")),_=new C.a(this._ui,{fonts:b.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),g=e.constructor.TextDesignSprite.AssetManager,y=this._ui.getFontLoader(),v=new(d.getLayoutByIdentifier(p));return y.setFonts(_.getFonts()),g.setFonts(E({},g.getFonts(),_.getVariationsByIdentifier())),y.load().then(function(){var t=v.getImagePaths().map(function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}});return g.loadImages(t).then(function(){return v.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:u,color:b.b.fromArray(l.rgba),width:c,seed:f,inverted:h,layout:v})})})}}]),t}();t.a=I,I.version="3.0.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=(n(9),n(203)),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.a),h(t,[{key:"_serializeTextDesign",value:function(e,t){var n=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);n.color={rgba:n.color};var i=t.getLayout();return i&&(n.identifier=i.constructor.identifier),{type:"textdesign",options:n}}}]),t}();t.a=p,p.version="3.1.0"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(9),d=n(204),_=n(80),g=n(48),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),v(t,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,u=i.text,l=i.color,c=i.width,f=i.seed,h=i.inverted,d=i.identifier;d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v=new _.a(this._ui,this._getOptions("textdesign")),m=new g.a(this._ui,{fonts:p.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),b=e.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(d));return w.setFonts(m.getFonts()),b.setFonts(y({},b.getFonts(),m.getVariationsByIdentifier())),w.load().then(function(){var t=x.getImagePaths().map(function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}});return b.loadImages(t).then(function(){return x.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:u,color:p.b.fromArray(l.rgba),width:c,seed:f,inverted:h,layout:x})})})}}]),t}();t.a=m,m.version="3.1.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(205),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.a),h(t,[{key:"_serializeTextDesign",value:function(e,t){var n=t.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);n.color={rgba:n.color};var i=t.getLayout();return i&&(n.identifier=i.constructor.identifier),n.padding*=n.width,{type:"textdesign",options:n}}}]),t}();t.a=p,p.version="3.2.0"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(9),d=n(206),_=n(80),g=n(48),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),v(t,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,u=i.text,l=i.color,c=i.width,f=i.seed,h=i.inverted,d=i.identifier;d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===p.j.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=p.j.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v="padding"in i?i.padding/c:-1,m=new _.a(this._ui,this._getOptions("textdesign")),b=new g.a(this._ui,{fonts:p.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=e.constructor.TextDesignSprite.AssetManager,x=this._ui.getFontLoader(),k=new(m.getLayoutByIdentifier(d));return x.setFonts(b.getFonts()),w.setFonts(y({},w.getFonts(),b.getVariationsByIdentifier())),x.load().then(function(){var t=k.getImagePaths().map(function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}});return w.loadImages(t).then(function(){return k.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:u,color:p.b.fromArray(l.rgba),width:c,seed:f,inverted:h,layout:k,padding:v})})})}}]),t}();t.a=m,m.version="3.2.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(207),d=n(92),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.a),_(t,[{key:"_serializeOperation",value:function(e,n){switch(e.constructor.identifier){case"artfilter":return this._serializeStyle(e);default:return function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_serializeOperation",this).call(this,e,n)}}},{key:"_serializeOrientationOperation",value:function(e){return{type:"orientation",options:e.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeStyle",value:function(e){var t=e.getOptions(),n=t.identifier,i=t.intensity,r=t.blendMode,o=e.getStyleTransferModel().getOptions(),a=o.tileEdgeLength,s=o.overlappingFactor;return{type:"artFilter",options:{identifier:n,intensity:i,blendMode:d.a[r],tileEdgeLength:a,overlappingFactor:s}}}}]),t}();t.a=g,g.version="3.4.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(11),h=n.n(f),p=n(1),d=n.n(p),_=n(9),g=n(208),y=(n(80),n(48),n(496)),v=n(92),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=_.k.flipObject(v.a),w=_.j.Operations.ArtFilterOperation,x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,g.a),m(t,[{key:"_deserializeOperation",value:function(e){return"artFilter"===e.type?this._deserializeStyle(e):function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_deserializeOperation",this).call(this,e)}},{key:"_deserializeOrientationOperation",value:function(e){var t=e.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(t),h.a.resolve(n)):h.a.resolve()}},{key:"_deserializeStyle",value:function(e){var t=this,n=e.options,i=n.identifier,r=n.intensity,o=n.blendMode,a=n.tileEdgeLength,s=n.overlappingFactor;return i?w.isSupported(this._editor.getSDK())?new y.a(this._ui,this._getOptions("artfilter")).instantiateStyleTransferModelForArtFilterWithIdentifier(i,{tileEdgeLength:a,overlappingFactor:s}).catch(function(e){_.g.warn("Could not deserialize art filter: "+e)}).then(function(e){t._editor.operations.getOrCreate("artfilter",{identifier:i,styleTransferModel:e,intensity:r,blendMode:parseInt(b[o||o],10)})}):(_.g.warn("Can't restore Art Filters, as they're not supported on this platform."),h.a.resolve()):(_.g.warn("Found invalid Art Filter serialization."),h.a.resolve())}}]),t}();t.a=x,x.version="3.4.0"},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(209),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();t.a=c,c.version="3.5.0"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(9),d=n(210),_=n(80),g=n(48),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),v(t,[{key:"_deserializeTextDesign",value:function(e,t){var n=this,i=t.options,r=i.position,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically,u=i.text,l=i.color,c=i.width,f=i.seed,h=i.inverted,d=i.identifier,v="padding"in i?i.padding/c:-1,m=new _.a(this._ui,this._getOptions("textdesign")),b=new g.a(this._ui,{fonts:p.c.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=e.constructor.TextDesignSprite.AssetManager,x=this._ui.getFontLoader(),k=new(m.getLayoutByIdentifier(d));return x.setFonts(b.getFonts()),w.setFonts(y({},w.getFonts(),b.getVariationsByIdentifier())),x.load().then(function(){var t=k.getImagePaths().map(function(e){return{path:e,fullPath:n._ui.getAssetPath(e),image:null}});return w.loadImages(t).then(function(){return k.onImagesLoaded(),e.createTextDesign({position:r,rotation:o,flipHorizontally:a,flipVertically:s,text:u,color:p.b.fromArray(l.rgba),width:c,seed:f,inverted:h,layout:k,padding:v})})})}}]),t}();t.a=m,m.version="3.5.0"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(211),g=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.a),y(t,[{key:"_serializeAdjustmentsOperation",value:function(e){var n=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_serializeAdjustmentsOperation",this).call(this,e),i={},r=e.availableOptions.sharpness,o=e.getOption("sharpness"),a=r.minValue,s=r.midValue,l=r.maxValue;return i.sharpness=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s),n.options=g({},n.options,i),n}}]),t}();t.a=v,v.version="3.6.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(9),d=n(212),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),_(t,[{key:"_deserializeAdjustmentsOperation",value:function(e){var n=p.j.Operations.AdjustmentsOperation;return function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_deserializeAdjustmentsOperation",this).call(this,e).then(function(t){if(!t)return null;var i=e.options,r={};if(void 0!==i.sharpness){var o=n.prototype.availableOptions.sharpness,a=o.minValue,s=o.midValue,u=o.maxValue,l=i.sharpness;return l=l<0?s+(s-a)*l:s+(u-s)*l,r.sharpness=l,t.set(r),t}})}}]),t}();t.a=g,g.version="3.6.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(11),h=n.n(f),p=n(1),d=n.n(p),_=n(213),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_.a),g(t,[{key:"serialize",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"serialize",this).call(this,n).then(function(t){return e._serializeAssetLibrary(t).then(function(e){return e})})}},{key:"_serializeAssetLibrary",value:function(e){if(!this._editor.getDynamicAssetsLibrary)return h.a.resolve(e);var t=this._editor.getDynamicAssetsLibrary(),n=this._serializeCustomStickerAssets(e,t);return 0===n.length?h.a.resolve(e):(e.assetLibrary={assets:{stickers:n}},h.a.resolve(e))}},{key:"_serializeCustomStickerAssets",value:function(e,t){var n=t.getAssets("sticker");if(0===n.length)return[];var i={};return e.operations.filter(function(e){return"sprite"===e.type}).flatMap(function(e){return e.options.sprites}).filter(function(e){return"sticker"===e.type}).map(function(e){return e.options.identifier}).forEach(function(e){i[e]=!0}),n.filter(function(e){return i[e.identifier]}).map(function(e){var t=e.identifier,n=e.defaultName,i=e.images,r=i.mediaBase.uris[0],o=i.mediaBase.isSVG,a=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(r),s={identifier:t,name:n,raster:{type:a[1],data:a[3]}};return n&&(s.name=n),o&&(s.svg={data:i.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),s})}}]),t}();t.a=y,y.version="3.7.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(11),c=n.n(l),f=n(1),h=n.n(f),p=n(35),d=(n.n(p),n(214)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,d.a),_(t,[{key:"deserialize",value:function(){var e=this;return this._validateVersion().then(function(){return e._deserializeAssetLibrary()}).then(function(){return e._deserializeInputImage()}).then(function(){return e._deserializeOperations()})}},{key:"_deserializeAssetLibrary",value:function(){var e=this;return new c.a(function(t,n){var i=e._data;if(i.assetLibrary){var r=i.assetLibrary.assets,o=[];for(var a in r)o.push(e._deserializeCustomAssets(a,r[a]));return c.a.all(o).then(function(){t()}).catch(function(e){console.error(e),n(e)})}t()})}},{key:"_deserializeCustomAssets",value:function(e,t){switch(e){case"stickers":return this._deserializeCustomStickerAssets(t);default:return c.a.reject(new Error("Unknown asset type: "+e))}}},{key:"_deserializeCustomStickerAssets",value:function(e){var t=this,n="none",i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(n=i.controlsOptions.sticker.customStickerTintMode||"none");var r=e.map(function(e){return new c.a(function(i,r){var o=e.identifier,a=e.raster,s=void 0!==e.svg,u="data:"+a.type+";base64,"+a.data,l=new p.Image;l.onload=function(){var r=t._editor.getSDK();(l=r.correctExifOrientation(l)).toDataURL&&(u=l.toDataURL());var a={data:"",width:1,height:1};"undefined"!=typeof WEBPACK&&(a=t._stickerManager.renderStickerThumbnailFromImage(l));var c={identifier:o,defaultName:e.name||"",tintMode:n,images:{mediaBase:{uris:[u],rawData:!0,isSVG:s,width:l.width,height:l.height},mediaThumb:{uris:[a.data],rawData:!0,width:a.width,height:a.height}}};if(s){var f="data:image/svg+xml;base64,"+e.svg.data;c.images.mediaBase.uris.push(f)}i(c)},l.onerror=function(){r(new Error("Invalid base64 data: "+u))},l.src=u})});return c.a.all(r).then(function(e){t._editor.getDynamicAssetsLibrary().setAssets("sticker",e),t._stickerManager.reload()})}}]),t}();t.a=g,g.version="3.7.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(9),h=n(470),p=n(70),d=n(135),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){return f.k.byteArrayToString(f.a.decode(e))},y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return n._mediator=new f.d,n._fontLoader=new d.a(n),n._options=e,n._initOptions(),n._initEvents(),n._disposed=!1,n._editor=new h.a(n,n._options,n._mediator),n._options.editor.image&&n._editor.setImage(n._options.editor.image),f.g.setLevel(n._options.logLevel),n._v(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.d),_(t,[{key:"export",value:function(){var e;return(e=this._editor).export.apply(e,arguments)}},{key:"serialize",value:function(){var e;return(e=this._editor).serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return this._editor.deserialize(e)}},{key:"getEditor",value:function(){return this._editor}},{key:"_initOptions",value:function(){this._options=f.k.defaults(this._options,{logLevel:"warn",crossOrigin:"Anonymous",editor:{},assets:{},responsive:!1,preloader:!0}),this._options.editor=f.k.defaults(this._options.editor||{},{preferredRenderer:"webgl",displayResizeMessage:!0,controlsOptions:{},operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],maxMegaPixels:null}),this._options.editor.export=f.k.defaults(this._options.editor.export||{},{format:"image/png",type:f.i.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.assets=f.k.defaults(this._options.assets||{},{baseUrl:process.cwd(),resolver:null})}},{key:"_v",value:function(){return!!this[g("X29wdGlvbnM=")][g("bGljZW5zZQ==")]||(f.g.error(g("TGljZW5zaW5n"),g("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),f.g.error(g("TGljZW5zaW5n"),g("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"setImage",value:function(e){this._editor.setImage(e)}},{key:"getAssetPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._options.assets,r=i.baseUrl,o=i.resolver,a=r+"/"+e;return e.match(/(ftp|http|https):\/\//)&&(a=e),t&&(n||("undefined"!=typeof window&&window.devicePixelRatio||1)>1&&(e=e.replace(/\.[\w?=]+$/,function(e){return"@2x"+e})),a=r+"/ui/desktop/"+e),void 0!==o&&null!==o&&(a=o(a)),a}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}},{key:"render",value:function(e){var t=this;return this.deserialize(e).then(function(){return t.export()})}}]),t}();y.prototype.identifier="node",y.Constants=f.c,y.Events=f.c.EVENTS,y.Utils=f.m,y.JSONLoader=p.a,y.SDK=f.j,t.default=y},function(e,t,n){n(219);var i=n(10).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(14);i(i.S+i.F*!n(19),"Object",{defineProperty:n(22).f})},function(e,t,n){n(221),e.exports=n(10).Object.setPrototypeOf},function(e,t,n){var i=n(14);i(i.S,"Object",{setPrototypeOf:n(222).set})},function(e,t,n){var i=n(23),r=n(27),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(29)(Function.call,n(95).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){n(224);var i=n(10).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(14);i(i.S,"Object",{create:n(81)})},function(e,t,n){var i=n(22),r=n(27),o=n(49);e.exports=n(19)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,u=0;s>u;)i.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var i=n(34),r=n(82),o=n(227);e.exports=function(e){return function(t,n,a){var s,u=i(t),l=r(u.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(98),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},function(e,t,n){n(229),e.exports=n(10).Object.getPrototypeOf},function(e,t,n){var i=n(42),r=n(139);n(102)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(35),a=n.n(o),s=n(24),u=n(70),l=a.a.Utils,c=a.a.Math.Vector2,f={getInnerDimensionsForElement:function(e){var t=new c(e.offsetWidth,e.offsetHeight),n=window.getComputedStyle(e,null);return t.x-=parseInt(n.getPropertyValue("padding-left"),10),t.x-=parseInt(n.getPropertyValue("padding-right"),10),t.y-=parseInt(n.getPropertyValue("padding-top"),10),t.y-=parseInt(n.getPropertyValue("padding-bottom"),10),t},getEventPosition:function(e){var t=e.clientX,n=e.clientY;if(-1!==e.type.indexOf("touch")){if(!e.touches.length)return;t=e.touches[0].clientX,n=e.touches[0].clientY}return new c(t,n)},createTransparentPatternCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");return e.width=10,e.height=10,t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.fillStyle="#cccccc",t.fillRect(0,0,e.width/2,e.height/2),t.fillRect(e.width/2,e.height/2,e.width,e.height),e},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.fetch(e,t);if(!i)return s.a.info("Utils#translate","Unable to translate `"+t+"`"),null;for(var r in n)i=i.replace("${"+r+"}",n[r]);return i},fetch:function(e,t,n){for(var i=(t=(t=t.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),r=0;r<i.length&&(e=e[i[r]]);r++);return void 0!==e&&e},isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},select:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(e){return e});var i=[];return t.forEach(function(t){e.forEach(function(e){n(e)===t&&i.push(e)})}),i},getJSONP:function(e){return new u.a(e).load()},cloneCategories:function(e,t){return e.map(function(e){return(e=l.clone(e))[t]=e[t].slice(0),e})},mergeCategories:function(e,t,n){e=this.cloneCategories(e,n);var i=null;return t.forEach(function(t){e.forEach(function(e){t.identifier===e.identifier&&(i=e)}),i?i[n]=i[n].concat(t[n]):e.push(t)}),e},wrapFiltersInCategories:function(e,t){return e.map(function(e){var n=e;return t in n||(n=function(e,t,n){return t in e?r()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({identifier:"imgly_filters_wrapped-"+e.identifier,displayFlat:!0},t,[e])),n})},getStyleObject:function(e){var t=window.getComputedStyle(e),n={};for(var i in t){var r=t.getPropertyValue(i),o=i.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});""!==r&&(n[o]=r)}return n},styleElement:function(e,t){for(var n in t)e.style[n]=t[n]},debounce:function(e,t,n){var i;return function(){var r=this,o=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(r,o)},t),a&&e.apply(this,o)}},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i},findIntegerFraction:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,i=0,r=0,o=1,a=1,s=0;s<t;s++){var u=o/a-e;if(u<0)o++;else{if(!(u>0))return new c(o,a);a++}var l=Math.abs(o/a-e);l<n&&(n=l,i=o,r=a)}return new c(i,r)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toFixed(t);return parseFloat(n)},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},flipObject:function(e){var t={};for(var n in e)t[e[n]]=n;return t}};t.a=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(140),r=n(307),o=(n.n(r),n(163)),a=n(164),s=n(85),u=n(65),l=n(165),c=n(66),f=n(30),h=n(308),p=n(167),d=n(120),_=n(88),g=n(45),y=n(69),v=n(24),m=n(169),b=n(39),w=n(64);/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
i.a.version=n(168).version,i.a.Math=o,i.a.Operations=a,i.a.Engine=s.a,i.a.Color=u.a,i.a.Operation=l.a,i.a.EventEmitter=c.a,i.a.Utils=f.a,i.a.Env=h.a,i.a.OperationsStack=p.a,i.a.EXIF=d.a,i.a.Image=_.a,i.a.Promise=g.a,i.a.Configurable=y.a,i.a.Log=v.a,i.a.Loaders=m,i.a.RenderType=b.RenderType,i.a.ImageFormat=b.ImageFormat,i.a.OptionType=b.OptionType,i.a.RendererType=b.RendererType,i.a.UniformType=b.UniformType,i.a.Base64=w.a,i.a.UI={},t.default=i.a},function(e,t,n){n(50),n(62),e.exports=n(104).f("iterator")},function(e,t,n){var i=n(98),r=n(97);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),u=i(n),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(81),r=n(57),o=n(61),a={};n(33)(a,n(17)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var i=n(236),r=n(142),o=n(51),a=n(34);e.exports=n(103)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t,n){n(238),n(108),n(241),n(242),e.exports=n(10).Symbol},function(e,t,n){"use strict";var i=n(16),r=n(41),o=n(19),a=n(14),s=n(141),u=n(105).KEY,l=n(40),c=n(100),f=n(61),h=n(83),p=n(17),d=n(104),_=n(106),g=n(239),y=n(143),v=n(27),m=n(23),b=n(42),w=n(34),x=n(94),k=n(57),T=n(81),C=n(240),E=n(95),R=n(107),O=n(22),S=n(49),I=E.f,A=O.f,F=C.f,M=i.Symbol,B=i.JSON,D=B&&B.stringify,L=p("_hidden"),N=p("toPrimitive"),P={}.propertyIsEnumerable,z=c("symbol-registry"),U=c("symbols"),j=c("op-symbols"),G=Object.prototype,V="function"==typeof M&&!!R.f,W=i.QObject,H=!W||!W.prototype||!W.prototype.findChild,q=o&&l(function(){return 7!=T(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=I(G,t);i&&delete G[t],A(e,t,n),i&&e!==G&&A(G,t,i)}:A,X=function(e){var t=U[e]=T(M.prototype);return t._k=e,t},Y=V&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},Q=function(e,t,n){return e===G&&Q(j,t,n),v(e),t=x(t,!0),v(n),r(U,t)?(n.enumerable?(r(e,L)&&e[L][t]&&(e[L][t]=!1),n=T(n,{enumerable:k(0,!1)})):(r(e,L)||A(e,L,k(1,{})),e[L][t]=!0),q(e,t,n)):A(e,t,n)},Z=function(e,t){v(e);for(var n,i=g(t=w(t)),r=0,o=i.length;o>r;)Q(e,n=i[r++],t[n]);return e},J=function(e){var t=P.call(this,e=x(e,!0));return!(this===G&&r(U,e)&&!r(j,e))&&(!(t||!r(this,e)||!r(U,e)||r(this,L)&&this[L][e])||t)},K=function(e,t){if(e=w(e),t=x(t,!0),e!==G||!r(U,t)||r(j,t)){var n=I(e,t);return!n||!r(U,t)||r(e,L)&&e[L][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=F(w(e)),i=[],o=0;n.length>o;)r(U,t=n[o++])||t==L||t==u||i.push(t);return i},ee=function(e){for(var t,n=e===G,i=F(n?j:w(e)),o=[],a=0;i.length>a;)!r(U,t=i[a++])||n&&!r(G,t)||o.push(U[t]);return o};V||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(j,n),r(this,L)&&r(this[L],e)&&(this[L][e]=!1),q(this,e,k(1,n))};return o&&H&&q(G,e,{configurable:!0,set:t}),X(e)}).prototype,"toString",function(){return this._k}),E.f=K,O.f=Q,n(144).f=C.f=$,n(58).f=J,R.f=ee,o&&!n(60)&&s(G,"propertyIsEnumerable",J,!0),d.f=function(e){return X(p(e))}),a(a.G+a.W+a.F*!V,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var ie=S(p.store),re=0;ie.length>re;)_(ie[re++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return r(z,e+="")?z[e]:z[e]=M(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?T(e):Z(T(e),t)},defineProperty:Q,defineProperties:Z,getOwnPropertyDescriptor:K,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=l(function(){R.f(1)});a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return R.f(b(e))}}),B&&a(a.S+a.F*(!V||l(function(){var e=M();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(m(t)||void 0!==e)&&!Y(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,D.apply(B,i)}}),M.prototype[N]||n(33)(M.prototype,N,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){var i=n(49),r=n(107),o=n(58);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var i=n(34),r=n(144).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,t,n){n(106)("asyncIterator")},function(e,t,n){n(106)("observable")},function(e,t,n){n(108),n(50),n(62),n(244),n(248),n(249),e.exports=n(10).Promise},function(e,t,n){"use strict";var i,r,o,a,s=n(60),u=n(16),l=n(29),c=n(84),f=n(14),h=n(23),p=n(56),d=n(109),_=n(63),g=n(147),y=n(111).set,v=n(246)(),m=n(112),b=n(148),w=n(247),x=n(149),k=u.TypeError,T=u.process,C=T&&T.versions,E=C&&C.v8||"",R=u.Promise,O="process"==c(T),S=function(){},I=r=m.f,A=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[n(17)("species")]=function(e){e(S,S)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(S)instanceof t&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),F=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,r=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=r?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(r||(2==e._h&&L(e),e._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===t.promise?l(k("Promise-chain cycle")):(o=F(n))?o.call(n,u,l):u(n)):l(i)}catch(e){c&&!a&&c.exit(),l(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&B(e)})}},B=function(e){y.call(u,function(){var t,n,i,r=e._v,o=D(e);if(o&&(t=b(function(){O?T.emit("unhandledRejection",r,e):(n=u.onunhandledrejection)?n({promise:e,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=O||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){y.call(u,function(){var t;O?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},P=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=F(e))?v(function(){var i={_w:n,_d:!1};try{t.call(e,l(P,i,1),l(N,i,1))}catch(e){N.call(i,e)}}):(n._v=e,n._s=1,M(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};A||(R=function(e){d(this,R,"Promise","_h"),p(e),i.call(this);try{e(l(P,this,1),l(N,this,1))}catch(e){N.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(113)(R.prototype,{then:function(e,t){var n=I(g(this,R));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=l(P,e,1),this.reject=l(N,e,1)},m.f=I=function(e){return e===R||e===a?new o(e):r(e)}),f(f.G+f.W+f.F*!A,{Promise:R}),n(61)(R,"Promise"),n(150)("Promise"),a=n(10).Promise,f(f.S+f.F*!A,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!A),"Promise",{resolve:function(e){return x(s&&this===a?R:this,e)}}),f(f.S+f.F*!(A&&n(151)(function(e){R.all(e).catch(S)})),"Promise",{all:function(e){var t=this,n=I(t),i=n.resolve,r=n.reject,o=b(function(){var n=[],o=0,a=1;_(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=I(t),i=n.reject,r=b(function(){_(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(16),r=n(111).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(59)(a);e.exports=function(){var e,t,n,l=function(){var i,r;for(u&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(l)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){r.call(i,l)};else{var f=!0,h=document.createTextNode("");new o(l).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(16).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var i=n(14),r=n(10),o=n(16),a=n(147),s=n(149);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(14),r=n(112),o=n(148);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(155),p=n(156),d=n(86),_=n(115),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=f.c.RendererType,v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._type=y.CANVAS,o.setCanvas(o._options.canvas||o._createCanvas()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,p.a),g(t,[{key:"_createCanvas",value:function(){return f.i.createCanvas()}},{key:"_createContext",value:function(){var e=this._canvas.getContext("2d");return this._options.debug&&(e=new h.a(e)),this.id=e.id=t.contextId++,this._context=e,e.renderer=this,this.emit("context",e),e}},{key:"_setupContext",value:function(){var e=this._context;"imageSmoothingEnabled"in e?e.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(t){e[t]&&(e[t]=!0)}),this._defaultRenderTarget=new d.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new _.a(this)}},{key:"render",value:function(e){var t=this._renderTarget.getContext(),n=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(n),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1;var i=this._canvas,r=i.width,o=i.height;t.clearRect(0,0,r,o),0!==this._clearColor.a&&(t.save(),t.fillStyle=this._clearColor.toRGBA(),t.fillRect(0,0,r,o),t.restore()),this.renderDisplayObject(e,this._renderTarget)}},{key:"renderDisplayObject",value:function(e,t){var n=this._renderTarget;this._filterManager.setFilterStack(t.getFilterStack()),this.setRenderTarget(t),e.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(e){this._renderTarget=e}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}]),t}();v.contextId=0,v.type="Canvas2D",t.a=v},function(e,t,n){n(50),n(252),e.exports=n(10).Array.from},function(e,t,n){"use strict";var i=n(29),r=n(14),o=n(42),a=n(145),s=n(146),u=n(82),l=n(253),c=n(110);r(r.S+r.F*!n(151)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,f,h=o(e),p="function"==typeof this?this:Array,d=arguments.length,_=d>1?arguments[1]:void 0,g=void 0!==_,y=0,v=c(h);if(g&&(_=i(_,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(n=new p(t=u(h.length));t>y;y++)l(n,y,g?_(h[y],y):h[y]);else for(f=v.call(h),n=new p;!(r=f.next()).done;y++)l(n,y,g?a(f,_,[r.value,y],!0):r.value);return n.length=y,n}})},function(e,t,n){"use strict";var i=n(22),r=n(57);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){e.exports={default:n(255),__esModule:!0}},function(e,t,n){var i=n(10),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){n(257),e.exports=n(10).Object.assign},function(e,t,n){var i=n(14);i(i.S+i.F,"Object",{assign:n(258)})},function(e,t,n){"use strict";var i=n(19),r=n(49),o=n(107),a=n(58),s=n(42),u=n(96),l=Object.assign;e.exports=!l||n(40)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=s(e),l=arguments.length,c=1,f=o.f,h=a.f;l>c;)for(var p,d=u(arguments[c++]),_=f?r(d).concat(f(d)):r(d),g=_.length,y=0;g>y;)p=_[y++],i&&!h.call(d,p)||(n[p]=d[p]);return n}:l},function(e,t,n){n(260),e.exports=n(10).Object.keys},function(e,t,n){var i=n(42),r=n(49);n(102)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"head",value:function(e){return e[0]}},{key:"tail",value:function(e){return e.slice(1)}},{key:"last",value:function(e){return e[e.length-1]}},{key:"init",value:function(e){return e.slice(0,e.length-1)}},{key:"remove",value:function(e,t){return e.filter(function(e,n,i){return!t(e,n,i)})}},{key:"findIndex",value:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}},{key:"find",value:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}},{key:"flatten",value:function(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e.flatten(n):n)},[])}},{key:"range",value:function(e,t){var n=[];if(t>e)for(var i=e;i<t;i++)n.push(i);return n}},{key:"repeat",value:function(e,t){for(var n=[],i=0;i<t;i++)n[i]=e;return n}},{key:"zip",value:function(e,t){for(var n=Math.min(e.length,t.length),i=[],r=0;r<n;r++)i[r]=[e[r],t[r]];return i}}]),e}();t.a=a},function(e,n){e.exports=t},function(e,t,n){n(62),n(50),e.exports=n(264)},function(e,t,n){var i=n(84),r=n(17)("iterator"),o=n(51);e.exports=n(10).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){n(62),n(50),e.exports=n(266)},function(e,t,n){var i=n(27),r=n(110);e.exports=n(10).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){var i;/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
!function(r,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",f="mobile",h="tablet",p="smarttv",d={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},_={rgx:function(e,t){for(var n,i,r,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(e))for(r=0;r<c.length;r++)s=a[++i],"object"==typeof(o=c[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(d.has(t[n][i],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,c],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],c],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],c],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,c],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,_.str,g.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,l,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"],[u,p]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[l,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,_.str,g.device.amazon.model],[l,"Amazon"],[u,f]],[/android.+aft([bms])\sbuild/i],[a,[l,"Amazon"],[u,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[u,f]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[u,f]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[l,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,_.str,g.device.sprint.vendor],[a,_.str,g.device.sprint.model],[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[a,/_/g," "],[u,f]],[/(nexus\s9)/i],[a,[l,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[a,[l,"Huawei"],[u,f]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[l,"Huawei"],[u,h]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,d.trim],[a,d.trim],[u,p]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,p]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,p]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[u,h]],[/smart-tv.+(samsung)/i],[l,[u,p],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[u,f]],[/sie-(\w*)/i],[a,[l,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],a,[u,f]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[l,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[u,h]],[/(lg) netcast\.tv/i],[l,a,[u,p]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[u,f]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[l,a,[u,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[u,h]],[/(lenovo)[_\s-]?([\w-]+)/i],[l,a,[u,f]],[/linux;.+((jolla));/i],[l,a,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[u,f]],[/crkey/i],[[a,"Chromecast"],[l,"Google"],[u,p]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[l,"Google"],[u,h]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[l,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[u,f]],[/(mz)-([\w-]{2,})/i],[[l,"Meizu"],a,[u,f]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[l,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[l,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[a,[l,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],a,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[l,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[l,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],a,[u,f]],[/android.+;\s(PH-1)\s/i],[a,[l,"Essential"],[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,a,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,a,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,d.lowerize],l,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,p]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,_.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,_.str,g.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},v=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof v))return new v(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?d.extend(y,t):y;return this.getBrowser=function(){var e={name:void 0,version:void 0};return _.rgx.call(e,n,i.browser),e.major=d.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return _.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return _.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return _.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return _.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};v.VERSION="0.7.21",v.BROWSER={NAME:s,MAJOR:"major",VERSION:c},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:a,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:p,TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:c},v.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=v),t.UAParser=v):void 0===(i=function(){return v}.call(t,n,t,e))||(e.exports=i);var m=r&&(r.jQuery||r.Zepto);if(m&&!m.ua){var b=new v;m.ua=b.getResult(),m.ua.get=function(){return b.getUA()},m.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)m.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){"use strict";var i={defaults:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r={};for(var o in e)r[o]=e[o];for(var a=0;a<n.length;a++){var s=n[a];for(var u in s)void 0===r[u]&&(r[u]=s[u])}return r},extend:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r={};for(var o in e)r[o]=e[o];for(var a=0;a<n.length;a++){var s=n[a];for(var u in s)r[u]=s[u]}return r}};t.a=i},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(12),d=n(156),_=n(87),g=n(157),y=n(272),v=n(116),m=n(118),b=n(119),w=n(155),x=n(159),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},C=p.c.RendererType,E=n(52),R=void 0!==E?E.Image:void 0,O=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._type=C.WEBGL,o._fakeObject=new m.a,o._onContextLost=o._onContextLost.bind(o),o._onContextRestored=o._onContextRestored.bind(o),o.setCanvas(o._options.canvas||p.i.createCanvas()),o._cachedBlitCanvas=p.i.createCanvas(),o.shaders=o._initShaders(),o.renderers=o._initRenderers(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),k(t,[{key:"_onContextLost",value:function(e){e.preventDefault(),p.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(e){e.preventDefault(),p.f.warn(this.constructor.name,"Failed to create WebGL context: "+(e.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){p.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new b.a(this),this._currentObjectRenderer=new g.a(this)}},{key:"setShader",value:function(e){this._currentShader=e,this._context.useProgram(e.getProgram()),this._setAttributesForShader(e)}},{key:"setCanvas",value:function(e){this._canvas&&this._removeContextEventListeners(),T(t.prototype.__proto__||h()(t.prototype),"setCanvas",this).call(this,e),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(e){var t=this._context,n=e.getAttributes(),i=e.getAttributeLocations();n.forEach(function(e){var n=i[e];t.enableVertexAttribArray(n)})}},{key:"_initShaders",value:function(){return{default:new v.a(this)}}},{key:"_initRenderers",value:function(){return{sprite:new y.a(this)}}},{key:"_createContext",value:function(){var e=this._canvas,i=null;return i=n(275)(e.width,e.height,{preserveDrawingBuffer:!0}),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug&&(i=window.WebGLDebugUtils.makeDebugContext(i,null,function(e,t){console.error("gl."+e+"("+window.WebGLDebugUtils.glFunctionArgsToString(e,t)+")")})),this._options.debug&&(i=new w.a(i)),this.id=i.id=t.contextId++,this._context=i,i.renderer=this,this._maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.emit("context",i),i}},{key:"_setupContext",value:function(){var e=this._context;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new _.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var e=this._context,t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);this._maxFloatPrecision=0!==t.precision?"highp":"mediump";var n=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT);this._maxIntPrecision=0!==n.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];T(t.prototype.__proto__||h()(t.prototype),"resizeTo",this).call(this,e,n),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),this._context.resize(e.x,e.y)}},{key:"setRenderTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=e,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(e){this._currentObjectRenderer.stop(),this._currentObjectRenderer=e,this._currentObjectRenderer.start()}},{key:"render",value:function(e){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var t=e.getParent();e.setParent(this._fakeObject),e.updateTransform(),e.setParent(t),this.renderDisplayObject(e,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(e,t){this.setRenderTarget(t),this._filterManager.setFilterStack(t.getFilterStack()),e.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var e=this._context;e.clearColor.apply(e,this._clearColor.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(e){this.setRenderTarget(e.renderTarget),this._filterManager.setFilterStack(e.filterStack),this._currentObjectRenderer=e.objectRenderer}},{key:"getOrCreateGLTexture",value:function(e){var t=this._context,n=e.getGLTextureForRenderer(this);return n||(n=t.createTexture(),e.setGLTextureForRenderer(n,this)),n}},{key:"updateTexture",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getSource(),i=!!n,r=this._context,o=e.getGLUnit(),a=this.getOrCreateGLTexture(e);if(r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,a),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t&&i)if("undefined"==typeof WEBPACK)(n instanceof R||n instanceof E.Canvas)&&(n=x.a.fromNodeCanvasImage(n)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n.width,n.height,0,r.RGBA,r.UNSIGNED_BYTE,n.data);else if(n instanceof x.a)r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n.width,n.height,0,r.RGBA,r.UNSIGNED_BYTE,n.data);else{var s=p.i.convertHtmlImageToRGBACanvas(n,this._cachedBlitCanvas);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s)}e.isMipMappingEnabled()?r.generateMipmap(r.TEXTURE_2D):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e.getGLRepeat(r,"x")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e.getGLRepeat(r,"y"))),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e.getGLFilter(r,"min")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e.getGLFilter(r,"mag")),r.activeTexture(r.TEXTURE0)}},{key:"getMaxDimensions",value:function(){if("undefined"==typeof WEBPACK){var e=this._context;return e.getParameter(e.MAX_TEXTURE_SIZE)}var t=p.i.createCanvas(),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var i=n.getParameter(n.MAX_TEXTURE_SIZE),r=n.getExtension("WEBGL_lose_context");return r&&r.loseContext(),i}return null}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){for(var e in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this.shaders)this.shaders[e].dispose(),delete this.shaders[e];this._removeContextEventListeners();var t=this._context.getExtension("WEBGL_lose_context");t&&t.loseContext()}}],[{key:"isSupported",value:function(){if("undefined"==typeof WEBPACK)return!0;var e=p.i.createCanvas();e.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var t=e.getContext("webgl")||e.getContext("experimental-webgl"),n=!!t;if(n){var i=p.e.determineGPUName(t);n&=!p.e.isGPUBlacklisted(i)}return e.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),n}}]),t}();O.contextId=0,O.type="WebGL",t.a=O},function(e,t,n){n(271);var i=n(10).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var i=n(34),r=n(95).f;n(102)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(12),d=n(157),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._maxBatchSize=p.a,o._vertices=new ArrayBuffer(4*p.a*p.j),o._positions=new Float32Array(o._vertices),o._colors=new Uint32Array(o._vertices),o._indices=new Uint16Array(6*p.a);for(var a=0,s=0;a<6*p.a;a+=6,s+=4)o._indices[a+0]=s+0,o._indices[a+1]=s+1,o._indices[a+2]=s+2,o._indices[a+3]=s+0,o._indices[a+4]=s+2,o._indices[a+5]=s+3;return o._shaders=[],o._sprites=[],o._currentBatchSize=0,o._onContextChange(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),_(t,[{key:"render",value:function(e){var t=e.getTexture(),n=t.getFrame();t.getBaseTexture(),this._currentBatchSize>=this._maxBatchSize&&this.flush();var i=t.getUVs();if(i){var r=this._currentBatchSize*p.j;this._addVertexCoordinates(e,r,n),this._addTextureUVs(e,r,i),this._addColors(e,r),this._sprites[this._currentBatchSize]=e,this._currentBatchSize++}}},{key:"_addColors",value:function(e,t){var n=this._colors,i=e.getTint(),r=(i>>16)+(65280&i)+((255&i)<<16)+(255*e.getWorldAlpha()<<24);n[t+4]=n[t+9]=n[t+14]=n[t+19]=r}},{key:"_addTextureUVs",value:function(e,t,n){var i=this._positions,r=n.getUVsAt(0);i[t+2]=r.x,i[t+3]=r.y,r=n.getUVsAt(1),i[t+7]=r.x,i[t+8]=r.y,r=n.getUVsAt(2),i[t+12]=r.x,i[t+13]=r.y,r=n.getUVsAt(3),i[t+17]=r.x,i[t+18]=r.y}},{key:"_addVertexCoordinates",value:function(e,t,n){for(var i=this._positions,r=e.getWorldTransform(),o=e.getAnchor(),a=r.rectangleToCoordinates(n,o),s=0;s<4;s++)i[t+5*s]=a[s].x,i[t+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var e=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices,e.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var e=this._renderer,t=e.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*p.a)t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices);else{var n=this._positions.subarray(0,this._currentBatchSize*p.j);t.bufferSubData(t.ARRAY_BUFFER,0,n)}for(var i=0,r=null,o=null,a=null,s=null,u=!1,l=null,c=0,f=0,h=this._currentBatchSize;f<h;f++){if(o=(l=this._sprites[f]).getTexture().getBaseTexture(),u=a!==(s=l.getShader()||this._shader),(r!==o||u)&&(this._renderBatch(r,i,c),c=f,i=0,r=o,u)){a=s,e.setShader(a);var d=e.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",d),a.syncUniforms(),t.activeTexture(t.TEXTURE0)}i++}this._renderBatch(r,i,c),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(e,t,n){if(0!==t){var i=this._renderer,r=i.getContext(),o=e.getGLTextureForRenderer(i);o||(o=i.getOrCreateGLTexture(e)),e.isDirty()&&(i.updateTexture(e),e.setDirty(!1)),r.activeTexture(r.TEXTURE0+e.getGLUnit()),r.bindTexture(r.TEXTURE_2D,o);var a=6*t,s=6*n*2;r.drawElements(r.TRIANGLES,a,r.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var e=this._renderer.getContext();for(var n in this._sprites)n.dispose();this._vertexBuffer&&(e.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(e.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}();t.a=g},function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(e,t){e.exports=n},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(12),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uvs=[new o.k(0,0),new o.k(1,0),new o.k(1,1),new o.k(0,1)]}return a(e,[{key:"update",value:function(e,t){var n=this._uvs[0];n.x=e.x/t.width,n.y=e.y/t.height,(n=this._uvs[1]).x=(e.x+e.width)/t.width,n.y=e.y/t.height,(n=this._uvs[2]).x=(e.x+e.width)/t.width,n.y=(e.y+e.height)/t.height,(n=this._uvs[3]).x=e.x/t.width,n.y=(e.y+e.height)/t.height}},{key:"getUVsAt",value:function(e){return this._uvs[e]}},{key:"getUVs",value:function(){return this._uvs}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(12),d=n(161),_=n(67),g=n(87),y=n(86),v=n(119),m=n(115),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=p.c.RendererType,x=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,new _.a,new p.h(0,0,n,i)));return o._loaded=!0,o._width=n,o._height=i,o._pixelRatio=r,o._renderer=e,o._setupFilterManager(),o._setupBuffer(),o.setBaseTexture(o._renderTarget.getBaseTexture()),o._updateUVs(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),b(t,[{key:"_setupFilterManager",value:function(){this._filterManager&&this._filterManager.dispose(),this._renderer.isOfType(w.WEBGL)?this._filterManager=new v.a(this._renderer):this._renderer.isOfType(w.CANVAS)&&(this._filterManager=new m.a(this._renderer)),this._filterManager.resizeTo(new p.k(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(w.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(w.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new g.a(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new y.a(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(e){this._renderTarget.clear(e)}},{key:"resizeTo",value:function(e){this._width===e.x&&this._height===e.y||(this._width=e.x,this._height=e.y,this._frame.width=e.x,this._frame.height=e.y,this._renderTarget.resizeTo(e),this._filterManager.resizeTo(e))}},{key:"render",value:function(e){if(this._renderer.isOfType(w.WEBGL))this._renderWebGL(e);else{if(!this._renderer.isOfType(w.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(e)}}},{key:"_renderWebGL",value:function(e){this._renderTarget.activate(),e.getWorldTransform().reset(),e.getChildren().forEach(function(e){e.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}},{key:"_renderCanvas",value:function(e){e.getWorldTransform().reset(),e.getChildren().forEach(function(e){e.updateTransform()});var t=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(e,this._renderTarget),this._renderer.setFilterManager(t)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose(),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}();t.a=x},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(160),p=n(279),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return n._onTextureUpdate=n._onTextureUpdate.bind(n),n._texture=e,n._shader=null,n._width=0,n._height=0,n._anchor=new f.k(0,0),n._canvasSmoothingEnabled=!0,n.setTexture(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),d(t,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(e){var t=e.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new p.a),this._potRenderer.render(e,this,this._texture)),e.restore(t),e.setObjectRenderer(e.renderers.sprite),e.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(e){var t=this._worldTransform,n=this._texture.getFrame(),i=n.width,r=n.height,o=e.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-i|0,s=this._anchor.y*-r|0,u=e.getContext();u.setTransform(t.a,t.b,t.c,t.d,t.tx*o,t.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),c=l.getPixelRatio(),f=l.getSource();u.imageSmoothingEnabled=this._canvasSmoothingEnabled,u.drawImage(f,0,0,(f.naturalWidth||i)*c,(f.naturalHeight||r)*c,a*o,s*o,i*o,r*o)}},{key:"isAtPosition",value:function(e){var t=this._worldTransform.applyInverseToVector(e),n=this._texture.getFrame(),i=n.width,r=n.height,o=new f.k(-i,-r);o.multiply(this._anchor);var a=o.clone().add(i,r);return!(t.x<o.x||t.x>a.x||t.y<o.y||t.y>a.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var e=this._localBounds,t=this._texture.getFrame();e.x=-t.width*this._anchor.x,e.y=-t.height*this._anchor.y,e.width=t.width,e.height=t.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var e=this._bounds,t=this._texture.getFrame(),n=this._worldTransform,i=this._anchor,r=n.rectangleToCoordinates(t,i),o=r[0].x,a=r[0].y,s=o,u=a;r.forEach(function(e){var t=e.x,n=e.y;o=Math.min(o,t),a=Math.min(a,n),s=Math.max(s,t),u=Math.max(u,n)}),e.x=o,e.width=Math.abs(s-o),e.y=a,e.height=Math.abs(u-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),e&&this._texture.dispose(),this._texture=null,this._potRenderer&&(e&&this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(e){e&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=e,e.getBaseTexture().isLoaded()&&this._onTextureUpdate(),e.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(e){this._shader=e}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(e){this._scale.x=e/this._texture.getFrame().width,this._width=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(e){this._scale.y=e/this._texture.getFrame().height,this._height=e,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new f.k(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(e,t){e instanceof f.k?this._anchor.copy(e):this._anchor.set(e,t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(e){this._smoothDownscaling=e}},{key:"dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(e||t)&&this._texture.dispose(t),this._potRenderer&&this._potRenderer.dispose()}}]),t}();t.a=_},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(38),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite)}return a(e,[{key:"render",value:function(e,t,n){var i=n.getDimensions(),r=this._getNextHighestPOT(i);this._renderTexture?this._renderTexture.resizeTo(r):this._renderTexture=new o.Engine.RenderTexture(e,r.x,r.y);var a=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(e,t,i,a)}},{key:"_updateSprite",value:function(e,t,n,i){t.setTexture(this._renderTexture),this._renderTexture.setFrame(new o.Rectangle(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:function(e){return new o.Vector2(o.Utils.nextHighestPOT(e.x),o.Utils.nextHighestPOT(e.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(116);t.a={TextureShader:i.a}},function(e,t,n){e.exports={default:n(282),__esModule:!0}},function(e,t,n){n(283),e.exports=n(10).setImmediate},function(e,t,n){var i=n(14),r=n(111);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(285);n.d(t,"UnpremultiplyFilter",function(){return i.a});var r=n(287);n.d(t,"ColorOverlayFilter",function(){return r.a});var o=n(289);n.d(t,"TintFilter",function(){return o.a});var a=n(291);n.d(t,"OverlayFilter",function(){return a.a})},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(68),c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).call(this));return e._fragmentSource=n(286),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();t.a=c},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(68),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=f.c.OptionType,_=f.c.UniformType,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(288),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),p(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options.color,s=r.getImageData(0,0,i.width,i.height),u=o.getImageData(0,0,i.width,i.height),l=i.width*i.height,c=new f.b,h=new f.b,p=0;p<4*l;p+=4){c.set(s.data[p]/255,s.data[p+1]/255,s.data[p+2]/255,s.data[p+3]/255),h.set(u.data[p]/255,u.data[p+1]/255,u.data[p+2]/255,u.data[p+3]/255);var d=h.r+c.a*(c.r-h.r);u.data[p]=255*(d+c.a*(a.r-d));var _=h.g+c.a*(c.g-h.g);u.data[p+1]=255*(_+c.a*(a.g-_));var g=h.b+c.a*(c.b-h.b);u.data[p+2]=255*(g+c.a*(a.b-g))}o.putImageData(u,0,0)}}]),t}();g.prototype.availableOptions={color:{type:d.COLOR,default:f.b.WHITE,uniformType:_.FLOAT4}},t.a=g},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(68),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=f.c.OptionType,_=f.c.UniformType,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(290),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),p(t,[{key:"_applyCanvas",value:function(e,n,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=n.getCanvas(),o=n.getContext(),a=i.getContext(),s=o.getImageData(0,0,r.width,r.height),u=this._options,l=u.mode,c=u.color,h=c.r,p=c.g,d=c.b,_=c.a,g=[.2125,.7154,.0721];switch(l){case t.MODES.SOLID:for(var y=0;y<r.width*r.height;y++){var v=4*y;s.data[v]+=(255*h-s.data[v])*_,s.data[v+1]+=(255*p-s.data[v+1])*_,s.data[v+2]+=(255*d-s.data[v+2])*_}break;case t.MODES.COLORIZED:for(var m=0;m<r.width*r.height;m++){var b=4*m,w=s.data[b]/255*g[0]+s.data[b+1]/255*g[1]+s.data[b+2]/255*g[2],x=new f.b(w*h,w*p,w*d);s.data[b]+=(255*x.r-s.data[b])*_,s.data[b+1]+=(255*x.g-s.data[b+1])*_,s.data[b+2]+=(255*x.b-s.data[b+2])*_}}a.putImageData(s,0,0)}}]),t}();g.MODES={NONE:0,SOLID:1,COLORIZED:2},g.prototype.availableOptions={color:{type:d.COLOR,default:f.b.WHITE,uniformType:_.FLOAT4},mode:{type:d.NUMBER,default:g.MODES.NONE,uniformType:_.INT}},t.a=g},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(12),h=n(68),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=f.c.OptionType,_=f.c.UniformType,g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(292),a._lastImage=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),p(t,[{key:"_applyCanvas",value:function(e,n,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r=this._options.overlayTexture.getRenderTarget().getContext(),o=n.getCanvas(),a=n.getContext(),s=i.getContext(),u=a.getImageData(0,0,o.width,o.height),l=r.getImageData(0,0,o.width,o.height),c=this._options,h=c.blendMode,p=c.alpha,d=new f.b,_=new f.b,g=new f.b,y=0;y<o.width*o.height*4;y+=4){d.set(u.data[y]/255,u.data[y+1]/255,u.data[y+2]/255,u.data[y+3]/255),_.set(l.data[y]/255,l.data[y+1]/255,l.data[y+2]/255,l.data[y+3]/255);var v=void 0,m=void 0,b=void 0,w=void 0,x=void 0,k=void 0,T=void 0,C=void 0,E=void 0;switch(h){case t.BLEND_MODES.NORMAL:g.set(d.r+_.a*p*(_.r-d.r),d.g+_.a*p*(_.g-d.g),d.b+_.a*p*(_.b-d.b),d.a);break;case t.BLEND_MODES.OVERLAY:v=1-2*(1-d.r)*(1-_.r),m=2*d.r*_.r,b=v+(d.r<.5?1:0)*(m-v),w=1-2*(1-d.g)*(1-_.g),x=2*d.g*_.g,k=w+(d.g<.5?1:0)*(x-w),T=1-2*(1-d.b)*(1-_.b),C=2*d.b*_.b,E=T+(d.b<.5?1:0)*(C-T),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.HARD_LIGHT:v=1-2*(1-_.r)*(1-d.r),m=2*_.r*d.r,b=v+(_.r<.5?1:0)*(m-v),w=1-2*(1-_.g)*(1-d.g),x=2*_.g*d.g,k=w+(_.g<.5?1:0)*(x-w),T=1-2*(1-_.b)*(1-d.b),C=2*_.b*d.b,E=T+(_.b<.5?1:0)*(C-T),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.SOFT_LIGHT:v=2*d.r*(1-_.r)+(2*_.r-1)*Math.sqrt(d.r),m=2*d.r*_.r+d.r*d.r*(1-2*_.r),b=v+(_.r<.5?1:0)*(m-v),w=2*d.g*(1-_.g)+(2*_.g-1)*Math.sqrt(d.g),x=2*d.g*_.g+d.g*d.g*(1-2*_.g),k=w+(_.g<.5?1:0)*(x-w),T=2*d.b*(1-_.b)+(2*_.b-1)*Math.sqrt(d.b),C=2*d.b*_.b+d.b*d.b*(1-2*_.b),E=T+(_.b<.5?1:0)*(C-T),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.MULTIPLY:b=d.r*_.r,k=d.g*_.g,E=d.b*_.b,g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.DARKEN:b=Math.min(d.r,_.r),k=Math.min(d.g,_.g),E=Math.min(d.b,_.b),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.LIGHTEN:b=Math.max(d.r,_.r),k=Math.max(d.g,_.g),E=Math.max(d.b,_.b),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.SCREEN:b=1-(1-d.r)*(1-_.r),k=1-(1-d.g)*(1-_.g),E=1-(1-d.b)*(1-_.b),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a);break;case t.BLEND_MODES.COLOR_BURN:b=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(_.r,1e-6))),k=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(_.g,1e-6))),E=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(_.b,1e-6))),g.set(d.r+_.a*p*(b-d.r),d.g+_.a*p*(k-d.g),d.b+_.a*p*(E-d.b),d.a)}u.data[y]=255*g.r,u.data[y+1]=255*g.g,u.data[y+2]=255*g.b,u.data[y+3]=255*g.a}s.putImageData(u,0,0)}}]),t}();g.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},g.prototype.availableOptions={blendMode:{type:d.NUMBER,default:g.BLEND_MODES.NORMAL,uniformType:_.INT},overlayImage:{type:d.NUMBER,required:!0,uniformType:_.SAMPLER2D},overlayTexture:{type:d.OBJECT,required:!0},alpha:{type:d.NUMBER,default:1,uniformType:_.FLOAT}},t.a=g},function(e,t){e.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(e,t,n){"use strict";t.a=[{defaultName:"Natasha Wescoat",identifier:"imgly_art_filter_june_tree",rootPath:"art-filters/imgly_june_tree",thumbnail:"art-filters/imgly_june_tree/thumbnail.jpg"},{defaultName:"Hive",identifier:"imgly_art_filter_hive",rootPath:"art-filters/imgly_hive",thumbnail:"art-filters/imgly_hive/thumbnail.jpg"},{defaultName:"Udnie",identifier:"imgly_art_filter_udnie",rootPath:"art-filters/imgly_udnie",thumbnail:"art-filters/imgly_udnie/thumbnail.jpg"},{defaultName:"Vince Low",identifier:"imgly_art_filter_vince_low",rootPath:"art-filters/imgly_vince_low",thumbnail:"art-filters/imgly_vince_low/thumbnail.jpg"},{defaultName:"Mosaic",identifier:"imgly_art_filter_mosaic",rootPath:"art-filters/imgly_mosaic",thumbnail:"art-filters/imgly_mosaic/thumbnail.jpg"},{defaultName:"Wave",identifier:"imgly_art_filter_wave",rootPath:"art-filters/imgly_wave",thumbnail:"art-filters/imgly_wave/thumbnail.jpg"},{defaultName:"Malikova Darya",identifier:"imgly_art_filter_watercolor",rootPath:"art-filters/imgly_watercolor",thumbnail:"art-filters/imgly_watercolor/thumbnail.jpg"}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return x});var r=n(36),o=n.n(r),a=n(37),s=n.n(a),u=n(0),l=n.n(u),c=n(11),f=n.n(c),h=n(30),p=n(295),d=n(296),_=n(64),g=n(70),y=n(298),v="function"==typeof s.a&&"symbol"==typeof o.a?function(e){return typeof e}:function(e){return e&&"function"==typeof s.a&&e.constructor===s.a&&e!==s.a.prototype?"symbol":typeof e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){return h.a.byteArrayToString(_.a.decode(e))},w=function(){function e(t){i(this,e),this._version="2.4",this._l="string"==typeof t?t.trim():t,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return m(e,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(e){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[b("YXBwX2lkZW50aWZpZXJz")].length)return!0;var e=window.location.hostname,t=!1;return this._decLic[b("YXBwX2lkZW50aWZpZXJz")].forEach(function(n){h.a.wildCardMatch(e,n)&&(t=!0)}),t}},{key:"_platformValid",value:function(){var e=this._decLic[b("cGxhdGZvcm0=")];return("undefined"==typeof WEBPACK?"Server":"HTML5")===e}},{key:"c",value:function(){var e=this;return new f.a(function(t,n){if("string"!==v(e._l)||!e._jsonValid()){var i=new Error;return i.code="ELICINVFMT",n(i)}if(!e._sigValid()){var r=new Error;return r.code="ELICINV",n(r)}if(!e._hostnameValid()){var o=new Error;return o.code="ELICINVHOST",n(o)}if(!e._platformValid()){var a=new Error;return a.code="ELICINVPLAT",n(a)}if(e.isExp()){var s=new Error;return s.code="ELICEXP",n(s)}t()})}},{key:"isToolAllowed",value:function(e){return this._includesFeature(e)}},{key:"isWhiteLabel",value:function(){return this._includesFeature("whitelabel",new p.a("2.4",!0))}},{key:"areCustomAssetsAllowed",value:function(){return this._includesFeature("customassets",new p.a("2.4",!0))}},{key:"t",value:function(){if(this._decLic.enterprise_license)return f.a.resolve();if(this._includesFeature("noexporttracking",new p.a("2.4",!0)))return f.a.resolve();var e=this._decLic[b("ZG9tYWlucw==")][0]+b(b("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[b("YXBpX3Rva2Vu")];return new g.a(e).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[b("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[b("ZXhwaXJlc19hdA==")]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[b("ZXhwaXJlc19hdA==")]&&e>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[b("ZXhwaXJlc19hdA==")]}},{key:"_verify",value:function(e,t){return this._encodeMessage(e)===this._decodeSignature(t).substr(-64)}},{key:"_encodeMessage",value:function(e){return Object(y.a)(e)}},{key:"_decodeSignature",value:function(e){return e=function(e){return e.map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join("")}(e=_.a.decode(e)),(e=this._parseBigInt(e,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(e,t){return new d.a(e,t)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[b("c2lnbmF0dXJl")]||"",delete this._decLic[b("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+\/=]/g,""),this._message=this._l.replace(new RegExp(',"'+b("c2lnbmF0dXJl")+'":"([^"]*)"'),""))}},{key:"_includesFeature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new p.a("1.0",!0),n=new p.a(this._decLic[b("dmVyc2lvbg==")],!0);return!!t.isMoreRecentThan(n)||this._decLic[b("ZmVhdHVyZXM=")]&&-1!==this._decLic[b("ZmVhdHVyZXM=")].indexOf(e)}}]),e}(),x=function(){function e(){i(this,e)}return m(e,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return f.a.resolve()}},{key:"isToolAllowed",value:function(e){return!0}},{key:"isWhiteLabel",value:function(){return!1}},{key:"areCustomAssetsAllowed",value:function(){return!0}},{key:"t",value:function(){return f.a.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),!1}}]),e}();t.b=w},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n?s:a,r=i.exec(t);i.lastIndex=0,this._major=r[1],this._minor=r[2],this._patch=r[3]||0}return o(e,[{key:"major",get:function(){return this._major}},{key:"minor",get:function(){return this._minor}},{key:"patch",get:function(){return this._patch}}]),o(e,[{key:"equals",value:function(e){return this._major===e._major&&this._minor===e._minor&&this._patch===e._patch}},{key:"isMoreRecentThan",value:function(e){return!(this._major<e.major)&&(this._major>e.major||!(this._minor<e.minor)&&(this._minor>e.minor||!(this._patch<=e.patch)&&(this._patch>e.patch||void 0)))}}]),e}()},function(e,t,n){"use strict";function i(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new i(null)}function o(e){return T.charAt(e)}function a(e,t){var n=C[e.charCodeAt(t)];return null==n?-1:n}function s(e){var t=r();return t.fromInt(e),t}function u(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function l(e){this.m=e}function c(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function f(e,t){return e&t}function h(e,t){return e|t}function p(e,t){return e^t}function d(e,t){return e&~t}function _(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function g(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function y(){}function v(e){return e}function m(e){this.r2=r(),this.q3=r(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}/*!
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */
var b,w=w||{};"Microsoft Internet Explorer"==w.appName?(i.prototype.am=function(e,t,n,i,r,o){for(var a=32767&t,s=t>>15;--o>=0;){var u=32767&this[e],l=this[e++]>>15,c=s*u+l*a;r=((u=a*u+((32767&c)<<15)+n[i]+(1073741823&r))>>>30)+(c>>>15)+s*l+(r>>>30),n[i++]=1073741823&u}return r},b=30):"Netscape"!=w.appName?(i.prototype.am=function(e,t,n,i,r,o){for(;--o>=0;){var a=t*this[e++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r},b=26):(i.prototype.am=function(e,t,n,i,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var u=16383&this[e],l=this[e++]>>14,c=s*u+l*a;r=((u=a*u+((16383&c)<<14)+n[i]+r)>>28)+(c>>14)+s*l,n[i++]=268435455&u}return r},b=28),i.prototype.DB=b,i.prototype.DM=(1<<b)-1,i.prototype.DV=1<<b,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-b,i.prototype.F2=2*b-52;var x,k,T="0123456789abcdefghijklmnopqrstuvwxyz",C=new Array;for(x="0".charCodeAt(0),k=0;k<=9;++k)C[x++]=k;for(x="a".charCodeAt(0),k=10;k<36;++k)C[x++]=k;for(x="A".charCodeAt(0),k=10;k<36;++k)C[x++]=k;l.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},l.prototype.revert=function(e){return e},l.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},l.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},l.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},c.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},c.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},c.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},c.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},c.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},i.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},i.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},i.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,s=0;--r>=0;){var u=8==n?255&e[r]:a(e,r);u<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==s?this[this.t++]=u:s+n>this.DB?(this[this.t-1]|=(u&(1<<this.DB-s)-1)<<s,this[this.t++]=u>>this.DB-s):this[this.t-1]|=u<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},i.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},i.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},i.prototype.lShiftTo=function(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},i.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}},i.prototype.subTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},i.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;--o>=0;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)},i.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},i.prototype.divRemTo=function(e,t,n){var o=e.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=r());var s=r(),l=this.s,c=e.s,f=this.DB-u(o[o.t-1]);f>0?(o.lShiftTo(f,s),a.lShiftTo(f,n)):(o.copyTo(s),a.copyTo(n));var h=s.t,p=s[h-1];if(0!=p){var d=p*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),_=this.FV/d,g=(1<<this.F1)/d,y=1<<this.F2,v=n.t,m=v-h,b=null==t?r():t;for(s.dlShiftTo(m,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),i.ONE.dlShiftTo(h,b),b.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--m>=0;){var w=n[--v]==p?this.DM:Math.floor(n[v]*_+(n[v-1]+y)*g);if((n[v]+=s.am(0,w,n,m,0,h))<w)for(s.dlShiftTo(m,b),n.subTo(b,n);n[v]<--w;)n.subTo(b,n)}null!=t&&(n.drShiftTo(h,t),l!=c&&i.ZERO.subTo(t,t)),n.t=h,n.clamp(),f>0&&n.rShiftTo(f,n),l<0&&i.ZERO.subTo(n,n)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},i.prototype.exp=function(e,t){if(e>4294967295||e<1)return i.ONE;var n=r(),o=r(),a=t.convert(this),s=u(e)-1;for(a.copyTo(n);--s>=0;)if(t.sqrTo(n,o),(e&1<<s)>0)t.mulTo(o,a,n);else{var l=n;n=o,o=l}return t.revert(n)},i.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,r=!1,a="",s=this.t,u=this.DB-s*this.DB%t;if(s-- >0)for(u<this.DB&&(n=this[s]>>u)>0&&(r=!0,a=o(n));s>=0;)u<t?(n=(this[s]&(1<<u)-1)<<t-u,n|=this[--s]>>(u+=this.DB-t)):(n=this[s]>>(u-=t)&i,u<=0&&(u+=this.DB,--s)),n>0&&(r=!0),r&&(a+=o(n));return r?a:"0"},i.prototype.negate=function(){var e=r();return i.ZERO.subTo(this,e),e},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},i.prototype.mod=function(e){var t=r();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t},i.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new l(t):new c(t),this.exp(e,n)},i.ZERO=s(0),i.ONE=s(1),y.prototype.convert=v,y.prototype.revert=v,y.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},y.prototype.sqrTo=function(e,t){e.squareTo(t)},m.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t},m.prototype.revert=function(e){return e},m.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var E=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/E[E.length-1];i.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=s(n),o=r(),a=r(),u="";for(this.divRemTo(i,o,a);o.signum()>0;)u=(n+a.intValue()).toString(e).substr(1)+u,o.divRemTo(i,o,a);return a.intValue().toString(e)+u},i.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),o=!1,s=0,u=0,l=0;l<e.length;++l){var c=a(e,l);c<0?"-"==e.charAt(l)&&0==this.signum()&&(o=!0):(u=t*u+c,++s>=n&&(this.dMultiply(r),this.dAddOffset(u,0),s=0,u=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(u,0)),o&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),h,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this);else{var r=new Array,o=7&e;r.length=1+(e>>3),t.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}},i.prototype.bitwiseTo=function(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;i<o;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},i.prototype.changeBit=function(e,t){var n=i.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},i.prototype.addTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},i.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},i.prototype.multiplyLowerTo=function(e,t,n){var i,r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()},i.prototype.multiplyUpperTo=function(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)},i.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n},i.prototype.millerRabin=function(e){var t=this.subtract(i.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var o=t.shiftRight(n);(e=e+1>>1)>E.length&&(e=E.length);for(var a=r(),s=0;s<e;++s){a.fromInt(E[Math.floor(Math.random()*E.length)]);var u=a.modPow(o,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(t)){for(var l=1;l++<n&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},i.prototype.clone=function(){var e=r();return this.copyTo(e),e},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},i.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-- >0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t},i.prototype.equals=function(e){return 0==this.compareTo(e)},i.prototype.min=function(e){return this.compareTo(e)<0?this:e},i.prototype.max=function(e){return this.compareTo(e)>0?this:e},i.prototype.and=function(e){var t=r();return this.bitwiseTo(e,f,t),t},i.prototype.or=function(e){var t=r();return this.bitwiseTo(e,h,t),t},i.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,p,t),t},i.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,d,t),t},i.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},i.prototype.shiftLeft=function(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.prototype.shiftRight=function(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+_(this[e]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=g(this[n]^t);return e},i.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},i.prototype.setBit=function(e){return this.changeBit(e,h)},i.prototype.clearBit=function(e){return this.changeBit(e,d)},i.prototype.flipBit=function(e){return this.changeBit(e,p)},i.prototype.add=function(e){var t=r();return this.addTo(e,t),t},i.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},i.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},i.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},i.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},i.prototype.divideAndRemainder=function(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)},i.prototype.modPow=function(e,t){var n,i,o=e.bitLength(),a=s(1);if(o<=0)return a;n=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new l(t):t.isEven()?new m(t):new c(t);var f=new Array,h=3,p=n-1,d=(1<<n)-1;if(f[1]=i.convert(this),n>1){var _=r();for(i.sqrTo(f[1],_);h<=d;)f[h]=r(),i.mulTo(_,f[h-2],f[h]),h+=2}var g,y,v=e.t-1,b=!0,w=r();for(o=u(e[v])-1;v>=0;){for(o>=p?g=e[v]>>o-p&d:(g=(e[v]&(1<<o+1)-1)<<p-o,v>0&&(g|=e[v-1]>>this.DB+o-p)),h=n;0==(1&g);)g>>=1,--h;if((o-=h)<0&&(o+=this.DB,--v),b)f[g].copyTo(a),b=!1;else{for(;h>1;)i.sqrTo(a,w),i.sqrTo(w,a),h-=2;h>0?i.sqrTo(a,w):(y=a,a=w,w=y),i.mulTo(w,f[g],a)}for(;v>=0&&0==(e[v]&1<<o);)i.sqrTo(a,w),y=a,a=w,w=y,--o<0&&(o=this.DB-1,--v)}return i.revert(a)},i.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return i.ZERO;for(var n=e.clone(),r=this.clone(),o=s(1),a=s(0),u=s(0),l=s(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?(u.isEven()&&l.isEven()||(u.addTo(this,u),l.subTo(e,l)),u.rShiftTo(1,u)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),t&&o.subTo(u,o),a.subTo(l,a)):(r.subTo(n,r),t&&u.subTo(o,u),l.subTo(a,l))}return 0!=r.compareTo(i.ONE)?i.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l},i.prototype.pow=function(e){return this.exp(e,new y)},i.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(r<o&&(o=r),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},i.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=E[E.length-1]){for(t=0;t<E.length;++t)if(n[0]==E[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<E.length;){for(var i=E[t],r=t+1;r<E.length&&i<R;)i*=E[r++];for(i=n.modInt(i);t<r;)if(i%E[t++]==0)return!1}return n.millerRabin(e)},i.prototype.square=function(){var e=r();return this.squareTo(e),e},t.a=i},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";/*!
 *  Secure Hash Algorithm (SHA256)
 *  http://www.webtoolkit.info/
 *
 *  Original code by Angel Marin, Paul Johnston.
 */
function i(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}function i(e,t){return e>>>t}function r(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function a(e){return n(e,2)^n(e,13)^n(e,22)}function s(e){return n(e,6)^n(e,11)^n(e,25)}function u(e){return n(e,7)^n(e,18)^i(e,3)}function l(e){return n(e,17)^n(e,19)^i(e,10)}return function(e){for(var t="0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>8*(3-i%4)+4&15)+t.charAt(e[i>>2]>>8*(3-i%4)&15);return n}(function(e,n){var i,c,f,h,p,d,_,g,y,v,m=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),b=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),w=new Array(64);e[n>>5]|=128<<24-n%32,e[15+(n+64>>9<<4)]=n;for(var x=0;x<e.length;x+=16){i=b[0],c=b[1],f=b[2],h=b[3],p=b[4],d=b[5],_=b[6],g=b[7];for(var k=0;k<64;k++)w[k]=k<16?e[k+x]:t(t(t(l(w[k-2]),w[k-7]),u(w[k-15])),w[k-16]),y=t(t(t(t(g,s(p)),r(p,d,_)),m[k]),w[k]),v=t(a(i),o(i,c,f)),g=_,_=d,d=p,p=t(h,y),h=f,f=c,c=i,i=t(y,v);b[0]=t(i,b[0]),b[1]=t(c,b[1]),b[2]=t(f,b[2]),b[3]=t(h,b[3]),b[4]=t(p,b[4]),b[5]=t(d,b[5]),b[6]=t(_,b[6]),b[7]=t(g,b[7])}return b}(function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e)),8*e.length))}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});for(/*
 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
 * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 * requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel
 * MIT license
 * @license
 */
var i="undefined"==typeof window?global:window,r=i.requestAnimationFrame,o=i.cancelAnimationFrame,a=0,s=["ms","moz","webkit","o"],u=0;u<s.length&&!r;++u)r=i[s[u]+"RequestAnimationFrame"],o=i[s[u]+"CancelAnimationFrame"]||i[s[u]+"CancelRequestAnimationFrame"];r&&(r=r.bind(i)),o&&(o=o.bind(i)),r||(r=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),r=setTimeout(function(){e(n+i)},i);return a=n+i,r}),o||(o=function(e){clearTimeout(e)})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.z=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return o(e,[{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"clamp",value:function(t,n){var i=null!==t&&void 0!==t,r=null!==n&&void 0!==n;return t instanceof e||!i||(t=new e(t,t,t)),n instanceof e||!r||(n=new e(n,n,n)),i&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y),this.z=Math.max(t.z,this.z)),r&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y),this.z=Math.min(n.z,this.z)),this}},{key:"divide",value:function(t){return t instanceof e?(this.x/=t.x,this.y/=t.y,this.z/=t.z):(this.x/=t,this.y/=t,this.z/=t),this}},{key:"subtract",value:function(t){return t instanceof e?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t),this}},{key:"multiply",value:function(t){return t instanceof e?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t),this}},{key:"add",value:function(t){return t instanceof e?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t),this}},{key:"equals",value:function(t){return t instanceof e?t.x===this.x&&t.y===this.y&&t.z===this.z:t===this.x&&t===this.y&&t===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"}},{key:"roundDecimal",value:function(e){return this.x=parseFloat(this.x.toFixed(e)),this.y=parseFloat(this.y.toFixed(e)),this.z=parseFloat(this.z.toFixed(e)),this}}],[{key:"fromObject",value:function(t){return new e(t.x,t.y,t.z)}},{key:"NULL",get:function(){return new e(0,0,0)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.min=t,this.max=n}return o(e,[{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"getLength",value:function(){return this.max-this.min}},{key:"contains",value:function(e){return this.min<=e&&e<=this.max}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(44),a=n(24),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.a(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(1,1),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.a(2,-1),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.a(2,0);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._p0=t.clone(),this._p1=n.clone(),this._p2=i.clone(),this._p3=r.clone(),this._segments=[],this._length=-1,this._sample=[]}return s(e,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.a(0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.a(1,1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.a(2,1),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.a(2,0);this._p0=e.clone(),this._p1=t.clone(),this._p2=n.clone(),this._p3=i.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=0,n=0,i=[],r=1/e,o=this._p0.clone(),a=1;a<=e;a++){var s=[];s.push({t:t,s:n,point:o}),t+=r,t=Math.min(t,1);var u=this.evalAt(t);n+=u.clone().subtract(o).len(),s.push({t:t,s:n,point:u}),i.push(s),o=u}return this._segments=i,this._length=n,n}},{key:"evalAt",value:function(e){e=this.normalizeParameter(e);var t=this._p0.clone().multiply(Math.pow(1-e,3)),n=this._p1.clone().multiply(3*(1-e)*(1-e)*e),i=this._p2.clone().multiply(3*(1-e)*e*e),r=this._p3.clone().multiply(e*e*e);return t.add(n).add(i).add(r)}},{key:"isInSegment",value:function(e,t){return(e=this.normalizeArcLength(e))>=t[0].s&&e<=t[1].s}},{key:"getArcLengthSegment",value:function(e){e=this.normalizeArcLength(e);for(var t=0;t<this._segments.length;t++){var n=this._segments[t];if(this.isInSegment(e,n))return n}return null}},{key:"normalizeArcLength",value:function(e){return Math.max(Math.min(this._length,e),0)}},{key:"normalizeParameter",value:function(e){return Math.max(Math.min(1,e),0)}},{key:"getParameterForArcLength",value:function(e){var t=this.normalizeArcLength(e),n=this.getArcLengthSegment(t);if(!n)return a.a.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var i=(t-n[1].s)/(n[0].s-n[1].s);return i*n[0].t+(1-i)*n[1].t}},{key:"evalAtArcLength",value:function(e){return this.evalAt(this.getParameterForArcLength(e))}},{key:"approximateAtArcLength",value:function(e){var t=this.normalizeArcLength(e),n=this.getArcLengthSegment(t);if(!n)return-1;var i=(t-n[1].s)/(n[0].s-n[1].s);return n[0].point.clone().multiply(i).add(n[1].point.clone().multiply(1-i))}},{key:"parameterSample",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=1/e,n=[],i=0,r=0;r<=e+1;r++)n.push(this.evalAt(i)),i+=t;return this._sample=n,[].concat(n)}},{key:"arcLengthApproxSample",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._length/e,r=[],o=0,a=t?1:0;a<e+1;a++)r.push(this.approximateAtArcLength(o)),o+=i;return n&&r.pop(),this._sample=r,[].concat(r)}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(38),h=n(45),p=n(44),d=n(165),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=f.Constants.OptionType,y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,d.a),_(t,[{key:"getRotation",value:function(){var e=0;switch(this.getTags().Orientation){case 7:case 8:e=-90;break;case 3:case 4:e=-180;break;case 5:case 6:e=90}return e}},{key:"_getFlipVertically",value:function(){return-1!==[5,7].indexOf(this.getTags().Orientation)}},{key:"_getFlipHorizontally",value:function(){return-1!==[2,4].indexOf(this.getTags().Orientation)}},{key:"_getFinalOptions",value:function(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(e){var t=this._getFinalOptions(),n=t.rotation%360*(Math.PI/180);this._sprite.setScale(t.flipHorizontally?-1:1,t.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var i=this._sprite.getBounds();return this._renderTexture.resizeTo(new p.a(i.width,i.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),h.a.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._getFinalOptions();return e=e.clone(),t.rotation%180&&e.flip(),e}},{key:"applyTo",value:function(e){var t=this._getFinalOptions(),n=f.Utils.createCanvas();90===Math.abs(t.rotation%180)?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var i=n.getContext("2d"),r=t.rotation*Math.PI/180,o=.5*(n.width-e.width),a=.5*(n.height-e.height);return i.translate(o,a),i.translate(.5*e.width,.5*e.height),i.rotate(r),i.translate(-.5*e.width,-.5*e.height),t.flipVertically&&(i.translate(0,e.height),i.scale(1,-1)),t.flipHorizontally&&(i.translate(e.width,0),i.scale(-1,1)),i.drawImage(e,0,0),n}}]),t}();y.identifier="exif-orientation",y.prototype.availableOptions={tags:{type:g.OBJECT,default:{}}},t.a=y},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(121),a=n(122),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=a.a.MARKERS,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new o.a(this._buf),this._stream.setHead(0)}return s(e,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==u.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var e=this._stream.readString(4),t=this._stream.readInt8();return"JFIF"===e&&0===t}},{key:"setUnitDensity",value:function(e){this._stream.setHead(11),this._stream.writeInt8(e)}},{key:"setDensityX",value:function(e){this._stream.setHead(12),this._stream.writeInt16(e)}},{key:"setDensityY",value:function(e){this._stream.setHead(14),this._stream.writeInt16(e)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}},{key:"getBuffer",value:function(){return this._buf}}]),e}();t.a=l},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(121),a=n(122),s=n(30),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=s.a.invariant,c=a.a.MARKERS,f=a.a.EXIF_TAGS,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buf=t,this._stream=new o.a(this._buf),this._stream.setHead(0),this._parse()}return u(e,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===c.EXIF&&this._stream.readInt16()>0&&"Exif"===this._stream.readString(4)}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var e=this._stream.getHead(),t=!1,n=this._stream.readInt16();18761===n?t=!1:19789===n?t=!0:l(!1,"Invalid TIFF data: No endian type found"),l(42===this._stream.readInt16(!t),"Invalid TIFF data: No 0x002A");var i=this._stream.readInt32(!t);l(i>=8,"Invalid TIFF data: First IFD offset < 8");var r=e+i,o=this._readTags(this._stream,e,r,t);this._tags=o.tags,this._tagData=o.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(e){if(this._tagData.Orientation){var t=this._tagData.Orientation.entryOffset;this._stream.setHead(t+8),this._stream.writeInt16(e)}}},{key:"_readTags",value:function(e,t,n,i){e.setHead(n);for(var r=e.readInt16(!i),o={},a=[],s=0;s<r;s++){var u=n+12*s+2;e.setHead(u);var l=e.readInt16(!i),c=void 0,h=void 0,p=void 0;if(f[l]){l=f[l],c=e.readInt16(!i),h=e.readInt32(!i),p=e.readInt32(!i)+t;var d=null;switch(c){case 1:case 7:if(1===h)d=e.readInt8(!i);else{d=[];for(var _=0;_<h;_++)d.push(e.readInt8(!i))}break;case 2:e.setHead(h>4?p:u+8),d=e.readString(h);break;case 3:if(e.setHead(h>2?p:u+8),1===h)d=e.readInt16(!i);else{d=[];for(var g=0;g<h;g++)d.push(e.readInt16(!i))}break;case 4:case 9:if(e.setHead(h>1?p:u+8),1===h)d=e.readInt32(!i);else{d=[];for(var y=0;y<h;y++)d.push(e.readInt32(!i))}break;case 5:case 10:if(e.setHead(p),1===h)d=e.readInt32(!i)/e.readInt32(!i);else{d=[];for(var v=0;v<h;v++){var m=e.readInt32(!i)/e.readInt32(!i);d.push(m)}}}o[l]=d,a[l]={value:d,numValues:h,entryOffset:u,valueOffset:p,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}]),e}();t.a=h},function(e,t,n){"use strict";var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(11),h=n.n(f),p=n(1),d=n.n(p),_=n(39),g=n(85),y=n(30),v=n(88),m=(n(120),n(69)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).call(this,n));return i._sdk=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,m.a),b(t,[{key:"export",value:function(){var e=this,t=this._options.imageFormat;return this.validateSettings().then(function(){return e._prepareSDK().then(function(t){return function t(n){return n.renderDone?n:e._sdk.render().then(function(e){return t(e)})}(t)})}).then(function(t){var n=t.outputTexture,i=(t.renderDone,e._sdk.getRenderer()),r=i.getCanvas();return i.isOfType(_.RendererType.WEBGL)&&(r=e._createCanvasFromTexture(n)),e._encodeImageFormat(r)}).then(function(n){return e._restoreExifMetadata(n,t)}).then(function(t){return e._restoreSDK().then(function(){return t})})}},{key:"_restoreExifMetadata",value:function(e,t,n){if(t===_.ImageFormat.JPEG){var i=this._sdk.getExif();if(i)if("undefined"!=typeof WEBPACK)e=i.restoreSegments(e);else{var o=this._options.renderType;o===_.RenderType.BUFFER?e=Buffer.from(i.restoreSegmentsInArray([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(e)))):o===_.RenderType.DATAURL&&(e=i.restoreSegments(e))}}return h.a.resolve(e)}},{key:"_encodeAsDataURL",value:function(e,t,n){return y.a.isBrowser?h.a.resolve(e.toDataURL(t,n)):new h.a(function(i,r){e.toDataURL(t,n,function(e,t){e?r(e):i(t)})})}},{key:"_encodeAsHTMLImage",value:function(e,t,n){return this._encodeAsDataURL(e).then(function(e){var t=new v.a;return t.src=e,h.a.resolve(t)})}},{key:"_encodeAsBuffer",value:function(e,t,n){return t===_.ImageFormat.JPEG?h.a.resolve(e.toBuffer(t,{quality:n,progressive:!0,chromaSubsampling:!1})):t===_.ImageFormat.PNG?h.a.resolve(e.toBuffer(t,{quality:n})):t===_.ImageFormat.RAW?h.a.resolve(e.toBuffer(t)):h.a.reject(new Error("Unsupported imageFormat: "+t))}},{key:"_encodeAsMSBlob",value:function(e,t,n){return h.a.resolve(e.msToBlob())}},{key:"_encodeAsBLOB",value:function(e,t,n){return new h.a(function(i,r){e.toBlob(function(e){i(e)},t,n)})}},{key:"_encodeImageFormat",value:function(e){var t=this._options,n=t.imageFormat,i=t.quality,r=this._options.renderType;switch(-1!==[_.RenderType.MSBLOB,_.RenderType.BLOB].indexOf(r)&&(r=-1!==(window&&window.navigator&&window.navigator.userAgent||"").indexOf("Edge")?_.RenderType.MSBLOB:_.RenderType.BLOB),r){case _.RenderType.IMAGE:return this._encodeAsHTMLImage(e,n,i);case _.RenderType.DATAURL:return this._encodeAsDataURL(e,n,i);case _.RenderType.BUFFER:return this._encodeAsBuffer(e,n,i);case _.RenderType.MSBLOB:return this._encodeAsMSBlob(e,n,i);case _.RenderType.BLOB:return this._encodeAsBLOB(e,n,i)}return h.a.reject(new Error("Unsupported RenderType: "+r+"!"))}},{key:"_prepareSDK",value:function(){var e=this._sdk.getRenderer();this._sdkSettings={dimensions:e.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var t=e.isOfType(_.RendererType.CANVAS);e.setPixelRatio(1),e.resizeTo(this._sdk.getFinalDimensions(),t),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach(function(e){e.disposeRenderTextures()}),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var e=this._sdk.getRenderer(),t=e.isOfType(_.RendererType.CANVAS);return e.setPixelRatio(this._sdkSettings.pixelRatio),e.resizeTo(this._sdkSettings.dimensions,t),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(e){var t=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),i=this._sdk.getRenderer().getContext(),r=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,r);var o=e.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0);var a=new Uint8Array(n.x*n.y*4);i.readPixels(0,0,n.x,n.y,i.RGBA,i.UNSIGNED_BYTE,a);var s=void 0;if(this._checkPixelsForTransparency(a)){var u=new g.a.Sprite(e);u.setFilters([new g.a.Filters.UnpremultiplyFilter]);var l=new g.a.Container;l.addChild(u),(s=new g.a.RenderTexture(t,n.x,n.y)).render(l);var c=s.getBaseTexture().getGLTextureForRenderer(t);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,c,0),i.readPixels(0,0,n.x,n.y,i.RGBA,i.UNSIGNED_BYTE,a),t.setRenderTarget(),s.dispose()}var f=y.a.createCanvas();f.width=n.x,f.height=n.y;var h=f.getContext("2d"),p=h.createImageData(n.x,n.y);return p.data.set(a),h.putImageData(p,0,0),i.deleteFramebuffer(r),f}},{key:"_checkPixelsForTransparency",value:function(e){for(var t=this._sdk.getFinalDimensions(),n=t.x*t.y*4,i=3;i<n;i+=4)if(255!==e[i])return!0;return!1}}]),t}();w.prototype.availableOptions={renderType:{type:_.OptionType.STRING,available:y.a.values(_.RenderType),default:_.RenderType.IMAGE},imageFormat:{type:_.OptionType.STRING,available:y.a.values(_.ImageFormat),default:_.ImageFormat.PNG},quality:{type:_.OptionType.NUMBER,default:.8}},t.a=w},function(e,t){/*
 * This file is part of PhotoEditorSDK.
 *
 * Copyright (C) 2016-2019 img.ly GmbH <contact@img.ly>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, without
 * modification, are permitted provided that the following license agreement
 * is approved and a legal/financial contract was signed by the user.
 * The license agreement can be found under following link:
 *
 * https://www.photoeditorsdk.com/LICENSE.txt
 * @license
 */
Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return r;r++}return-1},configurable:!0,writable:!0})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}]),e}();t.a=a},function(e,t){e.exports=require("fs")},function(e,t){e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n.n(i),o=n(312),a=n(320),s=n(322),u=n(388),l=n(389),c=n(393),f=n(396),h=n(399),p=n(400),d=n(401),_=n(404),g=n(410),y=n(439),v=n(441),m=n(442),b=n(466),w=n(467),x=[o.a,a.a,s.a,u.a,l.a,c.a,f.a,h.a,p.a,d.a,_.a,g.a,y.a,v.a,m.a,b.a,w.a];r.a.AllOperations=x,t.default=x},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(170),g=n(314),y=n(316),v=n(318),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=p.Math.ColorMatrix,w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._clarityFilter=new g.a,o._temperatureFilter=new y.a,o._sharpnessFilter=new v.a,o._filter=new _.a,o._sprite.setFilters([o._clarityFilter,o._temperatureFilter,o._filter]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),m(t,[{key:"_render",value:function(e){var t=e.getDimensions();t.x=1/t.x,t.y=1/t.y;var n=new b;n.multiply(b.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(b.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:t,colorMatrix:n,colorOffset:n.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:t});var i=new b;i.multiply(b.createExposureMatrix(this._options.exposure)),i.multiply(b.createSaturationMatrix(this._options.saturation+1)),i.multiply(b.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),i.multiply(b.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:i,colorOffset:i.getOffsets()});var r=[];return 0!==this._options.clarity&&r.push(this._clarityFilter),0!==this._options.sharpness&&r.push(this._sharpnessFilter),0!==this._options.temperature&&r.push(this._temperatureFilter),r.push(this._filter),this._sprite.setFilters(r),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}]),t}();w.identifier="adjustments",w.prototype.availableOptions={brightness:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:p.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:p.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:p.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},d.a.Operations.AdjustmentsOperation=w,t.a=w},function(e,t){e.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.Vector2,d=f.Math.ColorMatrix,_=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(315),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Engine.Filter),h(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.clarity,s=this._options.colorMatrix,u=new f.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),l=r.width,c=r.height,h=o.getImageData(0,0,l,c),p=i.createImageData(l,c);this.canvasShader(h,p,a,s,u),i.putImageData(p,0,0)}},{key:"canvasShader",value:function(e,t,n,i,r){for(var o=function(e,t,n){return Math.min(Math.max(e,t),n)},a=function(e,t,n){var i=o((n-e)/(t-e),0,1);return i*i*(3-2*i)},s=4*e.width,u=e.data.length,l=u-1,c=e.data,h=t.data,p=new f.Color,d=function(e){return c[e=(e=e<0?0:e)>l?l:e]},_=0;_<u;_+=4){var g=d(_+0),y=d(_+1),v=d(_+2),m=d(_+3),b=(g+d(_-4-s+0)+d(_-4+0)+d(_-4+s+0)+d(_-s+0)+d(_+s+0)+d(_+4-s+0)+d(_+4+0)+d(_+4+s))/2295,w=(y+d(_-4-s+1)+d(_-4+1)+d(_-4+s+1)+d(_-s+1)+d(_+s+1)+d(_+4-s+1)+d(_+4+1)+d(_+4+s+1))/2295,x=(v+d(_-4-s+2)+d(_-4+2)+d(_-4+s+2)+d(_-s+2)+d(_+s+2)+d(_+4-s+2)+d(_+4+2)+d(_+4+s+2))/2295,k=(m+d(_-4-s+3)+d(_-4+3)+d(_-4+s+3)+d(_-s+3)+d(_+s+3)+d(_+4-s+3)+d(_+4+3)+d(_+4+s+3))/2295;m/=255;var T=o(.3*(g/=255)+.59*(y/=255)+.1*(v/=255),.111111,.999999),C=Math.min(a(1-T,0,.11),a(T,0,.11)),E=3.7*n*C,R=Math.pow(2,.27*n*C),O=o(g+o((g-b)*E,0,10),0,1)*R,S=o(y+o((y-w)*E,0,10),0,1)*R,I=o(v+o((v-x)*E,0,10),0,1)*R,A=o(m+o((m-k)*E,0,10),0,1);p.set(O,S,I,A);var F=i.apply(p).clamp(0,1);h[_+0]=255*F.r,h[_+1]=255*F.g,h[_+2]=255*F.b,h[_+3]=255*F.a}}}]),t}();_.prototype.availableOptions={clarity:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},pixelDimension:{type:f.OptionType.VECTOR2,default:new p(100,100),uniformType:f.UniformType.FLOAT2},colorMatrix:{type:f.OptionType.COLOR_MATRIX,default:new d,uniformType:f.UniformType.MAT4},colorOffset:{type:f.OptionType.ARRAY,default:[],uniformType:f.UniformType.FLOAT4}},t.a=_},function(e,t){e.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());f.Math.Vector3;var p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(317),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Engine.Filter),h(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.temperature,s=r.width,u=r.height,l=o.getImageData(0,0,s,u),c=i.createImageData(s,u);this.canvasShader(l,c,a),i.putImageData(c,0,0)}},{key:"canvasShader",value:function(e,t,n){for(var i=function(e,t,n){return e*(1-n)+t*n},r=function(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]]},o=e.data.length,a=o-1,s=e.data,u=t.data,l=function(e){return s[e=(e=e<0?0:e)>a?a:e]},c=[.93,.54,0],f=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],h=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],p=0;p<o;p+=4){var d=l(p+0)/255,_=l(p+1)/255,g=l(p+2)/255,y=l(p+3)/255,v=r(f,[d,_,g]);v.z=function(e,t,n){return Math.min(Math.max(e,t),n)}(v.z+0,-.5226,.5226);var m=r(h,v),b=[m[0]<.5?2*m[0]*c[0]:1-2*(1-m[0])*(1-c[0]),m[1]<.5?2*m[1]*c[1]:1-2*(1-m[1])*(1-c[1]),m[2]<.5?2*m[2]*c[2]:1-2*(1-m[2])*(1-c[2])];u[p+0]=255*i(m[0],b[0],n),u[p+1]=255*i(m[1],b[1],n),u[p+2]=255*i(m[2],b[2],n),u[p+3]=255*y}}}]),t}();p.prototype.availableOptions={temperature:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT}},t.a=p},function(e,t){e.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.Vector2,d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(319),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Engine.Filter),h(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=n.getContext(),r=t.getCanvas(),o=t.getContext(),a=this._options.sharpness,s=r.width,u=r.height,l=o.getImageData(0,0,s,u),c=i.createImageData(s,u);this.canvasShader(l,c,a),i.putImageData(c,0,0)}},{key:"canvasShader",value:function(e,t,n){for(var i=function(e,t,n){return Math.min(Math.max(e,t),n)},r=e.width,o=e.height,a=e.data,s=t.data,u=function(e){return i(a[e]/255,0,1)},l=function(e,t){var n=i(e,0,r-1),a=i(t,0,o-1);return 4*(n+r*a)},c=[],f=[],h=[-1,0,0,1],p=[0,-1,1,0],d=n>0?-1:.2,_=n>0?5:.2,g=Math.abs(n),y=0;y<r;y++)for(var v=0;v<o;v++){var m=l(y,v);c[0]=u(m+0),c[1]=u(m+1),c[2]=u(m+2),c[3]=u(m+3),f[0]=_*c[0]*c[3],f[1]=_*c[1]*c[3],f[2]=_*c[2]*c[3],f[3]=_*c[3];for(var b=0;b<4;b++){var w=l(y+h[b],v+p[b]),x=u(w+3);f[3]+=d*x;for(var k=0;k<3;k++)f[k]+=d*u(w+k)*x}for(var T=0;T<3;T++)f[T]/=Math.max(f[3],1e-6),f[T]=i(f[T],0,1);f[3]=i(f[3],0,1);for(var C=0;C<4;C++)c[C]=i(function(e,t,n){return e*(1-n)+t*n}(c[C],f[C],g),0,1),s[m+C]=255*c[C]}}}]),t}();d.prototype.availableOptions={sharpness:{type:f.OptionType.NUMBER,default:0,uniformType:f.UniformType.FLOAT},pixelDimension:{type:f.OptionType.VECTOR2,default:new p(100,100),uniformType:f.UniformType.FLOAT2}},t.a=d},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(72),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=p.Math.Vector2,v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new y(.5,.5)),o._verticalFilter.setDelta(new y(-.5,.5)),o._filter=new _.a({},a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),g(t,[{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i={blurRadius:this._options.blurRadius*n,texSize:t,blurQuality:"high"};return this._horizontalFilter.set(i),this._verticalFilter.set(i),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=this._options.blurRadius,n=e.getDimensions();return this._filter.set({blurRadius:t,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"transform",value:function(e){var t=this.getBlurRadius(),n=e.applyToRelativeSize(t);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();v.identifier="blur",v.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.BlurOperation=v,t.a=v},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=n.n(_),y=n(171),v=n(8),m=n(355),b=n(7),w=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.Operation),x(t,[{key:"_render",value:function(e){return this._selectedFilter.render(this._sdk,e,this._renderTexture)}},{key:"render",value:function(e){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?k(t.prototype.__proto__||d()(t.prototype),"render",this).call(this,e):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),_.Promise.resolve(e))}},{key:"setDirtyForRenderer",value:function(e,n){k(t.prototype.__proto__||d()(t.prototype),"setDirtyForRenderer",this).call(this,e,n),this._selectedFilter.setDirtyForRenderer(e,n)}},{key:"disposeRenderTextures",value:function(){k(t.prototype.__proto__||d()(t.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){k(t.prototype.__proto__||d()(t.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(e){var t=w({},e);if(delete t.filter,e.filter){var n=e.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:e.filter.getImage(),resolution:e.filter.getResolution(),horizontalTileCount:e.filter.getHorizontalTileCount(),verticalTileCount:e.filter.getVerticalTileCount()})):"duotone"===n.identifier?this.setFilter(new n({lightColor:e.filter.getLightColor(),darkColor:e.filter.getDarkColor(),intensity:e.filter.getIntensity()})):this.setFilter(new n)}this.set(t)}},{key:"resetToDefaultFilterIntensity",value:function(){var e=this._selectedFilter&&this._selectedFilter.availableOptions,t=e&&e.intensity.default;this.setIntensity(t||1)}}]),t}();T.identifier="filter",T.prototype.availableOptions={identifier:{type:_.OptionType.STRING,default:"identity"},intensity:{type:_.OptionType.NUMBER,default:1,setter:function(e){return this._selectedFilter&&this._selectedFilter.setIntensity(e),e}},filter:{type:_.OptionType.OBJECT,default:new y.a,setter:function(e){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=e,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),e}}},T.FilterPrimitives=v,T.Filters=m,T.Filter=b.a,g.a.Operations.FilterOperation=T,t.a=T},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=n.n(r),a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(1),f=n.n(c),h=n(4),p=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),o()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(e){function t(){i(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||f()(t)).call(this));return e._fragmentSource=n(324),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=l()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.a?s()(e,t):e.__proto__=t)}(t,h.Engine.Filter),p(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getCanvas(),r=n.getContext(),o=this._options.filteredCanvas;r.save(),r.globalAlpha=1-this._options.intensity,r.drawImage(i,0,0),r.globalAlpha=this._options.intensity,r.drawImage(o,0,0),r.restore()}}]),t}();d.prototype.availableOptions={filteredImage:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.INT},filteredCanvas:{type:h.OptionType.OBJECT,default:null},intensity:{type:h.OptionType.NUMBER,default:1,uniformType:h.UniformType.FLOAT}};var _=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i(this,e),this._intensity=t,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new h.Engine.Container,this._sprite=new h.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new d}return p(e,[{key:"push",value:function(e){this._stack.push(e)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(e,t,n){if(this.isEmpty())return h.Promise.resolve();var i=e.getRenderer();this._sprite.setTexture(t);var r=this._renderTextures[i.id];if(!r){var o=e.getSprite().getTexture().getFrame();r=new h.Engine.RenderTexture(e.getRenderer(),o.width,o.height),this._renderTextures[i.id]=r}var a=n.getDimensions();r.resizeTo(a);var s=this.isDirtyForRenderer(i);if(s){this._stack.forEach(function(t){t.update(e)});var u=this._stack.map(function(e){return e.getFilter()});this._sprite.setFilters(u),r.render(this._container),this.setDirtyForRenderer(!1,i)}if(this._blendFilter.setIntensity(this._intensity),i.isOfType(h.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(r.getRenderTarget().getCanvas());else if(i.isOfType(h.RendererType.WEBGL)){var l=r.getBaseTexture();l.setGLUnit(this._blendFilter.getFilteredImage()),i.updateTexture(l,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(h.Color.TRANSPARENT),n.render(this._container),s&&this.disposeRenderTextures(),h.Promise.resolve()}},{key:"setIntensity",value:function(e){this._intensity=e}},{key:"isEmpty",value:function(){return 0===this._stack.length}},{key:"isDirtyForRenderer",value:function(e){return e.id in this._dirtiness||(this._dirtiness[e.id]=!0),this._dirtiness[e.id]}},{key:"setDirtyForRenderer",value:function(e,t){this._dirtiness[t.id]=e}},{key:"setDirty",value:function(e){for(var t in this._dirtiness)this._dirtiness[t]=e}},{key:"disposeRenderTextures",value:function(){for(var e in this._renderTextures)this._renderTextures[e].dispose(),delete this._renderTextures[e]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach(function(e){return e.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),e}();t.a=_},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(326),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.brightness;if(0!==s){s*=255;for(var u=0;u<i.width*i.height;u++){var l=4*u;a.data[l]+=s,a.data[l+1]+=s,a.data[l+2]+=s}o.putImageData(a,0,0)}else o.putImageData(a,0,0)}}]),t}();y.prototype.availableOptions={brightness:{type:d.OptionType.NUMBER,default:0,uniformType:d.UniformType.FLOAT}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(328),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.contrast;if(1!==s){for(var u=0;u<i.width*i.height;u++){var l=4*u;a.data[l]=(a.data[l]-127)*s+127,a.data[l+1]=(a.data[l+1]-127)*s+127,a.data[l+2]=(a.data[l+2]-127)*s+127}o.putImageData(a,0,0)}}}]),t}();y.prototype.availableOptions={contrast:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=d.Math.ColorMatrix,v=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(330),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.colorMatrix,u=new d.Color(0,0,0,0),l=0;l<i.width*i.height;l++){var c=4*l;u.r=a.data[c]/255,u.g=a.data[c+1]/255,u.b=a.data[c+2]/255,u=s.apply(u),a.data[c]=255*u.r,a.data[c+1]=255*u.g,a.data[c+2]=255*u.b}o.putImageData(a,0,0)}}]),t}();v.prototype.availableOptions={colorMatrix:{type:d.OptionType.COLOR_MATRIX,default:new y,uniformType:d.UniformType.MAT4},colorMatrixOffset:{type:d.OptionType.ARRAY,default:[],uniformType:d.UniformType.FLOAT4}};var m=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new v,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),t}();m.prototype.availableOptions=v.prototype.availableOptions,t.a=m},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(332),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=[.3,.59,.11],u=this._options.desaturation,l=0;l<i.width*i.height;l++){var c=4*l,f=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*f-a.data[c])*u,a.data[c+1]+=(255*f-a.data[c+1])*u,a.data[c+2]+=(255*f-a.data[c+2])*u}o.putImageData(a,0,0)}}]),t}();y.prototype.availableOptions={desaturation:{type:d.OptionType.NUMBER,default:1,uniformType:d.UniformType.FLOAT}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(334),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options,u=s.lightColor,l=s.darkColor,c=s.intensity,f=0;f<i.width*i.height;f++){var h=4*f,p=a.data[h]/255,_=a.data[h+1]/255,g=a.data[h+2]/255,y=a.data[h+3]/255,v=new d.Color(p,_,g,y),m=this._duoToneKernel(v,u,l,c);a.data[h]=255*m.r,a.data[h+1]=255*m.g,a.data[h+2]=255*m.b,a.data[h+3]=255*m.a}o.putImageData(a,0,0)}},{key:"_duoToneKernel",value:function(e,t,n,i){if(e.clone().clamp(0,1),i>0){var r=Math.max(i+1,1e-7);e.r=1-Math.pow(1-e.r,r),e.g=1-Math.pow(1-e.g,r),e.b=1-Math.pow(1-e.b,r)}else{var o=Math.max(1-i,1e-7);e.r=Math.pow(e.r,o),e.g=Math.pow(e.g,o),e.b=Math.pow(e.b,o)}var a=.2126*e.r+.7152*e.g+.0722*e.b,s=Math.min(Math.max(a,0),1),u=n.clone().mix(t,s);return u.a*=e.a,u}}]),t}();y.prototype.availableOptions={lightColor:{type:d.OptionType.COLOR,default:d.Color.RED,uniformType:d.UniformType.FLOAT4},darkColor:{type:d.OptionType.COLOR,default:d.Color.BLACK,uniformType:d.UniformType.FLOAT4},intensity:{type:d.OptionType.NUMBER,default:.5,uniformType:d.UniformType.FLOAT}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var e=2*this._options.intensity-1;this._filter.setIntensity(e)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(336),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.gamma,u=new Float32Array(256),l=0;l<256;l++)u[l]=255*Math.pow(l/255,s.r);for(var c=new Float32Array(256),f=0;f<256;f++)c[f]=255*Math.pow(f/255,s.g);for(var h=new Float32Array(256),p=0;p<256;p++)h[p]=255*Math.pow(p/255,s.b);for(var d=0;d<i.width*i.height;d++){var _=4*d;a.data[_]=u[a.data[_]],a.data[_+1]=c[a.data[_+1]],a.data[_+2]=h[a.data[_+2]]}o.putImageData(a,0,0)}}]),t}();y.prototype.availableOptions={gamma:{type:d.OptionType.COLOR,default:d.Color.WHITE,uniformType:d.UniformType.FLOAT3}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(338),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i,r=t.getCanvas(),o=t.getContext(),a=n.getContext(),s=o.getImageData(0,0,r.width,r.height),u=this._options.color,l=0;l<r.width;l++)for(var c=0;c<r.height;c++){var f=4*(r.width*c+l),h=(l/r.width-.5)/.75,p=(c/r.height-.5)/.75;i=1-(h*h+p*p),i=Math.min(Math.max(i,.1),1),s.data[f]=s.data[f]*(i*u.r),s.data[f+1]=s.data[f+1]*(i*u.g),s.data[f+2]=s.data[f+2]*(i*u.b),s.data[f+3]=255}a.putImageData(s,0,0)}}]),t}();y.prototype.availableOptions={color:{type:d.OptionType.COLOR,default:d.Color.WHITE,uniformType:d.UniformType.FLOAT3}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(340),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var u=0;u<i.height;u++){var l=4*(i.width*u+s);a.data[l+2]=.33*a.data[l+1],a.data[l]=.6*a.data[l],a.data[l+2]+=.33*a.data[l],a.data[l+1]=.7*a.data[l+1],a.data[l+3]=255}o.putImageData(a,0,0)}}]),t}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),t}();t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(342),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var u=0;u<i.height;u++){var l=4*(i.width*u+s),c=.2125*a.data[l]+.7154*a.data[l+1]+.0721*a.data[l+2];a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),t}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),t}();t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(0),l=n.n(u),c=n(2),f=n.n(c),h=n(3),p=n.n(h),d=n(1),_=n.n(d),g=n(4),y=(n.n(g),n(18)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=g.Math.Vector2,b=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||_()(t)).call(this));return e._precomputeQuads(),e._fragmentSource=n(345),e}return o(t,g.Engine.Filter),v(t,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,n=new m;n.y=.125*(0|t)|0,n.x=(0|t)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a).getContext("2d"),u=r.getImageData(0,0,i.width,i.height),l=s.getImageData(0,0,a.width,a.height),c=new m,f=0;f<i.width*i.height*4;f+=4){var h=u.data[f],p=u.data[f+1],d=u.data[f+2],_=u.data[f+3]/255,g=this._quads[d];c.x=64*g.x,c.y=64*g.y,c.x+=Math.floor(h/4),c.y+=Math.floor(p/4);var y=4*(a.width*c.y+c.x)|0,v=l.data[y];v=h*(1-_)+v*_;var b=l.data[y+1];b=p*(1-_)+b*_;var w=l.data[y+2];w=d*(1-_)+w*_,u.data[f]=v,u.data[f+1]=b,u.data[f+2]=w}o.putImageData(u,0,0)}},{key:"_createImageCanvas",value:function(e){var t=g.Utils.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),t}();b.prototype.availableOptions={lookupTable:{type:g.OptionType.NUMBER,default:3,uniformType:g.UniformType.INT},lookupTableImage:{type:g.OptionType.IMAGE,uniformType:null}};var w=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(o)));return s._filter=new b,s._textures={},s}return o(t,y.a),v(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(g.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(g.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),n=t.id;this._textures[n]||(this._textures[n]=new g.Engine.BaseTexture);var i=this._textures[n];i.setSource(this._options.image),i.setGLUnit(3),t.updateTexture(i)}},{key:"dispose",value:function(){for(var e in function e(t,n,i){null===t&&(t=Function.prototype);var r=s()(t,n);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||_()(t.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),t}();w.prototype.availableOptions={image:{type:g.OptionType.IMAGE}},t.a=w},function(e,t){e.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(347),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=this._options.saturation,u=0;u<i.width;u++)for(var l=0;l<i.height;l++){var c=4*(i.width*l+u),f=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=f*(1-s)+a.data[c]*s,a.data[c+1]=f*(1-s)+a.data[c+1]*s,a.data[c+2]=f*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),t}();y.prototype.availableOptions={saturation:{type:d.OptionType.NUMBER,default:0,uniformType:d.UniformType.FLOAT}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(349),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var u=0;u<i.height;u++){var l=4*(i.width*u+s);a.data[l]=Math.max(255*this._options.color.r,a.data[l]),a.data[l+1]=Math.max(255*this._options.color.g,a.data[l+1]),a.data[l+2]=Math.max(255*this._options.color.b,a.data[l+2])}o.putImageData(a,0,0)}}]),t}();y.prototype.availableOptions={color:{type:d.OptionType.COLOR,default:d.Color.WHITE,uniformType:d.UniformType.FLOAT3}};var v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),g(t,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),t}();v.prototype.availableOptions=y.prototype.availableOptions,t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(172)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._options.rgbControlPoints||(o._options.rgbControlPoints={red:o._options.controlPoints,green:o._options.controlPoints,blue:o._options.controlPoints}),o._updateLookupTable(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),p(t,[{key:"_updateLookupTable",value:function(){var e=this._calculateSplineCurve(this._options.rgbControlPoints.red),t=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(e,t,n)}},{key:"_buildLookupTable",value:function(e,t,n){for(var i=[],r=0;r<256;r++)i.push(Math.min(Math.max(r+e[r],0),255)),i.push(Math.min(Math.max(r+t[r],0),255)),i.push(Math.min(Math.max(r+n[r],0),255)),i.push(255);return i}},{key:"_calculateSplineCurve",value:function(e){e=e.sort(function(e,t){return e[0]>t[0]});var t,n=this._getSplineCurve(e),i=n[0];if(i[0]>0)for(t=0;t<i[0];t++)n.unshift([0,0]);var r=[];for(t=0;t<n.length;t++){var o=n[t],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),r.push(s)}return r}},{key:"_getSplineCurve",value:function(e){var t,n=this._secondDerivative(e),i=n.length,r=[];for(t=0;t<i;t++)r[t]=n[t];var o=[];for(t=0;t<i-1;t++)for(var a=e[t],s=e[t+1],u=a[0];u<s[0];u++){var l=(u-a[0])/(s[0]-a[0]),c=1-l,f=l,h=s[0]-a[0],p=c*a[1]+f*s[1]+h*h/6*((c*c*c-c)*r[t]+(f*f*f-f)*r[t+1]);p>255?p=255:p<0&&(p=0),o.push([u,p])}return 255===o.length&&o.push(e[e.length-1]),o}},{key:"_secondDerivative",value:function(e){var t=e.length;if(t<=0||1===t)return null;var n,i,r=[],o=[];for(r[0]=[0,1,0],n=1;n<t-1;n++){var a=e[n-1],s=e[n],u=e[n+1];r[n]=r[n]||[],r[n][0]=(s[0]-a[0])/6,r[n][1]=(u[0]-a[0])/3,r[n][2]=(u[0]-s[0])/6,o[n]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[t-1]=0,r[t-1]=[0,1,0],n=1;n<t;n++)i=r[1][0]/r[n-1][1],r[n][1]-=i*r[n-1][2],r[n][0]=0,o[n]-=i*o[n-1];for(n=t-2;n>0;n--)i=r[n][2]/r[n+1][1],r[n][1]-=i*r[n+1][0],r[n][2]=0,o[n]-=i*o[n+1];var l=[];for(n=0;n<t;n++)l[n]=o[n]/r[n][1];return l}}]),t}();d.prototype.availableOptions={rgbControlPoints:{type:f.OptionType.OBJECT},controlPoints:{type:f.OptionType.ARRAY,default:[]},textureGLUnit:{type:f.OptionType.NUMBER,default:1}},t.a=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=f()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(l.a?l()(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(2),l=n.n(u),c=n(3),f=n.n(c),h=n(1),p=n.n(h),d=n(4),_=(n.n(d),n(18)),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||p()(t)).call(this));return e._fragmentSource=n(352),e}return o(t,d.Engine.Filter),g(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=r.getImageData(0,0,i.width,i.height),s=0;s<i.width;s++)for(var u=0;u<i.height;u++){var l=4*(i.width*u+s),c=a.data[l]/255*.3+a.data[l+1]/255*.3+a.data[l+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[l]=c,a.data[l+1]=c,a.data[l+2]=c}o.putImageData(a,0,0)}}]),t}(),v=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o)));return s._filter=new y,s}return o(t,_.a),t}();t.a=v},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}var a=n(5),s=n.n(a),u=n(0),l=n.n(u),c=n(2),f=n.n(c),h=n(3),p=n.n(h),d=n(1),_=n.n(d),g=n(4),y=(n.n(g),n(18)),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=g.Math.Vector2,b=g.Math.Vector3,w=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||_()(t)).call(this));return e._precomputeQuads(),e._fragmentSource=n(354),e}return o(t,g.Engine.Filter),v(t,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var e=0;e<256;e++){var t=e/255*63,n=new m;n.y=.125*(0|t)|0,n.x=(0|t)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=this._options,r=i.resolution,o=i.horizontalTileCount,a=i.verticalTileCount,s=t.getCanvas(),u=t.getContext(),l=n.getContext(),c=this._options.lookupTableImage,f=this._createImageCanvas(c).getContext("2d"),h=u.getImageData(0,0,s.width,s.height),p=f.getImageData(0,0,c.width,c.height),d=new b(r/o-1|0,r/a-1|0,o*a-1|0),_=new g.Color,y=new g.Color,v=new g.Color,w=new g.Color,x=new g.Color,k=new g.Color,T=new g.Color,C=new g.Color,E=new m,R=new m,O=function(e,t,n,i){e.r=t.r*(1-i)+n.r*i,e.g=t.g*(1-i)+n.g*i,e.b=t.b*(1-i)+n.b*i},S=function(e,t,n){var i=4*((n=.5+n|0)*r+(t=.5+t|0));e.r=p.data[i]/255,e.g=p.data[i+1]/255,e.b=p.data[i+2]/255,e.a=p.data[i+3]/255},I=new g.Color,A=new g.Color,F=function(e,t,n,i,r,o,a){O(I,t,i,o),O(A,n,r,o),O(e,I,A,a)},M=new m(r,r).divide(o,a).floor(),B=0;B<s.width*s.height*4;B+=4){_.set(h.data[B]/255,h.data[B+1]/255,h.data[B+2]/255,h.data[B+3]/255);var D=new b(_.r*d.x,_.g*d.y,_.b*d.z),L=D.clone().floor().toInt(),N=D.clone().ceil().toInt(),P=D.clone().fract();E.y=L.z/o|0,E.x=L.z-E.y*o|0,R.y=N.z/o|0,R.x=N.z-R.y*o|0,E.multiply(M),R.multiply(M),S(x,E.x+L.x,E.y+L.y),S(k,E.x+L.x,E.y+N.y),S(T,E.x+N.x,E.y+L.y),S(C,E.x+N.x,E.y+N.y),F(v,x,k,T,C,P.x,P.y),S(x,R.x+L.x,R.y+L.y),S(k,R.x+L.x,R.y+N.y),S(T,R.x+N.x,R.y+L.y),S(C,R.x+N.x,R.y+N.y),F(w,x,k,T,C,P.x,P.y),O(y,v,w,P.z),h.data[B]=Math.ceil(255*y.r),h.data[B+1]=Math.ceil(255*y.g),h.data[B+2]=Math.ceil(255*y.b)}l.putImageData(h,0,0)}},{key:"_createImageCanvas",value:function(e){var t=g.Utils.createCanvas();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}}]),t}();w.prototype.availableOptions={lookupTable:{type:g.OptionType.NUMBER,default:3,uniformType:g.UniformType.INT},lookupTableImage:{type:g.OptionType.IMAGE,uniformType:null},resolution:{type:g.OptionType.NUMBER,default:128,uniformType:g.UniformType.FLOAT},horizontalTileCount:{type:g.OptionType.NUMBER,default:5,uniformType:g.UniformType.FLOAT},verticalTileCount:{type:g.OptionType.NUMBER,default:5,uniformType:g.UniformType.FLOAT}};var x=function(e){function t(){var e;i(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=r(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(o)));return s._filter=new w,s._textures={},s}return o(t,y.a),v(t,[{key:"update",value:function(e){var t=e.getRenderer();t.isOfType(g.RendererType.WEBGL)?this._updateWebGLTexture(e):t.isOfType(g.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,i=n.resolution,r=n.verticalTileCount,o=n.horizontalTileCount;this._filter.set({resolution:i,verticalTileCount:r,horizontalTileCount:o})}},{key:"_updateWebGLTexture",value:function(e){var t=e.getRenderer(),n=t.id;this._textures[n]||(this._textures[n]=new g.Engine.BaseTexture);var i=this._textures[n];i.setSource(this._options.image),i.setGLUnit(3),i.setMinFilter(g.Engine.BaseTexture.NearestFilter),t.updateTexture(i)}},{key:"dispose",value:function(){for(var e in function e(t,n,i){null===t&&(t=Function.prototype);var r=s()(t,n);if(void 0===r){var o=_()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||_()(t.prototype),"dispose",this).call(this),this._textures)delete this._textures[e]}}]),t}();x.prototype.availableOptions={image:{type:g.OptionType.IMAGE},resolution:{type:g.OptionType.NUMBER,default:128},horizontalTileCount:{type:g.OptionType.NUMBER,default:5},verticalTileCount:{type:g.OptionType.NUMBER,default:5}},t.a=x},function(e,t){e.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(171);n.d(t,"IdentityFilter",function(){return i.a});var r=n(356);n.d(t,"A15Filter",function(){return r.a});var o=n(357);n.d(t,"BreezeFilter",function(){return o.a});var a=n(358);n.d(t,"BWFilter",function(){return a.a});var s=n(359);n.d(t,"BWHardFilter",function(){return s.a});var u=n(360);n.d(t,"CelsiusFilter",function(){return u.a});var l=n(361);n.d(t,"ChestFilter",function(){return l.a});var c=n(362);n.d(t,"DuoToneFilter",function(){return c.a});var f=n(363);n.d(t,"FixieFilter",function(){return f.a});var h=n(364);n.d(t,"FoodFilter",function(){return h.a});var p=n(365);n.d(t,"FridgeFilter",function(){return p.a});var d=n(366);n.d(t,"FrontFilter",function(){return d.a});var _=n(367);n.d(t,"GlamFilter",function(){return _.a});var g=n(368);n.d(t,"GobblinFilter",function(){return g.a});var y=n(369);n.d(t,"K1Filter",function(){return y.a});var v=n(370);n.d(t,"K2Filter",function(){return v.a});var m=n(371);n.d(t,"K6Filter",function(){return m.a});var b=n(372);n.d(t,"KDynamicFilter",function(){return b.a});var w=n(373);n.d(t,"LeninFilter",function(){return w.a});var x=n(374);n.d(t,"LomoFilter",function(){return x.a});var k=n(375);n.d(t,"MellowFilter",function(){return k.a});var T=n(376);n.d(t,"MetalFilter",function(){return T.a});var C=n(377);n.d(t,"MorningFilter",function(){return C.a});var E=n(378);n.d(t,"OrchidFilter",function(){return E.a});var R=n(379);n.d(t,"PolaFilter",function(){return R.a});var O=n(380);n.d(t,"Pola669Filter",function(){return O.a});var S=n(381);n.d(t,"QuoziFilter",function(){return S.a});var I=n(382);n.d(t,"SemiredFilter",function(){return I.a});var A=n(383);n.d(t,"SunnyFilter",function(){return A.a});var F=n(384);n.d(t,"TexasFilter",function(){return F.a});var M=n(385);n.d(t,"X400Filter",function(){return M.a});var B=n(386);n.d(t,"LUTFilter",function(){return B.a});var D=n(387);n.d(t,"ThreeDLUTFilter",function(){return D.a})},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Contrast({contrast:.63})),o._stack.push(new c.Brightness({brightness:.12})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="a15",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Desaturation({desaturation:.5})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="breeze",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Grayscale),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="bw",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Grayscale),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="bwhard",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="celsius",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="chest",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),f=n(8),h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i,[{intensity:{type:l.OptionType.NUMBER,default:.5,required:!0,setter:function(e){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(e),this._stack.setIntensity(1)),this._dirty=!0,e}}}])));return o._filterPrimitive=new f.DuoTone({lightColor:o._options.lightColor||l.Color.WHITE,darkColor:o._options.darkColor||l.Color.BLACK,intensity:o._options.intensity||.5}),o._stack.push(o._filterPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c.a),t}();h.prototype.availableOptions={lightColor:{type:l.OptionType.COLOR,default:l.Color.WHITE,required:!0,setter:function(e){return this._filterPrimitive&&this._filterPrimitive.setLightColor(e),this.setDirty&&this.setDirty(!0),e}},darkColor:{type:l.OptionType.COLOR,default:l.Color.BLACK,required:!0,setter:function(e){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(e),this.setDirty&&this.setDirty(!0),e}},intensity:{type:l.OptionType.NUMBER,default:.5,required:!0}},h.identifier="duotone",t.a=h},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="fixie",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Saturation({saturation:1.35})),o._stack.push(new c.Contrast({contrast:1.1})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="food",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="fridge",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="front",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Contrast({contrast:1.1})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="glam",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Gobblin),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="gobblin",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),o._stack.push(new c.Saturation({saturation:.9})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="k1",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),f=n(8),h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new f.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),o._stack.push(new f.SoftColorOverlay({color:new l.Color(40/255,40/255,40/255)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c.a),t}();h.identifier="k2",t.a=h},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Saturation({saturation:.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="k6",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),o._stack.push(new c.Saturation({saturation:.7})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="kdynamic",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Desaturation({desaturation:.4})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="lenin",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="lomo",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="mellow",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),f=n(8),h=l.Math.ColorMatrix,p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i))),a=new h(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);o._stack.push(new f.ColorMatrixPrimitive({colorMatrix:a}));var s=new l.Color(.8,.6,.9);return o._stack.push(new f.Gamma({gamma:s})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c.a),t}();p.identifier="metal",t.a=p},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),o._stack.push(new c.Glow),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="morning",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),o._stack.push(new c.Desaturation({desaturation:.65})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="orchid",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="pola",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),o._stack.push(new c.Saturation({saturation:.8})),o._stack.push(new c.Contrast({contrast:1.5})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="pola669",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.Desaturation({desaturation:.65})),o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="quozi",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),o._stack.push(new c.Glow),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="semired",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),o._stack.push(new c.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="sunny",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="texas",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(7),c=n(8),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._stack.push(new c.X400),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();f.identifier="x400",t.a=f},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),f=n(8),h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i)));return o._lutPrimitive=new f.LookupTableImage({image:o._options.image}),o._stack.push(o._lutPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c.a),t}();h.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}}},h.identifier="lut",t.a=h},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(4),c=(n.n(l),n(7)),f=n(8),h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i))),a=o._options,s=a.image,l=a.resolution,c=a.verticalTileCount,h=a.horizontalTileCount;return o._lutPrimitive=new f.ThreeDLookupTableImage({image:s,resolution:l,verticalTileCount:c,horizontalTileCount:h}),o._stack.push(o._lutPrimitive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,c.a),t}();h.prototype.availableOptions={image:{type:l.OptionType.IMAGE,required:!0,setter:function(e){return this._lutPrimitive&&this._lutPrimitive.setImage(e),this.setDirty(!0),e}},resolution:{type:l.OptionType.NUMBER,default:128},horizontalTileCount:{type:l.OptionType.NUMBER,default:5},verticalTileCount:{type:l.OptionType.NUMBER,default:5}},h.identifier="3d-lut",t.a=h},function(e,t,n){"use strict";var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=n.n(y),m="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=y.Math.Vector2,x=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._colorOverlayFilter=new y.Engine.Filters.ColorOverlayFilter({color:o.getTintColor()}),o._frameContainer=new y.Engine.Container,o._resetSprites(),o._options.frame&&o._createSpritesForFrame(o._options.frame),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,y.Operation),b(t,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(e){var t=this;if(!e)return this._disposeSprites();var n=e.imageGroups,i=e.layoutMode;this._layoutMode=i||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(e){void 0!==n[e]&&["start","mid","end"].forEach(function(i){if(void 0!==n[e][i]){var r=n[e][i];"image"in r&&(r=r.image);var o=y.Engine.Texture.fromImage(r),a=new y.Engine.Sprite(o);t._spriteGroups[e][i]=a,t._sprites.push(a),t._frameContainer.addChild(a)}})})}},{key:"_render",value:function(e){var t=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(e)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(t):(this._frameRenderTexture=new y.Engine.RenderTexture(this._sdk.getRenderer(),t.x,t.y),this._frameSprite=new y.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),y.Promise.resolve()}},{key:"_updateSprites",value:function(e){var t=e.getDimensions();this._frameWidth=Math.ceil(e.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(e,"top",0),this._updateHorizontalSpriteGroup(e,"bottom",t.y-this._frameWidth),this._updateVerticalSpriteGroup(e,"left",0),this._updateVerticalSpriteGroup(e,"right",t.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.getDimensions(),r="vertical-inside"===this._layoutMode,o=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,s=this._spriteGroups[t].end,u=0,l=0,c=void 0,f=void 0;if(o){f=(c=o.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth/f);var h=new w(0,n);h.x=r?this._frameWidth:0,o.setPosition(h),o.setHeight(this._frameWidth),o.setWidth(u)}if(s){f=(c=s.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*f);var p=new w(i.x-l,n);p.x-=r?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(l)}if(a){f=(c=a.getTexture().getDimensions()).y/c.x;var d=new w(u,n),_=i.x-u-l;if(r&&(d.x+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(d),a.setWidth(_),a.setHeight(this._frameWidth),a._canvasSmoothingEnabled=!1,"repeat"===this._options.frame.imageGroups[t].mid.mode){var g=this._frameWidth/f,y=Math.ceil(_/g),v=0;if(-1!==y){var m=Math.round(_/y);a.setWidth(m),v+=m,this._ensureRepeatSpritesExist(y-1,t,a);for(var b=0;b<y-1;b++){m=Math.round((_-v)/(y-b-1));var x=this._repeatSprites[t][b],k=d.clone().add(v,0).floor();x.setPosition(k),x.setWidth(m),x.setHeight(this._frameWidth),v+=m}}}}}},{key:"_ensureRepeatSpritesExist",value:function(e,t,n){var i=this;n.getTexture().setMaxListeners(e+1);var r=this._repeatSprites[t].length;if(e>r)for(var o=e-r,a=0;a<o;a++){var s=new y.Engine.Sprite(n.getTexture());this._repeatSprites[t].push(s),this._frameContainer.addChild(s),this._sprites.push(s)}else e<r&&this._repeatSprites[t].splice(e).forEach(function(e){var t=i._sprites.indexOf(e);-1!==t&&(i._sprites.splice(t,1),i._frameContainer.removeChild(e),e.dispose())})}},{key:"_updateVerticalSpriteGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.getDimensions(),r="horizontal-inside"===this._layoutMode,o=this._spriteGroups[t].start,a=this._spriteGroups[t].mid,s=this._spriteGroups[t].end,u=0,l=0,c=void 0,f=void 0;if(o){f=(c=o.getTexture().getDimensions()).y/c.x,u=Math.floor(this._frameWidth*f);var h=new w(n,0);h.y=r?this._frameWidth:0,o.setPosition(h),o.setWidth(this._frameWidth),o.setHeight(u)}if(s){f=(c=s.getTexture().getDimensions()).y/c.x,l=Math.floor(this._frameWidth*f);var p=new w(n,i.y-l);p.y-=r?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(l)}if(a){f=(c=a.getTexture().getDimensions()).y/c.x;var d=new w(n,u),_=i.y-u-l;if(r&&(d.y+=this._frameWidth,_-=2*this._frameWidth),a.setPosition(d),a.setHeight(_),a.setWidth(this._frameWidth),a._canvasSmoothingEnabled=!1,"repeat"===this._options.frame.imageGroups[t].mid.mode){var g=this._frameWidth*f,y=Math.ceil(_/g),v=0;if(-1!==y){var m=Math.round(_/y);a.setHeight(m),v+=m,this._ensureRepeatSpritesExist(y-1,t,a);for(var b=0;b<y-1;b++){m=Math.round((_-v)/(y-b-1));var x=this._repeatSprites[t][b],k=d.clone().add(0,v).floor();x.setPosition(k),x.setHeight(m),x.setWidth(this._frameWidth),v+=m}}}}}},{key:"_disposeSprites",value:function(){var e=this;this._sprites.forEach(function(t){e._frameContainer.removeChild(t),t.getTexture().dispose(),t.dispose()}),this._resetSprites()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||g()(t.prototype),"dispose",this).call(this),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}}],[{key:"validateFrame",value:function(e){if(e){var t=e.imageGroups,n=e.layoutMode;if("string"!=typeof e.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==m(e.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var i=function(e){var n=t[e],i=n.start,r=n.end,o=n.mid;if(void 0!==t[e]){if("object"!==m(t[e]))throw new Error("Frame: `imageGroups."+e+"` needs to be of type Object.");if(void 0!==i&&!(i instanceof y.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+e+".start` needs to be of type Image.");if(void 0!==o&&!(i instanceof y.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement)&&"object"!==(void 0===o?"undefined":m(o)))throw new Error("Frame: `imageGroups."+e+".mid` needs to be of type Image or Object.");if(void 0!==r&&!(r instanceof y.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+e+".end` needs to be of type Image.")}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");i("top"),i("left"),i("right"),i("bottom")}}}]),t}();x.identifier="frame",x.prototype.availableOptions={frame:{type:y.OptionType.OBJECT,validation:x.validateFrame,setter:function(e,t){return t||this._createSpritesForFrame(e),e},default:null},alpha:{type:y.OptionType.NUMBER,default:1},tintColor:{type:y.OptionType.COLOR,default:new y.Color(1,1,1,0)},scale:{type:y.OptionType.NUMBER,default:.1}},v.a.Operations.FrameOperation=x,t.a=x},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(390),g=n(392),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._applyWatermarkFilter=function(){return o._watermarkFilter||(o._watermarkFilter=new _.a({watermarkImage:o._watermarkImage})),o._sprite.setFilters([o._watermarkFilter]),o._renderTexture.render(o._container),p.Promise.resolve()},o._loadWatermarkImage=function(){return o._watermarkImage?p.Promise.resolve():new p.Promise(function(e,t){o._watermarkImage=new p.Image,o._watermarkImage.onload=e,o._watermarkImage.src=g.a})},o._watermarkFilter=null,o._watermarkImage=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),y(t,[{key:"_render",value:function(e){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}},{key:"dispose",value:function(){this._watermarkFilter&&this._watermarkFilter.dispose(),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this)}}]),t}();v.identifier="license-watermark",v.prototype.availableOptions={},d.a.Operations.LicenseWatermarkOperation=v,t.a=v},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(391),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Engine.Filter),h(t,[{key:"_applyWebGL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getContext(),o=(r.canvas,this.getShaderForRenderer(e)),a=t.getFrame(),s=this._watermarkCanvas;s&&a.width===s.width&&a.height===s.height||this._createWatermarkCanvas(a.width,a.height);var u=f.Engine.Texture.fromCanvas(this._watermarkCanvas),l=u.getBaseTexture();e.updateTexture(l),l.setGLUnit(1),e.setRenderTarget(n),i&&n.clear(),e.setShader(o);var c=e.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",c),o.syncUniforms(),r.uniform1i(r.getUniformLocation(o.getProgram(),"u_watermarkTex"),1),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,l.getGLTextureForRenderer(e)),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),u.dispose()}},{key:"_createWatermarkCanvas",value:function(e,t){var n=this._options.watermarkImage,i=f.Utils.createCanvas();i.width=e,i.height=t;var r=i.getContext("2d"),o=void 0,a=void 0,s=void 0;e>t?(o=e/n.width,s=(t-n.height*o)/2,a=0):(o=t/n.height,s=0,a=(e-n.width*o)/2),r.drawImage(n,0,0,n.width,n.height,a,s,n.width*o,n.height*o),this._watermarkCanvas=i,this._watermarkContext=r}},{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getCanvas(),r=t.getContext(),o=n.getContext();this._options.watermarkImage,this._createWatermarkCanvas(i.width,i.height);for(var a=r.getImageData(0,0,i.width,i.height),s=this._watermarkContext.getImageData(0,0,i.width,i.height),u=new f.Color,l=new f.Color,c=new f.Color,h=0;h<i.width*i.height*4;h+=4)u.set(a.data[h]/255,a.data[h+1]/255,a.data[h+2]/255,a.data[h+3]/255),l.set(s.data[h]/255,s.data[h+1]/255,s.data[h+2]/255,s.data[h+3]/255),l.r>.8?c.copy(u.clone().mix(l,.3)):c.copy(u),a.data[h]=255*c.r,a.data[h+1]=255*c.g,a.data[h+2]=255*c.b,a.data[h+3]=255*c.a;o.putImageData(a,0,0)}}]),t}();p.prototype.availableOptions={watermarkImage:{type:f.OptionType.OBJECT,required:!0}},t.a=p},function(e,t){e.exports="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"},function(e,t,n){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(394),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=p.Math.Vector2,v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius,o._lastControlPoint1=o._options.controlPoint1.clone(),o._lastControlPoint2=o._options.controlPoint2.clone();var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new y(.5,.5)),o._verticalFilter.setDelta(new y(-.5,.5)),o._filter=new _.a({},a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),g(t,[{key:"rotate",value:function(e){var t=this._options.controlPoint1,n=this._options.controlPoint2;90===e?(t.flip(),t.x=1-t.x,n.flip(),n.x=1-n.x):-90===e&&(t.flip(),t.y=1-t.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:t,controlPoint2:n})}},{key:"flip",value:function(e){var t=this._options.controlPoint1,n=this._options.controlPoint2;switch(e){case"horizontal":t.x=1-t.x,n.x=1-n.x;break;case"vertical":t.y=1-t.y,n.y=1-n.y}this.set({controlPoint1:t,controlPoint2:n})}},{key:"transform",value:function(e){var t=this,n={};["controlPoint1","controlPoint2"].forEach(function(i){var r=t.getOption(i);n[i]=e.applyToRelativePoint(r)}),["blurRadius"].forEach(function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options,r=i.blurRadius,o=i.controlPoint1,a=i.controlPoint2,s={blurRadius:r*n,controlPoint1:o.clone(),controlPoint2:a.clone(),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=e.getDimensions(),n=this._options,i=n.blurRadius,r=n.controlPoint1,o=n.controlPoint2;return this._filter.set({blurRadius:i,controlPoint1:r.clone(),controlPoint2:o.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();v.identifier="linear-focus",v.prototype.availableOptions={controlPoint1:{type:p.OptionType.VECTOR2,default:new y(0,.5)},controlPoint2:{type:p.OptionType.VECTOR2,default:new y(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.LinearFocusOperation=v,t.a=v},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(90)),_=n.n(d),g=n(72),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=p.Math.Vector2,m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(395),a._lastBlurRadius=null,a._lastControlPoint1=new v,a._lastControlPoint2=new v,a._blurFilter=new g.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Engine.Filter),y(t,[{key:"_applyCanvas",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=t.getDimensions(),a=!n.getDimensions().equals(o);if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||a){var s=new v(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(s);var u={blurRadius:this._options.blurRadius,texSize:o},l=function(e,t,n){return Math.min(Math.max(e,t),n)},c=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),f=this._options.blurRadius;this._blurFilter.set(u),this._blurFilter._applyCanvas(e,t,n,r,function(e,t){return function(e,t,n){var i=l((n-0)/1,0,1);return i*i*(3-2*i)}(0,0,Math.abs(l(new v(e,t).subtract(i._options.controlPoint1).dot(c)/c.dot(c),0,1)))*f}),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(e,t,n,r)}},{key:"_renderLQBlur",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new v(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);_.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=new v(e.width,e.height),i=this._options.controlPoint1.clone().multiply(n),r=this._options.controlPoint2.clone().multiply(n),o=t.createLinearGradient(i.x,i.y,r.x,r.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),t.fillStyle=o,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var n=t.getContext(),i=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,i.width,i.height),u=s.data,l=o.getImageData(0,0,i.width,i.height).data,c=a.getImageData(0,0,i.width,i.height).data,f=void 0,h=0;h<i.width*i.height*4;h+=4)f=c[h]/255,u[h]=f*u[h]+(1-f)*l[h],u[h+1]=f*u[h+1]+(1-f)*l[h+1],u[h+2]=f*u[h+2]+(1-f)*l[h+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}]),t}();m.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},controlPoint1:{type:p.OptionType.VECTOR2,default:new v(0,.5),uniformType:p.UniformType.FLOAT2},controlPoint2:{type:p.OptionType.VECTOR2,default:new v(1,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new v(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new v(100,100),uniformType:p.UniformType.FLOAT2}},t.a=m},function(e,t){e.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(397),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=p.Math.Vector2,v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius,o._lastSize=o._options.size,o._lastGradientSize=o._options.gradientSize;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new y(.5,.5)),o._verticalFilter.setDelta(new y(-.5,.5)),o._filter=new _.a({},a),o._renderBlur.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),g(t,[{key:"rotate",value:function(e){var t=this._options.start,n=this._options.end;90===e?(t.flip(),t.x=1-t.x,n.flip(),n.x=1-n.x):-90===e&&(t.flip(),t.y=1-t.y,n.flip(),n.y=1-n.y),this.set({start:t,end:n})}},{key:"flip",value:function(e){var t=this._options.start,n=this._options.end;switch(e){case"horizontal":t.x=1-t.x,n.x=1-n.x;break;case"vertical":t.y=1-t.y,n.y=1-n.y}this.set({start:t,end:n})}},{key:"transform",value:function(e){var t=this,n={};["start","end"].forEach(function(i){var r=t.getOption(i);n[i]=e.applyToRelativePoint(r)}),["blurRadius","size","gradientSize"].forEach(function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options.start.clone(),r=this._options.end.clone(),o=this._options,a={blurRadius:o.blurRadius*n,size:o.size*n,gradientSize:o.gradientSize*n,start:i.clone().multiply(t),end:r.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=e.getDimensions(),n=this._options,i=n.blurRadius,r=n.size,o=n.gradientSize,a=n.start,s=n.end;return this._filter.set({blurRadius:i,gradientSize:o,size:r,start:a.clone(),end:s.clone(),texSize:t,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();v.identifier="mirrored-focus",v.prototype.availableOptions={start:{type:p.OptionType.VECTOR2,default:new y(0,.5)},end:{type:p.OptionType.VECTOR2,default:new y(1,.5)},blurRadius:{type:p.OptionType.NUMBER,default:.025},size:{type:p.OptionType.NUMBER,default:.1},gradientSize:{type:p.OptionType.NUMBER,default:.1},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.MirroredFocusOperation=v,t.a=v},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(90)),_=n.n(d),g=n(72),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=p.Math.Vector2,m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(398),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastStart=new v,a._lastEnd=new v,a._blurFilter=new g.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Engine.Filter),y(t,[{key:"_applyCanvas",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var r=t.getDimensions(),o=!n.getDimensions().equals(r);if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o){var a=new v(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(a);var s={blurRadius:this._options.blurRadius,texSize:r},u=function(e,t,n){var i=function(e,t,n){return Math.min(Math.max(e,0),1)}((n-e)/(t-e));return i*i*(3-2*i)},l=this._options,c=l.blurRadius,f=l.gradientSize,h=l.size,p=l.start,d=l.end,_=l.texSize,g=new v(p.y-d.y,d.x-p.x);g.divide(g.len()),this._blurFilter.set(s),this._blurFilter._applyCanvas(e,t,n,i,function(e,t){return u(0,1,(Math.abs(_.clone().multiply(e,t).subtract(p).dot(g))-h)/f)*c}),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(e,t,n,i)}},{key:"_renderLQBlur",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new v(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);_.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),i=new v(e.width,e.height),r=this._options.size*i.min()*n,o=this._options.gradientSize*i.min()*n,a=this._options.start.clone().multiply(i),s=this._options.end.clone().multiply(i).clone().subtract(a),u=a.clone().add(s.clone().divide(2)),l=s.len(),c=s.clone().divide(l),f=u.clone().add((r+o)*c.y,-(r+o)*c.x),h=u.clone().add(-(r+o)*c.y,(r+o)*c.x),p=t.createLinearGradient(f.x,f.y,h.x,h.y),d=h.clone().subtract(f).len();p.addColorStop(0,"#000000"),p.addColorStop(o/2/d,"#FFFFFF"),p.addColorStop(1-o/2/d,"#FFFFFF"),p.addColorStop(1,"#000000"),t.fillStyle=p,t.fillRect(0,0,e.width,e.height)}},{key:"_applyMask",value:function(e,t){for(var n=t.getContext(),i=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,i.width,i.height),u=s.data,l=o.getImageData(0,0,i.width,i.height).data,c=a.getImageData(0,0,i.width,i.height).data,f=void 0,h=0;h<i.width*i.height*4;h+=4)f=c[h]/255,u[h]=f*u[h]+(1-f)*l[h],u[h+1]=f*u[h+1]+(1-f)*l[h+1],u[h+2]=f*u[h+2]+(1-f)*l[h+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),t}();m.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},size:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},gradientSize:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},start:{type:p.OptionType.VECTOR2,default:new v(0,.5),uniformType:p.UniformType.FLOAT2},end:{type:p.OptionType.VECTOR2,default:new v(1,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new v(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new v(100,100),uniformType:p.UniformType.FLOAT2}},t.a=m},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=f.Math.Vector2,_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Operation),p(t,[{key:"_render",value:function(e){var t=this._options.rotation%360,n=t*(Math.PI/180),i=90===t||270===t,r=this._options.flipHorizontally!==this._options.flipVertically,o=i&&r?!this._options.flipVertically:this._options.flipVertically,a=i&&r?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(a?-1:1,o?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var s=this._sprite.getBounds();return this._renderTexture.resizeTo(new d(s.width,s.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"getNewDimensions",value:function(e){return e=e.clone(),this._options.rotation%180&&e.flip(),e}},{key:"flip",value:function(e){var t=this._options.rotation;switch(90!==t&&270!==t||(e="vertical"===e?"horizontal":"vertical"),e){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),t}();_.identifier="orientation",_.prototype.availableOptions={rotation:{type:f.OptionType.NUMBER,default:0,validation:function(e){if(e%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(e){return(e+360)%360}},flipVertically:{type:f.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:f.OptionType.BOOLEAN,default:!1}},h.a.Operations.OrientationOperation=_,t.a=_},function(e,t,n){"use strict";var i=n(43),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=n.n(_),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},m=_.Engine.Filters.OverlayFilter,b=_.Math.Vector2,w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._overlayTexture=_.Engine.Texture.fromImage(o._options.image),o._overlayContainer=new _.Engine.Container,o._overlaySprite=new _.Engine.Sprite,o._overlaySprite.setTexture(o._overlayTexture),o._overlaySprite.setAnchor(0,0),o._overlayContainer.addChild(o._overlaySprite),o._overlayFilter=new _.Engine.Filters.OverlayFilter({overlayImage:o._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:o._overlayTexture}),o._sprite.setFilters([o._overlayFilter]),o._renderedOverlaySprite=new _.Engine.Sprite,o._renderedOverlayContainer=new _.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayRendered=!1,o._lastInputDimensions=new b(0,0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.Operation),y(t,[{key:"setOption",value:function(e,n){if(v(t.prototype.__proto__||d()(t.prototype),"setOption",this).call(this,e,n),"image"===e&&n&&this._sdk){var i=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(n),i.isOfType(_.RendererType.WEBGL)&&i.updateTexture(r),this._overlayRendered=!1}}},{key:"_render",value:function(e){var t=e.getDimensions(),n=this._options,i=n.image,r=n.alpha,o=n.blendMode;return i?(this._overlayRendered&&this._lastInputDimensions.equals(t)||(this._renderOverlayToRenderTexture(e),this._overlayRendered=!0,this._lastInputDimensions.copy(t)),this._overlayFilter.set({blendMode:o,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),_.Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),_.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(e){var t=this._sdk.getRenderer(),n=e.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new _.Engine.RenderTexture(t,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var i=this._options.image,r=i.width,o=i.height,a=_.Utils.resizeVectorToFill(new b(r,o),n);this._overlaySprite.setWidth(a.x),this._overlaySprite.setHeight(a.y);var s=this._overlayRenderTexture.getBaseTexture();t.isOfType(_.RendererType.WEBGL)&&(s.setGLUnit(4),t.updateTexture(s,!1)),this._overlayRenderTexture.resizeTo(n),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){v(t.prototype.__proto__||d()(t.prototype),"dispose",this).call(this),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}]),t}();w.identifier="overlay",w.BLEND_MODES=m.BLEND_MODES,w.prototype.availableOptions={identifier:{type:_.OptionType.STRING},image:{type:_.OptionType.IMAGE},blendMode:{type:_.OptionType.NUMBER,default:m.BLEND_MODES.MULTIPLY,available:r()(m.BLEND_MODES).map(function(e){return m.BLEND_MODES[e]})},alpha:{type:_.OptionType.NUMBER,default:1}},g.a.Operations.OverlayOperation=w,t.a=w},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(402),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=p.Math.Vector2,v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));o._lastBlurRadius=o._options.blurRadius,o._lastGradientRadius=o._options.gradientRadius;var a={blurQuality:{type:p.OptionType.STRING}};return o._horizontalFilter=new _.a({},a),o._verticalFilter=new _.a({},a),o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new y(.5,.5)),o._verticalFilter.setDelta(new y(-.5,.5)),o._filter=new _.a({},a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),g(t,[{key:"rotate",value:function(e){var t=this._options.position;90===e?(t.flip(),t.x=1-t.x):-90===e&&(t.flip(),t.y=1-t.y),this.set({position:t})}},{key:"flip",value:function(e){var t=this._options.position;switch(e){case"horizontal":t.x=1-t.x;break;case"vertical":t.y=1-t.y}this.set({position:t})}},{key:"transform",value:function(e){var t=this,n={},i=this.getPosition();n.position=e.applyToRelativePoint(i),["radius","blurRadius","gradientRadius"].forEach(function(i){var r=t.getOption(i);n[i]=e.applyToRelativeSize(r)}),this.set(n,!1)}},{key:"_renderWebGL",value:function(e){return this._renderBlur(e)}},{key:"_renderCanvas",value:function(e){return this._options.highQualityCanvasBlur?this._renderBlur(e):this._renderLQCanvasBlur(e)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=t.min(),i=this._options,r=i.position,o={blurRadius:i.blurRadius*n,radius:i.radius*n,gradientRadius:i.gradientRadius*n,position:r.clone().multiply(t),texSize:t,blurQuality:"high"};return this._horizontalFilter.set(o),this._verticalFilter.set(o),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(e){var t=this._options,n=t.blurRadius,i=t.radius,r=t.gradientRadius,o=t.position,a=e.getDimensions();return this._filter.set({blurRadius:n,radius:i,gradientRadius:r,position:o,texSize:a,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();v.identifier="radial-focus",v.prototype.availableOptions={position:{type:p.OptionType.VECTOR2,default:new y(.5,.5)},radius:{type:p.OptionType.NUMBER,default:.25},gradientRadius:{type:p.OptionType.NUMBER,default:.125},blurRadius:{type:p.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:p.OptionType.BOOLEAN,default:!1}},d.a.Operations.RadialFocusOperation=v,t.a=v},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(90)),_=n.n(d),g=n(72),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=p.Math.Vector2,m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(r)));return a._fragmentSource=n(403),a._lastBlurRadius=null,a._lastGradientRadius=null,a._lastPosition=new v,a._blurFilter=new g.a,a._blurredRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a._maskRenderTarget=new p.Engine.CanvasRenderTarget(100,100,1),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Engine.Filter),y(t,[{key:"_applyCanvas",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=t.getDimensions(),a=!n.getDimensions().equals(o),s=this._options,u=s.blurRadius,l=s.position,c=s.texSize,f=s.gradientRadius;if(t.getBaseTexture().isDirty()||this._lastBlurRadius!==u||a){var h=new v(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(h);var p={blurRadius:u,texSize:o},d=function(e,t,n){var i=function(e,t,n){return Math.min(Math.max(e,0),1)}((n-e)/(t-e));return i*i*(3-2*i)};this._blurFilter.set(p),this._blurFilter._applyCanvas(e,t,n,r,function(e,t){return d(0,1,(Math.abs(c.clone().multiply(e,t).subtract(l).len())-i._options.radius)/(2*f))*u}),this._lastBlurRadius=u}}else this._renderLQBlur(e,t,n,r)}},{key:"_renderLQBlur",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=t.getDimensions(),r=!this._blurredRenderTarget.getDimensions().equals(i);this._blurredRenderTarget.setPixelRatio(t.getPixelRatio()),this._blurredRenderTarget.resizeTo(t.getDimensions()),this._maskRenderTarget.setPixelRatio(t.getPixelRatio()),this._maskRenderTarget.resizeTo(t.getDimensions());var o=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||r,a=t.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||r;o&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(t),this._lastBlurRadius=this._options.blurRadius),this._applyMask(t,n)}},{key:"_blurImage",value:function(e){var t=e.getCanvas(),n=e.getContext(),i=new v(t.width,t.height),r=n.getImageData(0,0,t.width,t.height);_.a.stackBlurCanvasRGBA(r,0,0,t.width,t.height,this._options.blurRadius*i.min()),this._blurredRenderTarget.getContext().putImageData(r,0,0)}},{key:"_renderMask",value:function(){var e=this._maskRenderTarget.getCanvas(),t=this._maskRenderTarget.getContext(),n=new v(e.width,e.height),i=this._maskRenderTarget.getPixelRatio(),r=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=e.height,s*=e.height;var u=t.createRadialGradient(r.x,r.y,0,r.x,r.y,(a+s)*i);u.addColorStop(0,"#FFFFFF"),u.addColorStop(a/(a+s),"#FFFFFF"),u.addColorStop(1,"#000000"),t.fillStyle=u,t.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(e,t){for(var n=t.getContext(),i=e.getCanvas(),r=e.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=r.getImageData(0,0,i.width,i.height),u=s.data,l=o.getImageData(0,0,i.width,i.height).data,c=a.getImageData(0,0,i.width,i.height).data,f=void 0,h=0;h<i.width*i.height*4;h+=4)f=c[h]/255,u[h]=f*u[h]+(1-f)*l[h],u[h+1]=f*u[h+1]+(1-f)*l[h+1],u[h+2]=f*u[h+2]+(1-f)*l[h+2];n.putImageData(s,0,0)}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}]),t}();m.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:30,uniformType:p.UniformType.FLOAT},radius:{type:p.OptionType.NUMBER,default:50,uniformType:p.UniformType.FLOAT},gradientRadius:{type:p.OptionType.NUMBER,default:25,uniformType:p.UniformType.FLOAT},position:{type:p.OptionType.VECTOR2,default:new v(.5,.5),uniformType:p.UniformType.FLOAT2},delta:{type:p.OptionType.VECTOR2,default:new v(1,1),uniformType:p.UniformType.FLOAT2},texSize:{type:p.OptionType.VECTOR2,default:new v(100,100),uniformType:p.UniformType.FLOAT2}},t.a=m},function(e,t){e.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=n(173),g=n(72),y=n(408),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},b=p.Math.Vector2,w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i))),a=o._sdk.getRenderer();o._lastBlurRadius=null,o._blurredRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._maskRenderTexture=new p.Engine.RenderTexture(a,100,100,1),o._brushSprite=new _.a(o),o._brushSpriteContainer=new p.Engine.Container;var s=o._brushSprite.getDisplayObject();if(o._brushSpriteContainer.addChild(s),o._outputSprite=new p.Engine.Sprite,o._outputContainer=new p.Engine.Container,o._outputContainer.addChild(o._outputSprite),o._maskFilter=new y.a,a.isOfType(p.RendererType.WEBGL)){o._horizontalFilter=new g.a,o._verticalFilter=new g.a,o._sprite.setFilters([o._horizontalFilter,o._verticalFilter]),o._horizontalFilter.setDelta(new b(1,1)),o._verticalFilter.setDelta(new b(-1,1));var u=o._maskRenderTexture.getBaseTexture();u.setGLUnit(o._maskFilter.getMaskImage()),a.updateTexture(u,!1),(u=o._blurredRenderTexture.getBaseTexture()).setGLUnit(o._maskFilter.getFilterImage()),a.updateTexture(u,!1)}else a.isOfType(p.RendererType.CANVAS)&&(o._blurFilter=new g.a,o._sprite.setFilters([o._blurFilter]),o._maskFilter.setMaskCanvas(o._maskRenderTexture.getRenderTarget().getCanvas()),o._maskFilter.setFilterCanvas(o._blurredRenderTexture.getRenderTarget().getCanvas()));return o._outputSprite.setFilters([o._maskFilter]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),v(t,[{key:"flip",value:function(e){this._brushSprite.applyFlip(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(e){this._brushSprite.applyRotation(e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(e,t){this._brushSprite.applyTransform(e,t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(e){return this._renderBlur(e),this._renderMask(e),this._outputSprite.setTexture(e),this._renderTexture.render(this._outputContainer),p.Promise.resolve()}},{key:"_renderMask",value:function(e){var t=e.getDimensions();this._maskRenderTexture.getDimensions().equals(t)||this._maskRenderTexture.resizeTo(t),this._brushSprite.update(this._sdk,t),this._maskRenderTexture.clear(p.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(p.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(e){var t=e.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(t)||this._blurredRenderTexture.resizeTo(t);var i=this._options.blurRadius;if(this._lastBlurRadius!==i||!n.equals(t)){var r=this._sdk.getRenderer(),o=void 0;r.isOfType(p.RendererType.WEBGL)?(o={blurRadius:i*t.min(),texSize:t},this._horizontalFilter.set(o),this._verticalFilter.set(o)):r.isOfType(p.RendererType.CANVAS)&&(o={blurRadius:i},this._blurFilter.set(o)),this._blurredRenderTexture.render(this._container),this._lastBlurRadius=i}var a=this._sdk.getRenderer();a.isOfType(p.RendererType.WEBGL)&&a.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new _.a.Brushes.RadialBrush({size:e,hardness:t,color:p.Color.WHITE}),i=this._brushSprite.createPath(n);return this._options.paths.push(i),this.setDirty(!0),i}},{key:"setDirtyForRenderer",value:function(e,n,i){m(t.prototype.__proto__||h()(t.prototype),"setDirtyForRenderer",this).call(this,e,n,i),this._brushSprite.setDirtyForRenderer(e,n,i)}},{key:"dispose",value:function(){m(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(p.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),t}();w.identifier="selective-blur",w.prototype.availableOptions={blurRadius:{type:p.OptionType.NUMBER,default:.05},paths:{type:p.OptionType.ARRAY,default:[],setter:function(e){return this._brushSprite&&this._brushSprite.setPaths(e),e}}},d.a.Operations.SelectiveBlurOperation=w,t.a=w},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(406)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},y=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,n));return r._operation=e,r._canvas=i||p.Utils.createCanvas(),r._context=r._canvas.getContext("2d"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Configurable),_(t,[{key:"serializeOption",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===e?this._options.controlPoints.map(function(e){var t=e.getPosition();return n?t.toObject():t.clone()}):g(t.prototype.__proto__||h()(t.prototype),"serializeOption",this).call(this,e,n)}},{key:"_optionEquals",value:function(e,n){if("controlPoints"===e){for(var i=this._options.controlPoints,r=0,o=i.length;r<o;r++)if(!i[r].getPosition().equals(n[r]))return!1;return!0}return g(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,n)}},{key:"render",value:function(e){var t=this._options,n=t.controlPoints,i=t.size;if(!(n.length<2)){var r=this.getBrush(),o=r&&r.getHardness?r.getHardness():1;p.Utils.ensureCanvasDimensions(this._canvas,e),this._brush&&this._lastBrushSize===i&&e.equals(this._brushInputDimensions)||(this._brushInputDimensions=e.clone(),this._lastBrushSize=i);for(var a=void 0,s=void 0,u=void 0,l=void 0,c=0;c<n.length;c++)a=n[c-2],s=n[c-1],u=n[c],l=n[c+1],u.renderToCanvas(this._options.brush.getBrushImage(e),this._canvas,a,s,l,o)}}},{key:"_createBrush",value:function(e){var t=this._options,n=t.size,i=t.hardness,r=t.color,o=p.Utils.createCanvas();o.width=o.height=Math.ceil(n*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*i),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var u=r.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return o}},{key:"addControlPoint",value:function(e){var t=new d.a(this,e);this._options.controlPoints.push(t),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(e){this._canvas=e,this._context=e.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(e){e.setDirty()})}},{key:"forEachControlPoint",value:function(e){this._options.controlPoints.forEach(e)}},{key:"renderToCanvas",value:function(e){var t=e.getContext("2d");t.save(),t.globalAlpha=this._options.brush.getColor().a,t.drawImage(this._canvas,0,0),t.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),t}();y.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},brush:{type:p.OptionType.OBJECT,required:!0},controlPoints:{type:p.OptionType.ARRAY,default:[]},closed:{type:p.OptionType.BOOLEAN,default:!1}},t.a=y},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=o.Math.Vector2,u=o.Math.CubicBezierCurve,l=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._path=t,this._drawnCanvases=[],this._position=n,this._smooth=i}return a(e,[{key:"getBezierCurve",value:function(e,t,n,i){if(!t)return null;var r=void 0,o=void 0;i?(r=(i.x-t.x)/this._smooth,o=(i.y-t.y)/this._smooth):(r=(n.x-t.x)/this._smooth,o=(n.y-t.y)/this._smooth);var a=void 0,s=void 0;e?(a=(n.x-e.x)/this._smooth,s=(n.y-e.y)/this._smooth):(a=(n.x-t.x)/this._smooth,s=(n.y-t.y)/this._smooth);var l=t.clone().add(a,s),c=n.clone().subtract(r,o);return new u(t,l,c,n)}},{key:"renderToCanvas",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(t)){var a=new s(t.width,t.height),u=t.getContext("2d"),l=this._position.clone().multiply(a),c=i?i.getPosition().clone().multiply(a):null,f=n?n.getPosition().clone().multiply(a):null,h=r?r.getPosition().clone().multiply(a):null,p=(l.clone().subtract(c).len(),e.width/10),d=this.getBezierCurve(f,c,l,h),_=void 0;if(d){d.calculateSegments(20);var g=d.getLength();_=d.arcLengthApproxSample(Math.ceil(g/p))}else _=[l];for(var y=0;y<_.length;y++){var v=_[y],m=.5*e.width/(2*p);m=1/(1+(m*=1-o)),u.globalAlpha=m,u.drawImage(e,v.x-e.width/2,v.y-e.height/2,e.width,e.height)}u.globalAlpha=1,this._drawnCanvases.push(t)}}},{key:"setPosition",value:function(e){this._position=e}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),e}();t.a=l},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(174)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),p(t,[{key:"getBrushImage",value:function(e){if(this._brush&&this.optionsEqual(this._lastOptions)&&e.equals(this._lastInputDimensions))return this._brush;var t=this._options,n=t.size,i=t.hardness,r=t.color,o=f.Utils.createCanvas();o.width=o.height=Math.ceil(n*e.min());var a=o.getContext("2d");if((r=r.clone()).a=1,1===o.width)a.fillStyle=r.toRGBA(),a.fillRect(0,0,1,1);else{var s=a.createRadialGradient(o.width/2,o.height/2,Math.min(o.width/2-1,o.width/2*i),o.width/2,o.height/2,o.width/2);s.addColorStop(0,r.toRGBA());var u=r.clone();u.a=0,s.addColorStop(1,u.toRGBA()),a.fillStyle=s,a.fillRect(0,0,o.width,o.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=o,this._lastInputDimensions=e.clone(),o}}]),t}();t.a=d,d.identifier="imgly_brush_radial",d.prototype.availableOptions=f.Utils.extend(h.a.prototype.availableOptions,{hardness:{type:f.OptionType.NUMBER,default:1}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return e._fragmentSource=n(409),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Engine.Filter),h(t,[{key:"_applyCanvas",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i=t.getCanvas(),r=t.getContext(),o=n.getContext(),a=this._options,s=a.maskCanvas,u=a.filterCanvas,l=s.getContext("2d"),c=u.getContext("2d"),f=l.getImageData(0,0,i.width,i.height).data,h=r.getImageData(0,0,i.width,i.height),p=h.data,d=c.getImageData(0,0,i.width,i.height).data,_=void 0,g=0;g<i.width*i.height*4;g+=4)_=f[g]/255,p[g]=_*d[g]+(1-_)*p[g],p[g+1]=_*d[g+1]+(1-_)*p[g+1],p[g+2]=_*d[g+2]+(1-_)*p[g+2];o.putImageData(h,0,0)}}]),t}();p.prototype.availableOptions={maskImage:{type:f.OptionType.NUMBER,default:1,uniformType:f.UniformType.INT},maskCanvas:{type:f.OptionType.OBJECT,default:null},filterImage:{type:f.OptionType.NUMBER,default:2,uniformType:f.UniformType.INT},filterCanvas:{type:f.OptionType.OBJECT,default:null}},t.a=p},function(e,t){e.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=n.n(_),y=n(73),v=n(411),m=n(412),b=n(173),w=n(413),x=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},C=_.Math.Vector2,E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o.setSmoothDownscaling(o._sdk.getOptions().smoothDownscaling),o._onSpriteUpdate=o._onSpriteUpdate.bind(o),o._maskCanvas=_.Utils.createCanvas(),o._options.sprites.slice().forEach(function(e){o.removeSprite(e),o.addSprite(e)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.Operation),k(t,[{key:"getSpritesOfType",value:function(e){return this._options.sprites.filter(function(t){return t instanceof e})}},{key:"rotate",value:function(e){this._options.sprites.forEach(function(t){t.applyRotation(e)})}},{key:"flip",value:function(e){this._options.sprites.forEach(function(t){t.applyFlip(e)})}},{key:"_onSpriteUpdate",value:function(e,t){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(e,t){this._options.sprites.forEach(function(n){return n.applyRotation(e,t)})}},{key:"transform",value:function(e){this._options.sprites.forEach(function(t){return t.applyTransform(e)})}},{key:"scale",value:function(e){this._options.sprites.forEach(function(t){return t.applyScale(e)})}},{key:"serializeOption",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===e?this._options.sprites.map(function(e){return e.serializeOptions(void 0,n)}):T(t.prototype.__proto__||d()(t.prototype),"serializeOption",this).call(this,e,n)}},{key:"createSticker",value:function(e){return new v.a(this,e)}},{key:"createText",value:function(e){return new m.a(this,e)}},{key:"createBrush",value:function(e){return new b.a(this,e)}},{key:"createTextDesign",value:function(e){return new w.a(this,e)}},{key:"addSprite",value:function(e){this._options.sprites.push(e);var t=this.getSmoothDownscaling();e.setSmoothDownscaling&&e.setSmoothDownscaling(t),this._container.addChild(e.getDisplayObject()),this.setDirty(!0),e.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(e){var t=this._options.sprites,n=t.indexOf(e);return-1!==n&&(e.off("update",this._onSpriteUpdate),this._container.removeChild(e.getDisplayObject()),t.splice(n,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var e=this._sdk.getSprite().getTexture().getFrame(),t=this._sdk.getOperationsStack().getByIdentifier("orientation"),n=t?t.getRotation():0;return 270===n||90===n?new C(e.height,e.width):new C(e.width,e.height)}},{key:"_render",value:function(e){var t=this,n=this._container,i=this._options.sprites,r=e.getDimensions().clone().floor(),o=new _.Engine.Container;return o.addChild(this._sprite),_.Promise.all(i.map(function(e){return e.validateSettings()})).then(function(){i.forEach(function(e){return e.update(t._sdk,r)})}).then(function(){t._renderTexture.clear(),i.forEach(function(e){e.getInverted&&e.getInverted()?(t._renderTexture.render(o),t._renderTexture.render(t._renderMaskedSprite(e.getDisplayObject(),e.getColor?e.getColor():_.Color.WHITE,e.getPadding?e.getPadding():-1)),o=new _.Engine.Container):o.addChild(e.getDisplayObject())}),t._renderTexture.render(o),n.addChild(t._sprite),i.forEach(function(e){return n.addChild(e.getDisplayObject())})})}},{key:"_renderMaskedSprite",value:function(e,t,n){var i=this._maskCanvas,r=e.getWorldTransform(),o=this._getOrientatedStageSize();_.Utils.ensureCanvasDimensions(i,o);var a=i.getContext("2d");if(a.clearRect(0,0,i.width,i.height),a.save(),a.fillStyle=t.toRGBA(),n<0)a.fillRect(0,0,o.x,o.y);else{var s=e.getWidth()/e.getScale().x,u=e.getHeight()/e.getScale().y,l=s*n;a.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),a.fillRect(-l,-l,s+2*l,u+2*l)}a.restore(),a.save(),a.globalCompositeOperation="destination-out",e._renderCanvas({getCurrentRenderTarget:function(){return{getPixelRatio:function(){return 1}}},getContext:function(){return a}}),a.restore();var c=new _.Engine.Container,f=new _.Engine.Sprite(_.Engine.Texture.fromCanvas(i));return c.addChild(f),c}},{key:"takeSpriteToFront",value:function(e){var t=this._options.sprites,n=t.indexOf(e);if(-1!==n){_.Utils.moveArrayItem(t,n,t.length-1);var i=e.getDisplayObject();this._container.removeChild(i),this._container.addChild(i),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(e,t){var n=this,i=[];this._options.sprites.forEach(function(e){return e.update(n._sdk,t)});var r=this._sdk.getSprite(),o=r.getWorldTransform().applyInverseToVector(e),a=r.getTexture().getFrame(),s=a.width,u=a.height,l=r.getAnchor().clone().multiply(-s,-u);o.subtract(l);for(var c=this._options.sprites.slice(0).reverse(),f=0,h=c.length;f<h;f++){var p=c[f];p.getHitTestDisplayObject().isAtPosition(o)&&i.push(p)}return i}},{key:"setDirtyForRenderer",value:function(e,n,i){T(t.prototype.__proto__||d()(t.prototype),"setDirtyForRenderer",this).call(this,e,n,i),this._options.sprites.forEach(function(t){t.setDirtyForRenderer(e,n,i)})}},{key:"dispose",value:function(){T(t.prototype.__proto__||d()(t.prototype),"dispose",this).call(this),this._options.sprites.forEach(function(e){e.dispose()})}}]),t}();E.StickerSprite=v.a,E.TextSprite=m.a,E.BrushSprite=b.a,E.TextDesignSprite=w.a,E.identifier="sprite",E.prototype.availableOptions={sprites:{type:_.OptionType.ARRAY,default:[],setter:function(e,t){var n=this;return e=e.map(function(e,t){if(e instanceof y.a)return e;var i=x({},e);switch(delete i.type,e.type){case"text":return new m.a(n,i);case"sticker":return new v.a(n,i);case"brush":return new b.a(n,i);case"textdesign":return new w.a(n,i);default:_.Log.error(n.constructor.name,"Invalid sprite type: "+e.type)}}),t||(this._options.sprites&&this._options.sprites.slice().forEach(function(e){e.dispose(),n.removeSprite(e)}),e.forEach(function(e){n.addSprite(e)})),e}},smoothDownscaling:{type:_.OptionType.BOOLEAN,default:!1}},g.a.Operations.SpriteOperation=E,t.a=E},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(73)),_=n(170),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},v=p.Math.Vector2,m=p.Math.ColorMatrix,b=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i))),a=o._options.image,s=a.src||a.filePath||a.toDataUrl&&a.toDataURL();return o._isSVG=s&&!!s.match(/\w+\.svg(?=\?|$)/i),o._isSVG&&(o._canvas=p.Utils.createCanvas(),o._context=o._canvas.getContext("2d"),o._options.smoothDownscaling=!1),a&&o._onImageUpdate(),o._tintFilter=new p.Engine.Filters.TintFilter,o._adjustmentsFilter=new _.a,o._lastRenderedDimensions=v.NULL,o._lastRenderedInputDimensions=v.NULL,o._onOptionsChange=o._onOptionsChange.bind(o),o._options.adjustments.on("update",o._onOptionsChange),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),g(t,[{key:"applyScale",value:function(e){this.setDimensions(this.getDimensions().multiply(e))}},{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=y(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(i.type="sticker"),i}},{key:"_rendersToRenderTexture",value:function(e){return this._options.smoothDownscaling&&!this._isSVG&&e.getRenderer().isOfType(p.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(e,t){var n=this._options,i=n.dimensions,r=n.image;if(i.equals(v.NULL)&&i.set(r.width,r.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(t)||!this._lastRenderedDimensions.equals(i)||this._lastRenderedImage!==r)&&this._isSVG&&e.getRenderer().isOfType(p.RendererType.WEBGL)){var o=r.width/r.height;if(i.x>i.y){var a=Math.min(i.x,4096);r.width=a,r.height=a/o}else{var s=Math.min(i.x,4096);r.width=s*o,r.height=s}this._canvas.width=r.width,this._canvas.height=r.height,this._context.clearRect(0,0,r.width,r.height),this._context.drawImage(r,0,0,r.width,r.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(e)&&this._prepareRenderTexture(e);var u=[];if(this._rendersToRenderTexture(e)){if(this._hasAdjustments()){u.push(this._adjustmentsFilter);var l=this._options.adjustments,c=new m;c.multiply(m.createBrightnessMatrix(l.getBrightness())),c.multiply(m.createSaturationMatrix(l.getSaturation())),c.multiply(m.createContrastMatrix(l.getContrast())),this._adjustmentsFilter.set({colorMatrix:c})}this._options.tintMode&&"none"!==this._options.tintMode&&(u.push(this._tintFilter),this._tintFilter.set({mode:p.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(u)}this._rendersToRenderTexture(e)?this._renderToRenderTexture(e):this._sprite.setTexture(this._inputTexture),this._updateSprite(t),this._applyFlip(),this._lastRenderedDimensions.copy(i),this._lastRenderedInputDimensions.copy(t),this._lastRenderedImage=r}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}},{key:"applyFlip",value:function(e){y(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var n={rotation:this._options.rotation},i=n.rotation/Math.PI*180*-1;switch(n.rotation=i*Math.PI/180,e){case"horizontal":n.flipHorizontally=!this._options.flipHorizontally,this.set(n);break;case"vertical":n.flipVertically=!this._options.flipVertically,this.set(n)}}},{key:"_hasAdjustments",value:function(){var e=this._options.adjustments;return 0!==e.getBrightness()||1!==e.getSaturation()||1!==e.getContrast()}},{key:"_onImageUpdate",value:function(){var e=this._options.image,t=this._operation.getSDK().getRenderer();this._isSVG&&t.isOfType(p.RendererType.WEBGL)&&(e=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=p.Engine.Texture.fromImage(e),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"scalesUniformly",value:function(){return"keepAspect"===this._options.resizeMode}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,n,i),"image"===e&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var e=this._dirtiness;for(var t in e)e[t]=!0}},{key:"dispose",value:function(){y(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}]),t}();b.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},identifier:{type:p.OptionType.STRING,default:""},image:{type:p.OptionType.IMAGE,required:!0},position:{type:p.OptionType.VECTOR2,default:v.NULL},dimensions:{type:p.OptionType.VECTOR2,default:v.NULL},anchor:{type:p.OptionType.VECTOR2,default:new v(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new v(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:p.OptionType.BOOLEAN,default:!1},tintColor:{type:p.OptionType.COLOR,default:p.Color.WHITE},tintMode:{type:p.OptionType.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:p.OptionType.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:p.OptionType.NUMBER,default:1},adjustments:{type:p.OptionType.CONFIGURABLE,structure:{brightness:{type:p.OptionType.NUMBER,default:0},saturation:{type:p.OptionType.NUMBER,default:1},contrast:{type:p.OptionType.NUMBER,default:1}}}},b.type="sticker",t.a=b},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(73)),_=n(175),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},v=p.Math.Vector2,m=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._textRenderer=new _.a(o,o._operation),o._textRenderer.rotation=o.getRotation(),o._sprite.setTexture(o._textRenderer.getFinalTexture()),o._hitTestSprite.setTexture(o._textRenderer.getTexture()),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),g(t,[{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=y(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(i.type="text"),i}},{key:"getDOMStyle",value:function(e,t){var n=this.getFontSize()*t.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(t)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(e){var t=this.getFontSize()*e.y,n=this.getTextMetrics();if(n){var i=1/n.unitsPerEm*t,r=n.ascender*i,o=n.descender*i;return r+Math.abs(o)}return t*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(e,t){return this._textRenderer.getDimensions(e,t)}},{key:"applyFlip",value:function(e){y(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var n=this._options.rotation;switch(e){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"applyTransform",value:function(e){y(t.prototype.__proto__||h()(t.prototype),"applyTransform",this).call(this,e),this.set({fontSize:e.scaleSize(this.getFontSize(),"y"),maxWidth:e.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(e){y(t.prototype.__proto__||h()(t.prototype),"applyRotation",this).call(this,e);var n=(e+360)%360,i=this._operation.getInputDimensions();90!==n&&270!==n||(this.setMaxWidth(this.getMaxWidth()/i.x*i.y),this.setFontSize(this.getFontSize()/i.y*i.x))}},{key:"setOption",value:function(e,n){var i=this._options,r=i.flipHorizontally,o=i.flipVertically;if("rotation"===e){var a=n;return r&&(a=2*Math.PI-a),o&&(a=2*Math.PI-a),this._options.rotation=a,this._textRenderer&&(this._textRenderer.rotation=a),this._rotation=a,void this.emit("update")}y(t.prototype.__proto__||h()(t.prototype),"setOption",this).call(this,e,n)}},{key:"getOption",value:function(e){return"rotation"===e?this._rotation:y(t.prototype.__proto__||h()(t.prototype),"getOption",this).call(this,e)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(e,n){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(e,n);var i=this._textRenderer.getFinalTexture();i.getBaseTexture().update();var r=e.getRenderer();r.isOfType(p.RendererType.WEBGL)&&r.updateTexture(i.getBaseTexture()),y(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,n),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1,this.setRotation(this._rotation)),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(e)}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){y(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}}]),t}();m.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},fontSize:{type:p.OptionType.NUMBER,default:.1},characterSpacing:{type:p.OptionType.NUMBER,default:0},lineHeight:{type:p.OptionType.NUMBER,default:1.1},fontIdentifier:{type:p.OptionType.STRING},fontFamily:{type:p.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:p.OptionType.ALL,default:"normal"},fontStyle:{type:p.OptionType.STRING,default:"normal"},textMetrics:{type:p.OptionType.OBJECT,default:null},outlineWidth:{type:p.OptionType.NUMBER,default:0},outlineColor:{type:p.OptionType.COLOR,default:p.Color.BLACK},alignment:{type:p.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:p.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:p.OptionType.COLOR,default:new p.Color(1,0,0,1)},backgroundColor:{type:p.OptionType.COLOR,default:p.Color.TRANSPARENT},position:{type:p.OptionType.VECTOR2,default:new v(.5,.5)},anchor:{type:p.OptionType.VECTOR2,default:new v(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new v(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},text:{type:p.OptionType.STRING,required:!0},maxWidth:{type:p.OptionType.NUMBER,default:.5},maxHeight:{type:p.OptionType.NUMBER,default:0},visible:{type:p.OptionType.BOOLEAN,default:!0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1}},m.type="text",t.a=m},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(73)),_=n(20),g=n(74),y=n(421),v=n(177),m=n(422),b=n(179),w=n(423),x=n(180),k=n(425),T=n(54),C=n(427),E=n(128),R=n(428),O=n(429),S=n(430),I=n(129),A=n(431),F=n(432),M=n(437),B=n(26),D=n(438),L=n(32),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),P=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},z=p.Math.Vector2,U=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,e,n));return i._renderer=new D.a,i._canvas=p.Utils.createCanvas(),i._context=i._canvas.getContext("2d"),i._texture=p.Engine.Texture.fromCanvas(i._canvas),i._sprite.setTexture(i._texture),i._aspect=1,i.getSeed()<0&&i.setSeed(_.a.TimeSeed()),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),N(t,[{key:"seed",value:function(e){this.setSeed(e||_.a.TimeSeed())}},{key:"_updateLayout",value:function(){var e=this.getLayout();return e?(this._renderer.createLayout(e,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(e){P(t.prototype.__proto__||h()(t.prototype),"applyTransform",this).call(this,e);var n={};this._options.dimensions&&(n.width=e.applyToRelativeSize(this.getWidth())),this.set(n,!1)}},{key:"applyFlip",value:function(e){P(t.prototype.__proto__||h()(t.prototype),"applyFlip",this).call(this,e);var n=this._options.rotation;switch(e){case"horizontal":n+=2*(Math.PI-n),this.setRotation(n);break;case"vertical":n+=2*(Math.PI/2-n),this.setRotation(n)}}},{key:"update",value:function(e,n){if(!this._isLayoutDirty||this._updateLayout()){var i=this.getWidth()*n.min()/e.getTextureScale(),r=i/this._aspect,o=new z(i,r);o.clamp(new z(1,1),new z(1/0,1/0)),p.Utils.ensureCanvasDimensions(this._canvas,o),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new L.a(o.x,o.y),this.getColor(),this.getInverted()),this.setDimensions(o),this._texture.getBaseTexture().update();var a=e.getRenderer();a.isOfType(p.RendererType.WEBGL)&&a.updateTexture(this._texture.getBaseTexture()),P(t.prototype.__proto__||h()(t.prototype),"update",this).call(this,e,n),this._applyFlip()}}},{key:"_applyFlip",value:function(){var e=this._sprite.getScale(),t=this._options,n=t.flipHorizontally,i=t.flipVertically;(n&&e.x>0||!n&&e.x<0)&&(e.x*=-1),(i&&e.y>0||!i&&e.y<0)&&(e.y*=-1),this._sprite.setScale(e)}},{key:"_optionEquals",value:function(e,n){if("layout"===e){var i=this._options.layout;return!(!i&&n||!n&&i||!n.constructor||!i.constructor||i.constructor.identifier!==n.constructor.identifier)}return P(t.prototype.__proto__||h()(t.prototype),"_optionEquals",this).call(this,e,n)}},{key:"serializeOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&this.getPadding()<0){var i=e.indexOf("padding");i>-1&&e.splice(i,1)}var r=P(t.prototype.__proto__||h()(t.prototype),"serializeOptions",this).call(this,e,n);return e||(r.type="textdesign"),r}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}},{key:"dispose",value:function(){this._texture.dispose(),this._sprite.dispose()}}]),t}();U.Layouts={TextDesignBlocks:g.a,TextDesignBlocksCondensed:y.a,TextDesignBlocksLight:v.a,TextDesignCelebrate:b.a,TextDesignCelebrateSimple:w.a,TextDesignEqualWidth:x.a,TextDesignEqualWidthFat:k.a,TextDesignMasked:T.a,TextDesignMaskedBadge:C.a,TextDesignMaskedSpeechBubble:E.a,TextDesignMaskedSpeechBubbleComic:R.a,TextDesignMultiline:O.a,TextDesignWatercolor:S.a,TextDesignSunshine:I.a,TextDesignParticles:F.a,TextDesignRotated:M.a},U.LegacyLayouts={TextDesignBlocksLightV310:m.a,TextDesignSunshineV310:A.a},U.AssetManager=B.a,U.prototype.availableOptions={id:{type:p.OptionType.STRING,default:function(){return p.Utils.getUUID()}},position:{type:p.OptionType.VECTOR2,default:new z(.5,.5)},dimensions:{type:p.OptionType.VECTOR2,default:z.NULL},anchor:{type:p.OptionType.VECTOR2,default:new z(0,0)},pivot:{type:p.OptionType.VECTOR2,default:new z(.5,.5)},rotation:{type:p.OptionType.NUMBER,default:0},flipHorizontally:{type:p.OptionType.BOOLEAN,default:!1},flipVertically:{type:p.OptionType.BOOLEAN,default:!1},layout:{type:p.OptionType.OBJECT,default:null,setter:function(e){return this._isLayoutDirty=!0,e}},text:{type:p.OptionType.STRING,default:"",setter:function(e){return this._isLayoutDirty=!0,e}},color:{type:p.OptionType.COLOR,default:p.Color.BLACK},padding:{type:p.OptionType.NUMBER,default:.01,minValue:.01},width:{type:p.OptionType.NUMBER,default:.8},inverted:{type:p.OptionType.BOOLEAN,default:!1},seed:{type:p.OptionType.NUMBER,default:-1}},t.a=U},function(e,t,n){e.exports={default:n(415),__esModule:!0}},function(e,t,n){n(416),e.exports=9007199254740991},function(e,t,n){var i=n(14);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(21)),p=n(32),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),d(t,[{key:"getSize",value:function(){var e=this.getRows(),t=this.getWidth(),n=e.length-1,i=e.reduce(function(e,t){return e+t.getSize().height},0);i+=(n+1)*this.getRelativeLineSpacing()*t;var r=this.getRelativeInsets().clone().scale(t);return i+=r.top+r.bottom,new p.a(t,i)}}]),t}();_.prototype.availableOptions={text:{type:f.OptionType.STRING,default:""},lines:{type:f.OptionType.ARRAY,default:[]},relativeInsets:{type:f.OptionType.OBJECT,default:new h.a},relativeLineSpacing:{type:f.OptionType.NUMBER,default:0},rows:{type:f.OptionType.OBJECT,default:[]},background:{type:f.OptionType.OBJECT,default:null},width:{type:f.OptionType.NUMBER,default:0}}},function(e,t,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(419),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,o){var a=t&&t.prototype instanceof r?t:r,s=Object.create(a.prototype),u=new h(o||[]);return s._invoke=function(e,t,n){var r=T;return function(o,a){if(r===E)throw new Error("Generator is already running");if(r===R){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===O)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===T)throw r=R,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=E;var c=i(e,t,n);if("normal"===c.type){if(r=n.done?R:C,c.arg===O)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=R,n.method="throw",n.arg=c.arg)}}}(e,n,u),s}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=i(e[n],e,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},a)}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function l(e,t){var n=e.iterator[t.method];if(n===_){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=_,l(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var r=i(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,O;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=_),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function p(e){if(e){var t=e[m];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=_,t.done=!0,t};return i.next=i}}return{next:d}}function d(){return{value:_,done:!0}}var _,g=Object.prototype,y=g.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},m=v.iterator||"@@iterator",b=v.asyncIterator||"@@asyncIterator",w=v.toStringTag||"@@toStringTag",x="object"==typeof e,k=t.regeneratorRuntime;if(k)x&&(e.exports=k);else{(k=t.regeneratorRuntime=x?e.exports:{}).wrap=n;var T="suspendedStart",C="suspendedYield",E="executing",R="completed",O={},S={};S[m]=function(){return this};var I=Object.getPrototypeOf,A=I&&I(I(p([])));A&&A!==g&&y.call(A,m)&&(S=A);var F=a.prototype=r.prototype=Object.create(S);o.prototype=F.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(F),e},k.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[b]=function(){return this},k.AsyncIterator=u,k.async=function(e,t,i,r){var o=new u(n(e,t,i,r));return k.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(F),F[w]="Generator",F[m]=function(){return this},F.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},k.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,i&&(n.method="next",n.arg=_),!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=y.call(r,"catchLoc"),s=y.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=_),O}}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(91)),_=n(77),g=n(53),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=p.Math.Rectangle,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),v(t,[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var e=this.serializeOptions(),n=e.orientation,i=e.width,r=e.size,o=e.relativeRowOffset,a=e.attributes.fontIdentifier,s=this.getWords().joined(3),u=n===t.Orientations.Left?[s[0],s[1],s[2]]:[s[1],s[2],s[0]],l=p.Utils.Array.range(0,2).map(function(e){return new _.a({text:u[e],fontIdentifier:a,fontSize:60})}),c=l.map(function(e){return e.getSizeValue()}),f=c[0].width>c[1].width?0:1,h=(f+1)%2;l[h].fitWidth(c[f].width),c[h]=l[h].getSizeValue();var d=(c[h].height+c[f].height)/(1-o),y=new _.a({text:u[2],fontIdentifier:a});y.fitHeight(d);var v=y.getSizeValue().width,b=c[f].width,w=i/(v+b),x=w*v,k=w*b,T=w*d,C=o*T;r.set(i,T);var E=p.Utils.Array.range(0,3).map(function(e){return new _.a({text:u[e],fontIdentifier:a})});E[0].fitWidth(k),E[1].fitWidth(k),E[2].fitWidth(x);var R=n===t.Orientations.Left?0:x,O=[R,R,n===t.Orientations.Left?k:0],S=[0,E[0].getSizeValue().height+C,0],I=E.map(function(e,t){return new m(O[t],S[t],e.getSizeValue().width,e.getSizeValue().height)});return E.map(function(e,t){return new g.a({text:u[t],font:E[t],frame:I[t]})})}}]),t}();b.Orientations={Right:"RIGHT",Left:"LEFT"},b.prototype.availableOptions=y({},d.a.prototype.availableOptions,{orientation:{type:p.OptionType.STRING,default:b.Orientations.Left,available:[b.Orientations.Right,b.Orientations.Left]},relativeRowOffset:{type:p.OptionType.NUMBER,default:.05}})},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(74)),y=n(25),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._exclusiveFont=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),m(t,[{key:"generateLayoutData",value:function(e,n){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),b(t.prototype.__proto__||d()(t.prototype),"generateLayoutData",this).call(this,e,n)}},{key:"_fontForRow",value:function(e,n){return this._exclusiveFont||b(t.prototype.__proto__||d()(t.prototype),"_fontForRow",this).call(this,e,n)}},{key:"_layoutRow",value:function(e,t,n,i){return new y.a({words:e,width:t,attributes:n})}}]),t}();w.defaultFontIdentifiers=["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"],w.identifier="imgly_text_design_blocks_condensed",w.prototype.availableOptions=v({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:w.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(177)),_=n(76),g=n(25),y=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),v(t,[{key:"_layoutRows",value:function(e,t){var n=this;return e.map(function(e,i){return n._randomLayoutRow(e,i,t,new _.a({fontIdentifier:n._fontForRow(i,e)})).layout()})}},{key:"_layoutRow",value:function(e,t,n,i){return new g.a({words:e,width:t,attributes:n})}}]),t}();m.defaultFontIdentifiers=["imgly_font_summer_font_light"],m.identifier="imgly_text_design_blocks_light-v3_1_0",m.prototype.availableOptions=y({},d.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:m.defaultFontIdentifiers}})},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return s()(e)}n.d(t,"a",function(){return E});var r=n(6),o=n.n(r),a=n(15),s=n.n(a),u=n(0),l=n.n(u),c=n(5),f=n.n(c),h=n(2),p=n.n(h),d=n(3),_=n.n(d),g=n(1),y=n.n(g),v=n(4),m=(n.n(v),n(74),n(25),n(123),n(46),n(125),n(179)),b=n(126),w=n(26),x=n(20),k=o.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function e(t,n,i){null===t&&(t=Function.prototype);var r=f()(t,n);if(void 0===r){var o=y()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||y()(t)).call.apply(e,[this].concat(r)));return a.getImagePaths=function(){var e=a.getBanderoles();return[].concat(i(e&&e.map(function(e){return e.getImagePath()})||[]),i(a._celebrateTypes))},a.onImagesLoaded=function(){var e=a.getBanderoles();e&&e.forEach(function(e){var t=w.a.getImage(e.getImagePath());t?e.setImage(t):v.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+e.getImagePath()+"'")})},a._celebrateTypes=[b.a.RowImages.celebrate1,b.a.RowImages.celebrate2,b.a.RowImages.celebrate3],a._exclusiveFont=null,a._typeRandomizer=new x.a(0),a._useMaskedRandomizer=new x.a(0),a._seedPool.push(a._typeRandomizer),a._seedPool.push(a._useMaskedRandomizer),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=_()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(p.a?p()(e,t):e.__proto__=t)}(t,m.a),T(t,[{key:"_fontForRow",value:function(e,t){var n=this.getFontIdentifiers();return n[e%(n.length-1)]}},{key:"_layoutRows",value:function(e,n){var r=this._typeRandomizer.pickNext(this._celebrateTypes),o=w.a.getImage(r);return o||v.Log.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '"+r+"'"),[new b.a({width:n,height:.5*n,drawingModeAspectFit:!0,image:o}).layout()].concat(i(C(t.prototype.__proto__||y()(t.prototype),"_layoutRows",this).call(this,e,n)))}},{key:"_randomLayoutRow",value:function(e,n,i,r){var o=e.countNumberOfCharacters();o<4&&r.setFontIdentifier("imgly_font_rasa_regular");var a=this._useMaskedRandomizer.nextBool(2,1);return o<13&&a&&!this.getHasMaskedText()?this._layoutRow(e,i,r,!0):C(t.prototype.__proto__||y()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r)}}]),t}();E.identifier="imgly_text_design_celebrate_simple",E.defaultFontIdentifiers=["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"],E.prototype.availableOptions=k({},m.a.prototype.availableOptions,{fontIdentifiers:{type:v.OptionType.ARRAY,default:E.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(181)),p=n(26),d=n(47),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=f.Math.Rectangle,y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,h.a),_(t,[{key:"getImagePaths",value:function(){var e=this._options;return[e.topImagePath,e.bottomImagePath,e.leftImagePath,e.rightImagePath].filter(function(e){return""!==e})}},{key:"render",value:function(e,t,n,i,r){var o=n.clone().scale(t.width),a=t.rectangle(0,0),s=p.a.getImage(this.getTopImagePath()),u=p.a.getImage(this.getLeftImagePath()),l=p.a.getImage(this.getRightImagePath()),c=p.a.getImage(this.getBottomImagePath());if(s){var f=s.width/s.height,h=o.top*this.getTopImageFillRate(),_=h*f,y=a.width/2,v=new g(y-_/2,0,_,h);Object(d.a)(e,s,v,i)}if(c){var m=c.width/c.height,b=o.bottom*this.getBottomImageFillRate(),w=b*m,x=a.width/2,k=new g(x-w/2,a.height-b,w,b);Object(d.a)(e,c,k,i)}if(u){var T=u.width/u.height,C=o.left*this.getLeftImageFillRate(),E=C/T,R=a.height/2,O=new g(0,R-E/2,C,E);Object(d.a)(e,u,O,i)}if(l){var S=l.width/l.height,I=o.right*this.getRightImageFillRate(),A=I/S,F=a.height/2-A/2,M=new g(a.width-I,F,I,A);Object(d.a)(e,l,M,i)}}}]),t}();y.prototype.availableOptions={topImagePath:{type:f.OptionType.STRING,default:""},leftImagePath:{type:f.OptionType.STRING,default:""},bottomImagePath:{type:f.OptionType.STRING,default:""},rightImagePath:{type:f.OptionType.STRING,default:""},topImageFillRate:{type:f.OptionType.NUMBER,default:1},leftImageFillRate:{type:f.OptionType.NUMBER,default:1},bottomImageFillRate:{type:f.OptionType.NUMBER,default:1},rightImageFillRate:{type:f.OptionType.NUMBER,default:1}},y.Backgrounds=[new y({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new y({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new y({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new y({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(180)),_=n(21),g=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new _.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),y(t,[{key:"_getBackground",value:function(){return null}}]),t}();v.defaultFontIdentifiers=["imgly_font_ultra"],v.identifier="imgly_text_design_equal_width_fat",v.prototype.availableOptions=g({},d.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:v.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(26)),y=n(176),v=n(32),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=_.Math.Vector2,x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).call(this,e));return n._textOptions={},n._createCanvas(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.Configurable),b(t,[{key:"_createCanvas",value:function(){this._canvas=_.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new y.a(this._context),this._finalCanvas=_.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||d()(t.prototype),"setOption",this).call(this,e,n,i,r),"fontIdentifier"!==e||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var e=g.a.getVariation(this.getFontIdentifier());return e||_.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(e),e}},{key:"_applyTextOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,n=m({},this._options,e),i=n.fontSize,r=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=r.serializeOptions(),u=s.fontStyle,l=s.fontWeight,c=s.fontFamily;t.font=u+" "+l+" "+i+'px "'+c+'"',t.fillStyle=o,t.textBaseline="top",t.textAlign=a||"left"}},{key:"_buildOutputLines",value:function(e){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(e),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(e,t){var n=this.getAlignment(),i=new w(0,t);switch(n){case"center":i.x=this._canvas.width/2;break;case"right":i.x=this._canvas.width}this._context.fillText(e,i.x,i.y)}},{key:"update",value:function(){var e=this.calculateFontStyles();if(e){var t=this._calculateText(e),n=t.dimensions,i=t.lines;this._dimensions=n,this._renderText(n,i,e)}}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),e.drawImage(this._canvas,t,n,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(e,t,n){this._canvas.width=e.x,this._canvas.height=e.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(n,this._context);for(var i=0;i<t.length;i++){var r=t[i];this._renderTextLine(r,n.topPadding+n.lineHeight*i)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var e=this.getFontFamily(),t=this.getFontSize(),n=this.getAbsoluteTextHeight(),i={fontFamily:e,fontSize:t,textHeight:n,lineHeight:n*this.getLineHeight(),topPadding:n*(this.getLineHeight()-1)/2};return this._textOptions=m({},i),i}},{key:"getTextMetrics",value:function(){return this.getFontVariation().getTextMetrics()}},{key:"getAbsoluteTextHeight",value:function(){var e=this.getFontSize(),t=this.getTextMetrics();if(t){var n=1/t.unitsPerEm*e,i=t.ascender*n,r=t.descender*n;return i+Math.abs(r)}return e*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(e){this._applyTextOptions(e,this._context);for(var t=new w,n=this.getText().split("\n"),i=0;i<n.length;i++){var r=n[i];t.x=Math.max(t.x,this._context.measureText(r).width)}var o=e.lineHeight;return t.y=n.length*o,{dimensions:t,lines:n}}},{key:"getDimensions",value:function(){var e=this.calculateFontStyles();return this._calculateText(e).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var e=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),e.y}},{key:"fitMaxWidth",value:function(){var e=this.getDimensions().x,t=this.getMaxWidth()/e;this.setFontSize(this.getFontSize()*t),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(e){this.setMaxWidth(e.width),this.setMaxHeight(e.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var e=this.getDimensions();return new v.a(e.x,e.y)}}]),t}();x.prototype.availableOptions={text:{type:_.OptionType.STRING,default:""},fontIdentifier:{type:_.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:_.OptionType.OBJECT,default:null},lineHeight:{type:_.OptionType.NUMBER,default:1},fontSize:{type:_.OptionType.NUMBER,default:22},textColor:{type:_.OptionType.STRING,default:"black"},strokeStyle:{type:_.OptionType.STRING,default:"black"},outlineWidth:{type:_.OptionType.NUMBER,default:0},textBaseline:{type:_.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:_.OptionType.BOOLEAN,default:!0},maxWidth:{type:_.OptionType.NUMBER,default:100},maxHeight:{type:_.OptionType.NUMBER,default:0},alignment:{type:_.OptionType.STRING,default:"left",available:["left","center","right"]}}},function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(79)),y=n(54),v=n(20),m=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[g.a.Badge1,g.a.Badge2,g.a.Badge3,g.a.Badge4],o._rowTypesRandomizer=new v.a(0),o._isMaskedRandomizer=new v.a(0),o._seedPool.push(o._rowTypesRandomizer),o._seedPool.push(o._isMaskedRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,y.a),b(t,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map(function(e){return e.getImagePath()})}},{key:"_randomLayoutRow",value:function(e,n,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),r.setLineSpacing(.9);var o=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r);return o.set({textScaleFactor:.9}),o}}]),t}();w.defaultFontIdentifiers=["imgly_font_campton_bold"],w.identifier="imgly_text_design_masked_badge",w.ValidAlignments=[y.a.Alignment.Center],w.prototype.availableOptions=m({},y.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:w.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(79)),_=(n(54),n(128)),g=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[d.a.SpeechBubble2,d.a.SpeechBubble4,d.a.SpeechBubble2,d.a.SpeechBubble4,d.a.SpeechBubble5],o._possibleRowTypesForMin15=o._possibleRowTypes.slice(0,2),o._possibleRowTypesForMax14=o._possibleRowTypes.slice(2),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,_.a),y(t,[{key:"_rowTypes",value:function(e){return e.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}]),t}();v.defaultFontIdentifiers=["imgly_font_gagalin_regular"],v.identifier="imgly_text_design_masked_speech_bubble_comic",v.prototype.availableOptions=g({},_.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:v.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(4),g=(n.n(_),n(54)),y=n(127),v=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||d()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,g.a),m(t,[{key:"_modifiedText",value:function(e){return function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_randomLayoutRow",value:function(e,t,n,i){var r=this._alignmentRandomizer.pickNext(g.a.ValidAlignments);return i.setAlignment(r),new y.a({words:e,width:n,attributes:i,image:null,backgroundColor:_.Color.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}]),t}();b.defaultFontIdentifiers=["imgly_font_abril_fatface_regular"],b.identifier="imgly_text_design_multiline",b.prototype.availableOptions=v({},g.a.prototype.availableOptions,{fontIdentifiers:{type:_.OptionType.ARRAY,default:b.defaultFontIdentifiers}})},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(6),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),n(79)),p=n(54),d=n(128),_=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._possibleRowTypes=[h.a.Watercolor1,h.a.Watercolor2,h.a.Watercolor3],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,d.a),t}();g.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"],g.identifier="imgly_text_design_watercolor",g.prototype.availableOptions=_({},d.a.prototype.availableOptions,{fontIdentifiers:{type:f.OptionType.ARRAY,default:g.defaultFontIdentifiers},alignment:{type:f.OptionType.STRING,default:p.a.Alignment.Center,available:p.a.ValidAlignments}})},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(5),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(1),d=n.n(p),_=n(129),g=n(26),y=n(21),v=n(126),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new y.a(0,.3,0,.3),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,_.a),m(t,[{key:"_layoutRows",value:function(e,n){var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=u()(t,n);if(void 0===r){var o=d()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||d()(t.prototype),"_layoutRows",this).call(this,e,n);if(!this.getDecorationsVisible())return i;var o=new v.a({width:n,height:25,image:g.a.getImage(this._rowTypeRandomizer.pickNext(_.a.RowImages))}).layout(),a=new v.a({width:n,height:25,image:g.a.getImage(this._rowTypeRandomizer.pickNext(_.a.RowImages))}).layout();return[o].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(i),[a])}}]),t}();b.identifier="imgly_text_design_sunshine-v3_1_0"},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return s()(e)}n.d(t,"a",function(){return E});var r=n(6),o=n.n(r),a=n(15),s=n.n(a),u=n(0),l=n.n(u),c=n(2),f=n.n(c),h=n(3),p=n.n(h),d=n(1),_=n.n(d),g=n(4),y=(n.n(g),n(26)),v=n(21),m=n(129),b=n(433),w=n(435),x=n(436),k=n(20),T=o.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new v.a(.3,.3,.3,.3),o._backgroundRandomizer=new k.a(0),o._decoTypeRandomizer=new k.a(0),o._seedPool.push(o._backgroundRandomizer),o._seedPool.push(o._decoTypeRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}(t,m.a),C(t,[{key:"getImagePaths",value:function(){return[].concat(i(m.a.RowImages),i(g.Utils.Array.flatten(t.Backgrounds.map(function(e){return e.getImagePaths()}))),i(t.DecoratorImages))}},{key:"_getBackground",value:function(){return this._backgroundRandomizer.pickNext(t.Backgrounds)}},{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return t.DecoratorImages.slice(0,2).map(function(e){return y.a.getImage(e)});case 1:case 2:return t.DecoratorImages.slice(2).map(function(e){return y.a.getImage(e)});default:return g.Log.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),t.DecoratorImages.slice(2).map(function(e){return y.a.getImage(e)})}}}]),t}();E.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],E.identifier="imgly_text_design_particles",E.Backgrounds=[new b.a,new w.a,new x.a],E.DecoratorImages=["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"],E.prototype.availableOptions=T({},m.a.prototype.availableOptions,{fontIdentifiers:{type:g.OptionType.ARRAY,default:E.defaultFontIdentifiers},decorationsVisible:{type:g.OptionType.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:g.OptionType.BOOLEAN,default:!0}})},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(130)),_=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),t}();g.Images=["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"],g.prototype.availableOptions=_({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(g.Images))},relativeParticleSize:{type:p.OptionType.NUMBER,default:.12}})},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=f.Math.Rectangle,d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),h(t,[{key:"getContentFrame",value:function(){var e=this.getFrame().clone(),t=.1*e.width;return e.insetBy(t,t)}},{key:"intersects",value:function(e){return this.getFrame().intersects(e.getFrame())}}]),t}();d.prototype.availableOptions={frame:{type:f.OptionType.OBJECT,default:new p}}},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(130)),_=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),t}();g.Images=["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"],g.prototype.availableOptions=_({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(g.Images))},relativeParticleSize:{type:p.OptionType.NUMBER,default:.12}})},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(15),r=n.n(i),o=n(6),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=(n.n(p),n(130)),_=a.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),t}();g.Images=["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"],g.prototype.availableOptions=_({},d.a.prototype.availableOptions,{imagePaths:{type:p.OptionType.ARRAY,default:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(g.Images))}})},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n(6),r=n.n(i),o=n(15),a=n.n(o),s=n(0),u=n.n(s),l=n(5),c=n.n(l),f=n(2),h=n.n(f),p=n(3),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=(n.n(y),n(75)),m=n(21),b=n(178),w=n(20),x=r.a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=c()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},C=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._relativeInsets=new m.a(.1,0,0,0),o._rowTypeRandomizer=new w.a(0),o._seedPool.push(o._rowTypeRandomizer),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=d()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(h.a?h()(e,t):e.__proto__=t)}(t,v.a),k(t,[{key:"_modifiedText",value:function(e){return T(t.prototype.__proto__||g()(t.prototype),"_modifiedText",this).call(this,e).toUpperCase()}},{key:"_randomLayoutRow",value:function(e,n,i,r){var o=T(t.prototype.__proto__||g()(t.prototype),"_randomLayoutRow",this).call(this,e,n,i,r);return o.setShearingAngle(this.getShearingAngle()),o}},{key:"_layoutRows",value:function(e,n){var i=T(t.prototype.__proto__||g()(t.prototype),"_layoutRows",this).call(this,e,n),r=y.Utils.values(b.a.FormType),o=new b.a({width:n,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout(),s=new b.a({width:n,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout();return[o].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return a()(e)}(i),[s])}}]),t}();C.defaultFontIdentifiers=["imgly_font_campton_bold"],C.identifier="imgly_text_design_rotated",C.prototype.availableOptions=x({},v.a.prototype.availableOptions,{fontIdentifiers:{type:y.OptionType.ARRAY,default:C.defaultFontIdentifiers},relativeLineSpacing:{type:y.OptionType.NUMBER,default:.025/3},shearingAngle:{type:y.OptionType.NUMBER,default:-.1}})},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),n(32)),s=n(124),u=n(47),l=n(20),c=n(127),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=o.Math.Rectangle,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new l.a}return f(e,[{key:"createLayout",value:function(e,t,n){this._layout=e,this._text=t,this._seed=n,e.seed(n),this._layoutData=e.generateLayoutData(t,1e3)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(o.Log.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(e,t,n,i){var r=this,l=new a.a(1e3,1e3/t.aspect()),f=t.width/1e3,p=this._layoutData.getRelativeInsets().clone().scale(l.width),d=this._layoutData.getRelativeLineSpacing()*l.width,_=p.top;e.save(),this.randomizer.seed(this._seed);var g=this._layoutData.getBackground();g&&g.render(e,t,this._layoutData.getRelativeInsets(),i?o.Color.WHITE:n,this.randomizer),e.scale(f,f),this._layoutData.getRows().forEach(function(t){e.save();var a=t.getAttributes();if(e.transform(1,t.getShearingAngle(),0,1,p.left,_),a.setTextColor(i?o.Color.WHITE:n.clone()),a.setTintColor(i?o.Color.WHITE:n.clone()),(t instanceof s.a||t instanceof c.a)&&(t.setBackgroundColor(i?o.Color.WHITE:n.clone()),t.setIsUsedInInvertedLayout(i)),r._debugMode&&(t._debugMode=!0),t.willRender(e),t.render(e),t.didRender(e),r._debugMode){var l=t._getFrame(),f=t._getTextFrame();Object(u.f)(e,l,o.Color.GREEN),Object(u.f)(e,f,o.Color.BLUE),t._getLayoutElements().forEach(function(n){var i=n.getFrame(),r=t._getTextFrameForElement(n);Object(u.f)(e,i,new o.Color(1,1,0)),Object(u.f)(e,r,new o.Color(0,1,1))})}_+=t.getSize().height+d,e.restore()}),this._debugMode&&Object(u.f)(e,new h(0,0,l.width,l.height),o.Color.RED),e.restore()}}]),e}()},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=n.n(f),p=n(440),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=f.Math.Vector2,g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Operation),d(t,[{key:"_render",value:function(e){this._sprite.setRotation(0);var t=e.getDimensions(),n=this._options,i=n.start,r=n.end,o=n.rotation,a=n.textureScale,s=r.clone().subtract(i).clone().divide(2),u=i.clone().add(s),l=this.calculateScale()*a,c=t.clone().multiply(l).multiply(s);return this._sprite.setAnchor(u),this._sprite.setRotation(o),this._sprite.setScale(l,l),this._sprite.setPosition(c),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"calculateScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,t=this.getInputDimensions(!1),n=new _(Math.abs(t.x*Math.cos(e))+Math.abs(t.y*Math.sin(e)),Math.abs(t.x*Math.sin(e))+Math.abs(t.y*Math.cos(e))),i=t.clone().subtract(n.clone()).divide(2).abs();return i.y>i.x?2*i.y/t.y+1:2*i.x/t.x+1}},{key:"getNewDimensions",value:function(e){var t=this._options,n=t.start,i=t.end,r=t.textureScale,o=this.calculateScale();return e.clone().multiply(r*o).multiply(i.clone().subtract(n)).round()}},{key:"flip",value:function(e){var t=this._options,n=t.start,i=t.end,r=n.clone();"horizontal"===e?(n.set(1-i.x,n.y),i.set(1-r.x,i.y)):"vertical"===e&&(n.set(n.x,1-i.y),i.set(i.x,1-r.y))}},{key:"rotate",value:function(e){for(var t=this._options,n=t.start,i=t.end,r=(e+360)%360,o=Math.floor(r/90),a=0;a<o;a++){var s=n.clone();n.set(1-i.y,s.x),i.set(1-s.y,i.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:function(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}]),t}();g.identifier="transform",g.prototype.availableOptions={start:{type:f.OptionType.VECTOR2,default:new _(0,0)},end:{type:f.OptionType.VECTOR2,default:new _(1,1)},textureScale:{type:f.OptionType.NUMBER,default:1},rotation:{type:f.OptionType.NUMBER,default:0}},g.TransformChange=p.a,h.a.Operations.TransformOperation=g,t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=o.Math.Vector2,u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=n,this._oldOptions={start:t.getStart().clone(),end:t.getEnd().clone(),rotation:t.getRotation(),textureScale:t.getTextureScale()},this._inputDimensions=t.getInputDimensions(!1),this._rotationDelta=n.rotation-t.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=t.calculateScale(n.rotation)/t.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/t.getTextureScale()}return a(e,[{key:"applyToRelativePoint",value:function(e){var t=this._oldOptions.start,n=this._oldOptions.end,i=t.clone().add(n.clone().subtract(t).divide(2)).multiply(this._inputDimensions),r=e.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=i.clone().add(r).clone().subtract(this._inputDimensions.clone().divide(2)),a=new s(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),u=this._inputDimensions.clone().divide(2).add(a),l=this._options.start.clone().multiply(this._inputDimensions);return u.clone().subtract(l).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(e){return e*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(e){return e=e.clone().multiply(this._scaleRatio),this._options.textureScale&&e.multiply(this._textureScaleFactor),e}},{key:"scaleSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return e/this._sizeFactor[t]}},{key:"applyToRotation",value:function(e){return(e+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var e=this._options.start.clone(),t=this._options.end.clone(),n=this._inputDimensions,i=-this._rotationDelta,r=Math.cos(i),o=Math.sin(i),a=this._oldAbsoluteSize,u=this._newAbsoluteSize,l=e.clone().subtract(t).multiply(n),c=1/this._scaleRatio,f=new s(1/this._sizeFactor.x,1/this._sizeFactor.y),h=1/this._textureScaleFactor,p=this._oldOptions;return this._oldOptions=this._options,this._options=p,this._inputDimensions=n,this._rotationDelta=i,this._deltaCos=r,this._deltaSin=o,this._oldAbsoluteSize=u,this._newAbsoluteSize=a,this._absoluteStartDiff=l,this._scaleRatio=c,this._sizeFactor=f,this._textureScaleFactor=h,this}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(4),d=n.n(p),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=p.Math.Vector2,y=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i)));return o._watermarkSprite=new p.Engine.Sprite,o._watermarkSprite.setAnchor(.5,.5),o._container.addChild(o._watermarkSprite),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.Operation),_(t,[{key:"_render",value:function(e){this._watermarkTexture||(this._watermarkTexture=p.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var t=e.getDimensions(),n=this._options.image,i=n.width,r=n.height,o=p.Utils.resizeVectorToFit(new g(i,r),t);return this._watermarkSprite.setPosition(t.clone().divide(2)),this._watermarkSprite.setWidth(o.x),this._watermarkSprite.setHeight(o.y),this._renderTexture.render(this._container),p.Promise.resolve()}},{key:"dispose",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(t.prototype.__proto__||h()(t.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),t}();y.identifier="watermark",y.prototype.availableOptions={image:{type:p.OptionType.OBJECT,required:!0}},d.a.Operations.WatermarkOperation=y,t.a=y},function(e,t,n){"use strict";var i=n(43),r=n.n(i),o=n(5),a=n.n(o),s=n(0),u=n.n(s),l=n(2),c=n.n(l),f=n(3),h=n.n(f),p=n(78),d=n.n(p),_=n(1),g=n.n(_),y=n(4),v=n.n(y),m=n(443),b=n(39),w=n(185),x=n(463),k=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=g()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=y.Engine.Filters.OverlayFilter,E=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(i)));return o._renderStart=null,o._renderedOverlaySprite=new y.Engine.Sprite,o._renderedOverlayContainer=new y.Engine.Container,o._renderedOverlayContainer.addChild(o._renderedOverlaySprite),o._overlayFilter=new C,o._overlayFilter.getShaderForRenderer(o._sdk.getRenderer()),o._sdk.on("new-image",o._onNewImage.bind(o)),o._prepareRenderTargets(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=h()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(c.a?c()(e,t):e.__proto__=t)}(t,y.Operation),T(t,null,[{key:"isSupported",value:function(e){if(e.getRenderer().isOfType(b.RendererType.WEBGL)){var t=e.getRenderer().getContext(),n=w.a.determineSupportedConfiguration(t).environmentSupported,i=!y.Utils.isMobile();return n&&i}return!1}}]),T(t,[{key:"setOption",value:function(e,n){var i=this;if("styleTransferModel"===e){var r=this._options.styleTransferModel;r&&r!==n&&this._renderInputImageIntoOverlayTarget()}if(k(t.prototype.__proto__||g()(t.prototype),"setOption",this).call(this,e,n),"identifier"===e||"styleTransferModel"===e){var o=this._options.styleTransferModel;o&&o.onWeightsUpdated(function(){i._renderInputImageIntoOverlayTarget()})}}},{key:"_onNewImage",value:function(){this.dispose(),this._prepareRenderTargets();var e=this.getStyleTransferModel();e&&e.updateInputDimensions(this._exifAdjustedInputDimensions)}},{key:"_prepareRenderTargets",value:function(){var e=this._sdk.getRenderer(),t=e.getContext(),n=this._sdk.getInputTexture(),i=n.getDimensions(),r=this._sdk.getOperationsStack().getByIdentifier("exif-orientation");if(r){i=r.getNewDimensions(i);var o=new y.Engine.WebGLRenderTarget(e,i.x,i.y,1);o.setFrame(new y.Math.Rectangle(0,0,i.x,i.y));var a=e.getOrCreateGLTexture(o.getBaseTexture()),s=r.applyTo(this._sdk.getImage());t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s),this._modelInputTarget=o}else{var u=new y.Engine.WebGLRenderTarget(e,i.x,i.y,1);u.setFrame(new y.Math.Rectangle(0,0,i.x,i.y)),u._baseTexture=n.getBaseTexture();var l=u._baseTexture.getGLTextureForRenderer(e);l||(l=t.createTexture(),u._baseTexture.setGLTextureForRenderer(l,e)),u._texture=l,t.bindTexture(t.TEXTURE_2D,l),t.bindFramebuffer(t.FRAMEBUFFER,u._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,l,0),this._modelInputTarget=u}this._overlayRenderTexture=new y.Engine.RenderTexture(e,i.x,i.y);var c=this._overlayRenderTexture.getBaseTexture();c.setGLUnit(5),this._sdk.getRenderer().updateTexture(c,!1),this._overlayRenderTarget=this._overlayRenderTexture.getRenderTarget(),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture),this._exifAdjustedInputDimensions=i,this._renderInputImageIntoOverlayTarget()}},{key:"_renderInputImageIntoOverlayTarget",value:function(){var e=this._sdk.getRenderer().getContext(),t=this._modelInputTarget.getFrame().getSize();this._modelInputTarget.activate(),e.bindTexture(e.TEXTURE_2D,this._overlayRenderTarget.getTexture()),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,t.x,t.y,0)}},{key:"_render",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new y.Promise(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return y.Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}(d.a.mark(function e(t){var n,i,r,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._options,i=n.intensity,r=n.blendMode,o=this.getStyleTransferModel()){e.next=6;break}return this._sprite.setFilters([]),this._renderTexture.render(this._container),e.abrupt("return",y.Promise.resolve());case 6:if(!o.isDisposed()){e.next=9;break}return e.next=9,o.initGraph(this._sdk.getRenderer());case 9:if(!o.isDirty()){e.next=12;break}return e.next=12,o.execute(this._sdk.getRenderer(),this._modelInputTarget,this._overlayRenderTarget);case 12:return this._overlayFilter.set({blendMode:r,overlayImage:this._overlayRenderTarget.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),e.abrupt("return",y.Promise.resolve(o.isDirty()));case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){if(k(t.prototype.__proto__||g()(t.prototype),"dispose",this).call(this),this._renderedOverlaySprite.dispose(),this._overlayFilter.dispose(),this._overlayRenderTarget.dispose(),this._modelInputTarget){var e=this._modelInputTarget._framebuffer;this._sdk.getRenderer().getContext().deleteFramebuffer(e),this._modelInputTarget=null}var n=this._options.styleTransferModel;n&&n.dispose()}}]),t}();E.identifier="artfilter",E.prototype.availableOptions={identifier:{type:y.OptionType.STRING,default:""},styleTransferModel:{type:y.OptionType.OBJECT,default:null},intensity:{type:y.OptionType.NUMBER,default:1},blendMode:{type:y.OptionType.NUMBER,default:C.BLEND_MODES.NORMAL,available:r()(C.BLEND_MODES).map(function(e){return C.BLEND_MODES[e]})}},E.StyleTransferModel=m.a,E.TensorFilters=x.a,v.a.Operations.ArtFilterOperation=E,t.a=E},function(e,t,n){"use strict";function i(e){return function(){var t=e.apply(this,arguments);return new y.a(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return y.a.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}var r=n(31),o=n.n(r),a=n(28),s=n.n(a),u=n(0),l=n.n(u),c=n(2),f=n.n(c),h=n(3),p=n.n(h),d=n(78),_=n.n(d),g=n(11),y=n.n(g),v=n(1),m=n.n(v),b=n(4),w=(n.n(b),n(444)),x=n(462),k=n(186),T=n(187),C=n(188),E=n(189),R=n(190),O=n(191),S=n(192),I=n(193),A=n(13),F=n(38),M=n(169),B=n(55),D=n(133),L=n(194),N=n(195),P=n(132),z=function(){return function(e,t){if(Array.isArray(e))return e;if(o()(Object(e)))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=s()(e);!(i=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),U=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),l()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||m()(t)).call(this,e));return i._onWeightsUpdatedCallback=null,i._finalConvIndex=-1,i._tilingController=n,i._disposed=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=p()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(f.a?f()(e,t):e.__proto__=t)}(t,b.Configurable),U(t,[{key:"isDirty",value:function(){return!this._tilingController||!this._tilingController.hasRenderedAllTiles()}},{key:"isDisposed",value:function(){return null===this._graph}},{key:"isReady",value:function(){return!this.isDisposed()&&this._graph.isFinished()}},{key:"getTilingController",value:function(){return this._tilingController}},{key:"onWeightsUpdated",value:function(e){this._onWeightsUpdatedCallback=e}}],[{key:"createWithOptions",value:function(e,n,i){var r=e.tileEdgeLength||t.prototype.availableOptions.tileEdgeLength.default,o=e.overlappingFactor||t.prototype.availableOptions.overlappingFactor.default,a=new t(e,new x.a(n,r,o));return a.initGraph(i).then(function(){return a})}}]),U(t,[{key:"updateInputDimensions",value:function(e){var n=this._options.tileEdgeLength||t.prototype.availableOptions.tileEdgeLength.default,i=this._options.overlappingFactor||t.prototype.availableOptions.overlappingFactor.default;this._tilingController=new x.a(e,n,i)}},{key:"updateWithWeightsFromURL",value:function(){var e=i(_.a.mark(function e(t){var n,i,r,o,a,s,u,l;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new M.JSONLoader(t),e.next=3,n.load();case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return",y.a.reject(new Error("Could not load weight map from "+t)));case 6:for(r=0;i["transform/residual/res_"+(r+1)+"/conv1/depthwise_weights"];)r++;if(o=i["transform/expand/final_conv/depthwise_weights"].logicalShape,a=this._graph._filterStack[this._finalConvIndex]._getInputWithName("w").logicalShape,s=B.a.isSameShape(a,o),u=this._residualBlockCount===r,l=this,!s||!u){e.next=17;break}return e.abrupt("return",this._graph.updateWeights(i).then(function(){l._onWeightsUpdatedCallback&&l._onWeightsUpdatedCallback(),l.getTilingController().reset()}));case 17:return e.abrupt("return",y.a.reject(new Error("Model architectures differ.")));case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"execute",value:function(e,t,n){var i=this._tilingController,r=this._graph,o=i.getNextTileIndex();if(!r.isFinished())throw new Error("Can't execute an unfinished graph.");var a=this._tilingController.getOriginalInputCoordinatesForTileAtIndex(o),s=a.x,u=a.y,l=a.height,c=a.width,f=new F.Rectangle(s,u,c,l),h=this._tilingController.getBlendLeftTopRightBottomForTile(o),p=this._tilingController.getTilingConfiguration().overlappingFactor;return r.render(e,t,n,f,h,p).then(function(){i.markTileAsRendered(o)})}},{key:"initGraph",value:function(){var e=i(_.a.mark(function e(t){var n,i,r,o,a,s,u,l,c,f=this;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options,i=n.weightURL,r=n.tileEdgeLength,o=this.getTilingController(),a=o.calculateMaximumTileDimensions(),s=o.getOriginalInputCoordinatesForTileAtIndex(0).getSize(),u=new M.JSONLoader(i),e.next=7,u.load();case 7:for(l=e.sent,c=0;l["transform/residual/res_"+(c+1)+"/conv1/depthwise_weights"];)c++;return this._residualBlockCount=c,this._graph=new w.a(t,l,a,r),this._graph.addFilter(new I.a({inputs:[{name:"x",type:A.a.PREVIOUS}],size:[r,r]})),this._addStyleTransferOperationsToGraph(this._graph,l,s),e.abrupt("return",this._graph.load(t).then(function(){f._tilingController.reset()}));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_addStyleTransferOperationsToGraph",value:function(e,t,n){this._weightMap=t;for(var i=this._addDepthwiseSeparableConvolution("transform/contract/conv1",e,1,1,"same"),r=this._addDepthwiseSeparableConvolution("transform/contract/conv2",e,i,2,"same"),o=this._addDepthwiseSeparableConvolution("transform/contract/conv3",e,r,2,"same"),a=1;a<=this._residualBlockCount;a++){var s="transform/residual/res_"+a;o=this._addResidualBlock(s,e,o)}var u=this._addUpsampling("transform/expand/up_1",e,o),l=this._addUpsampling("transform/expand/up_2",e,u);this._addDepthwiseSeparableConvolution("transform/expand/final_conv",e,l,1,"same",!1),e.addFilter(new T.a({inputs:[{name:"x",type:A.a.PREVIOUS}]}));var c=e.addFilter(new I.a({inputs:[{name:"x",type:A.a.PREVIOUS}],size:[n.y,n.x]})),f=this._addEdgePadding(e,c,3,1),h=this._addPackFilterToStack(e,f);this._addSharpening(e,h),this._weightMap=null}},{key:"_addDepthwiseSeparableConvolution",value:function(e,t,n,i,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=e+"/depthwise_weights",s=e+"/pointwise_weights",u=t.getLastIndex()===n,l=t.addFilter(new E.a({inputs:[{name:"x",type:u?A.a.PREVIOUS:A.a.DATA,data:n},{name:"w",type:A.a.DATA,data:a}],stride:i,padding:"same",padMethod:"edge"}));a.indexOf("final_conv")>=0&&(this._finalConvIndex=l);var c=t.addFilter(new C.a({inputs:[{name:"x",type:A.a.PREVIOUS},{name:"w",type:A.a.DATA,data:s}],stride:1,padding:"valid"})),f=R.a.addFiltersForReduceSumOperationToGraph(t,c,[1,2]),h=t.addFilter(new O.a({inputs:[{name:"sum",type:A.a.PREVIOUS},{name:"x",type:A.a.INDEX,data:c}]}));R.a.addFiltersForReduceSumOperationToGraph(t,h,[1,2]);var p=e+"/instance_norm/shift",d=e+"/instance_norm/scale";return t.addFilter(new S.a({inputs:[{name:"variance",type:A.a.PREVIOUS},{name:"sum",type:A.a.INDEX,data:f},{name:"x",type:A.a.INDEX,data:c},{name:"shift",type:A.a.DATA,data:p},{name:"scale",type:A.a.DATA,data:d}],addRelu:o})),t.getLastIndex()}},{key:"_addResidualBlock",value:function(e,t,n){var i=this._addDepthwiseSeparableConvolution(e+"/conv1",t,n,1,"same"),r=this._addDepthwiseSeparableConvolution(e+"/conv2",t,i,1,"same",!1),o=t.getLastIndex()===r;return t.addFilter(new k.a({inputs:[{name:"x",type:A.a.INDEX,data:n},{name:"y",type:o?A.a.PREVIOUS:A.a.INDEX,data:r}]})),t.getLastIndex()}},{key:"_addUpsampling",value:function(e,t,n){var i=t.getLogicalShapeAtIndex(n),r=z(i,3),o=(r[0],r[1]),a=r[2],s=t.getLastIndex()===n,u=t.addFilter(new I.a({inputs:[{name:"x",type:s?A.a.PREVIOUS:A.a.INDEX,data:n}],size:[2*o,2*a]}));return this._addDepthwiseSeparableConvolution(e+"/conv",t,u,1,"same")}},{key:"_addEdgePadding",value:function(e,t,n,i){var r=e.getLogicalShapeAtIndex(t),o=z(r,4),a=o[1],s=o[2],u=(o[3],e.getLastIndex()===t),l=D.a.calculatePadding("same",a,s,i,i,n,n).padInfo,c=[[0,0],[l.top,l.bottom],[l.left,l.right],[0,0]];return e.addFilter(new L.a({inputs:[{name:"x",type:u?A.a.PREVIOUS:A.a.INDEX,data:t}],paddings:c}))}},{key:"_addPackFilterToStack",value:function(e,t){var n=e.getLogicalShapeAtIndex(t),i=e.getLastIndex()===t,r=new P.a({inputs:[{name:"x",type:i?A.a.PREVIOUS:A.a.INDEX,data:t}],outputSize:n.slice(1,3)});if(3===n[3])return e.addFilter(r);throw new Error("Couldn't add pack filter due to channel count mismatch (expected RGB output).")}},{key:"_addSharpening",value:function(e,t){var n=e.getLastIndex()===t;e.addFilter(new N.a({inputs:[{name:"x",type:n?A.a.PREVIOUS:A.a.INDEX,data:t}]}))}},{key:"dispose",value:function(){this._graph&&this._graph.dispose(),this._graph=null}}]),t}();j.prototype.availableOptions={weightURL:{type:b.OptionType.STRING,required:!0},tileEdgeLength:{type:b.OptionType.NUMBER,default:256},overlappingFactor:{type:b.OptionType.NUMBER,default:.4}},t.a=j},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(78),a=n.n(o),s=n(43),u=n.n(s),l=n(11),c=n.n(l),f=n(131),h=n.n(f),p=n(38),d=n(13),_=n(183),g=n(55),y=n(4),v=(n.n(y),n(132),n(12)),m=n(158),b=n(184),w=n(460),x=n(461),k=n(185),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),C=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._measurePerformance=!1,this._filterStack=[],this._intermediateReadDependencies=[],this._intermediateWriteDependencies=[],this._finished=!1,this._renderer=t,this._gl=t.getContext();var o=k.a.determineSupportedConfiguration(this._gl);this._renderTargetManager=new w.b(t,o),this._textureManager=new x.a(t,o),this._weightMap=n,this._shaderCache=new h.a,this._inputTileDimensions=i,this._inferenceEdgeLength=r,this._featheredMaskFilter=new b.a({inputs:[{name:"x",type:d.a.PREVIOUS,logicalShape:[i.y,i.x]},{name:"y",type:d.a.INDEX,logicalShape:[i.y,i.x]}]}),this._setupRGBAUnpackFilter()}return T(e,[{key:"addFilter",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._finished)throw new Error("Can't add filters to an already finished graph.");var i=this._filterStack.length,r=i-1,o=this._filterStack[r];return this._filterStack.push(e),this._intermediateReadDependencies.push([]),this._intermediateWriteDependencies.push([]),e.getInputs().forEach(function(a,s,u){switch(a.type){case d.a.PREVIOUS:n&&(a.logicalShape=o.outputLogicalShape());break;case d.a.INDEX:if(a.data===r)throw new Error("Accessing the previous filter through indexing is not supported. Use InputType.PREVIOUS instead.");var l=t._filterStack[a.data];if(!l)throw new Error("Indexed input does not exist: "+a.data+" for input "+a.name+" in "+e.constructor.name+" at "+i+".");n&&(a.logicalShape=l.outputLogicalShape()),t._intermediateReadDependencies[i].push(a),t._intermediateWriteDependencies[a.data].push(i);break;case d.a.DATA:var c=a.data,f=t._weightMap[c];u[s].logicalShape=f.logicalShape,u[s].data=new Float32Array(f.data),u[s].key=c,delete t._weightMap[c]}},this),e.prepareUniforms(),i}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._measurePerformance;this._renderer=e,this._gl=e.getContext();var i=this._gl,r=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this._maxRequiredTextureDimensions=this._calculateMaximumIntermediateTextureDimensions();var o=this;return c.a.resolve().then(function(){return o._loadTextures(n)}).then(function(){return o._compileShaders(e,r,n)}).then(function(){return o._prepareRenderTargets(n)}).then(function(){return o._intermediateResults=o._filterStack.map(function(){return null}),o._quad=new m.a(e),t._weightMap=null,o._finished=!0,o}).then(function(){n&&(performance.measure("texture_loading","begin_texture_loading","finish_texture_loading"),performance.measure("shader_compilation","begin_shader_compilation","finish_shader_compilation"),performance.measure("target_preparation","begin_target_preparation","finish_target_preparation"),performance.getEntriesByType("measure").forEach(function(e){console.log(e.name+": "+e.duration+"ms"),performance.clearMarks(),performance.clearMeasures()}))})}},{key:"dispose",value:function(){this._disposed||(this._textureManager.dispose(),this._renderTargetManager.dispose(),this._shaderCache.forEach(function(e){e.dispose()}),this._textureManager=null,this._renderTargetManager=null,this._shaderCache=null,this._intermediateReadDependencies=null,this._intermediateWriteDependencies=null,this._filterStack=null,this._disposed=!0)}},{key:"_loadTextures",value:function(e){var t=this;e&&performance.mark("begin_texture_loading");var n=[];return this._filterStack.forEach(function(e,i){n.push(t._textureManager.createAndLoadTexturesForFilter(e,i))},this),c.a.all(n).then(function(){e&&performance.mark("finish_texture_loading")})}},{key:"_compileShaders",value:function(e,t,n){var i=this;n&&performance.mark("begin_shader_compilation");var r=[];return this._filterStack.concat([this._featheredMaskFilter]).forEach(function(n,o){if(o<i._filterStack.length){var a=1+n.getInputs().filter(function(e){return e.type===d.a.DATA}).length+i._intermediateReadDependencies[o].length;if(a>t)throw new Error("This environment does only offer support for "+t+", but filter "+n.constructor.name+" requires "+a+".")}var s=n.getShaderIdentifier(),u=i;i._shaderCache.has(s)||r.push(new c.a(function(t){var i=n.getShaderForRenderer(e);if(!i)throw new Error("Could not compile filter: "+n.constructor.name+"!");u._shaderCache.set(s,i),e.getContext().finish(),t(i)}))}),c.a.all(r).then(function(){n&&performance.mark("finish_shader_compilation")})}},{key:"_prepareRenderTargets",value:function(e){var t=this;e&&performance.mark("begin_target_preparation");var n=this._maxRequiredTextureDimensions,i=this._inputTileDimensions;return c.a.resolve().then(function(e){return t._renderTargetManager.prebuildRenderTargets(5,n,w.a.FLOAT)}).then(function(e){return t._renderTargetManager.prebuildRenderTargets(3,i,w.a.INT)}).then(function(t){e&&performance.mark("finish_target_preparation")})}},{key:"isFinished",value:function(){return this._finished}},{key:"updateWeights",value:function(e){var t=this;return this._finished?(this._filterStack.forEach(function(n,i,r){var o=!1;n.getInputs().forEach(function(t,n){if(t.type===d.a.DATA&&t.key){var a=e[t.key];if(!a)return;r[i].getInputs()[n].data=new Float32Array(a.data),o=!0,delete e[t.key]}}),o&&t._textureManager.updateTexturesForFilter(n,i)}),0===!u()(e).length&&c.a.reject(new Error("Not all weights in the given weight map were in use.")),c.a.resolve()):c.a.reject(new Error("Graph hasn't been loaded. Unable to update weights."))}},{key:"render",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new c.a(function(e,n){return function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return c.a.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}(a.a.mark(function e(t,n,i,r,o,s){var u,l,f,h,_,y,m,b,x,k,T,C,E,R=this,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._measurePerformance;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._disposed){e.next=2;break}return e.abrupt("return",c.a.resolve(i));case 2:if(O&&performance.mark("begin_render"),u=this._gl,O&&performance.mark("begin_preparation"),this._featheredMaskFilter.setBlendLeftTopRightBottom(o),this._featheredMaskFilter.setBlendRadius(.5*s),l=this._maxRequiredTextureDimensions,f=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,w.a.INT),h=this._renderTargetManager.popRenderTarget(l,w.a.FLOAT),_=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,w.a.INT),this._copyTextureContents(n,f,r,p.Vector2.NULL),this._copyTextureContents(i,_,r,p.Vector2.NULL),y=this._filterStack[0],m=y.getInputs()[0].name,b=r.height,x=r.width,k=[b,x],y.setTextureSizeForInputWithName(this._inputTileDimensions.asArray(!0),m),y.setLogicalSizeForInputWithName(k,m),O&&performance.mark("finish_preparation"),T=new v.h,C=new v.h,this._filterStack.forEach(function(e,n){var i=1;O&&performance.mark("begin_conversion_"+n);var r=e.requiresFloatTextures()?w.a.FLOAT:w.a.INT,o=n===R.getLastIndex()?R._inputTileDimensions:R._maxRequiredTextureDimensions,a=R._renderTargetManager.getFormatOfRenderTarget(h);null===h?h=R._renderTargetManager.popRenderTarget(o,r):a!==r&&(R._renderTargetManager.pushRenderTarget(h),h=R._renderTargetManager.popRenderTarget(o,r)),O&&performance.mark("finish_conversion_"+n);var s=f.getFrame().getSize().asArray(!0),l=h.getFrame().getSize().asArray(!0),c=p.Utils.Array.find(e.getInputs(),function(e){return e.type===d.a.PREVIOUS});void 0!==c&&(e.setTextureSizeForInputWithName(s,c.name),e.setLogicalSizeForInputWithName(k,c.name)),O&&performance.mark("begin_suppl_"+n+"_prep"),i+=R._textureManager.bindTexturesForFilter(e,n,i),O&&performance.mark("finish_suppl_"+n+"_prep"),O&&performance.mark("begin_intermediate_"+n+"_prep");var _=R._intermediateReadDependencies[n];R._bindIntermediateReadDependencies(e,_,i),O&&performance.mark("finish_intermediate_"+n+"_prep");var y=f.getFrame(),v=h.getFrame();y.equals(T)&&v.equals(C)||(R._quad.map(y,v),R._configureVertexAttributesForShader(e.getShaderForRenderer(t)),T=y,C=v),t.setRenderTarget(h);var m=g.a.getTextureDimensionsForLogicalShape(e.outputLogicalShape());e.setTargetTextureSize(l),e.setTargetLogicalSize(m),u.viewport(0,0,m[1],m[0]),O&&performance.mark("begin_filter_"+n);var b=R._shaderCache.get(e.getShaderIdentifier());u.useProgram(b.getProgram()),e._applyWebGL(t,f,h,!0,b),O&&performance.mark("finish_filter_"+n),O&&performance.mark("begin_postprocess_"+n),R._storeIntermediateResultsIfNeeded(f,n,k,s)&&(f=null),_.forEach(function(e){var t=R._intermediateResults[e.data];t&&0===t.pendingReads&&(R._renderTargetManager.pushRenderTarget(t.target),R._intermediateResults.slice(e.data,1))},R);var x=h;h=f,f=x,k=m,O&&performance.mark("finish_postprocess_"+n)},this),O&&performance.mark("begin_masking"),this._renderTargetManager.pushRenderTarget(h),h=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,w.a.INT),this._applyFeatheredMasking(t,f,_,h,[b,x],o),O&&performance.mark("finish_masking"),O&&performance.mark("begin_out_copy"),this._copyTextureContents(h,i,new v.h(0,0,x,b),r.getPosition()),O&&performance.mark("finish_out_copy"),this._renderTargetManager.pushRenderTarget(f),this._renderTargetManager.pushRenderTarget(h),this._renderTargetManager.pushRenderTarget(_),O&&performance.mark("finish_render"),O){for(performance.measure("total","begin_render","finish_render"),performance.measure("preparation","begin_preparation","finish_preparation"),performance.measure("masking","begin_masking","finish_masking"),performance.measure("out_copy","begin_out_copy","finish_out_copy"),E=0;E<this._filterStack.length;E++)performance.measure("conversion_"+E,"begin_conversion_"+E,"finish_conversion_"+E),performance.measure("suppl_"+E+"_prep","begin_suppl_"+E+"_prep","finish_suppl_"+E+"_prep"),performance.measure("intermediate_"+E+"_prep","begin_intermediate_"+E+"_prep","finish_intermediate_"+E+"_prep"),performance.measure("filter_"+E+"_"+this._filterStack[E].constructor.name,"begin_filter_"+E,"finish_filter_"+E),performance.measure("postprocess_"+E,"begin_postprocess_"+E,"finish_postprocess_"+E);performance.getEntriesByType("measure").forEach(function(e){e.duration>50&&console.log(e.name+": "+e.duration+"ms")}),performance.clearMarks(),performance.clearMeasures()}return e.abrupt("return",c.a.resolve(i));case 37:case"end":return e.stop()}},e,this)}));return function(t,n,i,r,o,a){return e.apply(this,arguments)}}()},{key:"_applyFeatheredMasking",value:function(e,t,n,i,r){var o=this._gl;o.activeTexture(o.TEXTURE0+1),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var a=i.getFrame().getSize().asArray(!0);this._featheredMaskFilter.setTargetTextureSize(a),this._featheredMaskFilter.setTargetLogicalSize(r),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"x"),this._featheredMaskFilter.setLogicalSizeForInputWithName(r,"x"),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"y"),this._featheredMaskFilter.setLogicalSizeForInputWithName(r,"y");var s=this._featheredMaskFilter.getShaderIdentifier(),u=this._shaderCache.get(s);o.useProgram(u.getProgram()),this._featheredMaskFilter._applyWebGL(e,t,i,!0,u)}},{key:"_copyTextureContents",value:function(e,t,n,i){var r=this._gl;e.activate(),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.copyTexSubImage2D(r.TEXTURE_2D,0,i.x,i.y,n.x,n.y,n.width,n.height)}},{key:"_bindIntermediateReadDependencies",value:function(e,t,n){var i=this,r=this._gl,o=n;t.forEach(function(t){var n=i._intermediateResults[t.data];r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,n.target.getTexture()),e.setTextureSizeForInputWithName(n.textureSize,t.name),e.setLogicalSizeForInputWithName(n.logicalSize,t.name),n.pendingReads--,o++})}},{key:"_configureVertexAttributesForShader",value:function(e){var t=this._gl,n=this._quad.getVertexBuffer(),i=this._quad.getIndexBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i);var r=e.getAttributeLocations();t.vertexAttribPointer(r.a_position,2,t.FLOAT,!1,0,0),t.vertexAttribPointer(r.a_texCoord,2,t.FLOAT,!1,0,32),t.vertexAttribPointer(r.a_color,4,t.FLOAT,!1,0,64)}},{key:"_storeIntermediateResultsIfNeeded",value:function(e,t,n,i){var r=t-1;return r>=0&&this._intermediateWriteDependencies[r].length>0&&(this._intermediateResults[r]={target:e,pendingReads:this._intermediateWriteDependencies[r].length,textureSize:i,logicalSize:n},!0)}},{key:"getInitialInputLogicalShape",value:function(){return this._filterStack[0].outputLogicalShape()}},{key:"getLastFilterLogicalShape",value:function(){return this.getLogicalShapeAtIndex(this._filterStack.length-1)}},{key:"getFilterCount",value:function(){return this._filterStack.length}},{key:"getLastIndex",value:function(){return this._filterStack.length-1}},{key:"getLogicalShapeAtIndex",value:function(e){return this._filterStack[e].outputLogicalShape()}},{key:"getDebugDescription",value:function(){var e=this,t="",n=0,i=0;return this._filterStack.forEach(function(r,o){var a=r.constructor.name,s=r._options.inputs.map(function(e){return e.name+": ["+e.logicalShape+"]"}).join(", "),u="Out: ["+r.outputLogicalShape()+"]",l="["+e._supplementaryTextures[o].map(function(e){return e.loadedTexture.getGLUnit()+": "+e.loadedTexture.id}).join(", ")+"]",c="R: ["+e._intermediateReadDependencies[o].map(function(e){return e.data}).join(", ")+"] | W: ["+e._intermediateWriteDependencies[o].join(", ")+"]";t+="["+o+"] - "+a+" | "+s+" | "+u+" | "+l+" | "+c+"\n",n+=e._intermediateReadDependencies[o].length,i+=e._supplementaryTextures[o].length}),t+="Max intermediate texture size: "+this._maxRequiredTextureDimensions+"\n",t+="Required render targets: "+(n+2)+"\n",t+="Required weight textures: "+i}},{key:"_setupRGBAUnpackFilter",value:function(){var e=this._inputTileDimensions,t=[e.y,e.x],n=new _.a({inputs:[{name:"x",logicalShape:t,type:d.a.PREVIOUS}]});this.addFilter(n,!1)}},{key:"_removeLastFilter",value:function(){this._filterStack.pop(),this._supplementaryTextures.pop(),this._intermediateReadDependencies.pop(),this._intermediateWriteDependencies.pop()}},{key:"_calculateMaximumIntermediateTextureDimensions",value:function(){var e=new p.Vector2(this._inputTileDimensions.x,this._inputTileDimensions.y);return this._filterStack.forEach(function(t){var n=g.a.getTextureDimensionsForLogicalShape(t.outputLogicalShape());n[1]>e.x&&(e.x=n[1]),n[0]>e.y&&(e.y=n[0])}),e}}]),e}();t.a=C},function(e,t,n){n(108),n(50),n(62),n(446),n(452),n(455),n(457),e.exports=n(10).Map},function(e,t,n){"use strict";var i=n(447),r=n(182);e.exports=n(448)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(22).f,r=n(81),o=n(113),a=n(29),s=n(109),u=n(63),l=n(103),c=n(142),f=n(150),h=n(19),p=n(105).fastKey,d=n(182),_=h?"_s":"size",g=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var c=e(function(e,i){s(e,c,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=i&&u(i,n,e[l],e)});return o(c.prototype,{clear:function(){for(var e=d(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var n=d(this,t),i=g(n,e);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[_]--}return!!i},forEach:function(e){d(this,t);for(var n,i=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(d(this,t),e)}}),h&&i(c.prototype,"size",{get:function(){return d(this,t)[_]}}),c},def:function(e,t,n){var i,r,o=g(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[_]++,"F"!==r&&(e._i[r]=o)),e},getEntry:g,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=d(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var i=n(16),r=n(14),o=n(105),a=n(40),s=n(33),u=n(113),l=n(63),c=n(109),f=n(23),h=n(61),p=n(22).f,d=n(449)(0),_=n(19);e.exports=function(e,t,n,g,y,v){var m=i[e],b=m,w=y?"set":"add",x=b&&b.prototype,k={};return _&&"function"==typeof b&&(v||x.forEach&&!a(function(){(new b).entries().next()}))?(b=t(function(t,n){c(t,b,e,"_c"),t._c=new m,void 0!=n&&l(n,y,t[w],t)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!v||"clear"!=e)&&s(b.prototype,e,function(n,i){if(c(this,b,e),!t&&v&&!f(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,i);return t?this:r})}),v||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(t,e,y,w),u(b.prototype,n),o.NEED=!0),h(b,e),k[e]=b,r(r.G+r.W+r.F,k),v||g.setStrong(b,e,y),b}},function(e,t,n){var i=n(29),r=n(96),o=n(42),a=n(82),s=n(450);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,f=6==e,h=5==e||f,p=t||s;return function(t,s,d){for(var _,g,y=o(t),v=r(y),m=i(s,d,3),b=a(v.length),w=0,x=n?p(t,b):u?p(t,0):void 0;b>w;w++)if((h||w in v)&&(g=m(_=v[w],w,y),e))if(n)x[w]=g;else if(g)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:x.push(_)}else if(c)return!1;return f?-1:l||c?c:x}}},function(e,t,n){var i=n(451);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(23),r=n(143),o=n(17)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var i=n(14);i(i.P+i.R,"Map",{toJSON:n(453)("Map")})},function(e,t,n){var i=n(84),r=n(454);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){var i=n(63);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){n(456)("Map")},function(e,t,n){"use strict";var i=n(14);e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(458)("Map")},function(e,t,n){"use strict";var i=n(14),r=n(56),o=n(29),a=n(63);e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,s,u=arguments[1];return r(this),(t=void 0!==u)&&r(u),void 0==e?new this:(n=[],t?(i=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,i++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t){e.exports="varying vec2 v_texCoord;\n\n// Added to the calculated (x,y) texture coordinates, to actually sample the 'center' of a pixel\nconst vec2 halfCR = vec2(0.5, 0.5);\n\n// A uniform holding the dimensions (height/rows, width/cols) of the texture we're rendering to\nuniform vec2 output_texRC;\n\n// A uniform holding the virtual output dimensions when rendering to larger textures. This allows\n// making use of the viewport and only two very large textures to perform all tensor rendering.\nuniform vec2 output_sizeRC;\n\nbool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n}\n\nbool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n}\n\nfloat getNaN(vec4 values) {\n    return dot(vec4(1), values);\n}\n\nint round(float value) {\n    return int(floor(value + 0.5));\n}\n\nint imod(int x, int y) {\n    return x - y * (x / y);\n}\n\n//Based on the work of Dave Hoskins\n//https://www.shadertoy.com/view/4djSRW\n#define HASHSCALE1 443.8975\nfloat random(float seed){\n    vec2 p = v_texCoord * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec2 UVfrom1D(vec2 texNumRC, vec2 sizeRC, int index) {\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom2D(vec2 texNumRC, vec2 sizeRC, int numC, int row, int col) {\n  // Calculate x & y in logical size\n  int index = row * numC + col;\n  int logR = index / int(sizeRC.y);\n  int logC = index - logR * int(sizeRC.y);\n\n  // Return relative positions of row & col in texture size\n  return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom4D(vec2 texNumRC, vec2 sizeRC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nfloat sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n}\n"},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(0),r=n.n(i),o=n(11),a=n.n(o),s=n(131),u=n.n(s),l=n(4),c=(n.n(l),n(38)),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetTextureFormatMap=new u.a,this._floatTargetPool=[],this._intTargetPool=[],this._renderer=t,this._internalFloatType=n.renderTextureType,this._internalFloatTextureFormat=n.renderTextureFormat}return f(e,[{key:"prebuildRenderTargets",value:function(e,t,n){for(var i=this,r=[],o=0;o<e;o++)r.push(new a.a(function(e){var r=i._createRenderTarget(t,n),o=i._uniqueIDForTarget(r);i._targetTextureFormatMap.set(o,n),i.pushRenderTarget(r),e()}));return a.a.all(r)}},{key:"pushRenderTarget",value:function(e){var t=this._uniqueIDForTarget(e),n=this._targetTextureFormatMap.get(t);if(n)switch(n){case p.FLOAT:this._floatTargetPool.push(e);break;case p.INT:this._intTargetPool.push(e)}}},{key:"popRenderTarget",value:function(e,t){var n=null;t===p.FLOAT?n=this._extractTargetFromPool(this._floatTargetPool,e):t===p.INT&&(n=this._extractTargetFromPool(this._intTargetPool,e)),n||(n=this._createRenderTarget(e,t));var i=this._uniqueIDForTarget(n);return this._targetTextureFormatMap.set(i,t),n}},{key:"getFormatOfRenderTarget",value:function(e){return null===e?null:this._targetTextureFormatMap.get(e._baseTexture.id)}},{key:"dispose",value:function(){this._targetTextureFormatMap.clear(),this._floatTargetPool.forEach(function(e){e.dispose()}),this._floatTargetPool=null,this._intTargetPool.forEach(function(e){e.dispose()}),this._intTargetPool=null}},{key:"_uniqueIDForTarget",value:function(e){return null===e?null:null!==e.getBaseTexture()?e.getBaseTexture().id:null}},{key:"_extractTargetFromPool",value:function(e,t){var n=e.filter(function(e){var n=e.getFrame().getSize();return n.x===t.x&&n.y&&t.y}).shift();if(n){var i=e.indexOf(n);e.splice(i,1)}return n}},{key:"_createRenderTarget",value:function(e,t){var n=new l.Engine.WebGLRenderTarget(this._renderer,e.x,e.y,1);n.getBaseTexture().setMinFilter(l.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMagFilter(l.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMipMappingEnabled(!1),n.setFrame(new c.Rectangle(0,0,e.x,e.y));var i=this._renderer.getContext();i.bindTexture(i.TEXTURE_2D,n.getBaseTexture().getGLTextureForRenderer(this._renderer));var r=t===p.FLOAT?this._internalFloatType:i.UNSIGNED_BYTE,o=t===p.FLOAT?this._internalFloatTextureFormat:i.RGBA;return i.texImage2D(i.TEXTURE_2D,0,o,e.x,e.y,0,o,r,null),n}}]),e}(),p={FLOAT:"float",INT:"int"};t.b=h},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(11),a=n.n(o),s=n(131),u=n.n(s),l=n(13),c=n(55),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._filterInputToTextureMap=new u.a,this._renderer=t;var i=this._renderer.getContext();this._internalFloatType=n.weightTextureType,this._internalFloatTextureFormat=n.weightTextureFormat,this._numChannels=n.weightTextureFormat===i.RGBA?4:1,this._internalFloatType!==i.FLOAT&&this._prepareFloatConversionTables()}return f(e,[{key:"createAndLoadTexturesForFilter",value:function(e,t){var n=this;return new a.a(function(i){e.getInputs().forEach(function(i,r){if(i.type===l.a.DATA){var o=i.data,a=i.logicalShape,s=n._createTexture(),u=n._uploadDataToTexture(s,o,a,n._numChannels),c=t+"_"+i.name;n._filterInputToTextureMap.set(c,u),n._renderer.getContext().flush(),e.getInputs()[r].data=null}}),i()})}},{key:"bindTexturesForFilter",value:function(e,t,n){var i=this,r=this._renderer.getContext(),o=0;return e.getInputs().forEach(function(a,s){if(a.type===l.a.DATA){var u=i._filterInputToTextureMap.get(t+"_"+a.name),c=u.texture,f=u.size;if(!c)throw new Error("Missing texture for filter "+s+".");r.activeTexture(r.TEXTURE0+n+o),r.bindTexture(r.TEXTURE_2D,c),e.setTextureSizeForInputWithName(f,a.name),e.setLogicalSizeForInputWithName(f,a.name),o++}}),o}},{key:"updateTexturesForFilter",value:function(e,t){var n=this;e.getInputs().forEach(function(e){if(e.type===l.a.DATA&&null!==e.data){var i=n._filterInputToTextureMap.get(t+"_"+e.name).texture;n._uploadDataToTexture(i,e.data,e.logicalShape,n._numChannels)}},this)}},{key:"dispose",value:function(){var e=this._renderer.getContext();this._filterInputToTextureMap.forEach(function(t){"undefined"!==t&&e.deleteTexture(t.texture)}),this._filterInputToTextureMap.clear()}},{key:"_createTexture",value:function(){var e=this._renderer.getContext(),t=e.createTexture();return e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}},{key:"_uploadDataToTexture",value:function(e,t,n,i){var r=c.a.getTextureDimensionsForLogicalShape(n),o=c.a.getSizeOfLogicalShape(n);if(t.length!==o)throw new Error("Not enough or too many values ("+t.length+") for shape "+n+".");var a=this._renderer.getContext(),s=this._internalFloatType!==a.FLOAT,u=this._createArrayBufferForUpload(t,r,i,s);return a.bindTexture(a.TEXTURE_2D,e),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),1===i&&a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,this._internalFloatTextureFormat,r[1],r[0],0,this._internalFloatTextureFormat,this._internalFloatType,u),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.pixelStorei(a.UNPACK_ALIGNMENT,4),{texture:e,size:r}}},{key:"_createArrayBufferForUpload",value:function(e,t,n,i){if(1===n&&!1===i)return e;for(var r=t[0]*t[1]*n,o=i?new Uint16Array(r):new Float32Array(r),a=4===n,s=0,u=0;u<e.length;u++)o[s]=i?this._toHalfFloat(e[u]):e[u],a&&(o[s+3]=1),s+=n;return o}},{key:"_prepareFloatConversionTables",value:function(){var e=new ArrayBuffer(4);this._floatView=new Float32Array(e),this._uint32View=new Uint32Array(e);for(var t=new Uint32Array(512),n=new Uint32Array(512),i=0;i<256;++i){var r=i-127;r<-27?(t[0|i]=0,t[256|i]=32768,n[0|i]=24,n[256|i]=24):r<-14?(t[0|i]=1024>>-r-14,t[256|i]=1024>>-r-14|32768,n[0|i]=-r-1,n[256|i]=-r-1):r<=15?(t[0|i]=r+15<<10,t[256|i]=r+15<<10|32768,n[0|i]=13,n[256|i]=13):r<128?(t[0|i]=31744,t[256|i]=64512,n[0|i]=24,n[256|i]=24):(t[0|i]=31744,t[256|i]=64512,n[0|i]=13,n[256|i]=13)}this._baseTable=t,this._shiftTable=n}},{key:"_toHalfFloat",value:function(e){this._floatView[0]=e;var t=this._uint32View[0],n=t>>23&511;return this._baseTable[n]+((8388607&t)>>this._shiftTable[n])}}]),e}();t.a=h},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(4),a=(n.n(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),s=o.Math.Vector2,u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedTileIndices=[],this._unrenderedTileIndices=[],this._originalInputDimensions=t,this._tilingConfiguration=this._calculateTilingConfiguration(t,n,i),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._maskCache={}}return a(e,[{key:"_generateRandomTileIndices",value:function(e){for(var t=this,n=e.totalTileCount,i=function(){return Math.floor(Math.random()*t._tilingConfiguration.totalTileCount)},r=[];r.length<n;){for(var o=i();r.indexOf(o)>-1;)o=i();r.push(o)}return r}},{key:"_generateSpiralingTileIndices",value:function(e){var t=e.numHorizontalTiles,n=e.numVerticalTiles;return this._generateSpiralingIndicies(t,n)}},{key:"_generateSpiralingIndicies",value:function(e,t){for(var n=[],i=0,r=0,o=[0,-1],a=e%2==0,s=t%2==0,u=Math.floor(e/2)-a,l=Math.floor(t/2)-s,c=Math.pow(Math.max(e,t),2);c>0;c--)-e/2<i&&i<=e/2&&-t/2<r&&r<=t/2&&n.push((l+r)*e+(u+i)),(i===r||i<0&&i===-r||i>0&&i===1-r)&&(o=[-o[1],o[0]]),i+=o[0],r+=o[1];return n.reverse()}},{key:"calculateMaximumTileDimensions",value:function(){for(var e=this._tilingConfiguration.totalTileCount,t=new s(0,0),n=0;n<e;n++){var i=this.getOriginalInputCoordinatesForTileAtIndex(n).getSize();t.x=Math.max(i.x,t.x),t.y=Math.max(i.y,t.y)}return t}},{key:"reset",value:function(){var e=this._tilingConfiguration,t=e.tileEdgeLength,n=e.overlappingFactor;this._tilingConfiguration=this._calculateTilingConfiguration(this._originalInputDimensions,t,n),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._renderedTileIndices=[],this._nextTileIndex=null}},{key:"getOriginalInputDimensions",value:function(){return this._originalInputDimensions}},{key:"getNextTileIndex",value:function(){return this.hasRenderedAllTiles()?-1:(this._nextTileIndex||(this._nextTileIndex=this._unrenderedTileIndices.pop()),this._nextTileIndex)}},{key:"getTilingConfiguration",value:function(){return this._tilingConfiguration}},{key:"getRenderedTileCount",value:function(){return this._renderedTileIndices.length}},{key:"getRenderingProgress",value:function(){return this.getRenderedTileCount()/this._tilingConfiguration.totalTileCount}},{key:"getTileCoordinates",value:function(e){return{rowIndex:Math.floor(e/this._tilingConfiguration.numHorizontalTiles),columnIndex:Math.floor(e%this._tilingConfiguration.numHorizontalTiles)}}},{key:"getOriginalInputCoordinatesForTileAtIndex",value:function(e){var t=this._tilingConfiguration,n=t.tileEdgeLength,i=t.overlappingFactor,r=t.fittedInputDimensions,a=t.numHorizontalTiles,s=t.numVerticalTiles,u=this.getTileCoordinates(e),l=u.rowIndex,c=u.columnIndex,f=Math.ceil(l*(n*(1-i))),h=Math.ceil(c*(n*(1-i))),p=this._originalInputDimensions.x/r.x,d=this._originalInputDimensions.y/r.y,_=Math.ceil(f*d),g=Math.ceil(h*p),y=Math.ceil(n*d),v=Math.ceil(n*p);return l===s-1&&_+y<this._originalInputDimensions.y&&(_+=this._originalInputDimensions.y-(_+y)),c===a-1&&g+v<this._originalInputDimensions.x&&(g+=this._originalInputDimensions.x-(g+v)),new o.Math.Rectangle(g,_,v,y)}},{key:"hasRenderedAllTiles",value:function(){return!(!this._tilingConfiguration||!this._renderedTileIndices)&&this._tilingConfiguration.totalTileCount-this._renderedTileIndices.length==0}},{key:"markTileAsRendered",value:function(){null!==this._nextTileIndex&&(!this._renderedTileIndices.indexOf(this._nextTileIndex)>-1&&this._renderedTileIndices.push(this._nextTileIndex),this._nextTileIndex=null)}},{key:"_calculateTilingConfiguration",value:function(e,t,n){var i=Math.ceil((1-n)*t),r=Math.ceil((e.x-t)/i)*i,a=t+r,s=Math.ceil((e.y-t)/i)*i,u=t+s,l=new o.Math.Vector2(a,u),c=Math.max(1,1+Math.round(s/i)),f=Math.max(1,1+Math.round(r/i));return{tileEdgeLength:t,overlappingFactor:n,fittedInputDimensions:l,numVerticalTiles:c,numHorizontalTiles:f,totalTileCount:c*f}}},{key:"getBlendLeftTopRightBottomForTile",value:function(e){var t=this.getTileCoordinates(e),n=t.rowIndex,i=t.columnIndex,r=this._tilingConfiguration,o=r.numVerticalTiles,a=r.numHorizontalTiles;return[0!==i?1:0,0!==n?1:0,i!==a-1?1:0,n!==o-1?1:0]}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(186),r=n(189),o=n(188),a=n(194),s=n(464),u=n(184),l=n(187),c=n(192),f=n(132),h=n(190),p=n(465),d=n(193),_=n(195),g=n(13),y=n(183),v=n(191),m={AddFilter:i.a,Conv2DDepthwiseFilter:r.a,Conv2DFilter:o.a,EdgePadFilter:a.a,EncodeFloatFilter:s.a,FeatheredMaskingFilter:u.a,FinalizeStyleFilter:l.a,InstanceNormReluFilter:c.a,PackRGBAFilter:f.a,ReduceSumFilter:h.a,ReflectionPadFilter:p.a,ResizeBilinearFilter:d.a,SharpenFilter:_.a,TensorFilter:g.b,UnpackRGBAFilter:y.a,VariancePreparationFilter:v.a};t.a=m},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(13),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.b),h(t,[{key:"_calculateOutputShape",value:function(){return this._options.inputs[0].logicalShape}},{key:"_getTensorOperationSource",value:function(){var e="\nconst float FLOAT_MAX = 1.70141184e38;\nconst float FLOAT_MIN = 1.17549435e-38;\n\nlowp vec4 encode_float(highp float v) {\n  if (isNaN(v)) {\n    return vec4(255, 255, 255, 255);\n  }\n\n  highp float av = abs(v);\n\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  highp float e = floor(log2(av));\n  highp float m = exp2(fract(log2(av))) - 1.0;\n\n  c[2] = floor(128.0 * m);\n  m -= c[2] / 128.0;\n  c[1] = floor(32768.0 * m);\n  m -= c[1] / 32768.0;\n  c[0] = floor(8388608.0 * m);\n\n  highp float ebias = e + 127.0;\n  c[3] = floor(ebias / 2.0);\n  ebias -= c[3] * 2.0;\n  c[2] += floor(ebias) * 128.0;\n\n  c[3] += 128.0 * step(0.0, -v);\n\n  return c / 255.0;\n}\n    ";return 4===this._options.inputs[0].logicalShape.length?e+="\nvoid main ()\n{\n  ivec4 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n  gl_FragColor = encode_float(xVal);\n}\n    ":e+="\nvoid main ()\n{\n  ivec2 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y);\n  gl_FragColor = encode_float(xVal);\n}\n    ",e}}]),t}();t.a=p},function(e,t,n){"use strict";var i=n(6),r=n.n(i),o=n(0),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(13),d=n(4),_=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.b),_(t,[{key:"_calculateOutputShape",value:function(){var e=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var t=this.getInputs()[0].logicalShape;if(e.length!==t.length)throw new Error("Not enough or too many paddings for input shape "+t);return e.map(function(e,n){return e[0]+t[n]+e[1]})}},{key:"_getTensorOperationSource",value:function(){var e=this.getInputs()[0].logicalShape.length,t=this._options.paddings.map(function(e){return e[0]}).join(","),n=this._options.paddings.map(function(e){return e[1]}).join(","),i="\n      int reflectedIndexInInputForPadBefore(int coord, int start) {\n        return int(abs(float(start - coord)));\n      }\n\n      int reflectedIndexInInputForPadAfter(int coord, int start,\n        int length, int afterPad) {\n        int indexInPad = coord - start - length;\n        int index = length - indexInPad - 2;\n        return index;\n      }\n    ",r="\n      ivec2 get2DCoordinates(\n        ivec2 outC,\n        ivec2 coords,\n        ivec2 start,\n        ivec2 end,\n        ivec2 afterPad,\n        int height,\n        int width) {\n\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          // Select non-padding rows\n          if (outC.x >= start.x && outC.x < start.x + height) {\n            // Select before pad columns\n            if (outC.y < start.y) {\n              int yIndex =\n                reflectedIndexInInputForPadBefore(outC.y, start.y);\n              return ivec2(coords.x, yIndex);\n            // Select after pad columns\n            } else if (outC.y >= start.y + width) {\n              int yIndex =\n                reflectedIndexInInputForPadAfter(outC.y, start.y,\n                  width, afterPad.y);\n              return ivec2(coords.x, yIndex);\n            }\n\n          // Select top and bottom rows, but only non-padding columns\n          } else if (outC.y >= start.y && outC.y < start.y + height) {\n            // Select top padding rows\n            if (outC.x < start.x) {\n              int xIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              return ivec2(xIndex, coords.y);\n            // Select bottom padding rows\n            } else {\n              int xIndex =\n                reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                  afterPad.x);\n              return ivec2(xIndex, coords.y);\n            }\n\n          // Handle diagonal corner cases\n          } else if (outC.x < start.x && outC.y < end.y) { // Top Left\n            ivec2 index = outC - start;\n            vec2 absIndex = vec2(abs(float(index.x)), abs(float(index.y)));\n            return ivec2(int(absIndex.x), int(absIndex.y));\n          } else if (outC.x < start.x && outC.y >= end.y) { // Top Right\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            int targetRow =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y < end.y) { // Bottom Left\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadBefore(outC.y, start.y);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y >= end.y) { // Bottom Right\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            return ivec2(targetRow, targetCol);\n          }\n        } else {\n          return coords;\n        }\n      }\n    ";return 1===e?"\n        int start = "+t+";\n        int end = start + x_shape;\n        int width = x_shape[0];\n        int afterPad = "+n+";\n\n        "+i+"\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            int index = reflectedIndexInInputForPadBefore(outC, start);\n            setOutput(getX(index));\n          } else if (outC >= end) {\n            int index =\n            reflectedIndexInInputForPadAfter(outC, start, width, afterPad);\n            setOutput(getX(index));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ":2===e?"\n        ivec2 start = ivec2("+t+");\n        ivec2 end = start + x_shape;\n        ivec2 afterPad = ivec2("+n+");\n        int height = x_shape[0];\n        int width = x_shape[1];\n\n        "+i+"\n        "+r+"\n\n        void main() {\n          ivec2 outC = getOutputCoords();\n          ivec2 coords = outC - start;\n          ivec2 coordsInSrcVec = get2DCoordinates(\n            outC,\n            coords,\n            start,\n            end,\n            afterPad,\n            height,\n            width\n          );\n          setOutput(getX(coordsInSrcVec.x, coordsInSrcVec.y));\n        }\n      ":4===e?"\n        ivec4 start = ivec4("+t+");\n        ivec4 end = start + x_shape;\n        ivec4 afterPad = ivec4("+n+");\n        int length = x_shape[0];\n\n        "+i+"\n        "+r+"\n        \n      ivec3 get3DCoordinates(\n        ivec3 outC,\n        ivec3 coords,\n        ivec3 start,\n        ivec3 end,\n        ivec3 afterPad,\n        int length,\n        int height,\n        int width) {\n        if (any(lessThan(outC, start))\n          || any(greaterThanEqual(outC, end))) {\n\n          // Calculate the current positions inner indices in the original\n          // input tensor\n          ivec2 innerIndices = get2DCoordinates(\n            ivec2(outC.y, outC.z),\n            ivec2(coords.y, coords.z),\n            ivec2(start.y, start.z),\n            ivec2(end.y, end.z),\n            ivec2(afterPad.y, afterPad.z),\n            height,\n            width\n          );\n\n          if (outC.x < start.x) {\n            int outerIndex =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else if (outC.x >= end.x) {\n            int outerIndex = reflectedIndexInInputForPadAfter(\n              outC.x, start.x, length, afterPad.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else {\n            return ivec3(coords.x, innerIndices.x, innerIndices.y);\n          }\n        } else {\n          return coords;\n        }\n      }\n    \n\n        void main() {\n          ivec4 outC = getOutputCoords();\n          ivec4 coords = outC - start; // Coords in input\n\n          if (any(lessThan(outC, start))\n              || any(greaterThanEqual(outC, end))) {\n\n            ivec3 innerIndices = get3DCoordinates(\n              ivec3(outC.y, outC.z, outC.w),\n              ivec3(coords.y, coords.z, coords.w),\n              ivec3(start.y, start.z, start.w),\n              ivec3(end.y, end.z, end.w),\n              ivec3(afterPad.y, afterPad.z, afterPad.w),\n              x_shape[1],\n              x_shape[2],\n              x_shape[3]\n            );\n\n            if (outC.x < start.x) {\n              int outerIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              setOutput(getX(\n                  outerIndex,\n                  innerIndices.x,\n                  innerIndices.y,\n                  innerIndices.z\n                ));\n            } else if (outC.x >= end.x) {\n              int outerIndex = reflectedIndexInInputForPadAfter(\n                outC.x, start.x, length, afterPad.x);\n              setOutput(getX(\n                outerIndex,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z\n              ));\n            } else {\n              setOutput(getX(\n                coords.x,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z));\n            }\n          } else {\n            setOutput(getX(coords.x, coords.y, coords.z, coords.w));\n          }\n        }\n      ":void 0}}]),t}();g.prototype.availableOptions=r()({paddings:{type:d.OptionType.ARRAY,required:!0}},p.b.prototype.availableOptions),t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=f.Math.Vector2,_=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._flipContainer=new f.Engine.Container,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Operation),p(t,[{key:"_render",value:function(e){var t=this._options,n=t.position,i=t.rotation,r=t.scale,o=t.pivot,a=t.outputResolution,s=this._sdk.getTextureScale(),u=a.clone().multiply(s).ceil();return this._renderTexture.resizeTo(u),this._sprite.setRotation(i),this._sprite.setPosition(n),this._sprite.setPivot(o),this._sprite.setScale(r),this._renderTexture.render(this._container),f.Promise.resolve()}},{key:"getNewDimensions",value:function(e){var t=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(t).ceil()}}]),t}();_.identifier="output",_.prototype.availableOptions={position:{type:f.OptionType.VECTOR2,default:new d(0,0)},rotation:{type:f.OptionType.NUMBER,default:0},scale:{type:f.OptionType.VECTOR2,default:new d(1,1)},pivot:{type:f.OptionType.VECTOR2,default:new d(0,0)},outputResolution:{type:f.OptionType.VECTOR2,default:new d(100,100)}},h.a.Operations.OutputOperation=_,t.a=_},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(4),h=n.n(f),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();f.Math.Vector2;var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i)));return o._flipContainer=new f.Engine.Container,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Operation),p(t,[{key:"_render",value:function(e){var t=this._options,n=(t.outputResolution,t.flipHorizontally),i=t.flipVertically;if(n||i){var r=e.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(r):(this._flipRenderTexture=new f.Engine.RenderTexture(this._sdk.getRenderer(),r.x,r.y),this._flipSprite=new f.Engine.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));var o=n?-1:1,a=i?-1:1;this._flipSprite.setScale(o,a),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(r.x*(1-o)*.5,r.y*(1-a)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return f.Promise.resolve()}}]),t}();d.identifier="flip",d.prototype.availableOptions={flipHorizontally:{type:f.OptionType.BOOLEAN,default:!1},flipVertically:{type:f.OptionType.BOOLEAN,default:!1}},h.a.Operations.FlipOperation=d,t.a=d},function(e,t,n){"use strict";var i=n(35),r=n.n(i),o=n(469),a=(n(89),[]);void 0!==r.a.Operations.SpriteOperation&&a.push(r.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),t.a={EVENTS:{EXPORT:"export",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed"},DEFAULTS:{TRANSFORM_RATIO_CATEGORIES:[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",ratio:1},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:new r.a.Math.Vector2(1200,627)},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:new r.a.Math.Vector2(940,788)},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:new r.a.Math.Vector2(851,315)}]}],FONTS:[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.otf",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.ttf",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.otf",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.otf",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.ttf",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.otf",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.otf",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.otf",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.otf",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.otf",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich Black",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.otf",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Ostrich Bold",variations:[{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.otf",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton Black",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.otf",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}}]},{fontFamily:"Panton Light",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.otf",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.otf",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.ttf",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}],BRUSHES:a,TEXT_DESIGN_FONTS:o.a}}},function(e,t,n){"use strict";t.a=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Panton Caps",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:"lighter",fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_italic_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_italic_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_light_caps",fontWeight:"lighter",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_caps",fontWeight:800,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Summer Font",variations:[{identifier:"imgly_font_summer_font_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_summer_font_light.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]}]},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(9),h=n(471),p=n(48),d=n(475),_=n(476),g=n(196),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).call(this));return o._ui=e,o._options=n,o._mediator=i,o._shallow=r,o._initFonts(),r||(o._initSDK(),o.operations=new _.a(o,o._sdk,o._mediator),o._initSerializers()),o._dynamicAssetsLibrary=new g.a,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.d),y(t,[{key:"_initFonts",value:function(){var e=f.k.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new p.a(this._ui,e);var t=this._fontManager.getFonts(),n=this._ui.getFontLoader();n.setFonts(t),n.load()}},{key:"setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.reset();var t;t=this._sdk.parseExif(e),this._setImage(e,t),this._initWatermark()}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){var e=this._options,t=e.logLevel,n=e.displayWelcomeMessage,i=e.debug,r=e.license,o=e.crossOrigin,a=this._options.editor,s=a.smoothDownscaling,u=a.smoothUpscaling,l=a.preferredRenderer,c=a.pixelRatio,h=a.transparent,p=a.clearColor,d=void 0;Array.isArray(p)?d=f.b.fromArray(p):"string"==typeof p?d=f.b.fromHex(p):p instanceof f.b&&(d=p.clone());var _={logLevel:t,debug:i,displayWelcomeMessage:n,pixelRatio:c,smoothDownscaling:s,smoothUpscaling:u,transparent:h,crossOrigin:o,clearColor:d,license:r};this._sdk=new f.j(l,_)}},{key:"getMaxMegapixels",value:function(){return this._options.editor.maxMegaPixels}},{key:"getCrossOrigin",value:function(){return f.k.getCrossOriginValue(this._options.crossOrigin||"anonymous")}},{key:"getOutputDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(e)}},{key:"getOutputTextureDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(e)}},{key:"getFinalDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(e)}},{key:"_setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=e,this._sdk.setImage(e,t)}},{key:"_ensureImageIsResized",value:function(){var e=this,t=this._sdk.getImage(),n=this._sdk.getRenderer(),i=this.getMaxMegapixels(),r=i?1e6*i:null,o=n.getMaxDimensions(),a=new d.a(t,r,o);return!this._resizedImage&&a.needsResize()?a.resize().then(function(t){var n=t.canvas;return t.dimensions,t.reason,e._resizedImage=n,e._sdk.setImage(n),n}):f.h.resolve(t)}},{key:"export",value:function(){var e=this;return arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then(function(t){var n=e._options.editor.export;return new h.a(e._sdk,n,!1).export().then(function(t){return e.emit("export",t),e._mediator.emit(f.c.EVENTS.EXPORT,t,e),e._watermarkOperation&&(e._watermarkOperation.setEnabled(!0),e._sdk.render()),e._sdk.setAllOperationsToDirty(),t})})}},{key:"broadcastTransform",value:function(e,t){var n=this,i=new f.j.Operations.TransformOperation.TransformChange(e,t);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(e){var t=n.operations.get(e);t&&t.transform(i)})}},{key:"broadcastFlip",value:function(e){var t=this;["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach(function(n){var i=t.operations.get(n);i&&i.flip(e)})}},{key:"broadcastRotate",value:function(e){var t=this;["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach(function(n){var i=t.operations.get(n);i&&i.rotate(e)})}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":n(477).default,"1.0.1":n(482).default,"2.0.0":n(483).default,"3.0.0":n(487).default,"3.1.0":n(493).default,"3.2.0":n(494).default,"3.4.0":n(495).default,"3.5.0":n(497).default,"3.6.0":n(498).default,"3.7.0":n(499).default,"3.8.0":n(500).default}}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.8.0",n=this._serializers[t];return n?new n(this).serialize(e):f.h.reject(new Error("No serializer for version "+t+" found."))}},{key:"deserialize",value:function(e){var t=this._serializers[e.version];return t?new t(this).deserialize(e):f.h.reject(new Error("No serializer for version "+e.version+" found."))}},{key:"reset",value:function(){this._sdk.reset(),this.operations.reset()}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getImage",value:function(){return this._options.editor.image}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"getMediator",value:function(){return this._mediator}},{key:"getDynamicAssetsLibrary",value:function(){return this._dynamicAssetsLibrary}}]),t}();t.a=v},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(9),a=n(472),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sdk=t,this._options=n,this._download=i}return s(e,[{key:"export",value:function(){var e=this,t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then(function(n){return e._download&&e._downloadData(t,n),n})}},{key:"_downloadData",value:function(e,t){switch(e){case o.i.DATAURL:a.a.downloadDataURL(t,this._options.fileBasename);break;case o.i.MSBLOB:a.a.downloadMSBlob(t,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var e=this._options;return e.type===o.i.IMAGE&&this._download?o.m.supportsMSBlob()?o.i.MSBLOB:o.i.DATAURL:e.type}}]),e}();t.a=u},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"downloadDataURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(e),i=this.getExtensionFromDataURL(e),r=document.createElement("a");r.download=t+"."+i,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"downloadMSBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob&&navigator.msSaveBlob(e,t+".png")}},{key:"getExtensionFromDataURL",value:function(e){return e.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(e){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return e;for(var t=o.a.decode(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),a=0;a<t.length;a++)r[a]=t[a];var s=new window.Blob([i],{type:n});return window.URL.createObjectURL(s)}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(35);n.n(l);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.Configurable),t}();t.a=c,c.prototype.availableOptions={fontFamily:{type:l.OptionType.STRING,required:!0},variations:{type:l.OptionType.ARRAY,required:!0}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(1),c=n.n(l),f=n(35),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||c()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,f.Configurable),h(t,[{key:"getLabel",value:function(){var e=p[this._options.fontWeight];switch(this._options.fontStyle){case"italic":e+=" Italic"}return e}}]),t}();t.a=d,d.prototype.availableOptions={identifier:{type:f.OptionType.STRING,required:!0},fontFamily:{type:f.OptionType.STRING,required:!0},fontWeight:{type:f.OptionType.ALL,default:400},fontStyle:{type:f.OptionType.STRING,default:"normal"},textMetrics:{type:f.OptionType.OBJECT,default:null},provider:{type:f.OptionType.STRING,available:["google","file"]},filePath:{type:f.OptionType.STRING},default:{type:f.OptionType.BOOLEAN,default:!1},font:{type:f.OptionType.OBJECT}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=t,this._maxPixels=n,this._maxDimensions=i}return a(e,[{key:"needsResize",value:function(){var e=new o.n(this._image.width,this._image.height),t=e.x*e.y,n=null!==this._maxPixels&&t>this._maxPixels,i=null!==this._maxDimensions&&(e.x>this._maxDimensions||e.y>this._maxDimensions);return n||i}},{key:"resize",value:function(){var e=this,t=null,n=null,i=this._maxDimensions;return new o.h(function(r,a){setTimeout(function(){var a=new o.n(e._image.width,e._image.height).clone();if(null!==e._maxPixels&&a.x*a.y>e._maxPixels&&(a.copy(e._getDimensionsByMaxPixels()),t="maxMegaPixels"),null!==i&&(a.x>i||a.y>i)){var s=Math.min(i/a.x,i/a.y);a.multiply(s),t="maxDimensions"}a.floor(),n=e._createResizedImageCanvas(a),r({canvas:n,dimensions:a,reason:t})},1e3)})}},{key:"_createResizedImageCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this._image,i=o.k.createCanvas();i.width=e.x,i.height=e.y;var r=e.clone().subtract(t).divide(2);return i.getContext("2d").drawImage(n,0,0,n.width,n.height,r.x,r.y,t.x,t.y),i}},{key:"_getDimensionsByMaxPixels",value:function(){var e=this._image,t=this._maxPixels,n=e.width/e.height,i=e.height/e.width;return new o.n(Math.sqrt(t*n),Math.sqrt(t*i)).floor()}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(36),r=n.n(i),o=n(37),a=n.n(o),s=n(0),u=n.n(s),l=n(9),c="function"==typeof a.a&&"symbol"==typeof r.a?function(e){return typeof e}:function(e){return e&&"function"==typeof a.a&&e.constructor===a.a&&e!==a.a.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),u()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t,this._sdk=n,this._mediator=i,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}return f(e,[{key:"exists",value:function(e){return!!this._map[e]}},{key:"add",value:function(e){var t=this,n=e.constructor.identifier;e.on("update",function(){t._mediator.emit(l.c.EVENTS.OPERATION_UPDATED,e)});var i=this._preferredOrder.indexOf(n);if(-1===i)throw new Error("EditorOperations#add: `"+n+"` does not appear in `operationsOrder`");this._stack.set(i,e),this._map[n]=e,this._mediator.emit(l.c.EVENTS.OPERATION_CREATED,e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===(void 0===e?"undefined":c(e))?e.constructor.identifier:e,i=this._stack.getStack();e=this.get(n),delete this._map[n];var r=i.map(function(e){return e.constructor.identifier}).indexOf(n);if(-1!==r){this._stack.removeAt(r);for(var o=r+1;o<i.length;o++){var a=i[o];a&&a.setDirty(!0)}t&&this._mediator.emit(l.c.EVENTS.OPERATION_REMOVED,e)}}},{key:"get",value:function(e){return this._map[e]}},{key:"getOrCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[e]){var n=this._map[e];return n.set(t,!1),n}var i=new(0,this._available[e])(this._sdk,t);return this.add(i),i}},{key:"getStack",value:function(){return this._stack}},{key:"reset",value:function(){for(var e in this._map)this._map[e].dispose();this._map={}}},{key:"_fixStack",value:function(){var e=this,t=this._stack.getStack().slice();this._stack.clear(),t.forEach(function(t){e.add(t)})}}]),e}();t.a=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(197),a=n(198),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="1.0.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(11),a=n.n(o),s=n(9),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:s.j.Operations.FilterOperation.Filters.IdentityFilter},this._categories=s.m.wrapFiltersInCategories(s.l.DEFAULTS.FILTERS.slice(0),e.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=i||t.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=s.m.wrapFiltersInCategories(this._options.categories,e.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}return u(e,[{key:"instantiateFilterWithIdentifier",value:function(e){var t=this,n={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(e);if(!i)return a.a.reject(new Error("Unknown filter with identifier `"+e+"`!"));if(i.prototype instanceof s.j.Operations.FilterOperation.Filter)return a.a.resolve(new i);var r=i.lutImage,o=i.resolution,u=i.horizontalTileCount,l=i.verticalTileCount,c=i.lightColor,f=i.darkColor;if(c&&f)return c=s.b.fromHex(c),f=s.b.fromHex(f),a.a.resolve(new s.j.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:c,darkColor:f}));var h=void 0;return this._ui.getPreloader&&(h=this._ui.getPreloader().getAsset(r)),(h?a.a.resolve(h):s.f.loadImage(this._ui.getAssetPath(r),n)).then(function(){return s.f.loadImage(t._ui.getAssetPath(r),n).then(function(e){return new s.j.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:e,resolution:o,horizontalTileCount:u,verticalTileCount:l})})})}},{key:"_initCategories",value:function(){var t=this;if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=s.m.wrapFiltersInCategories(this._options.categories,e.CATEGORY_ITEMS_PROPERTY):this._categories=s.m.mergeCategories(this._categories,this._options.categories,e.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){var n=[];this._categories.forEach(function(e){var i=e.filters.filter(function(e){return-1!==t._options.availableFilters.indexOf(e.identifier)});i.length>0&&n.push({identifier:e.identifier,defaultName:e.defaultName,filters:i})}),this._categories=n}var i={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map(function(e){return e.filters}).reduce(function(e,t){return e.concat(t)})};this._categories.unshift(i),this._categoriesById.all=i,this._categories.forEach(function(e){t._categoriesById[e.identifier]=e}),i.filters.forEach(function(e){t._filtersByIdentifier[e.identifier]=e})}},{key:"getFiltersForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown filter category '"+e+"'");return this._categoriesById[e].filters}},{key:"getItemsByCategory",value:function(e){return this.getFiltersForCategory(e)}},{key:"getFilterByIdentifier",value:function(e){return this._filtersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesById[e]}}]),e}();l.CATEGORY_ITEMS_PROPERTY="filters",t.a=l},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(o.c.DEFAULTS.BRUSHES);var i=this._options,r=i.brushes,a=i.replaceBrushes,s=i.availableBrushes;this._options.brushes&&this._addBrushes(r,a),s&&(this._brushes=this._brushes.filter(function(e){return-1!==s.indexOf(e.identifier)}))}return a(e,[{key:"_addBrushes",value:function(e,t){var n=this;t&&(this._brushes=[],this._brushesById={}),e.forEach(function(e){n._brushes.push(e),n._brushesById[e.identifier]=e})}},{key:"getBrushByIdentifier",value:function(e){return this._brushesById[e]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(52),d=(n.n(p),n(481)),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,d.a),_(t,[{key:"load",value:function(){var e=this;return this._fonts.forEach(function(t){var n=e._ui.getAssetPath(t.getFilePath(),!1,!0);Object(p.registerFont)(n,{family:t.getFont().getFontFamily(),weight:t.getFontWeight(),style:t.getFontStyle()})}),function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"load",this).call(this)}}]),t}();t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(11),a=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._fonts=[]}return s(e,[{key:"add",value:function(e){this._fonts.push(e)}},{key:"load",value:function(){return a.a.resolve()}},{key:"dispose",value:function(){}}]),e}();t.a=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(199),a=n(200),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="1.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(201),a=n(202),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="2.0.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(o.l.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=t.getEditor().getSDK()._l.areCustomAssetsAllowed();var i=this._options,r=i.categories,a=i.replaceCategories;this._customAssetsAllowed&&this._options.categories?this._addCategories(r,a):this._updateAllCategory()}return a(e,[{key:"_addCategories",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?e.slice(0):o.m.mergeCategories(this._categories,e,"frames"),this._categoriesById={},this._categories.forEach(function(e){t._categoriesById[e.identifier]=e});var i=this._options.availableFrames;this._customAssetsAllowed&&i&&this._categories.forEach(function(e){e.frames=e.frames.filter(function(e){return-1!==i.indexOf(e.identifier)})}),this._categories.forEach(function(e){e.frames.forEach(function(e){t._framesById[e.identifier]=e})}),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(e){return e.frames}).reduce(function(e,t){return e.concat(t)},[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(e){if(!this._categoriesById[e])throw new Error("Unknown frame category '"+e+"'");return this._categoriesById[e].frames}},{key:"getFrameByIdentifier",value:function(e){return this._framesById[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(e){return this._categoriesById[e]}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(9),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._overlays=o.l.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};var r=t.getEditor().getSDK()._l.areCustomAssetsAllowed();r&&n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),r&&n.availableOverlays&&(this._overlays=this._overlays.filter(function(e){return-1!==n.availableOverlays.indexOf(e.identifier)})),this._overlays.forEach(function(e){i._overlaysByIdentifier[e.identifier]=e})}return a(e,[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(e){return this._overlaysByIdentifier[e]}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(3),u=n.n(s),l=n(11),c=n.n(l),f=n(1),h=n.n(f),p=n(9),d=n(71),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=p.j.OptionType,y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).call(this,n));return i._loaded=!1,i._loading=!1,i._ui=e,i._frame=p.j.Utils.deepClone(i._options),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=u()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.a?a()(e,t):e.__proto__=t)}(t,p.j.Configurable),_(t,[{key:"load",value:function(){var e=this;if(this._loaded)return c.a.resolve();if(this._loading)return c.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var t=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach(function(i){if(i in t){var r=t[i];["start","mid","end"].forEach(function(t){t in r&&n.push(e._loadPart(i,t))})}}),c.a.all(n).then(function(){e._loaded=!0,e._loading=!1}).catch(function(t){e._loaded=!1,e._loading=!1})}},{key:"_loadPart",value:function(e,t){var n=this,i=this._frame.imageGroups[e][t],r=i;return"string"!=typeof i&&"image"in i&&(r=i.image),d.a.load(this._ui.getAssetPath(r)).then(function(r){return"string"!=typeof i?n._frame.imageGroups[e][t].image=r:n._frame.imageGroups[e][t]=r,r})}},{key:"getFrame",value:function(){return this._frame}}]),t}();t.a=y,y.prototype.availableOptions={identifier:{type:g.STRING,required:!0},defaultName:{type:g.STRING},thumbnail:{type:g.STRING},tintable:{type:g.BOOLEAN,default:!1},layoutMode:{type:g.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:g.OBJECT,required:!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(203),a=n(204),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.0.0"},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(35);n.n(l);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.Configurable),t}();t.a=c,c.prototype.availableOptions={identifier:{type:l.OptionType.STRING,required:!0},defaultName:{type:l.OptionType.STRING,required:!0},ratio:{type:l.OptionType.ALL,required:!1,default:null},selected:{type:l.OptionType.BOOLEAN,required:!1},dimensions:{type:l.OptionType.VECTOR2,required:!1},lockDimensions:{type:l.OptionType.BOOLEAN,required:!1,default:null},forceDimensions:{type:l.OptionType.BOOLEAN,required:!1,default:null}}},function(e,t,n){e.exports={default:n(490),__esModule:!0}},function(e,t,n){n(491),e.exports=n(10).Object.values},function(e,t,n){var i=n(14),r=n(492)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){var i=n(19),r=n(49),o=n(34),a=n(58).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=r(s),l=u.length,c=0,f=[];l>c;)n=u[c++],i&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(205),a=n(206),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.1.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(207),a=n(208),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.2.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(209),a=n(210),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.4.0"},function(e,t,n){"use strict";var i=n(15),r=n.n(i),o=n(0),a=n.n(o),s=n(11),u=n.n(s),l=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ui=t,this._options=n,this._categoriesByIdentifier={},this._categories=[],this._artFiltersByIdentifier={},this._initCategories()}return c(e,[{key:"_initCategories",value:function(){var e=this,t={identifier:"standard",defaultName:"Standard",artFilters:l.l.DEFAULTS.ART_FILTERS||[]};if(this._categories=[t],this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=l.m.mergeCategories(this._categories,this._options.categories,"artFilters")),this._options.availableArtFilters){var n=[];this._categories.forEach(function(t){var i=t.artFilters.filter(function(t){return-1!==e._options.availableArtFilters.indexOf(t.identifier)});i.length>0&&n.push({identifier:t.identifier,defaultName:t.defaultName,artFilters:i})}),this._categories=n}var i={identifier:"all",defaultName:"All",artFilters:this._categories.length<=0?[]:this._categories.map(function(e){return e.artFilters}).reduce(function(e,t){return e.concat(t)})};this._categories.unshift(i),this._categoriesByIdentifier.all=i,this._categories.forEach(function(t){e._categoriesByIdentifier[t.identifier]=t}),i.artFilters.forEach(function(t){e._artFiltersByIdentifier[t.identifier]=t})}},{key:"instantiateStyleTransferModelForArtFilterWithIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getArtFilterByIdentifier(e);if(!n)return u.a.reject(new Error("Unknown style with identifier `"+e+"`!"));var i=n.rootPath,r=this._ui.getEditor().getSDK(),o=r.getRenderer();t.weightURL=this._ui.getAssetPath(i+"/weights.json");var a=r.getInputTexture().getDimensions(),s=r.getOperationsStack().getByIdentifier("exif-orientation");return s&&(a=s.getNewDimensions(a)),l.j.Operations.ArtFilterOperation.StyleTransferModel.createWithOptions(t,a,o)}},{key:"updateLoadedModelWithWeightsForIdentifier",value:function(e,t){var n=this.getArtFilterByIdentifier(t);if(!n)return u.a.reject(new Error("Unknown style with identifier `"+t+"`!"));var i=n.rootPath,r=this._ui.getAssetPath(i+"/weights.json");return e.updateWithWeightsFromURL(r)}},{key:"getArtFiltersForCategory",value:function(e){if(!this._categoriesByIdentifier[e])throw new Error("Unknown art filter category '"+e+"'");return this._categoriesByIdentifier[e].artFilters}},{key:"getArtFilterByIdentifier",value:function(e){return this._artFiltersByIdentifier[e]}},{key:"getCategories",value:function(){return this._categories}},{key:"getArtFilters",value:function(){var e=this,t=[];return this._categories.map(function(n){t.push.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return r()(e)}(e.getArtFiltersForCategory(n.identifier)))}),t}},{key:"getCategoryByIdentifier",value:function(e){return this._categoriesByIdentifier[e]}}]),e}();t.a=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(211),a=n(212),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.5.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(213),a=n(214),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.6.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(215),a=n(216),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.7.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n.n(i),o=n(501),a=n(502),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._editor=t}return s(e,[{key:"serialize",value:function(){var e=new o.a(this._editor);return e.serialize.apply(e,arguments)}},{key:"deserialize",value:function(e){return new a.a(this._editor,e).deserialize()}}]),e}();t.default=u,u.version="3.8.0"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(5),a=n.n(o),s=n(2),u=n.n(s),l=n(3),c=n.n(l),f=n(1),h=n.n(f),p=n(215),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r()(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||h()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=c()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(u.a?u()(e,t):e.__proto__=t)}(t,p.a),d(t,[{key:"_serializeSticker",value:function(e,n){var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=a()(t,n);if(void 0===r){var o=h()(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(t.prototype.__proto__||h()(t.prototype),"_serializeSticker",this).call(this,e,n);return i.options.tintMode=n.getTintMode(),i}}]),t}();t.a=_,_.version="3.8.0"},function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1),u=n.n(s),l=n(216),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||u()(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=a()(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.a?r()(e,t):e.__proto__=t)}(t,l.a),t}();t.a=c,c.version="3.8.0"}]).default});